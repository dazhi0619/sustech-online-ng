/**
* @vue/shared v3.4.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yC(e,t){const r=new Set(e.split(","));return t?n=>r.has(n.toLowerCase()):n=>r.has(n)}const Dn={},fd=[],Co=()=>{},tH=()=>!1,mg=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),_C=e=>e.startsWith("onUpdate:"),hi=Object.assign,bC=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},rH=Object.prototype.hasOwnProperty,Nr=(e,t)=>rH.call(e,t),fr=Array.isArray,dd=e=>L1(e)==="[object Map]",H5=e=>L1(e)==="[object Set]",xr=e=>typeof e=="function",jn=e=>typeof e=="string",Gd=e=>typeof e=="symbol",Ln=e=>e!==null&&typeof e=="object",U5=e=>(Ln(e)||xr(e))&&xr(e.then)&&xr(e.catch),j5=Object.prototype.toString,L1=e=>j5.call(e),nH=e=>L1(e).slice(8,-1),G5=e=>L1(e)==="[object Object]",xC=e=>jn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Jm=yC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),k1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},iH=/-(\w)/g,Io=k1(e=>e.replace(iH,(t,r)=>r?r.toUpperCase():"")),aH=/\B([A-Z])/g,Eh=k1(e=>e.replace(aH,"-$1").toLowerCase()),vg=k1(e=>e.charAt(0).toUpperCase()+e.slice(1)),Yx=k1(e=>e?`on${vg(e)}`:""),zu=(e,t)=>!Object.is(e,t),Kx=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},L0=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},oH=e=>{const t=parseFloat(e);return isNaN(t)?e:t},sH=e=>{const t=jn(e)?Number(e):NaN;return isNaN(t)?e:t};let VP;const W5=()=>VP||(VP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wd(e){if(fr(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=jn(n)?hH(n):Wd(n);if(i)for(const a in i)t[a]=i[a]}return t}else if(jn(e)||Ln(e))return e}const lH=/;(?![^(]*\))/g,uH=/:([^]+)/,cH=/\/\*[^]*?\*\//g;function hH(e){const t={};return e.replace(cH,"").split(lH).forEach(r=>{if(r){const n=r.split(uH);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Vi(e){let t="";if(jn(e))t=e;else if(fr(e))for(let r=0;r<e.length;r++){const n=Vi(e[r]);n&&(t+=n+" ")}else if(Ln(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function fH(e){if(!e)return null;let{class:t,style:r}=e;return t&&!jn(t)&&(e.class=Vi(t)),r&&(e.style=Wd(r)),e}const dH="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pH=yC(dH);function q5(e){return!!e||e===""}const br=e=>jn(e)?e:e==null?"":fr(e)||Ln(e)&&(e.toString===j5||!xr(e.toString))?JSON.stringify(e,Z5,2):String(e),Z5=(e,t)=>t&&t.__v_isRef?Z5(e,t.value):dd(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],a)=>(r[Jx(n,a)+" =>"]=i,r),{})}:H5(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Jx(r))}:Gd(t)?Jx(t):Ln(t)&&!fr(t)&&!G5(t)?String(t):t,Jx=(e,t="")=>{var r;return Gd(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.4.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let eo;class mH{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=eo,!t&&eo&&(this.index=(eo.scopes||(eo.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=eo;try{return eo=this,t()}finally{eo=r}}}on(){eo=this}off(){eo=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function vH(e,t=eo){t&&t.active&&t.effects.push(e)}function X5(){return eo}function gH(e){eo&&eo.cleanups.push(e)}let uh;class wC{constructor(t,r,n,i){this.fn=t,this.trigger=r,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,vH(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ph();for(let t=0;t<this._depsLength;t++){const r=this.deps[t];if(r.computed&&(yH(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ih()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Du,r=uh;try{return Du=!0,uh=this,this._runnings++,HP(this),this.fn()}finally{UP(this),this._runnings--,uh=r,Du=t}}stop(){var t;this.active&&(HP(this),UP(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function yH(e){return e.value}function HP(e){e._trackId++,e._depsLength=0}function UP(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Y5(e.deps[t],e);e.deps.length=e._depsLength}}function Y5(e,t){const r=e.get(t);r!==void 0&&t._trackId!==r&&(e.delete(t),e.size===0&&e.cleanup())}let Du=!0,f2=0;const K5=[];function Ph(){K5.push(Du),Du=!1}function Ih(){const e=K5.pop();Du=e===void 0?!0:e}function SC(){f2++}function TC(){for(f2--;!f2&&d2.length;)d2.shift()()}function J5(e,t,r){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&Y5(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const d2=[];function Q5(e,t,r){SC();for(const n of e.keys()){let i;n._dirtyLevel<t&&(i??(i=e.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=t),n._shouldSchedule&&(i??(i=e.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&d2.push(n.scheduler)))}TC()}const ez=(e,t)=>{const r=new Map;return r.cleanup=e,r.computed=t,r},k0=new WeakMap,ch=Symbol(""),p2=Symbol("");function Va(e,t,r){if(Du&&uh){let n=k0.get(e);n||k0.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=ez(()=>n.delete(r))),J5(uh,i)}}function wl(e,t,r,n,i,a){const o=k0.get(e);if(!o)return;let s=[];if(t==="clear")s=[...o.values()];else if(r==="length"&&fr(e)){const c=Number(n);o.forEach((f,p)=>{(p==="length"||!Gd(p)&&p>=c)&&s.push(f)})}else switch(r!==void 0&&s.push(o.get(r)),t){case"add":fr(e)?xC(r)&&s.push(o.get("length")):(s.push(o.get(ch)),dd(e)&&s.push(o.get(p2)));break;case"delete":fr(e)||(s.push(o.get(ch)),dd(e)&&s.push(o.get(p2)));break;case"set":dd(e)&&s.push(o.get(ch));break}SC();for(const c of s)c&&Q5(c,4);TC()}function _H(e,t){var r;return(r=k0.get(e))==null?void 0:r.get(t)}const bH=yC("__proto__,__v_isRef,__isVue"),tz=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gd)),jP=xH();function xH(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=Br(this);for(let a=0,o=this.length;a<o;a++)Va(n,"get",a+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(Br)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Ph(),SC();const n=Br(this)[t].apply(this,r);return TC(),Ih(),n}}),e}function wH(e){const t=Br(this);return Va(t,"has",e),t.hasOwnProperty(e)}class rz{constructor(t=!1,r=!1){this._isReadonly=t,this._shallow=r}get(t,r,n){const i=this._isReadonly,a=this._shallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return a;if(r==="__v_raw")return n===(i?a?OH:oz:a?az:iz).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=fr(t);if(!i){if(o&&Nr(jP,r))return Reflect.get(jP,r,n);if(r==="hasOwnProperty")return wH}const s=Reflect.get(t,r,n);return(Gd(r)?tz.has(r):bH(r))||(i||Va(t,"get",r),a)?s:ua(s)?o&&xC(r)?s:s.value:Ln(s)?i?O1(s):io(s):s}}class nz extends rz{constructor(t=!1){super(!1,t)}set(t,r,n,i){let a=t[r];if(!this._shallow){const c=Cd(a);if(!R0(n)&&!Cd(n)&&(a=Br(a),n=Br(n)),!fr(t)&&ua(a)&&!ua(n))return c?!1:(a.value=n,!0)}const o=fr(t)&&xC(r)?Number(r)<t.length:Nr(t,r),s=Reflect.set(t,r,n,i);return t===Br(i)&&(o?zu(n,a)&&wl(t,"set",r,n):wl(t,"add",r,n)),s}deleteProperty(t,r){const n=Nr(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&wl(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!Gd(r)||!tz.has(r))&&Va(t,"has",r),n}ownKeys(t){return Va(t,"iterate",fr(t)?"length":ch),Reflect.ownKeys(t)}}class SH extends rz{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const TH=new nz,CH=new SH,AH=new nz(!0),CC=e=>e,R1=e=>Reflect.getPrototypeOf(e);function qy(e,t,r=!1,n=!1){e=e.__v_raw;const i=Br(e),a=Br(t);r||(zu(t,a)&&Va(i,"get",t),Va(i,"get",a));const{has:o}=R1(i),s=n?CC:r?EC:Mv;if(o.call(i,t))return s(e.get(t));if(o.call(i,a))return s(e.get(a));e!==i&&e.get(t)}function Zy(e,t=!1){const r=this.__v_raw,n=Br(r),i=Br(e);return t||(zu(e,i)&&Va(n,"has",e),Va(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function Xy(e,t=!1){return e=e.__v_raw,!t&&Va(Br(e),"iterate",ch),Reflect.get(e,"size",e)}function GP(e){e=Br(e);const t=Br(this);return R1(t).has.call(t,e)||(t.add(e),wl(t,"add",e,e)),this}function WP(e,t){t=Br(t);const r=Br(this),{has:n,get:i}=R1(r);let a=n.call(r,e);a||(e=Br(e),a=n.call(r,e));const o=i.call(r,e);return r.set(e,t),a?zu(t,o)&&wl(r,"set",e,t):wl(r,"add",e,t),this}function qP(e){const t=Br(this),{has:r,get:n}=R1(t);let i=r.call(t,e);i||(e=Br(e),i=r.call(t,e)),n&&n.call(t,e);const a=t.delete(e);return i&&wl(t,"delete",e,void 0),a}function ZP(){const e=Br(this),t=e.size!==0,r=e.clear();return t&&wl(e,"clear",void 0,void 0),r}function Yy(e,t){return function(n,i){const a=this,o=a.__v_raw,s=Br(o),c=t?CC:e?EC:Mv;return!e&&Va(s,"iterate",ch),o.forEach((f,p)=>n.call(i,c(f),c(p),a))}}function Ky(e,t,r){return function(...n){const i=this.__v_raw,a=Br(i),o=dd(a),s=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,f=i[e](...n),p=r?CC:t?EC:Mv;return!t&&Va(a,"iterate",c?p2:ch),{next(){const{value:v,done:y}=f.next();return y?{value:v,done:y}:{value:s?[p(v[0]),p(v[1])]:p(v),done:y}},[Symbol.iterator](){return this}}}}function iu(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function MH(){const e={get(a){return qy(this,a)},get size(){return Xy(this)},has:Zy,add:GP,set:WP,delete:qP,clear:ZP,forEach:Yy(!1,!1)},t={get(a){return qy(this,a,!1,!0)},get size(){return Xy(this)},has:Zy,add:GP,set:WP,delete:qP,clear:ZP,forEach:Yy(!1,!0)},r={get(a){return qy(this,a,!0)},get size(){return Xy(this,!0)},has(a){return Zy.call(this,a,!0)},add:iu("add"),set:iu("set"),delete:iu("delete"),clear:iu("clear"),forEach:Yy(!0,!1)},n={get(a){return qy(this,a,!0,!0)},get size(){return Xy(this,!0)},has(a){return Zy.call(this,a,!0)},add:iu("add"),set:iu("set"),delete:iu("delete"),clear:iu("clear"),forEach:Yy(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Ky(a,!1,!1),r[a]=Ky(a,!0,!1),t[a]=Ky(a,!1,!0),n[a]=Ky(a,!0,!0)}),[e,r,t,n]}const[EH,PH,IH,DH]=MH();function AC(e,t){const r=t?e?DH:IH:e?PH:EH;return(n,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(Nr(r,i)&&i in n?r:n,i,a)}const LH={get:AC(!1,!1)},kH={get:AC(!1,!0)},RH={get:AC(!0,!1)},iz=new WeakMap,az=new WeakMap,oz=new WeakMap,OH=new WeakMap;function zH(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BH(e){return e.__v_skip||!Object.isExtensible(e)?0:zH(nH(e))}function io(e){return Cd(e)?e:MC(e,!1,TH,LH,iz)}function sz(e){return MC(e,!1,AH,kH,az)}function O1(e){return MC(e,!0,CH,RH,oz)}function MC(e,t,r,n,i){if(!Ln(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const o=BH(e);if(o===0)return e;const s=new Proxy(e,o===2?n:r);return i.set(e,s),s}function pd(e){return Cd(e)?pd(e.__v_raw):!!(e&&e.__v_isReactive)}function Cd(e){return!!(e&&e.__v_isReadonly)}function R0(e){return!!(e&&e.__v_isShallow)}function lz(e){return pd(e)||Cd(e)}function Br(e){const t=e&&e.__v_raw;return t?Br(t):e}function uz(e){return Object.isExtensible(e)&&L0(e,"__v_skip",!0),e}const Mv=e=>Ln(e)?io(e):e,EC=e=>Ln(e)?O1(e):e;class cz{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new wC(()=>t(this._value),()=>md(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=Br(this);return(!t._cacheable||t.effect.dirty)&&zu(t._value,t._value=t.effect.run())&&md(t,4),PC(t),t.effect._dirtyLevel>=2&&md(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function FH(e,t,r=!1){let n,i;const a=xr(e);return a?(n=e,i=Co):(n=e.get,i=e.set),new cz(n,i,a||!i,r)}function PC(e){var t;Du&&uh&&(e=Br(e),J5(uh,(t=e.dep)!=null?t:e.dep=ez(()=>e.dep=void 0,e instanceof cz?e:void 0)))}function md(e,t=4,r){e=Br(e);const n=e.dep;n&&Q5(n,t)}function ua(e){return!!(e&&e.__v_isRef===!0)}function tr(e){return hz(e,!1)}function yn(e){return hz(e,!0)}function hz(e,t){return ua(e)?e:new $H(e,t)}class $H{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Br(t),this._value=r?t:Mv(t)}get value(){return PC(this),this._value}set value(t){const r=this.__v_isShallow||R0(t)||Cd(t);t=r?t:Br(t),zu(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Mv(t),md(this,4))}}function NH(e){md(e,4)}function Kt(e){return ua(e)?e.value:e}const VH={get:(e,t,r)=>Kt(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return ua(i)&&!ua(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function fz(e){return pd(e)?e:new Proxy(e,VH)}class HH{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:n}=t(()=>PC(this),()=>md(this));this._get=r,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function UH(e){return new HH(e)}function gg(e){const t=fr(e)?new Array(e.length):{};for(const r in e)t[r]=GH(e,r);return t}class jH{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return _H(Br(this._object),this._key)}}function GH(e,t,r){const n=e[t];return ua(n)?n:new jH(e,t,r)}/**
* @vue/runtime-core v3.4.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lu(e,t,r,n){let i;try{i=n?e(...n):e()}catch(a){yg(a,t,r)}return i}function Mo(e,t,r,n){if(xr(e)){const a=Lu(e,t,r,n);return a&&U5(a)&&a.catch(o=>{yg(o,t,r)}),a}const i=[];for(let a=0;a<e.length;a++)i.push(Mo(e[a],t,r,n));return i}function yg(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let a=t.parent;const o=t.proxy,s=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const f=a.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](e,o,s)===!1)return}a=a.parent}const c=t.appContext.config.errorHandler;if(c){Lu(c,null,10,[e,o,s]);return}}WH(e,r,i,n)}function WH(e,t,r,n=!0){console.error(e)}let Ev=!1,m2=!1;const oa=[];let Cs=0;const vd=[];let bu=null,Yc=0;const dz=Promise.resolve();let IC=null;function Oo(e){const t=IC||dz;return e?t.then(this?e.bind(this):e):t}function qH(e){let t=Cs+1,r=oa.length;for(;t<r;){const n=t+r>>>1,i=oa[n],a=Pv(i);a<e||a===e&&i.pre?t=n+1:r=n}return t}function z1(e){(!oa.length||!oa.includes(e,Ev&&e.allowRecurse?Cs+1:Cs))&&(e.id==null?oa.push(e):oa.splice(qH(e.id),0,e),pz())}function pz(){!Ev&&!m2&&(m2=!0,IC=dz.then(mz))}function ZH(e){const t=oa.indexOf(e);t>Cs&&oa.splice(t,1)}function XH(e){fr(e)?vd.push(...e):(!bu||!bu.includes(e,e.allowRecurse?Yc+1:Yc))&&vd.push(e),pz()}function XP(e,t,r=Ev?Cs+1:0){for(;r<oa.length;r++){const n=oa[r];if(n&&n.pre){if(e&&n.id!==e.uid)continue;oa.splice(r,1),r--,n()}}}function O0(e){if(vd.length){const t=[...new Set(vd)].sort((r,n)=>Pv(r)-Pv(n));if(vd.length=0,bu){bu.push(...t);return}for(bu=t,Yc=0;Yc<bu.length;Yc++)bu[Yc]();bu=null,Yc=0}}const Pv=e=>e.id==null?1/0:e.id,YH=(e,t)=>{const r=Pv(e)-Pv(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function mz(e){m2=!1,Ev=!0,oa.sort(YH);try{for(Cs=0;Cs<oa.length;Cs++){const t=oa[Cs];t&&t.active!==!1&&Lu(t,null,14)}}finally{Cs=0,oa.length=0,O0(),Ev=!1,IC=null,(oa.length||vd.length)&&mz()}}function KH(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Dn;let i=r;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in n){const p=`${o==="modelValue"?"model":o}Modifiers`,{number:v,trim:y}=n[p]||Dn;y&&(i=r.map(_=>jn(_)?_.trim():_)),v&&(i=r.map(oH))}let s,c=n[s=Yx(t)]||n[s=Yx(Io(t))];!c&&a&&(c=n[s=Yx(Eh(t))]),c&&Mo(c,e,6,i);const f=n[s+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Mo(f,e,6,i)}}function vz(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const a=e.emits;let o={},s=!1;if(!xr(e)){const c=f=>{const p=vz(f,t,!0);p&&(s=!0,hi(o,p))};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!a&&!s?(Ln(e)&&n.set(e,null),null):(fr(a)?a.forEach(c=>o[c]=null):hi(o,a),Ln(e)&&n.set(e,o),o)}function B1(e,t){return!e||!mg(t)?!1:(t=t.slice(2).replace(/Once$/,""),Nr(e,t[0].toLowerCase()+t.slice(1))||Nr(e,Eh(t))||Nr(e,t))}let mi=null,F1=null;function z0(e){const t=mi;return mi=e,F1=e&&e.type.__scopeId||null,t}function gz(e){F1=e}function yz(){F1=null}function Jr(e,t=mi,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&uI(-1);const a=z0(t);let o;try{o=e(...i)}finally{z0(a),n._d&&uI(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Qx(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:a,propsOptions:[o],slots:s,attrs:c,emit:f,render:p,renderCache:v,data:y,setupState:_,ctx:S,inheritAttrs:E}=e;let P,I;const D=z0(e);try{if(r.shapeFlag&4){const B=i||n,U=B;P=Jo(p.call(U,B,v,a,_,y,S)),I=c}else{const B=t;P=Jo(B.length>1?B(a,{attrs:c,slots:s,emit:f}):B(a,null)),I=t.props?c:JH(c)}}catch(B){nv.length=0,yg(B,e,1),P=De(Na)}let L=P;if(I&&E!==!1){const B=Object.keys(I),{shapeFlag:U}=L;B.length&&U&7&&(o&&B.some(_C)&&(I=QH(I,o)),L=Fu(L,I))}return r.dirs&&(L=Fu(L),L.dirs=L.dirs?L.dirs.concat(r.dirs):r.dirs),r.transition&&(L.transition=r.transition),P=L,z0(D),P}const JH=e=>{let t;for(const r in e)(r==="class"||r==="style"||mg(r))&&((t||(t={}))[r]=e[r]);return t},QH=(e,t)=>{const r={};for(const n in e)(!_C(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function e7(e,t,r){const{props:n,children:i,component:a}=e,{props:o,children:s,patchFlag:c}=t,f=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?YP(n,o,f):!!o;if(c&8){const p=t.dynamicProps;for(let v=0;v<p.length;v++){const y=p[v];if(o[y]!==n[y]&&!B1(f,y))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?YP(n,o,f):!0:!!o;return!1}function YP(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==e[a]&&!B1(r,a))return!0}return!1}function t7({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const _z="components";function gn(e,t){return n7(_z,e,!0,t)||e}const r7=Symbol.for("v-ndc");function n7(e,t,r=!0,n=!1){const i=mi||Ai;if(i){const a=i.type;if(e===_z){const s=J7(a,!1);if(s&&(s===t||s===Io(t)||s===vg(Io(t))))return a}const o=KP(i[e]||a[e],t)||KP(i.appContext[e],t);return!o&&n?a:o}}function KP(e,t){return e&&(e[t]||e[Io(t)]||e[vg(Io(t))])}const i7=e=>e.__isSuspense;function bz(e,t){t&&t.pendingBranch?fr(e)?t.effects.push(...e):t.effects.push(e):XH(e)}const a7=Symbol.for("v-scx"),o7=()=>on(a7);function Ml(e,t){return DC(e,null,t)}const Jy={};function zr(e,t,r){return DC(e,t,r)}function DC(e,t,{immediate:r,deep:n,flush:i,once:a,onTrack:o,onTrigger:s}=Dn){if(t&&a){const V=t;t=(...N)=>{V(...N),U()}}const c=Ai,f=V=>n===!0?V:nh(V,n===!1?1:void 0);let p,v=!1,y=!1;if(ua(e)?(p=()=>e.value,v=R0(e)):pd(e)?(p=()=>f(e),v=!0):fr(e)?(y=!0,v=e.some(V=>pd(V)||R0(V)),p=()=>e.map(V=>{if(ua(V))return V.value;if(pd(V))return f(V);if(xr(V))return Lu(V,c,2)})):xr(e)?t?p=()=>Lu(e,c,2):p=()=>(_&&_(),Mo(e,c,3,[S])):p=Co,t&&n){const V=p;p=()=>nh(V())}let _,S=V=>{_=L.onStop=()=>{Lu(V,c,4),_=L.onStop=void 0}},E;if(xg)if(S=Co,t?r&&Mo(t,c,3,[p(),y?[]:void 0,S]):p(),i==="sync"){const V=o7();E=V.__watcherHandles||(V.__watcherHandles=[])}else return Co;let P=y?new Array(e.length).fill(Jy):Jy;const I=()=>{if(!(!L.active||!L.dirty))if(t){const V=L.run();(n||v||(y?V.some((N,G)=>zu(N,P[G])):zu(V,P)))&&(_&&_(),Mo(t,c,3,[V,P===Jy?void 0:y&&P[0]===Jy?[]:P,S]),P=V)}else L.run()};I.allowRecurse=!!t;let D;i==="sync"?D=I:i==="post"?D=()=>Oa(I,c&&c.suspense):(I.pre=!0,c&&(I.id=c.uid),D=()=>z1(I));const L=new wC(p,Co,D),B=X5(),U=()=>{L.stop(),B&&bC(B.effects,L)};return t?r?I():P=L.run():i==="post"?Oa(L.run.bind(L),c&&c.suspense):L.run(),E&&E.push(U),U}function s7(e,t,r){const n=this.proxy,i=jn(e)?e.includes(".")?xz(n,e):()=>n[e]:e.bind(n,n);let a;xr(t)?a=t:(a=t.handler,r=t);const o=bg(this),s=DC(i,a.bind(n),r);return o(),s}function xz(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function nh(e,t,r=0,n){if(!Ln(e)||e.__v_skip)return e;if(t&&t>0){if(r>=t)return e;r++}if(n=n||new Set,n.has(e))return e;if(n.add(e),ua(e))nh(e.value,t,r,n);else if(fr(e))for(let i=0;i<e.length;i++)nh(e[i],t,r,n);else if(H5(e)||dd(e))e.forEach(i=>{nh(i,t,r,n)});else if(G5(e))for(const i in e)nh(e[i],t,r,n);return e}function B0(e,t){if(mi===null)return e;const r=H1(mi)||mi.proxy,n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,o,s,c=Dn]=t[i];a&&(xr(a)&&(a={mounted:a,updated:a}),a.deep&&nh(o),n.push({dir:a,instance:r,value:o,oldValue:void 0,arg:s,modifiers:c}))}return e}function Ss(e,t,r,n){const i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let c=s.dir[n];c&&(Ph(),Mo(c,r,8,[e.el,s,e,t]),Ih())}}const xu=Symbol("_leaveCb"),Qy=Symbol("_enterCb");function wz(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return On(()=>{e.isMounted=!0}),ju(()=>{e.isUnmounting=!0}),e}const fo=[Function,Array],Sz={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fo,onEnter:fo,onAfterEnter:fo,onEnterCancelled:fo,onBeforeLeave:fo,onLeave:fo,onAfterLeave:fo,onLeaveCancelled:fo,onBeforeAppear:fo,onAppear:fo,onAfterAppear:fo,onAppearCancelled:fo},l7={name:"BaseTransition",props:Sz,setup(e,{slots:t}){const r=kl(),n=wz();let i;return()=>{const a=t.default&&LC(t.default(),!0);if(!a||!a.length)return;let o=a[0];if(a.length>1){for(const E of a)if(E.type!==Na){o=E;break}}const s=Br(e),{mode:c}=s;if(n.isLeaving)return ew(o);const f=JP(o);if(!f)return ew(o);const p=Iv(f,s,n,r);Dv(f,p);const v=r.subTree,y=v&&JP(v);let _=!1;const{getTransitionKey:S}=f.type;if(S){const E=S();i===void 0?i=E:E!==i&&(i=E,_=!0)}if(y&&y.type!==Na&&(!Kc(f,y)||_)){const E=Iv(y,s,n,r);if(Dv(y,E),c==="out-in")return n.isLeaving=!0,E.afterLeave=()=>{n.isLeaving=!1,r.update.active!==!1&&(r.effect.dirty=!0,r.update())},ew(o);c==="in-out"&&f.type!==Na&&(E.delayLeave=(P,I,D)=>{const L=Tz(n,y);L[String(y.key)]=y,P[xu]=()=>{I(),P[xu]=void 0,delete p.delayedLeave},p.delayedLeave=D})}return o}}},u7=l7;function Tz(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function Iv(e,t,r,n){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:v,onLeave:y,onAfterLeave:_,onLeaveCancelled:S,onBeforeAppear:E,onAppear:P,onAfterAppear:I,onAppearCancelled:D}=t,L=String(e.key),B=Tz(r,e),U=(G,Y)=>{G&&Mo(G,n,9,Y)},V=(G,Y)=>{const ee=Y[1];U(G,Y),fr(G)?G.every(J=>J.length<=1)&&ee():G.length<=1&&ee()},N={mode:a,persisted:o,beforeEnter(G){let Y=s;if(!r.isMounted)if(i)Y=E||s;else return;G[xu]&&G[xu](!0);const ee=B[L];ee&&Kc(e,ee)&&ee.el[xu]&&ee.el[xu](),U(Y,[G])},enter(G){let Y=c,ee=f,J=p;if(!r.isMounted)if(i)Y=P||c,ee=I||f,J=D||p;else return;let X=!1;const ne=G[Qy]=we=>{X||(X=!0,we?U(J,[G]):U(ee,[G]),N.delayedLeave&&N.delayedLeave(),G[Qy]=void 0)};Y?V(Y,[G,ne]):ne()},leave(G,Y){const ee=String(e.key);if(G[Qy]&&G[Qy](!0),r.isUnmounting)return Y();U(v,[G]);let J=!1;const X=G[xu]=ne=>{J||(J=!0,Y(),ne?U(S,[G]):U(_,[G]),G[xu]=void 0,B[ee]===e&&delete B[ee])};B[ee]=e,y?V(y,[G,X]):X()},clone(G){return Iv(G,t,r,n)}};return N}function ew(e){if(_g(e))return e=Fu(e),e.children=null,e}function JP(e){return _g(e)?e.children?e.children[0]:void 0:e}function Dv(e,t){e.shapeFlag&6&&e.component?Dv(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function LC(e,t=!1,r){let n=[],i=0;for(let a=0;a<e.length;a++){let o=e[a];const s=r==null?o.key:String(r)+String(o.key!=null?o.key:a);o.type===Mr?(o.patchFlag&128&&i++,n=n.concat(LC(o.children,t,s))):(t||o.type!==Na)&&n.push(s!=null?Fu(o,{key:s}):o)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Jt(e,t){return xr(e)?hi({name:e.name},t,{setup:e}):e}const gd=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function c7(e){xr(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:n,delay:i=200,timeout:a,suspensible:o=!0,onError:s}=e;let c=null,f,p=0;const v=()=>(p++,c=null,y()),y=()=>{let _;return c||(_=c=t().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),s)return new Promise((E,P)=>{s(S,()=>E(v()),()=>P(S),p+1)});throw S}).then(S=>_!==c&&c?c:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),f=S,S)))};return Jt({name:"AsyncComponentWrapper",__asyncLoader:y,get __asyncResolved(){return f},setup(){const _=Ai;if(f)return()=>tw(f,_);const S=D=>{c=null,yg(D,_,13,!n)};if(o&&_.suspense||xg)return y().then(D=>()=>tw(D,_)).catch(D=>(S(D),()=>n?De(n,{error:D}):null));const E=tr(!1),P=tr(),I=tr(!!i);return i&&setTimeout(()=>{I.value=!1},i),a!=null&&setTimeout(()=>{if(!E.value&&!P.value){const D=new Error(`Async component timed out after ${a}ms.`);S(D),P.value=D}},a),y().then(()=>{E.value=!0,_.parent&&_g(_.parent.vnode)&&(_.parent.effect.dirty=!0,z1(_.parent.update))}).catch(D=>{S(D),P.value=D}),()=>{if(E.value&&f)return tw(f,_);if(P.value&&n)return De(n,{error:P.value});if(r&&!I.value)return De(r)}}})}function tw(e,t){const{ref:r,props:n,children:i,ce:a}=t.vnode,o=De(e,n,i);return o.ref=r,o.ce=a,delete t.vnode.ce,o}const _g=e=>e.type.__isKeepAlive;function h7(e,t){Cz(e,"a",t)}function f7(e,t){Cz(e,"da",t)}function Cz(e,t,r=Ai){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if($1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)_g(i.parent.vnode)&&d7(n,t,r,i),i=i.parent}}function d7(e,t,r,n){const i=$1(t,e,n,!0);qd(()=>{bC(n[t],i)},r)}function $1(e,t,r=Ai,n=!1){if(r){const i=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...o)=>{if(r.isUnmounted)return;Ph();const s=bg(r),c=Mo(t,r,e,o);return s(),Ih(),c});return n?i.unshift(a):i.push(a),a}}const Ll=e=>(t,r=Ai)=>(!xg||e==="sp")&&$1(e,(...n)=>t(...n),r),Az=Ll("bm"),On=Ll("m"),p7=Ll("bu"),N1=Ll("u"),ju=Ll("bum"),qd=Ll("um"),m7=Ll("sp"),v7=Ll("rtg"),g7=Ll("rtc");function y7(e,t=Ai){$1("ec",e,t)}function Aa(e,t,r,n){let i;const a=r&&r[n];if(fr(e)||jn(e)){i=new Array(e.length);for(let o=0,s=e.length;o<s;o++)i[o]=t(e[o],o,void 0,a&&a[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,a&&a[o])}else if(Ln(e))if(e[Symbol.iterator])i=Array.from(e,(o,s)=>t(o,s,void 0,a&&a[s]));else{const o=Object.keys(e);i=new Array(o.length);for(let s=0,c=o.length;s<c;s++){const f=o[s];i[s]=t(e[f],f,s,a&&a[s])}}else i=[];return r&&(r[n]=i),i}function fn(e,t,r={},n,i){if(mi.isCE||mi.parent&&gd(mi.parent)&&mi.parent.isCE)return t!=="default"&&(r.name=t),De("slot",r,n&&n());let a=e[t];a&&a._c&&(a._d=!1),rt();const o=a&&Mz(a(r)),s=Sn(Mr,{key:r.key||o&&o.key||`_${t}`},o||(n?n():[]),o&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function Mz(e){return e.some(t=>kv(t)?!(t.type===Na||t.type===Mr&&!Mz(t.children)):!0)?e:null}const v2=e=>e?Hz(e)?H1(e)||e.proxy:v2(e.parent):null,Qm=hi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>v2(e.parent),$root:e=>v2(e.root),$emit:e=>e.emit,$options:e=>kC(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,z1(e.update)}),$nextTick:e=>e.n||(e.n=Oo.bind(e.proxy)),$watch:e=>s7.bind(e)}),rw=(e,t)=>e!==Dn&&!e.__isScriptSetup&&Nr(e,t),_7={get({_:e},t){const{ctx:r,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:c}=e;let f;if(t[0]!=="$"){const _=o[t];if(_!==void 0)switch(_){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return a[t]}else{if(rw(n,t))return o[t]=1,n[t];if(i!==Dn&&Nr(i,t))return o[t]=2,i[t];if((f=e.propsOptions[0])&&Nr(f,t))return o[t]=3,a[t];if(r!==Dn&&Nr(r,t))return o[t]=4,r[t];g2&&(o[t]=0)}}const p=Qm[t];let v,y;if(p)return t==="$attrs"&&Va(e,"get",t),p(e);if((v=s.__cssModules)&&(v=v[t]))return v;if(r!==Dn&&Nr(r,t))return o[t]=4,r[t];if(y=c.config.globalProperties,Nr(y,t))return y[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:a}=e;return rw(i,t)?(i[t]=r,!0):n!==Dn&&Nr(n,t)?(n[t]=r,!0):Nr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:a}},o){let s;return!!r[o]||e!==Dn&&Nr(e,o)||rw(t,o)||(s=a[0])&&Nr(s,o)||Nr(n,o)||Nr(Qm,o)||Nr(i.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Nr(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function QP(e){return fr(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let g2=!0;function b7(e){const t=kC(e),r=e.proxy,n=e.ctx;g2=!1,t.beforeCreate&&eI(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:o,watch:s,provide:c,inject:f,created:p,beforeMount:v,mounted:y,beforeUpdate:_,updated:S,activated:E,deactivated:P,beforeDestroy:I,beforeUnmount:D,destroyed:L,unmounted:B,render:U,renderTracked:V,renderTriggered:N,errorCaptured:G,serverPrefetch:Y,expose:ee,inheritAttrs:J,components:X,directives:ne,filters:we}=t;if(f&&x7(f,n,null),o)for(const Ve in o){const Oe=o[Ve];xr(Oe)&&(n[Ve]=Oe.bind(r))}if(i){const Ve=i.call(r,r);Ln(Ve)&&(e.data=io(Ve))}if(g2=!0,a)for(const Ve in a){const Oe=a[Ve],ct=xr(Oe)?Oe.bind(r,r):xr(Oe.get)?Oe.get.bind(r,r):Co,_t=!xr(Oe)&&xr(Oe.set)?Oe.set.bind(r):Co,zt=ke({get:ct,set:_t});Object.defineProperty(n,Ve,{enumerable:!0,configurable:!0,get:()=>zt.value,set:Mt=>zt.value=Mt})}if(s)for(const Ve in s)Ez(s[Ve],n,r,Ve);if(c){const Ve=xr(c)?c.call(r):c;Reflect.ownKeys(Ve).forEach(Oe=>{Hi(Oe,Ve[Oe])})}p&&eI(p,e,"c");function me(Ve,Oe){fr(Oe)?Oe.forEach(ct=>Ve(ct.bind(r))):Oe&&Ve(Oe.bind(r))}if(me(Az,v),me(On,y),me(p7,_),me(N1,S),me(h7,E),me(f7,P),me(y7,G),me(g7,V),me(v7,N),me(ju,D),me(qd,B),me(m7,Y),fr(ee))if(ee.length){const Ve=e.exposed||(e.exposed={});ee.forEach(Oe=>{Object.defineProperty(Ve,Oe,{get:()=>r[Oe],set:ct=>r[Oe]=ct})})}else e.exposed||(e.exposed={});U&&e.render===Co&&(e.render=U),J!=null&&(e.inheritAttrs=J),X&&(e.components=X),ne&&(e.directives=ne)}function x7(e,t,r=Co){fr(e)&&(e=y2(e));for(const n in e){const i=e[n];let a;Ln(i)?"default"in i?a=on(i.from||n,i.default,!0):a=on(i.from||n):a=on(i),ua(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function eI(e,t,r){Mo(fr(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Ez(e,t,r,n){const i=n.includes(".")?xz(r,n):()=>r[n];if(jn(e)){const a=t[e];xr(a)&&zr(i,a)}else if(xr(e))zr(i,e.bind(r));else if(Ln(e))if(fr(e))e.forEach(a=>Ez(a,t,r,n));else{const a=xr(e.handler)?e.handler.bind(r):t[e.handler];xr(a)&&zr(i,a,e)}}function kC(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t);let c;return s?c=s:!i.length&&!r&&!n?c=t:(c={},i.length&&i.forEach(f=>F0(c,f,o,!0)),F0(c,t,o)),Ln(t)&&a.set(t,c),c}function F0(e,t,r,n=!1){const{mixins:i,extends:a}=t;a&&F0(e,a,r,!0),i&&i.forEach(o=>F0(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const s=w7[o]||r&&r[o];e[o]=s?s(e[o],t[o]):t[o]}return e}const w7={data:tI,props:rI,emits:rI,methods:Nm,computed:Nm,beforeCreate:_a,created:_a,beforeMount:_a,mounted:_a,beforeUpdate:_a,updated:_a,beforeDestroy:_a,beforeUnmount:_a,destroyed:_a,unmounted:_a,activated:_a,deactivated:_a,errorCaptured:_a,serverPrefetch:_a,components:Nm,directives:Nm,watch:T7,provide:tI,inject:S7};function tI(e,t){return t?e?function(){return hi(xr(e)?e.call(this,this):e,xr(t)?t.call(this,this):t)}:t:e}function S7(e,t){return Nm(y2(e),y2(t))}function y2(e){if(fr(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function _a(e,t){return e?[...new Set([].concat(e,t))]:t}function Nm(e,t){return e?hi(Object.create(null),e,t):t}function rI(e,t){return e?fr(e)&&fr(t)?[...new Set([...e,...t])]:hi(Object.create(null),QP(e),QP(t??{})):t}function T7(e,t){if(!e)return t;if(!t)return e;const r=hi(Object.create(null),e);for(const n in t)r[n]=_a(e[n],t[n]);return r}function Pz(){return{app:null,config:{isNativeTag:tH,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let C7=0;function A7(e,t){return function(n,i=null){xr(n)||(n=hi({},n)),i!=null&&!Ln(i)&&(i=null);const a=Pz(),o=new WeakSet;let s=!1;const c=a.app={_uid:C7++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:eU,get config(){return a.config},set config(f){},use(f,...p){return o.has(f)||(f&&xr(f.install)?(o.add(f),f.install(c,...p)):xr(f)&&(o.add(f),f(c,...p))),c},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),c},component(f,p){return p?(a.components[f]=p,c):a.components[f]},directive(f,p){return p?(a.directives[f]=p,c):a.directives[f]},mount(f,p,v){if(!s){const y=De(n,i);return y.appContext=a,v===!0?v="svg":v===!1&&(v=void 0),p&&t?t(y,f):e(y,f,v),s=!0,c._container=f,f.__vue_app__=c,H1(y.component)||y.component.proxy}},unmount(){s&&(e(null,c._container),delete c._container.__vue_app__)},provide(f,p){return a.provides[f]=p,c},runWithContext(f){const p=ev;ev=c;try{return f()}finally{ev=p}}};return c}}let ev=null;function Hi(e,t){if(Ai){let r=Ai.provides;const n=Ai.parent&&Ai.parent.provides;n===r&&(r=Ai.provides=Object.create(n)),r[e]=t}}function on(e,t,r=!1){const n=Ai||mi;if(n||ev){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:ev._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&xr(t)?t.call(n&&n.proxy):t}}function M7(e,t,r,n=!1){const i={},a={};L0(a,V1,1),e.propsDefaults=Object.create(null),Iz(e,t,i,a);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);r?e.props=n?i:sz(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function E7(e,t,r,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=e,s=Br(i),[c]=e.propsOptions;let f=!1;if((n||o>0)&&!(o&16)){if(o&8){const p=e.vnode.dynamicProps;for(let v=0;v<p.length;v++){let y=p[v];if(B1(e.emitsOptions,y))continue;const _=t[y];if(c)if(Nr(a,y))_!==a[y]&&(a[y]=_,f=!0);else{const S=Io(y);i[S]=_2(c,s,S,_,e,!1)}else _!==a[y]&&(a[y]=_,f=!0)}}}else{Iz(e,t,i,a)&&(f=!0);let p;for(const v in s)(!t||!Nr(t,v)&&((p=Eh(v))===v||!Nr(t,p)))&&(c?r&&(r[v]!==void 0||r[p]!==void 0)&&(i[v]=_2(c,s,v,void 0,e,!0)):delete i[v]);if(a!==s)for(const v in a)(!t||!Nr(t,v))&&(delete a[v],f=!0)}f&&wl(e,"set","$attrs")}function Iz(e,t,r,n){const[i,a]=e.propsOptions;let o=!1,s;if(t)for(let c in t){if(Jm(c))continue;const f=t[c];let p;i&&Nr(i,p=Io(c))?!a||!a.includes(p)?r[p]=f:(s||(s={}))[p]=f:B1(e.emitsOptions,c)||(!(c in n)||f!==n[c])&&(n[c]=f,o=!0)}if(a){const c=Br(r),f=s||Dn;for(let p=0;p<a.length;p++){const v=a[p];r[v]=_2(i,c,v,f[v],e,!Nr(f,v))}}return o}function _2(e,t,r,n,i,a){const o=e[r];if(o!=null){const s=Nr(o,"default");if(s&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&xr(c)){const{propsDefaults:f}=i;if(r in f)n=f[r];else{const p=bg(i);n=f[r]=c.call(null,t),p()}}else n=c}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===Eh(r))&&(n=!0))}return n}function Dz(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const a=e.props,o={},s=[];let c=!1;if(!xr(e)){const p=v=>{c=!0;const[y,_]=Dz(v,t,!0);hi(o,y),_&&s.push(..._)};!r&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!a&&!c)return Ln(e)&&n.set(e,fd),fd;if(fr(a))for(let p=0;p<a.length;p++){const v=Io(a[p]);nI(v)&&(o[v]=Dn)}else if(a)for(const p in a){const v=Io(p);if(nI(v)){const y=a[p],_=o[v]=fr(y)||xr(y)?{type:y}:hi({},y);if(_){const S=oI(Boolean,_.type),E=oI(String,_.type);_[0]=S>-1,_[1]=E<0||S<E,(S>-1||Nr(_,"default"))&&s.push(v)}}}const f=[o,s];return Ln(e)&&n.set(e,f),f}function nI(e){return e[0]!=="$"}function iI(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function aI(e,t){return iI(e)===iI(t)}function oI(e,t){return fr(t)?t.findIndex(r=>aI(r,e)):xr(t)&&aI(t,e)?0:-1}const Lz=e=>e[0]==="_"||e==="$stable",RC=e=>fr(e)?e.map(Jo):[Jo(e)],P7=(e,t,r)=>{if(t._n)return t;const n=Jr((...i)=>RC(t(...i)),r);return n._c=!1,n},kz=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Lz(i))continue;const a=e[i];if(xr(a))t[i]=P7(i,a,n);else if(a!=null){const o=RC(a);t[i]=()=>o}}},Rz=(e,t)=>{const r=RC(t);e.slots.default=()=>r},I7=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Br(t),L0(t,"_",r)):kz(t,e.slots={})}else e.slots={},t&&Rz(e,t);L0(e.slots,V1,1)},D7=(e,t,r)=>{const{vnode:n,slots:i}=e;let a=!0,o=Dn;if(n.shapeFlag&32){const s=t._;s?r&&s===1?a=!1:(hi(i,t),!r&&s===1&&delete i._):(a=!t.$stable,kz(t,i)),o=t}else t&&(Rz(e,t),o={default:1});if(a)for(const s in i)!Lz(s)&&o[s]==null&&delete i[s]};function $0(e,t,r,n,i=!1){if(fr(e)){e.forEach((y,_)=>$0(y,t&&(fr(t)?t[_]:t),r,n,i));return}if(gd(n)&&!i)return;const a=n.shapeFlag&4?H1(n.component)||n.component.proxy:n.el,o=i?null:a,{i:s,r:c}=e,f=t&&t.r,p=s.refs===Dn?s.refs={}:s.refs,v=s.setupState;if(f!=null&&f!==c&&(jn(f)?(p[f]=null,Nr(v,f)&&(v[f]=null)):ua(f)&&(f.value=null)),xr(c))Lu(c,s,12,[o,p]);else{const y=jn(c),_=ua(c);if(y||_){const S=()=>{if(e.f){const E=y?Nr(v,c)?v[c]:p[c]:c.value;i?fr(E)&&bC(E,a):fr(E)?E.includes(a)||E.push(a):y?(p[c]=[a],Nr(v,c)&&(v[c]=p[c])):(c.value=[a],e.k&&(p[e.k]=c.value))}else y?(p[c]=o,Nr(v,c)&&(v[c]=o)):_&&(c.value=o,e.k&&(p[e.k]=o))};o?(S.id=-1,Oa(S,r)):S()}}}let au=!1;const L7=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",k7=e=>e.namespaceURI.includes("MathML"),e_=e=>{if(L7(e))return"svg";if(k7(e))return"mathml"},t_=e=>e.nodeType===8;function R7(e){const{mt:t,p:r,o:{patchProp:n,createText:i,nextSibling:a,parentNode:o,remove:s,insert:c,createComment:f}}=e,p=(L,B)=>{if(!B.hasChildNodes()){r(null,L,B),O0(),B._vnode=L;return}au=!1,v(B.firstChild,L,null,null,null),O0(),B._vnode=L,au&&console.error("Hydration completed but contains mismatches.")},v=(L,B,U,V,N,G=!1)=>{const Y=t_(L)&&L.data==="[",ee=()=>E(L,B,U,V,N,Y),{type:J,ref:X,shapeFlag:ne,patchFlag:we}=B;let fe=L.nodeType;B.el=L,we===-2&&(G=!1,B.dynamicChildren=null);let me=null;switch(J){case Bu:fe!==3?B.children===""?(c(B.el=i(""),o(L),L),me=L):me=ee():(L.data!==B.children&&(au=!0,L.data=B.children),me=a(L));break;case Na:D(L)?(me=a(L),I(B.el=L.content.firstChild,L,U)):fe!==8||Y?me=ee():me=a(L);break;case rv:if(Y&&(L=a(L),fe=L.nodeType),fe===1||fe===3){me=L;const Ve=!B.children.length;for(let Oe=0;Oe<B.staticCount;Oe++)Ve&&(B.children+=me.nodeType===1?me.outerHTML:me.data),Oe===B.staticCount-1&&(B.anchor=me),me=a(me);return Y?a(me):me}else ee();break;case Mr:Y?me=S(L,B,U,V,N,G):me=ee();break;default:if(ne&1)(fe!==1||B.type.toLowerCase()!==L.tagName.toLowerCase())&&!D(L)?me=ee():me=y(L,B,U,V,N,G);else if(ne&6){B.slotScopeIds=N;const Ve=o(L);if(Y?me=P(L):t_(L)&&L.data==="teleport start"?me=P(L,L.data,"teleport end"):me=a(L),t(B,Ve,null,U,V,e_(Ve),G),gd(B)){let Oe;Y?(Oe=De(Mr),Oe.anchor=me?me.previousSibling:Ve.lastChild):Oe=L.nodeType===3?Os(""):De("div"),Oe.el=L,B.component.subTree=Oe}}else ne&64?fe!==8?me=ee():me=B.type.hydrate(L,B,U,V,N,G,e,_):ne&128&&(me=B.type.hydrate(L,B,U,V,e_(o(L)),N,G,e,v))}return X!=null&&$0(X,null,V,B),me},y=(L,B,U,V,N,G)=>{G=G||!!B.dynamicChildren;const{type:Y,props:ee,patchFlag:J,shapeFlag:X,dirs:ne,transition:we}=B,fe=Y==="input"||Y==="option";if(fe||J!==-1){ne&&Ss(B,null,U,"created");let me=!1;if(D(L)){me=zz(V,we)&&U&&U.vnode.props&&U.vnode.props.appear;const Oe=L.content.firstChild;me&&we.beforeEnter(Oe),I(Oe,L,U),B.el=L=Oe}if(X&16&&!(ee&&(ee.innerHTML||ee.textContent))){let Oe=_(L.firstChild,B,L,U,V,N,G);for(;Oe;){au=!0;const ct=Oe;Oe=Oe.nextSibling,s(ct)}}else X&8&&L.textContent!==B.children&&(au=!0,L.textContent=B.children);if(ee)if(fe||!G||J&48)for(const Oe in ee)(fe&&(Oe.endsWith("value")||Oe==="indeterminate")||mg(Oe)&&!Jm(Oe)||Oe[0]===".")&&n(L,Oe,null,ee[Oe],void 0,void 0,U);else ee.onClick&&n(L,"onClick",null,ee.onClick,void 0,void 0,U);let Ve;(Ve=ee&&ee.onVnodeBeforeMount)&&go(Ve,U,B),ne&&Ss(B,null,U,"beforeMount"),((Ve=ee&&ee.onVnodeMounted)||ne||me)&&bz(()=>{Ve&&go(Ve,U,B),me&&we.enter(L),ne&&Ss(B,null,U,"mounted")},V)}return L.nextSibling},_=(L,B,U,V,N,G,Y)=>{Y=Y||!!B.dynamicChildren;const ee=B.children,J=ee.length;for(let X=0;X<J;X++){const ne=Y?ee[X]:ee[X]=Jo(ee[X]);if(L)L=v(L,ne,V,N,G,Y);else{if(ne.type===Bu&&!ne.children)continue;au=!0,r(null,ne,U,null,V,N,e_(U),G)}}return L},S=(L,B,U,V,N,G)=>{const{slotScopeIds:Y}=B;Y&&(N=N?N.concat(Y):Y);const ee=o(L),J=_(a(L),B,ee,U,V,N,G);return J&&t_(J)&&J.data==="]"?a(B.anchor=J):(au=!0,c(B.anchor=f("]"),ee,J),J)},E=(L,B,U,V,N,G)=>{if(au=!0,B.el=null,G){const J=P(L);for(;;){const X=a(L);if(X&&X!==J)s(X);else break}}const Y=a(L),ee=o(L);return s(L),r(null,B,ee,Y,U,V,e_(ee),N),Y},P=(L,B="[",U="]")=>{let V=0;for(;L;)if(L=a(L),L&&t_(L)&&(L.data===B&&V++,L.data===U)){if(V===0)return a(L);V--}return L},I=(L,B,U)=>{const V=B.parentNode;V&&V.replaceChild(L,B);let N=U;for(;N;)N.vnode.el===B&&(N.vnode.el=N.subTree.el=L),N=N.parent},D=L=>L.nodeType===1&&L.tagName.toLowerCase()==="template";return[p,v]}const Oa=bz;function O7(e){return Oz(e)}function z7(e){return Oz(e,R7)}function Oz(e,t){const r=W5();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:c,setText:f,setElementText:p,parentNode:v,nextSibling:y,setScopeId:_=Co,insertStaticContent:S}=e,E=(de,be,Be,Xe=null,ye=null,lt=null,xt=void 0,Ze=null,ut=!!be.dynamicChildren)=>{if(de===be)return;de&&!Kc(de,be)&&(Xe=Ue(de),Mt(de,ye,lt,!0),de=null),be.patchFlag===-2&&(ut=!1,be.dynamicChildren=null);const{type:nt,ref:Lt,shapeFlag:qt}=be;switch(nt){case Bu:P(de,be,Be,Xe);break;case Na:I(de,be,Be,Xe);break;case rv:de==null&&D(be,Be,Xe,xt);break;case Mr:X(de,be,Be,Xe,ye,lt,xt,Ze,ut);break;default:qt&1?U(de,be,Be,Xe,ye,lt,xt,Ze,ut):qt&6?ne(de,be,Be,Xe,ye,lt,xt,Ze,ut):(qt&64||qt&128)&&nt.process(de,be,Be,Xe,ye,lt,xt,Ze,ut,dt)}Lt!=null&&ye&&$0(Lt,de&&de.ref,lt,be||de,!be)},P=(de,be,Be,Xe)=>{if(de==null)n(be.el=s(be.children),Be,Xe);else{const ye=be.el=de.el;be.children!==de.children&&f(ye,be.children)}},I=(de,be,Be,Xe)=>{de==null?n(be.el=c(be.children||""),Be,Xe):be.el=de.el},D=(de,be,Be,Xe)=>{[de.el,de.anchor]=S(de.children,be,Be,Xe,de.el,de.anchor)},L=({el:de,anchor:be},Be,Xe)=>{let ye;for(;de&&de!==be;)ye=y(de),n(de,Be,Xe),de=ye;n(be,Be,Xe)},B=({el:de,anchor:be})=>{let Be;for(;de&&de!==be;)Be=y(de),i(de),de=Be;i(be)},U=(de,be,Be,Xe,ye,lt,xt,Ze,ut)=>{be.type==="svg"?xt="svg":be.type==="math"&&(xt="mathml"),de==null?V(be,Be,Xe,ye,lt,xt,Ze,ut):Y(de,be,ye,lt,xt,Ze,ut)},V=(de,be,Be,Xe,ye,lt,xt,Ze)=>{let ut,nt;const{props:Lt,shapeFlag:qt,transition:Vt,dirs:er}=de;if(ut=de.el=o(de.type,lt,Lt&&Lt.is,Lt),qt&8?p(ut,de.children):qt&16&&G(de.children,ut,null,Xe,ye,nw(de,lt),xt,Ze),er&&Ss(de,null,Xe,"created"),N(ut,de,de.scopeId,xt,Xe),Lt){for(const Pr in Lt)Pr!=="value"&&!Jm(Pr)&&a(ut,Pr,null,Lt[Pr],lt,de.children,Xe,ye,Xt);"value"in Lt&&a(ut,"value",null,Lt.value,lt),(nt=Lt.onVnodeBeforeMount)&&go(nt,Xe,de)}er&&Ss(de,null,Xe,"beforeMount");const gr=zz(ye,Vt);gr&&Vt.beforeEnter(ut),n(ut,be,Be),((nt=Lt&&Lt.onVnodeMounted)||gr||er)&&Oa(()=>{nt&&go(nt,Xe,de),gr&&Vt.enter(ut),er&&Ss(de,null,Xe,"mounted")},ye)},N=(de,be,Be,Xe,ye)=>{if(Be&&_(de,Be),Xe)for(let lt=0;lt<Xe.length;lt++)_(de,Xe[lt]);if(ye){let lt=ye.subTree;if(be===lt){const xt=ye.vnode;N(de,xt,xt.scopeId,xt.slotScopeIds,ye.parent)}}},G=(de,be,Be,Xe,ye,lt,xt,Ze,ut=0)=>{for(let nt=ut;nt<de.length;nt++){const Lt=de[nt]=Ze?wu(de[nt]):Jo(de[nt]);E(null,Lt,be,Be,Xe,ye,lt,xt,Ze)}},Y=(de,be,Be,Xe,ye,lt,xt)=>{const Ze=be.el=de.el;let{patchFlag:ut,dynamicChildren:nt,dirs:Lt}=be;ut|=de.patchFlag&16;const qt=de.props||Dn,Vt=be.props||Dn;let er;if(Be&&bc(Be,!1),(er=Vt.onVnodeBeforeUpdate)&&go(er,Be,be,de),Lt&&Ss(be,de,Be,"beforeUpdate"),Be&&bc(Be,!0),nt?ee(de.dynamicChildren,nt,Ze,Be,Xe,nw(be,ye),lt):xt||Oe(de,be,Ze,null,Be,Xe,nw(be,ye),lt,!1),ut>0){if(ut&16)J(Ze,be,qt,Vt,Be,Xe,ye);else if(ut&2&&qt.class!==Vt.class&&a(Ze,"class",null,Vt.class,ye),ut&4&&a(Ze,"style",qt.style,Vt.style,ye),ut&8){const gr=be.dynamicProps;for(let Pr=0;Pr<gr.length;Pr++){const Ke=gr[Pr],Zr=qt[Ke],pn=Vt[Ke];(pn!==Zr||Ke==="value")&&a(Ze,Ke,Zr,pn,ye,de.children,Be,Xe,Xt)}}ut&1&&de.children!==be.children&&p(Ze,be.children)}else!xt&&nt==null&&J(Ze,be,qt,Vt,Be,Xe,ye);((er=Vt.onVnodeUpdated)||Lt)&&Oa(()=>{er&&go(er,Be,be,de),Lt&&Ss(be,de,Be,"updated")},Xe)},ee=(de,be,Be,Xe,ye,lt,xt)=>{for(let Ze=0;Ze<be.length;Ze++){const ut=de[Ze],nt=be[Ze],Lt=ut.el&&(ut.type===Mr||!Kc(ut,nt)||ut.shapeFlag&70)?v(ut.el):Be;E(ut,nt,Lt,null,Xe,ye,lt,xt,!0)}},J=(de,be,Be,Xe,ye,lt,xt)=>{if(Be!==Xe){if(Be!==Dn)for(const Ze in Be)!Jm(Ze)&&!(Ze in Xe)&&a(de,Ze,Be[Ze],null,xt,be.children,ye,lt,Xt);for(const Ze in Xe){if(Jm(Ze))continue;const ut=Xe[Ze],nt=Be[Ze];ut!==nt&&Ze!=="value"&&a(de,Ze,nt,ut,xt,be.children,ye,lt,Xt)}"value"in Xe&&a(de,"value",Be.value,Xe.value,xt)}},X=(de,be,Be,Xe,ye,lt,xt,Ze,ut)=>{const nt=be.el=de?de.el:s(""),Lt=be.anchor=de?de.anchor:s("");let{patchFlag:qt,dynamicChildren:Vt,slotScopeIds:er}=be;er&&(Ze=Ze?Ze.concat(er):er),de==null?(n(nt,Be,Xe),n(Lt,Be,Xe),G(be.children||[],Be,Lt,ye,lt,xt,Ze,ut)):qt>0&&qt&64&&Vt&&de.dynamicChildren?(ee(de.dynamicChildren,Vt,Be,ye,lt,xt,Ze),(be.key!=null||ye&&be===ye.subTree)&&OC(de,be,!0)):Oe(de,be,Be,Lt,ye,lt,xt,Ze,ut)},ne=(de,be,Be,Xe,ye,lt,xt,Ze,ut)=>{be.slotScopeIds=Ze,de==null?be.shapeFlag&512?ye.ctx.activate(be,Be,Xe,xt,ut):we(be,Be,Xe,ye,lt,xt,ut):fe(de,be,ut)},we=(de,be,Be,Xe,ye,lt,xt)=>{const Ze=de.component=q7(de,Xe,ye);if(_g(de)&&(Ze.ctx.renderer=dt),Z7(Ze),Ze.asyncDep){if(ye&&ye.registerDep(Ze,me),!de.el){const ut=Ze.subTree=De(Na);I(null,ut,be,Be)}}else me(Ze,de,be,Be,ye,lt,xt)},fe=(de,be,Be)=>{const Xe=be.component=de.component;if(e7(de,be,Be))if(Xe.asyncDep&&!Xe.asyncResolved){Ve(Xe,be,Be);return}else Xe.next=be,ZH(Xe.update),Xe.effect.dirty=!0,Xe.update();else be.el=de.el,Xe.vnode=be},me=(de,be,Be,Xe,ye,lt,xt)=>{const Ze=()=>{if(de.isMounted){let{next:Lt,bu:qt,u:Vt,parent:er,vnode:gr}=de;{const Ma=Bz(de);if(Ma){Lt&&(Lt.el=gr.el,Ve(de,Lt,xt)),Ma.asyncDep.then(()=>{de.isUnmounted||Ze()});return}}let Pr=Lt,Ke;bc(de,!1),Lt?(Lt.el=gr.el,Ve(de,Lt,xt)):Lt=gr,qt&&Kx(qt),(Ke=Lt.props&&Lt.props.onVnodeBeforeUpdate)&&go(Ke,er,Lt,gr),bc(de,!0);const Zr=Qx(de),pn=de.subTree;de.subTree=Zr,E(pn,Zr,v(pn.el),Ue(pn),de,ye,lt),Lt.el=Zr.el,Pr===null&&t7(de,Zr.el),Vt&&Oa(Vt,ye),(Ke=Lt.props&&Lt.props.onVnodeUpdated)&&Oa(()=>go(Ke,er,Lt,gr),ye)}else{let Lt;const{el:qt,props:Vt}=be,{bm:er,m:gr,parent:Pr}=de,Ke=gd(be);if(bc(de,!1),er&&Kx(er),!Ke&&(Lt=Vt&&Vt.onVnodeBeforeMount)&&go(Lt,Pr,be),bc(de,!0),qt&&It){const Zr=()=>{de.subTree=Qx(de),It(qt,de.subTree,de,ye,null)};Ke?be.type.__asyncLoader().then(()=>!de.isUnmounted&&Zr()):Zr()}else{const Zr=de.subTree=Qx(de);E(null,Zr,Be,Xe,de,ye,lt),be.el=Zr.el}if(gr&&Oa(gr,ye),!Ke&&(Lt=Vt&&Vt.onVnodeMounted)){const Zr=be;Oa(()=>go(Lt,Pr,Zr),ye)}(be.shapeFlag&256||Pr&&gd(Pr.vnode)&&Pr.vnode.shapeFlag&256)&&de.a&&Oa(de.a,ye),de.isMounted=!0,be=Be=Xe=null}},ut=de.effect=new wC(Ze,Co,()=>z1(nt),de.scope),nt=de.update=()=>{ut.dirty&&ut.run()};nt.id=de.uid,bc(de,!0),nt()},Ve=(de,be,Be)=>{be.component=de;const Xe=de.vnode.props;de.vnode=be,de.next=null,E7(de,be.props,Xe,Be),D7(de,be.children,Be),Ph(),XP(de),Ih()},Oe=(de,be,Be,Xe,ye,lt,xt,Ze,ut=!1)=>{const nt=de&&de.children,Lt=de?de.shapeFlag:0,qt=be.children,{patchFlag:Vt,shapeFlag:er}=be;if(Vt>0){if(Vt&128){_t(nt,qt,Be,Xe,ye,lt,xt,Ze,ut);return}else if(Vt&256){ct(nt,qt,Be,Xe,ye,lt,xt,Ze,ut);return}}er&8?(Lt&16&&Xt(nt,ye,lt),qt!==nt&&p(Be,qt)):Lt&16?er&16?_t(nt,qt,Be,Xe,ye,lt,xt,Ze,ut):Xt(nt,ye,lt,!0):(Lt&8&&p(Be,""),er&16&&G(qt,Be,Xe,ye,lt,xt,Ze,ut))},ct=(de,be,Be,Xe,ye,lt,xt,Ze,ut)=>{de=de||fd,be=be||fd;const nt=de.length,Lt=be.length,qt=Math.min(nt,Lt);let Vt;for(Vt=0;Vt<qt;Vt++){const er=be[Vt]=ut?wu(be[Vt]):Jo(be[Vt]);E(de[Vt],er,Be,null,ye,lt,xt,Ze,ut)}nt>Lt?Xt(de,ye,lt,!0,!1,qt):G(be,Be,Xe,ye,lt,xt,Ze,ut,qt)},_t=(de,be,Be,Xe,ye,lt,xt,Ze,ut)=>{let nt=0;const Lt=be.length;let qt=de.length-1,Vt=Lt-1;for(;nt<=qt&&nt<=Vt;){const er=de[nt],gr=be[nt]=ut?wu(be[nt]):Jo(be[nt]);if(Kc(er,gr))E(er,gr,Be,null,ye,lt,xt,Ze,ut);else break;nt++}for(;nt<=qt&&nt<=Vt;){const er=de[qt],gr=be[Vt]=ut?wu(be[Vt]):Jo(be[Vt]);if(Kc(er,gr))E(er,gr,Be,null,ye,lt,xt,Ze,ut);else break;qt--,Vt--}if(nt>qt){if(nt<=Vt){const er=Vt+1,gr=er<Lt?be[er].el:Xe;for(;nt<=Vt;)E(null,be[nt]=ut?wu(be[nt]):Jo(be[nt]),Be,gr,ye,lt,xt,Ze,ut),nt++}}else if(nt>Vt)for(;nt<=qt;)Mt(de[nt],ye,lt,!0),nt++;else{const er=nt,gr=nt,Pr=new Map;for(nt=gr;nt<=Vt;nt++){const Ut=be[nt]=ut?wu(be[nt]):Jo(be[nt]);Ut.key!=null&&Pr.set(Ut.key,nt)}let Ke,Zr=0;const pn=Vt-gr+1;let Ma=!1,Wn=0;const ht=new Array(pn);for(nt=0;nt<pn;nt++)ht[nt]=0;for(nt=er;nt<=qt;nt++){const Ut=de[nt];if(Zr>=pn){Mt(Ut,ye,lt,!0);continue}let Fr;if(Ut.key!=null)Fr=Pr.get(Ut.key);else for(Ke=gr;Ke<=Vt;Ke++)if(ht[Ke-gr]===0&&Kc(Ut,be[Ke])){Fr=Ke;break}Fr===void 0?Mt(Ut,ye,lt,!0):(ht[Fr-gr]=nt+1,Fr>=Wn?Wn=Fr:Ma=!0,E(Ut,be[Fr],Be,null,ye,lt,xt,Ze,ut),Zr++)}const sr=Ma?B7(ht):fd;for(Ke=sr.length-1,nt=pn-1;nt>=0;nt--){const Ut=gr+nt,Fr=be[Ut],ha=Ut+1<Lt?be[Ut+1].el:Xe;ht[nt]===0?E(null,Fr,Be,ha,ye,lt,xt,Ze,ut):Ma&&(Ke<0||nt!==sr[Ke]?zt(Fr,Be,ha,2):Ke--)}}},zt=(de,be,Be,Xe,ye=null)=>{const{el:lt,type:xt,transition:Ze,children:ut,shapeFlag:nt}=de;if(nt&6){zt(de.component.subTree,be,Be,Xe);return}if(nt&128){de.suspense.move(be,Be,Xe);return}if(nt&64){xt.move(de,be,Be,dt);return}if(xt===Mr){n(lt,be,Be);for(let qt=0;qt<ut.length;qt++)zt(ut[qt],be,Be,Xe);n(de.anchor,be,Be);return}if(xt===rv){L(de,be,Be);return}if(Xe!==2&&nt&1&&Ze)if(Xe===0)Ze.beforeEnter(lt),n(lt,be,Be),Oa(()=>Ze.enter(lt),ye);else{const{leave:qt,delayLeave:Vt,afterLeave:er}=Ze,gr=()=>n(lt,be,Be),Pr=()=>{qt(lt,()=>{gr(),er&&er()})};Vt?Vt(lt,gr,Pr):Pr()}else n(lt,be,Be)},Mt=(de,be,Be,Xe=!1,ye=!1)=>{const{type:lt,props:xt,ref:Ze,children:ut,dynamicChildren:nt,shapeFlag:Lt,patchFlag:qt,dirs:Vt}=de;if(Ze!=null&&$0(Ze,null,Be,de,!0),Lt&256){be.ctx.deactivate(de);return}const er=Lt&1&&Vt,gr=!gd(de);let Pr;if(gr&&(Pr=xt&&xt.onVnodeBeforeUnmount)&&go(Pr,be,de),Lt&6)wr(de.component,Be,Xe);else{if(Lt&128){de.suspense.unmount(Be,Xe);return}er&&Ss(de,null,be,"beforeUnmount"),Lt&64?de.type.remove(de,be,Be,ye,dt,Xe):nt&&(lt!==Mr||qt>0&&qt&64)?Xt(nt,be,Be,!1,!0):(lt===Mr&&qt&384||!ye&&Lt&16)&&Xt(ut,be,Be),Xe&&ar(de)}(gr&&(Pr=xt&&xt.onVnodeUnmounted)||er)&&Oa(()=>{Pr&&go(Pr,be,de),er&&Ss(de,null,be,"unmounted")},Be)},ar=de=>{const{type:be,el:Be,anchor:Xe,transition:ye}=de;if(be===Mr){rr(Be,Xe);return}if(be===rv){B(de);return}const lt=()=>{i(Be),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(de.shapeFlag&1&&ye&&!ye.persisted){const{leave:xt,delayLeave:Ze}=ye,ut=()=>xt(Be,lt);Ze?Ze(de.el,lt,ut):ut()}else lt()},rr=(de,be)=>{let Be;for(;de!==be;)Be=y(de),i(de),de=Be;i(be)},wr=(de,be,Be)=>{const{bum:Xe,scope:ye,update:lt,subTree:xt,um:Ze}=de;Xe&&Kx(Xe),ye.stop(),lt&&(lt.active=!1,Mt(xt,de,be,Be)),Ze&&Oa(Ze,be),Oa(()=>{de.isUnmounted=!0},be),be&&be.pendingBranch&&!be.isUnmounted&&de.asyncDep&&!de.asyncResolved&&de.suspenseId===be.pendingId&&(be.deps--,be.deps===0&&be.resolve())},Xt=(de,be,Be,Xe=!1,ye=!1,lt=0)=>{for(let xt=lt;xt<de.length;xt++)Mt(de[xt],be,Be,Xe,ye)},Ue=de=>de.shapeFlag&6?Ue(de.component.subTree):de.shapeFlag&128?de.suspense.next():y(de.anchor||de.el);let st=!1;const at=(de,be,Be)=>{de==null?be._vnode&&Mt(be._vnode,null,null,!0):E(be._vnode||null,de,be,null,null,null,Be),st||(st=!0,XP(),O0(),st=!1),be._vnode=de},dt={p:E,um:Mt,m:zt,r:ar,mt:we,mc:G,pc:Oe,pbc:ee,n:Ue,o:e};let vt,It;return t&&([vt,It]=t(dt)),{render:at,hydrate:vt,createApp:A7(at,vt)}}function nw({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function bc({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function zz(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function OC(e,t,r=!1){const n=e.children,i=t.children;if(fr(n)&&fr(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=wu(i[a]),s.el=o.el),r||OC(o,s)),s.type===Bu&&(s.el=o.el)}}function B7(e){const t=e.slice(),r=[0];let n,i,a,o,s;const c=e.length;for(n=0;n<c;n++){const f=e[n];if(f!==0){if(i=r[r.length-1],e[i]<f){t[n]=i,r.push(n);continue}for(a=0,o=r.length-1;a<o;)s=a+o>>1,e[r[s]]<f?a=s+1:o=s;f<e[r[a]]&&(a>0&&(t[n]=r[a-1]),r[a]=n)}}for(a=r.length,o=r[a-1];a-- >0;)r[a]=o,o=t[o];return r}function Bz(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bz(t)}const F7=e=>e.__isTeleport,tv=e=>e&&(e.disabled||e.disabled===""),sI=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lI=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,b2=(e,t)=>{const r=e&&e.to;return jn(r)?t?t(r):null:r},$7={name:"Teleport",__isTeleport:!0,process(e,t,r,n,i,a,o,s,c,f){const{mc:p,pc:v,pbc:y,o:{insert:_,querySelector:S,createText:E,createComment:P}}=f,I=tv(t.props);let{shapeFlag:D,children:L,dynamicChildren:B}=t;if(e==null){const U=t.el=E(""),V=t.anchor=E("");_(U,r,n),_(V,r,n);const N=t.target=b2(t.props,S),G=t.targetAnchor=E("");N&&(_(G,N),o==="svg"||sI(N)?o="svg":(o==="mathml"||lI(N))&&(o="mathml"));const Y=(ee,J)=>{D&16&&p(L,ee,J,i,a,o,s,c)};I?Y(r,V):N&&Y(N,G)}else{t.el=e.el;const U=t.anchor=e.anchor,V=t.target=e.target,N=t.targetAnchor=e.targetAnchor,G=tv(e.props),Y=G?r:V,ee=G?U:N;if(o==="svg"||sI(V)?o="svg":(o==="mathml"||lI(V))&&(o="mathml"),B?(y(e.dynamicChildren,B,Y,i,a,o,s),OC(e,t,!0)):c||v(e,t,Y,ee,i,a,o,s,!1),I)G?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):r_(t,r,U,f,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const J=t.target=b2(t.props,S);J&&r_(t,J,null,f,0)}else G&&r_(t,V,N,f,1)}$z(t)},remove(e,t,r,n,{um:i,o:{remove:a}},o){const{shapeFlag:s,children:c,anchor:f,targetAnchor:p,target:v,props:y}=e;if(v&&a(p),o&&a(f),s&16){const _=o||!tv(y);for(let S=0;S<c.length;S++){const E=c[S];i(E,t,r,_,!!E.dynamicChildren)}}},move:r_,hydrate:N7};function r_(e,t,r,{o:{insert:n},m:i},a=2){a===0&&n(e.targetAnchor,t,r);const{el:o,anchor:s,shapeFlag:c,children:f,props:p}=e,v=a===2;if(v&&n(o,t,r),(!v||tv(p))&&c&16)for(let y=0;y<f.length;y++)i(f[y],t,r,2);v&&n(s,t,r)}function N7(e,t,r,n,i,a,{o:{nextSibling:o,parentNode:s,querySelector:c}},f){const p=t.target=b2(t.props,c);if(p){const v=p._lpa||p.firstChild;if(t.shapeFlag&16)if(tv(t.props))t.anchor=f(o(e),t,s(e),r,n,i,a),t.targetAnchor=v;else{t.anchor=o(e);let y=v;for(;y;)if(y=o(y),y&&y.nodeType===8&&y.data==="teleport anchor"){t.targetAnchor=y,p._lpa=t.targetAnchor&&o(t.targetAnchor);break}f(v,t,p,r,n,i,a)}$z(t)}return t.anchor&&o(t.anchor)}const Fz=$7;function $z(e){const t=e.ctx;if(t&&t.ut){let r=e.children[0].el;for(;r&&r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}const Mr=Symbol.for("v-fgt"),Bu=Symbol.for("v-txt"),Na=Symbol.for("v-cmt"),rv=Symbol.for("v-stc"),nv=[];let Qo=null;function rt(e=!1){nv.push(Qo=e?null:[])}function V7(){nv.pop(),Qo=nv[nv.length-1]||null}let Lv=1;function uI(e){Lv+=e}function Nz(e){return e.dynamicChildren=Lv>0?Qo||fd:null,V7(),Lv>0&&Qo&&Qo.push(e),e}function Ct(e,t,r,n,i,a){return Nz(Nt(e,t,r,n,i,a,!0))}function Sn(e,t,r,n,i){return Nz(De(e,t,r,n,i,!0))}function kv(e){return e?e.__v_isVNode===!0:!1}function Kc(e,t){return e.type===t.type&&e.key===t.key}const V1="__vInternal",Vz=({key:e})=>e??null,i0=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?jn(e)||ua(e)||xr(e)?{i:mi,r:e,k:t,f:!!r}:e:null);function Nt(e,t=null,r=null,n=0,i=null,a=e===Mr?0:1,o=!1,s=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Vz(t),ref:t&&i0(t),scopeId:F1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:mi};return s?(zC(c,r),a&128&&e.normalize(c)):r&&(c.shapeFlag|=jn(r)?8:16),Lv>0&&!o&&Qo&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Qo.push(c),c}const De=H7;function H7(e,t=null,r=null,n=0,i=null,a=!1){if((!e||e===r7)&&(e=Na),kv(e)){const s=Fu(e,t,!0);return r&&zC(s,r),Lv>0&&!a&&Qo&&(s.shapeFlag&6?Qo[Qo.indexOf(e)]=s:Qo.push(s)),s.patchFlag|=-2,s}if(Q7(e)&&(e=e.__vccOpts),t){t=U7(t);let{class:s,style:c}=t;s&&!jn(s)&&(t.class=Vi(s)),Ln(c)&&(lz(c)&&!fr(c)&&(c=hi({},c)),t.style=Wd(c))}const o=jn(e)?1:i7(e)?128:F7(e)?64:Ln(e)?4:xr(e)?2:0;return Nt(e,t,r,n,i,o,a,!0)}function U7(e){return e?lz(e)||V1 in e?hi({},e):e:null}function Fu(e,t,r=!1){const{props:n,ref:i,patchFlag:a,children:o}=e,s=t?N0(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&Vz(s),ref:t&&t.ref?r&&i?fr(i)?i.concat(i0(t)):[i,i0(t)]:i0(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Mr?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fu(e.ssContent),ssFallback:e.ssFallback&&Fu(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Os(e=" ",t=0){return De(Bu,null,e,t)}function j7(e,t){const r=De(rv,null,e);return r.staticCount=t,r}function Hr(e="",t=!1){return t?(rt(),Sn(Na,null,e)):De(Na,null,e)}function Jo(e){return e==null||typeof e=="boolean"?De(Na):fr(e)?De(Mr,null,e.slice()):typeof e=="object"?wu(e):De(Bu,null,String(e))}function wu(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Fu(e)}function zC(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(fr(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),zC(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(V1 in t)?t._ctx=mi:i===3&&mi&&(mi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else xr(t)?(t={default:t,_ctx:mi},r=32):(t=String(t),n&64?(r=16,t=[Os(t)]):r=8);e.children=t,e.shapeFlag|=r}function N0(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Vi([t.class,n.class]));else if(i==="style")t.style=Wd([t.style,n.style]);else if(mg(i)){const a=t[i],o=n[i];o&&a!==o&&!(fr(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=n[i])}return t}function go(e,t,r,n=null){Mo(e,t,7,[r,n])}const G7=Pz();let W7=0;function q7(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||G7,a={uid:W7++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new mH(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dz(n,i),emitsOptions:vz(n,i),emit:null,emitted:null,propsDefaults:Dn,inheritAttrs:n.inheritAttrs,ctx:Dn,data:Dn,props:Dn,attrs:Dn,slots:Dn,refs:Dn,setupState:Dn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=KH.bind(null,a),e.ce&&e.ce(a),a}let Ai=null;const kl=()=>Ai||mi;let V0,x2;{const e=W5(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};V0=t("__VUE_INSTANCE_SETTERS__",r=>Ai=r),x2=t("__VUE_SSR_SETTERS__",r=>xg=r)}const bg=e=>{const t=Ai;return V0(e),e.scope.on(),()=>{e.scope.off(),V0(t)}},cI=()=>{Ai&&Ai.scope.off(),V0(null)};function Hz(e){return e.vnode.shapeFlag&4}let xg=!1;function Z7(e,t=!1){t&&x2(t);const{props:r,children:n}=e.vnode,i=Hz(e);M7(e,r,i,t),I7(e,n);const a=i?X7(e,t):void 0;return t&&x2(!1),a}function X7(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=uz(new Proxy(e.ctx,_7));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?K7(e):null,a=bg(e);Ph();const o=Lu(n,e,0,[e.props,i]);if(Ih(),a(),U5(o)){if(o.then(cI,cI),t)return o.then(s=>{hI(e,s,t)}).catch(s=>{yg(s,e,0)});e.asyncDep=o}else hI(e,o,t)}else Uz(e,t)}function hI(e,t,r){xr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ln(t)&&(e.setupState=fz(t)),Uz(e,r)}let fI;function Uz(e,t,r){const n=e.type;if(!e.render){if(!t&&fI&&!n.render){const i=n.template||kC(e).template;if(i){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:s,compilerOptions:c}=n,f=hi(hi({isCustomElement:a,delimiters:s},o),c);n.render=fI(i,f)}}e.render=n.render||Co}{const i=bg(e);Ph();try{b7(e)}finally{Ih(),i()}}}function Y7(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return Va(e,"get","$attrs"),t[r]}}))}function K7(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return Y7(e)},slots:e.slots,emit:e.emit,expose:t}}function H1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(fz(uz(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Qm)return Qm[r](e)},has(t,r){return r in t||r in Qm}}))}function J7(e,t=!0){return xr(e)?e.displayName||e.name:e.name||t&&e.__name}function Q7(e){return xr(e)&&"__vccOpts"in e}const ke=(e,t)=>FH(e,t,xg);function Tr(e,t,r){const n=arguments.length;return n===2?Ln(t)&&!fr(t)?kv(t)?De(e,null,[t]):De(e,t):De(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&kv(r)&&(r=[r]),De(e,t,r))}const eU="3.4.16";/**
* @vue/runtime-dom v3.4.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tU="http://www.w3.org/2000/svg",rU="http://www.w3.org/1998/Math/MathML",Su=typeof document<"u"?document:null,dI=Su&&Su.createElement("template"),nU={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?Su.createElementNS(tU,e):t==="mathml"?Su.createElementNS(rU,e):Su.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Su.createTextNode(e),createComment:e=>Su.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Su.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,a){const o=r?r.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{dI.innerHTML=n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e;const s=dI.content;if(n==="svg"||n==="mathml"){const c=s.firstChild;for(;c.firstChild;)s.appendChild(c.firstChild);s.removeChild(c)}t.insertBefore(s,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},ou="transition",um="animation",Ad=Symbol("_vtc"),Rl=(e,{slots:t})=>Tr(u7,Gz(e),t);Rl.displayName="Transition";const jz={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},iU=Rl.props=hi({},Sz,jz),xc=(e,t=[])=>{fr(e)?e.forEach(r=>r(...t)):e&&e(...t)},pI=e=>e?fr(e)?e.some(t=>t.length>1):e.length>1:!1;function Gz(e){const t={};for(const X in e)X in jz||(t[X]=e[X]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:c=a,appearActiveClass:f=o,appearToClass:p=s,leaveFromClass:v=`${r}-leave-from`,leaveActiveClass:y=`${r}-leave-active`,leaveToClass:_=`${r}-leave-to`}=e,S=aU(i),E=S&&S[0],P=S&&S[1],{onBeforeEnter:I,onEnter:D,onEnterCancelled:L,onLeave:B,onLeaveCancelled:U,onBeforeAppear:V=I,onAppear:N=D,onAppearCancelled:G=L}=t,Y=(X,ne,we)=>{gu(X,ne?p:s),gu(X,ne?f:o),we&&we()},ee=(X,ne)=>{X._isLeaving=!1,gu(X,v),gu(X,_),gu(X,y),ne&&ne()},J=X=>(ne,we)=>{const fe=X?N:D,me=()=>Y(ne,X,we);xc(fe,[ne,me]),mI(()=>{gu(ne,X?c:a),ml(ne,X?p:s),pI(fe)||vI(ne,n,E,me)})};return hi(t,{onBeforeEnter(X){xc(I,[X]),ml(X,a),ml(X,o)},onBeforeAppear(X){xc(V,[X]),ml(X,c),ml(X,f)},onEnter:J(!1),onAppear:J(!0),onLeave(X,ne){X._isLeaving=!0;const we=()=>ee(X,ne);ml(X,v),qz(),ml(X,y),mI(()=>{X._isLeaving&&(gu(X,v),ml(X,_),pI(B)||vI(X,n,P,we))}),xc(B,[X,we])},onEnterCancelled(X){Y(X,!1),xc(L,[X])},onAppearCancelled(X){Y(X,!0),xc(G,[X])},onLeaveCancelled(X){ee(X),xc(U,[X])}})}function aU(e){if(e==null)return null;if(Ln(e))return[iw(e.enter),iw(e.leave)];{const t=iw(e);return[t,t]}}function iw(e){return sH(e)}function ml(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Ad]||(e[Ad]=new Set)).add(t)}function gu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Ad];r&&(r.delete(t),r.size||(e[Ad]=void 0))}function mI(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let oU=0;function vI(e,t,r,n){const i=e._endId=++oU,a=()=>{i===e._endId&&n()};if(r)return setTimeout(a,r);const{type:o,timeout:s,propCount:c}=Wz(e,t);if(!o)return n();const f=o+"end";let p=0;const v=()=>{e.removeEventListener(f,y),a()},y=_=>{_.target===e&&++p>=c&&v()};setTimeout(()=>{p<c&&v()},s+1),e.addEventListener(f,y)}function Wz(e,t){const r=window.getComputedStyle(e),n=S=>(r[S]||"").split(", "),i=n(`${ou}Delay`),a=n(`${ou}Duration`),o=gI(i,a),s=n(`${um}Delay`),c=n(`${um}Duration`),f=gI(s,c);let p=null,v=0,y=0;t===ou?o>0&&(p=ou,v=o,y=a.length):t===um?f>0&&(p=um,v=f,y=c.length):(v=Math.max(o,f),p=v>0?o>f?ou:um:null,y=p?p===ou?a.length:c.length:0);const _=p===ou&&/\b(transform|all)(,|$)/.test(n(`${ou}Property`).toString());return{type:p,timeout:v,propCount:y,hasTransform:_}}function gI(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>yI(r)+yI(e[n])))}function yI(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function qz(){return document.body.offsetHeight}function sU(e,t,r){const n=e[Ad];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Rv=Symbol("_vod"),H0={beforeMount(e,{value:t},{transition:r}){e[Rv]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):cm(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t==!r&&e.style.display===e[Rv]||(n?t?(n.beforeEnter(e),cm(e,!0),n.enter(e)):n.leave(e,()=>{cm(e,!1)}):cm(e,t))},beforeUnmount(e,{value:t}){cm(e,t)}};function cm(e,t){e.style.display=t?e[Rv]:"none"}const lU=Symbol("");function uU(e,t,r){const n=e.style,i=n.display,a=jn(r);if(r&&!a){if(t&&!jn(t))for(const o in t)r[o]==null&&w2(n,o,"");for(const o in r)w2(n,o,r[o])}else if(a){if(t!==r){const o=n[lU];o&&(r+=";"+o),n.cssText=r}}else t&&e.removeAttribute("style");Rv in e&&(e[Rv]=n.display,n.display=i)}const _I=/\s*!important$/;function w2(e,t,r){if(fr(r))r.forEach(n=>w2(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=cU(e,t);_I.test(r)?e.setProperty(Eh(n),r.replace(_I,""),"important"):e[n]=r}}const bI=["Webkit","Moz","ms"],aw={};function cU(e,t){const r=aw[t];if(r)return r;let n=Io(t);if(n!=="filter"&&n in e)return aw[t]=n;n=vg(n);for(let i=0;i<bI.length;i++){const a=bI[i]+n;if(a in e)return aw[t]=a}return t}const xI="http://www.w3.org/1999/xlink";function hU(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(xI,t.slice(6,t.length)):e.setAttributeNS(xI,t,r);else{const a=pH(t);r==null||a&&!q5(r)?e.removeAttribute(t):e.setAttribute(t,a?"":r)}}function fU(e,t,r,n,i,a,o){if(t==="innerHTML"||t==="textContent"){n&&o(n,i,a),e[t]=r??"";return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){e._value=r;const f=s==="OPTION"?e.getAttribute("value"):e.value,p=r??"";f!==p&&(e.value=p),r==null&&e.removeAttribute(t);return}let c=!1;if(r===""||r==null){const f=typeof e[t];f==="boolean"?r=q5(r):r==null&&f==="string"?(r="",c=!0):f==="number"&&(r=0,c=!0)}try{e[t]=r}catch{}c&&e.removeAttribute(t)}function dU(e,t,r,n){e.addEventListener(t,r,n)}function pU(e,t,r,n){e.removeEventListener(t,r,n)}const wI=Symbol("_vei");function mU(e,t,r,n,i=null){const a=e[wI]||(e[wI]={}),o=a[t];if(n&&o)o.value=n;else{const[s,c]=vU(t);if(n){const f=a[t]=_U(n,i);dU(e,s,f,c)}else o&&(pU(e,s,o,c),a[t]=void 0)}}const SI=/(?:Once|Passive|Capture)$/;function vU(e){let t;if(SI.test(e)){t={};let n;for(;n=e.match(SI);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Eh(e.slice(2)),t]}let ow=0;const gU=Promise.resolve(),yU=()=>ow||(gU.then(()=>ow=0),ow=Date.now());function _U(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Mo(bU(n,r.value),t,5,[n])};return r.value=e,r.attached=yU(),r}function bU(e,t){if(fr(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const TI=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,xU=(e,t,r,n,i,a,o,s,c)=>{const f=i==="svg";t==="class"?sU(e,n,f):t==="style"?uU(e,r,n):mg(t)?_C(t)||mU(e,t,r,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wU(e,t,n,f))?fU(e,t,n,a,o,s,c):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),hU(e,t,n,f))};function wU(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&TI(t)&&xr(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return TI(t)&&jn(r)?!1:t in e}const Zz=new WeakMap,Xz=new WeakMap,U0=Symbol("_moveCb"),CI=Symbol("_enterCb"),Yz={name:"TransitionGroup",props:hi({},iU,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=kl(),n=wz();let i,a;return N1(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!MU(i[0].el,r.vnode.el,o))return;i.forEach(TU),i.forEach(CU);const s=i.filter(AU);qz(),s.forEach(c=>{const f=c.el,p=f.style;ml(f,o),p.transform=p.webkitTransform=p.transitionDuration="";const v=f[U0]=y=>{y&&y.target!==f||(!y||/transform$/.test(y.propertyName))&&(f.removeEventListener("transitionend",v),f[U0]=null,gu(f,o))};f.addEventListener("transitionend",v)})}),()=>{const o=Br(e),s=Gz(o);let c=o.tag||Mr;i=a,a=t.default?LC(t.default()):[];for(let f=0;f<a.length;f++){const p=a[f];p.key!=null&&Dv(p,Iv(p,s,n,r))}if(i)for(let f=0;f<i.length;f++){const p=i[f];Dv(p,Iv(p,s,n,r)),Zz.set(p,p.el.getBoundingClientRect())}return De(c,null,a)}}},SU=e=>delete e.mode;Yz.props;const Kz=Yz;function TU(e){const t=e.el;t[U0]&&t[U0](),t[CI]&&t[CI]()}function CU(e){Xz.set(e,e.el.getBoundingClientRect())}function AU(e){const t=Zz.get(e),r=Xz.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",e}}function MU(e,t,r){const n=e.cloneNode(),i=e[Ad];i&&i.forEach(s=>{s.split(/\s+/).forEach(c=>c&&n.classList.remove(c))}),r.split(/\s+/).forEach(s=>s&&n.classList.add(s)),n.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(n);const{hasTransform:o}=Wz(n);return a.removeChild(n),o}const EU={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},PU=(e,t)=>{const r=e._withKeys||(e._withKeys={}),n=t.join(".");return r[n]||(r[n]=i=>{if(!("key"in i))return;const a=Eh(i.key);if(t.some(o=>o===a||EU[o]===a))return e(i)})},Jz=hi({patchProp:xU},nU);let iv,AI=!1;function IU(){return iv||(iv=O7(Jz))}function DU(){return iv=AI?iv:z7(Jz),AI=!0,iv}const j0=(...e)=>{IU().render(...e)},LU=(...e)=>{const t=DU().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=RU(n);if(i)return r(i,!0,kU(i))},t};function kU(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function RU(e){return jn(e)?document.querySelector(e):e}var OU=["link","meta","script","style","noscript","template"],zU=["title","base"],BU=([e,t,r])=>zU.includes(e)?e:OU.includes(e)?e==="meta"&&t.name?`${e}.${t.name}`:e==="template"&&t.id?`${e}.${t.id}`:JSON.stringify([e,Object.entries(t).map(([n,i])=>typeof i=="boolean"?i?[n,""]:null:[n,i]).filter(n=>n!=null).sort(([n],[i])=>n.localeCompare(i)),r]):null,FU=e=>{const t=new Set,r=[];return e.forEach(n=>{const i=BU(n);i&&!t.has(i)&&(t.add(i),r.push(n))}),r},wg=e=>/^(https?:)?\/\//.test(e),$U=e=>/^[a-z][a-z0-9+.-]*:/.test(e),BC=e=>Object.prototype.toString.call(e)==="[object Object]",NU=e=>{const[t,...r]=e.split(/(\?|#)/);if(!t||t.endsWith("/"))return e;let n=t.replace(/(^|\/)README.md$/i,"$1index.html");return n.endsWith(".md")?n=n.substring(0,n.length-3)+".html":n.endsWith(".html")||(n=n+".html"),n.endsWith("/index.html")&&(n=n.substring(0,n.length-10)),n+r.join("")},Qz=e=>e[e.length-1]==="/"?e.slice(0,-1):e,e3=e=>e[0]==="/"?e.slice(1):e,t3=(e,t)=>{const r=Object.keys(e).sort((n,i)=>{const a=i.split("/").length-n.split("/").length;return a!==0?a:i.length-n.length});for(const n of r)if(t.startsWith(n))return n;return"/"},MI=(e,t="/")=>{const r=e.replace(/^(https?:)?\/\/[^/]*/,"");return r.startsWith(t)?`/${r.slice(t.length)}`:r},Sl=e=>typeof e=="string";const VU="modulepreload",HU=function(e){return"/"+e},EI={},St=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const a=document.getElementsByTagName("link");i=Promise.all(r.map(o=>{if(o=HU(o),o in EI)return;EI[o]=!0;const s=o.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(!!n)for(let v=a.length-1;v>=0;v--){const y=a[v];if(y.href===o&&(!s||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const p=document.createElement("link");if(p.rel=s?"stylesheet":VU,s||(p.as="script",p.crossOrigin=""),p.href=o,document.head.appendChild(p),s)return new Promise((v,y)=>{p.addEventListener("load",v),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},UU=JSON.parse("{}"),jU=Object.fromEntries([["/",{loader:()=>St(()=>import("./index.html-aSmFtwz3.js"),__vite__mapDeps([0,1])),meta:{title:"📚南科手册"}}],["/index-wx.html",{loader:()=>St(()=>import("./index-wx.html-plypHLC-.js"),__vite__mapDeps([2,1])),meta:{title:"📚你科手册"}}],["/about/",{loader:()=>St(()=>import("./index.html-YMb95JFn.js"),__vite__mapDeps([])),meta:{title:"帮助我们完善"}}],["/calendar/2018-2019.html",{loader:()=>St(()=>import("./2018-2019.html-O6UaNpX7.js"),__vite__mapDeps([])),meta:{title:"校历 - 2018-2019 学年"}}],["/calendar/2019-2020.html",{loader:()=>St(()=>import("./2019-2020.html-1yGl3UNH.js"),__vite__mapDeps([])),meta:{title:"校历 - 2019-2020 学年"}}],["/calendar/2020-2021.html",{loader:()=>St(()=>import("./2020-2021.html-Kx7WIvtK.js"),__vite__mapDeps([])),meta:{title:"校历 - 2020-2021 学年"}}],["/calendar/2021-2022.html",{loader:()=>St(()=>import("./2021-2022.html-V_PHf9Aq.js"),__vite__mapDeps([])),meta:{title:"校历 - 2021-2022 学年"}}],["/calendar/2021fall.html",{loader:()=>St(()=>import("./2021fall.html-Ys_0yAQY.js"),__vite__mapDeps([])),meta:{title:""}}],["/calendar/2022-2023.html",{loader:()=>St(()=>import("./2022-2023.html-Tk9xkyH6.js"),__vite__mapDeps([])),meta:{title:"校历 - 2022-2023 学年"}}],["/calendar/2023-2024.html",{loader:()=>St(()=>import("./2023-2024.html-LwYcLeXK.js"),__vite__mapDeps([3,4])),meta:{title:"校历 - 2023-2024 学年"}}],["/calendar/",{loader:()=>St(()=>import("./index.html-317U07oz.js"),__vite__mapDeps([5,4])),meta:{title:"📅校历"}}],["/canteen/",{loader:()=>St(()=>import("./index.html-ER46NLvj.js"),__vite__mapDeps([])),meta:{title:"🍜饭堂服务"}}],["/canteen/canteen-wx.html",{loader:()=>St(()=>import("./canteen-wx.html-gES5CwP6.js"),__vite__mapDeps([])),meta:{title:"🍜饭堂服务"}}],["/contact/",{loader:()=>St(()=>import("./index.html-nlNn1f3f.js"),__vite__mapDeps([])),meta:{title:"📇黄页"}}],["/emergency/",{loader:()=>St(()=>import("./index.html-lOe2s54J.js"),__vite__mapDeps([])),meta:{title:"应急处理"}}],["/facility/",{loader:()=>St(()=>import("./index.html-6aG1M2L5.js"),__vite__mapDeps([])),meta:{title:"🏫建筑与设施"}}],["/facility/building-11-elevator.html",{loader:()=>St(()=>import("./building-11-elevator.html-Lsdyc6mn.js"),__vite__mapDeps([])),meta:{title:"如何“破解”11栋电梯"}}],["/if-you-are-a-freshman/2021.html",{loader:()=>St(()=>import("./2021.html-mvtVvjGD.js"),__vite__mapDeps([])),meta:{title:"如果你是新生..."}}],["/if-you-are-a-freshman/",{loader:()=>St(()=>import("./index.html-YCNLw5IJ.js"),__vite__mapDeps([])),meta:{title:"如果你是新生..."}}],["/life/",{loader:()=>St(()=>import("./index.html-V8JqSS3F.js"),__vite__mapDeps([])),meta:{title:"👨‍🎓生活在南科"}}],["/life/vehicle-charger.html",{loader:()=>St(()=>import("./vehicle-charger.html-oo0biMXj.js"),__vite__mapDeps([])),meta:{title:"充电桩分布"}}],["/media/",{loader:()=>St(()=>import("./index.html-TSmm3-Aa.js"),__vite__mapDeps([])),meta:{title:"📺媒体与网站"}}],["/miniapp/",{loader:()=>St(()=>import("./index.html-d0XQOT64.js"),__vite__mapDeps([])),meta:{title:"南科手册-微信小程序"}}],["/news/",{loader:()=>St(()=>import("./index.html-LIEMrp0i.js"),__vite__mapDeps([])),meta:{title:"更新日志"}}],["/organizations/",{loader:()=>St(()=>import("./index.html-LZz2x4lE.js"),__vite__mapDeps([])),meta:{title:"🎡社团活动"}}],["/organizations/registered-organization-2019.html",{loader:()=>St(()=>import("./registered-organization-2019.html-vfiNQ4Nq.js"),__vite__mapDeps([])),meta:{title:"注册社团列表（2018-2019年度）"}}],["/organizations/registered-organization-2020.html",{loader:()=>St(()=>import("./registered-organization-2020.html-WaruiWoY.js"),__vite__mapDeps([])),meta:{title:"注册社团列表（2019-2020年度）"}}],["/organizations/registered-organization-2021.html",{loader:()=>St(()=>import("./registered-organization-2021.html-0xwMi7G9.js"),__vite__mapDeps([])),meta:{title:"注册社团列表（2020-2021年度）"}}],["/service/",{loader:()=>St(()=>import("./index.html-moBAp1iY.js"),__vite__mapDeps([])),meta:{title:"🖥服务与技巧"}}],["/site-help/",{loader:()=>St(()=>import("./index.html-iiYQQDa-.js"),__vite__mapDeps([])),meta:{title:"❓站点帮助"}}],["/site-help/adt.html",{loader:()=>St(()=>import("./adt.html-SVMS8m08.js"),__vite__mapDeps([])),meta:{title:"ADT"}}],["/study/",{loader:()=>St(()=>import("./index.html-MqleogDK.js"),__vite__mapDeps([])),meta:{title:"🎓学在南科"}}],["/study/paper-tools.html",{loader:()=>St(()=>import("./paper-tools.html-WXhEj242.js"),__vite__mapDeps([])),meta:{title:"几个赶 ddl 的好用工具🔧"}}],["/surroundings/",{loader:()=>St(()=>import("./index.html-5-_E-wnT.js"),__vite__mapDeps([6,7])),meta:{title:"🛍周边"}}],["/transport/",{loader:()=>St(()=>import("./index.html-VMIYO9pI.js"),__vite__mapDeps([8,7])),meta:{title:"🚄交通"}}],["/transport/bustimer-old.html",{loader:()=>St(()=>import("./bustimer-old.html-On3HGHKk.js"),__vite__mapDeps([9,10])),meta:{title:"🚌校园巴士时刻表 SUSTech Campus Bus Info"}}],["/transport/bustimer-wx.html",{loader:()=>St(()=>import("./bustimer-wx.html-Ol6NliJc.js"),__vite__mapDeps([])),meta:{title:"🚌校园巴士时刻表 SUSTech Campus Bus Info"}}],["/transport/bustimer.html",{loader:()=>St(()=>import("./bustimer.html-f4cjN4qN.js"),__vite__mapDeps([])),meta:{title:"🚌校园巴士时刻表 SUSTech Campus Bus Info"}}],["/transport/holiday.html",{loader:()=>St(()=>import("./holiday.html-fnttXL3b.js"),__vite__mapDeps([11,10])),meta:{title:"🚌校园巴士 - 节假日 (2021年6月18日更新)"}}],["/transport/redirect.html",{loader:()=>St(()=>import("./redirect.html-NJ4Dw2G-.js"),__vite__mapDeps([])),meta:{title:"🚌校园巴士 - 自动跳转"}}],["/transport/workday.html",{loader:()=>St(()=>import("./workday.html-0nGJOZ7P.js"),__vite__mapDeps([12,10])),meta:{title:"🚌校园巴士 - 工作日 (2021年6月18日更新)"}}],["/contact/professor-emails/",{loader:()=>St(()=>import("./index.html-YTS0QE2K.js"),__vite__mapDeps([])),meta:{title:"教授邮件列表"}}],["/facility/panolens/",{loader:()=>St(()=>import("./index.html-GhKxxnNy.js"),__vite__mapDeps([])),meta:{title:"全景看校园"}}],["/if-you-are-a-freshman/preview/",{loader:()=>St(()=>import("./index.html-fw6bm7uM.js"),__vite__mapDeps([])),meta:{title:"蓢村拾遗：南科大冷知识2021"}}],["/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.html",{loader:()=>St(()=>import("./新生攻略之宿舍生活篇.html-YTsGnCBK.js"),__vite__mapDeps([])),meta:{title:"新生攻略之宿舍生活篇"}}],["/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.html",{loader:()=>St(()=>import("./新生攻略之校内介绍篇.html-vQ92hYZo.js"),__vite__mapDeps([])),meta:{title:"新生攻略之校内介绍篇"}}],["/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.html",{loader:()=>St(()=>import("./新生攻略之社团篇.html-9A8DpT7j.js"),__vite__mapDeps([])),meta:{title:"新生攻略之社团篇"}}],["/life/catering/",{loader:()=>St(()=>import("./index.html-I_vuPdwO.js"),__vite__mapDeps([])),meta:{title:"☕️餐饮"}}],["/life/dormitory/",{loader:()=>St(()=>import("./index.html-3LgI9Q5X.js"),__vite__mapDeps([])),meta:{title:"🏠住在南科"}}],["/life/dormitory/dorm-floor-plan.html",{loader:()=>St(()=>import("./dorm-floor-plan.html-Dotj84-h.js"),__vite__mapDeps([])),meta:{title:"宿舍平面图"}}],["/life/freshman-register/",{loader:()=>St(()=>import("./index.html-aNUtkDpg.js"),__vite__mapDeps([])),meta:{title:"新生报到"}}],["/life/sports-facility/",{loader:()=>St(()=>import("./index.html--vIiSDxn.js"),__vite__mapDeps([])),meta:{title:"🏊‍♀️运动设施"}}],["/service/campus-card/",{loader:()=>St(()=>import("./index.html-zFozv9_H.js"),__vite__mapDeps([])),meta:{title:"💳校园卡"}}],["/service/email/",{loader:()=>St(()=>import("./index.html-yuA5Sz9c.js"),__vite__mapDeps([])),meta:{title:"电子邮件服务"}}],["/service/email/send-receive-email-by-proxy.html",{loader:()=>St(()=>import("./send-receive-email-by-proxy.html-_DGCfO47.js"),__vite__mapDeps([])),meta:{title:"解决邮箱容量不足的问题"}}],["/service/mail-and-express/",{loader:()=>St(()=>import("./index.html-dY1Stgcd.js"),__vite__mapDeps([])),meta:{title:"📦邮件与快递收发"}}],["/service/matlab/",{loader:()=>St(()=>import("./index.html-MtOGlrn3.js"),__vite__mapDeps([])),meta:{title:"MATLAB 激活"}}],["/service/medical-treatment/",{loader:()=>St(()=>import("./index.html-u76XlZk4.js"),__vite__mapDeps([])),meta:{title:"🏥就医指南"}}],["/service/network/",{loader:()=>St(()=>import("./index.html-xgUP4kAz.js"),__vite__mapDeps([])),meta:{title:"🌐网络与信息中心 (its@sustech.edu.cn)"}}],["/service/sakai/",{loader:()=>St(()=>import("./index.html-bSpe5HsO.js"),__vite__mapDeps([])),meta:{title:"Sakai | 文件分享"}}],["/service/sid/",{loader:()=>St(()=>import("./index.html-cSmyemlJ.js"),__vite__mapDeps([])),meta:{title:"学号（SID）"}}],["/service/ssc/",{loader:()=>St(()=>import("./index.html-Yq9-vXgu.js"),__vite__mapDeps([])),meta:{title:""}}],["/service/student-train-ticket/",{loader:()=>St(()=>import("./index.html-_Yrvqf4E.js"),__vite__mapDeps([])),meta:{title:"火车票学生优惠使用指南"}}],["/service/tax/",{loader:()=>St(()=>import("./index.html-JPqwimbN.js"),__vite__mapDeps([])),meta:{title:"如何申报退税？-- 年度个人所得税年度汇算"}}],["/service/unifound/",{loader:()=>St(()=>import("./index.html-aupmhpgO.js"),__vite__mapDeps([])),meta:{title:"🖨️联创打印系统"}}],["/service/work-wechat/",{loader:()=>St(()=>import("./index.html-2H_v7hfC.js"),__vite__mapDeps([])),meta:{title:"企业微信"}}],["/study/borrow-books/",{loader:()=>St(()=>import("./index.html-kohnQjuV.js"),__vite__mapDeps([])),meta:{title:"📗教材与图书借还"}}],["/study/by-shude-college/advice-on-study.html",{loader:()=>St(()=>import("./advice-on-study.html-b6jNU4cI.js"),__vite__mapDeps([])),meta:{title:"📖学习建议"}}],["/study/by-shude-college/info-on-study.html",{loader:()=>St(()=>import("./info-on-study.html-zAB22uQv.js"),__vite__mapDeps([])),meta:{title:"📖学习制度与信息"}}],["/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.html",{loader:()=>St(()=>import("./新生攻略之学习篇.html-5ofBXRi3.js"),__vite__mapDeps([])),meta:{title:"新生攻略之学习篇"}}],["/study/cse/innovative-project.html",{loader:()=>St(()=>import("./innovative-project.html-WIq_EsQH.js"),__vite__mapDeps([])),meta:{title:"南方科技大学计算机系创新实践项目汇总"}}],["/service/blackboard/retrive-ics-url/",{loader:()=>St(()=>import("./index.html-BahB4EF3.js"),__vite__mapDeps([])),meta:{title:"BB | 将Blackboard中作业，DDL等日程添加到系统日历"}}],["/service/network/apply-for-vpn/",{loader:()=>St(()=>import("./index.html-STugj8N_.js"),__vite__mapDeps([])),meta:{title:"申请回校VPN"}}],["/service/network/choose-a-pad/",{loader:()=>St(()=>import("./index.html-z2imfTZR.js"),__vite__mapDeps([])),meta:{title:"选择一台合适的平板电脑"}}],["/service/network/choose-a-router/",{loader:()=>St(()=>import("./index.html-yV5eYdDx.js"),__vite__mapDeps([])),meta:{title:"📶选择一台合适的路由器"}}],["/service/network/eduroam/",{loader:()=>St(()=>import("./index.html-aKes91u9.js"),__vite__mapDeps([])),meta:{title:"eduroam（学术网路漫游）"}}],["/service/network/ipv6/",{loader:()=>St(()=>import("./index.html-cC2us4N3.js"),__vite__mapDeps([])),meta:{title:"校内 IPv6 设置教程"}}],["/service/network/remote-desktop/",{loader:()=>St(()=>import("./index.html-gtHaH2Ae.js"),__vite__mapDeps([])),meta:{title:"校内远程桌面使用指北"}}],["/service/network/use-vpn/",{loader:()=>St(()=>import("./index.html-elQClPtM.js"),__vite__mapDeps([])),meta:{title:"使用 SSL VPN 说明"}}],["/study/book-list-by-prof-yuan/2018/",{loader:()=>St(()=>import("./index.html-S7srqPVU.js"),__vite__mapDeps([])),meta:{title:"袁长庚老师为新生推荐的书单（2018）"}}],["/404.html",{loader:()=>St(()=>import("./404.html-2X50tT5b.js"),__vite__mapDeps([])),meta:{title:""}}]]);/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Kf=typeof window<"u";function GU(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const nn=Object.assign;function sw(e,t){const r={};for(const n in t){const i=t[n];r[n]=ts(i)?i.map(e):e(i)}return r}const av=()=>{},ts=Array.isArray,WU=/\/$/,qU=e=>e.replace(WU,"");function lw(e,t,r="/"){let n,i={},a="",o="";const s=t.indexOf("#");let c=t.indexOf("?");return s<c&&s>=0&&(c=-1),c>-1&&(n=t.slice(0,c),a=t.slice(c+1,s>-1?s:t.length),i=e(a)),s>-1&&(n=n||t.slice(0,s),o=t.slice(s,t.length)),n=KU(n??t,r),{fullPath:n+(a&&"?")+a+o,path:n,query:i,hash:o}}function ZU(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function PI(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function XU(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Md(t.matched[n],r.matched[i])&&r3(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Md(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function r3(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!YU(e[r],t[r]))return!1;return!0}function YU(e,t){return ts(e)?II(e,t):ts(t)?II(t,e):e===t}function II(e,t){return ts(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function KU(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let a=r.length-1,o,s;for(o=0;o<n.length;o++)if(s=n[o],s!==".")if(s==="..")a>1&&a--;else break;return r.slice(0,a).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Ov;(function(e){e.pop="pop",e.push="push"})(Ov||(Ov={}));var ov;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ov||(ov={}));function JU(e){if(!e)if(Kf){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),qU(e)}const QU=/^[^#]+#/;function ej(e,t){return e.replace(QU,"#")+t}function tj(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const U1=()=>({left:window.pageXOffset,top:window.pageYOffset});function rj(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=tj(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function DI(e,t){return(history.state?history.state.position-t:-1)+e}const S2=new Map;function nj(e,t){S2.set(e,t)}function ij(e){const t=S2.get(e);return S2.delete(e),t}let aj=()=>location.protocol+"//"+location.host;function n3(e,t){const{pathname:r,search:n,hash:i}=t,a=e.indexOf("#");if(a>-1){let s=i.includes(e.slice(a))?e.slice(a).length:1,c=i.slice(s);return c[0]!=="/"&&(c="/"+c),PI(c,"")}return PI(r,e)+n+i}function oj(e,t,r,n){let i=[],a=[],o=null;const s=({state:y})=>{const _=n3(e,location),S=r.value,E=t.value;let P=0;if(y){if(r.value=_,t.value=y,o&&o===S){o=null;return}P=E?y.position-E.position:0}else n(_);i.forEach(I=>{I(r.value,S,{delta:P,type:Ov.pop,direction:P?P>0?ov.forward:ov.back:ov.unknown})})};function c(){o=r.value}function f(y){i.push(y);const _=()=>{const S=i.indexOf(y);S>-1&&i.splice(S,1)};return a.push(_),_}function p(){const{history:y}=window;y.state&&y.replaceState(nn({},y.state,{scroll:U1()}),"")}function v(){for(const y of a)y();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:c,listen:f,destroy:v}}function LI(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?U1():null}}function sj(e){const{history:t,location:r}=window,n={value:n3(e,r)},i={value:t.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(c,f,p){const v=e.indexOf("#"),y=v>-1?(r.host&&document.querySelector("base")?e:e.slice(v))+c:aj()+e+c;try{t[p?"replaceState":"pushState"](f,"",y),i.value=f}catch(_){console.error(_),r[p?"replace":"assign"](y)}}function o(c,f){const p=nn({},t.state,LI(i.value.back,c,i.value.forward,!0),f,{position:i.value.position});a(c,p,!0),n.value=c}function s(c,f){const p=nn({},i.value,t.state,{forward:c,scroll:U1()});a(p.current,p,!0);const v=nn({},LI(n.value,c,null),{position:p.position+1},f);a(c,v,!1),n.value=c}return{location:n,state:i,push:s,replace:o}}function lj(e){e=JU(e);const t=sj(e),r=oj(e,t.state,t.location,t.replace);function n(a,o=!0){o||r.pauseListeners(),history.go(a)}const i=nn({location:"",base:e,go:n,createHref:ej.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function uj(e){return typeof e=="string"||e&&typeof e=="object"}function i3(e){return typeof e=="string"||typeof e=="symbol"}const vl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},a3=Symbol("");var kI;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(kI||(kI={}));function Ed(e,t){return nn(new Error,{type:e,[a3]:!0},t)}function ll(e,t){return e instanceof Error&&a3 in e&&(t==null||!!(e.type&t))}const RI="[^/]+?",cj={sensitive:!1,strict:!1,start:!0,end:!0},hj=/[.+*?^${}()[\]/\\]/g;function fj(e,t){const r=nn({},cj,t),n=[];let i=r.start?"^":"";const a=[];for(const f of e){const p=f.length?[]:[90];r.strict&&!f.length&&(i+="/");for(let v=0;v<f.length;v++){const y=f[v];let _=40+(r.sensitive?.25:0);if(y.type===0)v||(i+="/"),i+=y.value.replace(hj,"\\$&"),_+=40;else if(y.type===1){const{value:S,repeatable:E,optional:P,regexp:I}=y;a.push({name:S,repeatable:E,optional:P});const D=I||RI;if(D!==RI){_+=10;try{new RegExp(`(${D})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${S}" (${D}): `+B.message)}}let L=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;v||(L=P&&f.length<2?`(?:/${L})`:"/"+L),P&&(L+="?"),i+=L,_+=20,P&&(_+=-8),E&&(_+=-20),D===".*"&&(_+=-50)}p.push(_)}n.push(p)}if(r.strict&&r.end){const f=n.length-1;n[f][n[f].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const o=new RegExp(i,r.sensitive?"":"i");function s(f){const p=f.match(o),v={};if(!p)return null;for(let y=1;y<p.length;y++){const _=p[y]||"",S=a[y-1];v[S.name]=_&&S.repeatable?_.split("/"):_}return v}function c(f){let p="",v=!1;for(const y of e){(!v||!p.endsWith("/"))&&(p+="/"),v=!1;for(const _ of y)if(_.type===0)p+=_.value;else if(_.type===1){const{value:S,repeatable:E,optional:P}=_,I=S in f?f[S]:"";if(ts(I)&&!E)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const D=ts(I)?I.join("/"):I;if(!D)if(P)y.length<2&&(p.endsWith("/")?p=p.slice(0,-1):v=!0);else throw new Error(`Missing required param "${S}"`);p+=D}}return p||"/"}return{re:o,score:n,keys:a,parse:s,stringify:c}}function dj(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function pj(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const a=dj(n[r],i[r]);if(a)return a;r++}if(Math.abs(i.length-n.length)===1){if(OI(n))return 1;if(OI(i))return-1}return i.length-n.length}function OI(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const mj={type:0,value:""},vj=/[a-zA-Z0-9_]/;function gj(e){if(!e)return[[]];if(e==="/")return[[mj]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${r})/"${f}": ${_}`)}let r=0,n=r;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,c,f="",p="";function v(){f&&(r===0?a.push({type:0,value:f}):r===1||r===2||r===3?(a.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:f,regexp:p,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),f="")}function y(){f+=c}for(;s<e.length;){if(c=e[s++],c==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:c==="/"?(f&&v(),o()):c===":"?(v(),r=1):y();break;case 4:y(),r=n;break;case 1:c==="("?r=2:vj.test(c)?y():(v(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&s--);break;case 2:c===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+c:r=3:p+=c;break;case 3:v(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&s--,p="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${f}"`),v(),o(),i}function yj(e,t,r){const n=fj(gj(e.path),r),i=nn(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function _j(e,t){const r=[],n=new Map;t=FI({strict:!1,end:!0,sensitive:!1},t);function i(p){return n.get(p)}function a(p,v,y){const _=!y,S=bj(p);S.aliasOf=y&&y.record;const E=FI(t,p),P=[S];if("alias"in p){const L=typeof p.alias=="string"?[p.alias]:p.alias;for(const B of L)P.push(nn({},S,{components:y?y.record.components:S.components,path:B,aliasOf:y?y.record:S}))}let I,D;for(const L of P){const{path:B}=L;if(v&&B[0]!=="/"){const U=v.record.path,V=U[U.length-1]==="/"?"":"/";L.path=v.record.path+(B&&V+B)}if(I=yj(L,v,E),y?y.alias.push(I):(D=D||I,D!==I&&D.alias.push(I),_&&p.name&&!BI(I)&&o(p.name)),S.children){const U=S.children;for(let V=0;V<U.length;V++)a(U[V],I,y&&y.children[V])}y=y||I,(I.record.components&&Object.keys(I.record.components).length||I.record.name||I.record.redirect)&&c(I)}return D?()=>{o(D)}:av}function o(p){if(i3(p)){const v=n.get(p);v&&(n.delete(p),r.splice(r.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=r.indexOf(p);v>-1&&(r.splice(v,1),p.record.name&&n.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function s(){return r}function c(p){let v=0;for(;v<r.length&&pj(p,r[v])>=0&&(p.record.path!==r[v].record.path||!o3(p,r[v]));)v++;r.splice(v,0,p),p.record.name&&!BI(p)&&n.set(p.record.name,p)}function f(p,v){let y,_={},S,E;if("name"in p&&p.name){if(y=n.get(p.name),!y)throw Ed(1,{location:p});E=y.record.name,_=nn(zI(v.params,y.keys.filter(D=>!D.optional).map(D=>D.name)),p.params&&zI(p.params,y.keys.map(D=>D.name))),S=y.stringify(_)}else if("path"in p)S=p.path,y=r.find(D=>D.re.test(S)),y&&(_=y.parse(S),E=y.record.name);else{if(y=v.name?n.get(v.name):r.find(D=>D.re.test(v.path)),!y)throw Ed(1,{location:p,currentLocation:v});E=y.record.name,_=nn({},v.params,p.params),S=y.stringify(_)}const P=[];let I=y;for(;I;)P.unshift(I.record),I=I.parent;return{name:E,path:S,params:_,matched:P,meta:wj(P)}}return e.forEach(p=>a(p)),{addRoute:a,resolve:f,removeRoute:o,getRoutes:s,getRecordMatcher:i}}function zI(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function bj(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:xj(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function xj(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function BI(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wj(e){return e.reduce((t,r)=>nn(t,r.meta),{})}function FI(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function o3(e,t){return t.children.some(r=>r===e||o3(e,r))}const s3=/#/g,Sj=/&/g,Tj=/\//g,Cj=/=/g,Aj=/\?/g,l3=/\+/g,Mj=/%5B/g,Ej=/%5D/g,u3=/%5E/g,Pj=/%60/g,c3=/%7B/g,Ij=/%7C/g,h3=/%7D/g,Dj=/%20/g;function FC(e){return encodeURI(""+e).replace(Ij,"|").replace(Mj,"[").replace(Ej,"]")}function Lj(e){return FC(e).replace(c3,"{").replace(h3,"}").replace(u3,"^")}function T2(e){return FC(e).replace(l3,"%2B").replace(Dj,"+").replace(s3,"%23").replace(Sj,"%26").replace(Pj,"`").replace(c3,"{").replace(h3,"}").replace(u3,"^")}function kj(e){return T2(e).replace(Cj,"%3D")}function Rj(e){return FC(e).replace(s3,"%23").replace(Aj,"%3F")}function Oj(e){return e==null?"":Rj(e).replace(Tj,"%2F")}function G0(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function zj(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(l3," "),o=a.indexOf("="),s=G0(o<0?a:a.slice(0,o)),c=o<0?null:G0(a.slice(o+1));if(s in t){let f=t[s];ts(f)||(f=t[s]=[f]),f.push(c)}else t[s]=c}return t}function $I(e){let t="";for(let r in e){const n=e[r];if(r=kj(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(ts(n)?n.map(a=>a&&T2(a)):[n&&T2(n)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+r,a!=null&&(t+="="+a))})}return t}function Bj(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=ts(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const Fj=Symbol(""),NI=Symbol(""),j1=Symbol(""),$C=Symbol(""),C2=Symbol("");function hm(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function Tu(e,t,r,n,i){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,s)=>{const c=v=>{v===!1?s(Ed(4,{from:r,to:t})):v instanceof Error?s(v):uj(v)?s(Ed(2,{from:t,to:v})):(a&&n.enterCallbacks[i]===a&&typeof v=="function"&&a.push(v),o())},f=e.call(n&&n.instances[i],t,r,c);let p=Promise.resolve(f);e.length<3&&(p=p.then(c)),p.catch(v=>s(v))})}function uw(e,t,r,n){const i=[];for(const a of e)for(const o in a.components){let s=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if($j(s)){const f=(s.__vccOpts||s)[t];f&&i.push(Tu(f,r,n,a,o))}else{let c=s();i.push(()=>c.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const p=GU(f)?f.default:f;a.components[o]=p;const y=(p.__vccOpts||p)[t];return y&&Tu(y,r,n,a,o)()}))}}return i}function $j(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function VI(e){const t=on(j1),r=on($C),n=ke(()=>t.resolve(Kt(e.to))),i=ke(()=>{const{matched:c}=n.value,{length:f}=c,p=c[f-1],v=r.matched;if(!p||!v.length)return-1;const y=v.findIndex(Md.bind(null,p));if(y>-1)return y;const _=HI(c[f-2]);return f>1&&HI(p)===_&&v[v.length-1].path!==_?v.findIndex(Md.bind(null,c[f-2])):y}),a=ke(()=>i.value>-1&&Hj(r.params,n.value.params)),o=ke(()=>i.value>-1&&i.value===r.matched.length-1&&r3(r.params,n.value.params));function s(c={}){return Vj(c)?t[Kt(e.replace)?"replace":"push"](Kt(e.to)).catch(av):Promise.resolve()}return{route:n,href:ke(()=>n.value.href),isActive:a,isExactActive:o,navigate:s}}const Nj=Jt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:VI,setup(e,{slots:t}){const r=io(VI(e)),{options:n}=on(j1),i=ke(()=>({[UI(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[UI(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=t.default&&t.default(r);return e.custom?a:Tr("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},a)}}}),f3=Nj;function Vj(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Hj(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!ts(i)||i.length!==n.length||n.some((a,o)=>a!==i[o]))return!1}return!0}function HI(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const UI=(e,t,r)=>e??t??r,Uj=Jt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=on(C2),i=ke(()=>e.route||n.value),a=on(NI,0),o=ke(()=>{let f=Kt(a);const{matched:p}=i.value;let v;for(;(v=p[f])&&!v.components;)f++;return f}),s=ke(()=>i.value.matched[o.value]);Hi(NI,ke(()=>o.value+1)),Hi(Fj,s),Hi(C2,i);const c=tr();return zr(()=>[c.value,s.value,e.name],([f,p,v],[y,_,S])=>{p&&(p.instances[v]=f,_&&_!==p&&f&&f===y&&(p.leaveGuards.size||(p.leaveGuards=_.leaveGuards),p.updateGuards.size||(p.updateGuards=_.updateGuards))),f&&p&&(!_||!Md(p,_)||!y)&&(p.enterCallbacks[v]||[]).forEach(E=>E(f))},{flush:"post"}),()=>{const f=i.value,p=e.name,v=s.value,y=v&&v.components[p];if(!y)return jI(r.default,{Component:y,route:f});const _=v.props[p],S=_?_===!0?f.params:typeof _=="function"?_(f):_:null,P=Tr(y,nn({},S,t,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(v.instances[p]=null)},ref:c}));return jI(r.default,{Component:P,route:f})||P}}});function jI(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const jj=Uj;function Gj(e){const t=_j(e.routes,e),r=e.parseQuery||zj,n=e.stringifyQuery||$I,i=e.history,a=hm(),o=hm(),s=hm(),c=yn(vl);let f=vl;Kf&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=sw.bind(null,Ue=>""+Ue),v=sw.bind(null,Oj),y=sw.bind(null,G0);function _(Ue,st){let at,dt;return i3(Ue)?(at=t.getRecordMatcher(Ue),dt=st):dt=Ue,t.addRoute(dt,at)}function S(Ue){const st=t.getRecordMatcher(Ue);st&&t.removeRoute(st)}function E(){return t.getRoutes().map(Ue=>Ue.record)}function P(Ue){return!!t.getRecordMatcher(Ue)}function I(Ue,st){if(st=nn({},st||c.value),typeof Ue=="string"){const be=lw(r,Ue,st.path),Be=t.resolve({path:be.path},st),Xe=i.createHref(be.fullPath);return nn(be,Be,{params:y(Be.params),hash:G0(be.hash),redirectedFrom:void 0,href:Xe})}let at;if("path"in Ue)at=nn({},Ue,{path:lw(r,Ue.path,st.path).path});else{const be=nn({},Ue.params);for(const Be in be)be[Be]==null&&delete be[Be];at=nn({},Ue,{params:v(be)}),st.params=v(st.params)}const dt=t.resolve(at,st),vt=Ue.hash||"";dt.params=p(y(dt.params));const It=ZU(n,nn({},Ue,{hash:Lj(vt),path:dt.path})),de=i.createHref(It);return nn({fullPath:It,hash:vt,query:n===$I?Bj(Ue.query):Ue.query||{}},dt,{redirectedFrom:void 0,href:de})}function D(Ue){return typeof Ue=="string"?lw(r,Ue,c.value.path):nn({},Ue)}function L(Ue,st){if(f!==Ue)return Ed(8,{from:st,to:Ue})}function B(Ue){return N(Ue)}function U(Ue){return B(nn(D(Ue),{replace:!0}))}function V(Ue){const st=Ue.matched[Ue.matched.length-1];if(st&&st.redirect){const{redirect:at}=st;let dt=typeof at=="function"?at(Ue):at;return typeof dt=="string"&&(dt=dt.includes("?")||dt.includes("#")?dt=D(dt):{path:dt},dt.params={}),nn({query:Ue.query,hash:Ue.hash,params:"path"in dt?{}:Ue.params},dt)}}function N(Ue,st){const at=f=I(Ue),dt=c.value,vt=Ue.state,It=Ue.force,de=Ue.replace===!0,be=V(at);if(be)return N(nn(D(be),{state:typeof be=="object"?nn({},vt,be.state):vt,force:It,replace:de}),st||at);const Be=at;Be.redirectedFrom=st;let Xe;return!It&&XU(n,dt,at)&&(Xe=Ed(16,{to:Be,from:dt}),zt(dt,dt,!0,!1)),(Xe?Promise.resolve(Xe):ee(Be,dt)).catch(ye=>ll(ye)?ll(ye,2)?ye:_t(ye):Oe(ye,Be,dt)).then(ye=>{if(ye){if(ll(ye,2))return N(nn({replace:de},D(ye.to),{state:typeof ye.to=="object"?nn({},vt,ye.to.state):vt,force:It}),st||Be)}else ye=X(Be,dt,!0,de,vt);return J(Be,dt,ye),ye})}function G(Ue,st){const at=L(Ue,st);return at?Promise.reject(at):Promise.resolve()}function Y(Ue){const st=rr.values().next().value;return st&&typeof st.runWithContext=="function"?st.runWithContext(Ue):Ue()}function ee(Ue,st){let at;const[dt,vt,It]=Wj(Ue,st);at=uw(dt.reverse(),"beforeRouteLeave",Ue,st);for(const be of dt)be.leaveGuards.forEach(Be=>{at.push(Tu(Be,Ue,st))});const de=G.bind(null,Ue,st);return at.push(de),Xt(at).then(()=>{at=[];for(const be of a.list())at.push(Tu(be,Ue,st));return at.push(de),Xt(at)}).then(()=>{at=uw(vt,"beforeRouteUpdate",Ue,st);for(const be of vt)be.updateGuards.forEach(Be=>{at.push(Tu(Be,Ue,st))});return at.push(de),Xt(at)}).then(()=>{at=[];for(const be of It)if(be.beforeEnter)if(ts(be.beforeEnter))for(const Be of be.beforeEnter)at.push(Tu(Be,Ue,st));else at.push(Tu(be.beforeEnter,Ue,st));return at.push(de),Xt(at)}).then(()=>(Ue.matched.forEach(be=>be.enterCallbacks={}),at=uw(It,"beforeRouteEnter",Ue,st),at.push(de),Xt(at))).then(()=>{at=[];for(const be of o.list())at.push(Tu(be,Ue,st));return at.push(de),Xt(at)}).catch(be=>ll(be,8)?be:Promise.reject(be))}function J(Ue,st,at){s.list().forEach(dt=>Y(()=>dt(Ue,st,at)))}function X(Ue,st,at,dt,vt){const It=L(Ue,st);if(It)return It;const de=st===vl,be=Kf?history.state:{};at&&(dt||de?i.replace(Ue.fullPath,nn({scroll:de&&be&&be.scroll},vt)):i.push(Ue.fullPath,vt)),c.value=Ue,zt(Ue,st,at,de),_t()}let ne;function we(){ne||(ne=i.listen((Ue,st,at)=>{if(!wr.listening)return;const dt=I(Ue),vt=V(dt);if(vt){N(nn(vt,{replace:!0}),dt).catch(av);return}f=dt;const It=c.value;Kf&&nj(DI(It.fullPath,at.delta),U1()),ee(dt,It).catch(de=>ll(de,12)?de:ll(de,2)?(N(de.to,dt).then(be=>{ll(be,20)&&!at.delta&&at.type===Ov.pop&&i.go(-1,!1)}).catch(av),Promise.reject()):(at.delta&&i.go(-at.delta,!1),Oe(de,dt,It))).then(de=>{de=de||X(dt,It,!1),de&&(at.delta&&!ll(de,8)?i.go(-at.delta,!1):at.type===Ov.pop&&ll(de,20)&&i.go(-1,!1)),J(dt,It,de)}).catch(av)}))}let fe=hm(),me=hm(),Ve;function Oe(Ue,st,at){_t(Ue);const dt=me.list();return dt.length?dt.forEach(vt=>vt(Ue,st,at)):console.error(Ue),Promise.reject(Ue)}function ct(){return Ve&&c.value!==vl?Promise.resolve():new Promise((Ue,st)=>{fe.add([Ue,st])})}function _t(Ue){return Ve||(Ve=!Ue,we(),fe.list().forEach(([st,at])=>Ue?at(Ue):st()),fe.reset()),Ue}function zt(Ue,st,at,dt){const{scrollBehavior:vt}=e;if(!Kf||!vt)return Promise.resolve();const It=!at&&ij(DI(Ue.fullPath,0))||(dt||!at)&&history.state&&history.state.scroll||null;return Oo().then(()=>vt(Ue,st,It)).then(de=>de&&rj(de)).catch(de=>Oe(de,Ue,st))}const Mt=Ue=>i.go(Ue);let ar;const rr=new Set,wr={currentRoute:c,listening:!0,addRoute:_,removeRoute:S,hasRoute:P,getRoutes:E,resolve:I,options:e,push:B,replace:U,go:Mt,back:()=>Mt(-1),forward:()=>Mt(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:me.add,isReady:ct,install(Ue){const st=this;Ue.component("RouterLink",f3),Ue.component("RouterView",jj),Ue.config.globalProperties.$router=st,Object.defineProperty(Ue.config.globalProperties,"$route",{enumerable:!0,get:()=>Kt(c)}),Kf&&!ar&&c.value===vl&&(ar=!0,B(i.location).catch(vt=>{}));const at={};for(const vt in vl)Object.defineProperty(at,vt,{get:()=>c.value[vt],enumerable:!0});Ue.provide(j1,st),Ue.provide($C,sz(at)),Ue.provide(C2,c);const dt=Ue.unmount;rr.add(Ue),Ue.unmount=function(){rr.delete(Ue),rr.size<1&&(f=vl,ne&&ne(),ne=null,c.value=vl,ar=!1,Ve=!1),dt()}}};function Xt(Ue){return Ue.reduce((st,at)=>st.then(()=>Y(at)),Promise.resolve())}return wr}function Wj(e,t){const r=[],n=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const s=t.matched[o];s&&(e.matched.find(f=>Md(f,s))?n.push(s):r.push(s));const c=e.matched[o];c&&(t.matched.find(f=>Md(f,c))||i.push(c))}return[r,n,i]}function Dh(){return on(j1)}function Gu(){return on($C)}var NC=Symbol(""),$s=()=>{const e=on(NC);if(!e)throw new Error("useClientData() is called without provider.");return e},qj=()=>$s().pageComponent,hh=()=>$s().pageData,Ds=()=>$s().pageFrontmatter,Zj=()=>$s().pageHead,d3=()=>$s().pageLang,Xj=()=>$s().pageLayout,Zd=()=>$s().routeLocale,Yj=()=>$s().routes,p3=()=>$s().siteData,VC=()=>$s().siteLocaleData,Kj=Symbol(""),m3=yn(UU),zv=yn(jU),v3=e=>{const t=NU(e);if(zv.value[t])return t;const r=encodeURI(t);return zv.value[r]?r:m3.value[t]||t},HC=e=>{const t=v3(e),r=zv.value[t]??{...zv.value["/404.html"],notFound:!0};return{path:t,notFound:!1,...r}},UC=Jt({name:"ClientOnly",setup(e,t){const r=tr(!1);return On(()=>{r.value=!0}),()=>{var n,i;return r.value?(i=(n=t.slots).default)==null?void 0:i.call(n):null}}}),Jj=Jt({name:"Content",props:{path:{type:String,required:!1,default:""}},setup(e){const t=qj(),r=ke(()=>{if(!e.path)return t.value;const n=HC(e.path);return c7(()=>n.loader().then(({comp:i})=>i))});return()=>Tr(r.value)}}),Sg=e=>wg(e)?e:`/${e3(e)}`,Qj=e=>{if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget){const t=e.currentTarget.getAttribute("target");if(t!=null&&t.match(/\b_blank\b/i))return}return e.preventDefault(),!0}},Xd=({active:e=!1,activeClass:t="route-link-active",to:r,...n},{slots:i})=>{var s;const a=Dh(),o=Sg(v3(r));return Tr("a",{...n,class:["route-link",{[t]:e}],href:o,onClick:(c={})=>{Qj(c)?a.push(r).catch():Promise.resolve()}},(s=i.default)==null?void 0:s.call(i))};Xd.displayName="RouteLink";Xd.props={active:Boolean,activeClass:String,to:String};var eG="Layout",tG="en-US",wc=io({resolveLayouts:e=>e.reduce((t,r)=>({...t,...r.layouts}),{}),resolvePageHead:(e,t,r)=>{const n=Sl(t.description)?t.description:r.description,i=[...Array.isArray(t.head)?t.head:[],...r.head,["title",{},e],["meta",{name:"description",content:n}]];return FU(i)},resolvePageHeadTitle:(e,t)=>[e.title,t.title].filter(r=>!!r).join(" | "),resolvePageLang:(e,t)=>e.lang||t.lang||tG,resolvePageLayout:(e,t)=>{const r=Sl(e.frontmatter.layout)?e.frontmatter.layout:eG;return t[r]},resolveRouteLocale:(e,t)=>t3(e,t),resolveSiteLocaleData:(e,t)=>{var r;return{...e,...e.locales[t],head:[...((r=e.locales[t])==null?void 0:r.head)??[],...e.head??[]]}}}),zo=(e={})=>e;function rG(e,t){let r,n,i;const a=tr(!0),o=()=>{a.value=!0,i()};zr(e,o,{flush:"sync"});const s=typeof t=="function"?t:t.get,c=typeof t=="function"?void 0:t.set,f=UH((p,v)=>(n=p,i=v,{get(){return a.value&&(r=s(),a.value=!1),n(),r},set(y){c==null||c(y)}}));return Object.isExtensible(f)&&(f.trigger=o),f}function G1(e){return X5()?(gH(e),!0):!1}function zs(e){return typeof e=="function"?e():Kt(e)}const jC=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const nG=Object.prototype.toString,iG=e=>nG.call(e)==="[object Object]",A2=()=>{};function g3(e,t){function r(...n){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(i).catch(a)})}return r}const y3=e=>e();function aG(e,t={}){let r,n,i=A2;const a=s=>{clearTimeout(s),i(),i=A2};return s=>{const c=zs(e),f=zs(t.maxWait);return r&&a(r),c<=0||f!==void 0&&f<=0?(n&&(a(n),n=null),Promise.resolve(s())):new Promise((p,v)=>{i=t.rejectOnCancel?v:p,f&&!n&&(n=setTimeout(()=>{r&&a(r),n=null,p(s())},f)),r=setTimeout(()=>{n&&a(n),n=null,p(s())},c)})}}function oG(e=y3){const t=tr(!0);function r(){t.value=!1}function n(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:O1(t),pause:r,resume:n,eventFilter:i}}function sG(e){let t;function r(){return t||(t=e()),t}return r.reset=async()=>{const n=t;t=void 0,n&&await n},r}function lG(e){return e||kl()}function uG(e,t=200,r={}){return g3(aG(t,r),e)}function cG(e,t,r={}){const{eventFilter:n=y3,...i}=r;return zr(e,g3(n,t),i)}function hG(e,t,r={}){const{eventFilter:n,...i}=r,{eventFilter:a,pause:o,resume:s,isActive:c}=oG(n);return{stop:cG(e,t,{...i,eventFilter:a}),pause:o,resume:s,isActive:c}}function GC(e,t=!0,r){lG()?On(e,r):t?e():Oo(e)}function fG(e,t,r={}){const{immediate:n=!0}=r,i=tr(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function s(){i.value=!1,o()}function c(...f){o(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,e(...f)},zs(t))}return n&&(i.value=!0,jC&&c()),G1(s),{isPending:O1(i),start:c,stop:s}}function dG(e=!1,t={}){const{truthyValue:r=!0,falsyValue:n=!1}=t,i=ua(e),a=tr(e);function o(s){if(arguments.length)return a.value=s,a.value;{const c=zs(r);return a.value=a.value===c?zs(n):c,a.value}}return i?o:[a,o]}function ih(e){var t;const r=zs(e);return(t=r==null?void 0:r.$el)!=null?t:r}const $u=jC?window:void 0,_3=jC?window.navigator:void 0;function El(...e){let t,r,n,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,n,i]=e,t=$u):[t,r,n,i]=e,!t)return A2;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const a=[],o=()=>{a.forEach(p=>p()),a.length=0},s=(p,v,y,_)=>(p.addEventListener(v,y,_),()=>p.removeEventListener(v,y,_)),c=zr(()=>[ih(t),zs(i)],([p,v])=>{if(o(),!p)return;const y=iG(v)?{...v}:v;a.push(...r.flatMap(_=>n.map(S=>s(p,_,S,y))))},{immediate:!0,flush:"post"}),f=()=>{c(),o()};return G1(f),f}function pG(){const e=tr(!1);return kl()&&On(()=>{e.value=!0}),e}function W1(e){const t=pG();return ke(()=>(t.value,!!e()))}function b3(e,t={}){const{window:r=$u}=t,n=W1(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let i;const a=tr(!1),o=f=>{a.value=f.matches},s=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",o):i.removeListener(o))},c=Ml(()=>{n.value&&(s(),i=r.matchMedia(zs(e)),"addEventListener"in i?i.addEventListener("change",o):i.addListener(o),a.value=i.matches)});return G1(()=>{c(),s(),i=void 0}),a}function GI(e,t={}){const{controls:r=!1,navigator:n=_3}=t,i=W1(()=>n&&"permissions"in n);let a;const o=typeof e=="string"?{name:e}:e,s=tr(),c=()=>{a&&(s.value=a.state)},f=sG(async()=>{if(i.value){if(!a)try{a=await n.permissions.query(o),El(a,"change",c),c()}catch{s.value="prompt"}return a}});return f(),r?{state:s,isSupported:i,query:f}:s}function mG(e={}){const{navigator:t=_3,read:r=!1,source:n,copiedDuring:i=1500,legacy:a=!1}=e,o=W1(()=>t&&"clipboard"in t),s=GI("clipboard-read"),c=GI("clipboard-write"),f=ke(()=>o.value||a),p=tr(""),v=tr(!1),y=fG(()=>v.value=!1,i);function _(){o.value&&s.value!=="denied"?t.clipboard.readText().then(I=>{p.value=I}):p.value=P()}f.value&&r&&El(["copy","cut"],_);async function S(I=zs(n)){f.value&&I!=null&&(o.value&&c.value!=="denied"?await t.clipboard.writeText(I):E(I),p.value=I,v.value=!0,y.start())}function E(I){const D=document.createElement("textarea");D.value=I??"",D.style.position="absolute",D.style.opacity="0",document.body.appendChild(D),D.select(),document.execCommand("copy"),D.remove()}function P(){var I,D,L;return(L=(D=(I=document==null?void 0:document.getSelection)==null?void 0:I.call(document))==null?void 0:D.toString())!=null?L:""}return{isSupported:f,text:p,copied:v,copy:S}}const n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i_="__vueuse_ssr_handlers__",vG=gG();function gG(){return i_ in n_||(n_[i_]=n_[i_]||{}),n_[i_]}function yG(e,t){return vG[e]||t}function _G(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const bG={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},WI="vueuse-storage";function x3(e,t,r,n={}){var i;const{flush:a="pre",deep:o=!0,listenToStorageChanges:s=!0,writeDefaults:c=!0,mergeDefaults:f=!1,shallow:p,window:v=$u,eventFilter:y,onError:_=Y=>{console.error(Y)},initOnMounted:S}=n,E=(p?yn:tr)(typeof t=="function"?t():t);if(!r)try{r=yG("getDefaultStorage",()=>{var Y;return(Y=$u)==null?void 0:Y.localStorage})()}catch(Y){_(Y)}if(!r)return E;const P=zs(t),I=_G(P),D=(i=n.serializer)!=null?i:bG[I],{pause:L,resume:B}=hG(E,()=>U(E.value),{flush:a,deep:o,eventFilter:y});return v&&s&&GC(()=>{El(v,"storage",G),El(v,WI,N),S&&G()}),S||G(),E;function U(Y){try{if(Y==null)r.removeItem(e);else{const ee=D.write(Y),J=r.getItem(e);J!==ee&&(r.setItem(e,ee),v&&v.dispatchEvent(new CustomEvent(WI,{detail:{key:e,oldValue:J,newValue:ee,storageArea:r}})))}}catch(ee){_(ee)}}function V(Y){const ee=Y?Y.newValue:r.getItem(e);if(ee==null)return c&&P!=null&&r.setItem(e,D.write(P)),P;if(!Y&&f){const J=D.read(ee);return typeof f=="function"?f(J,P):I==="object"&&!Array.isArray(J)?{...P,...J}:J}else return typeof ee!="string"?ee:D.read(ee)}function N(Y){G(Y.detail)}function G(Y){if(!(Y&&Y.storageArea!==r)){if(Y&&Y.key==null){E.value=P;return}if(!(Y&&Y.key!==e)){L();try{(Y==null?void 0:Y.newValue)!==D.write(E.value)&&(E.value=V(Y))}catch(ee){_(ee)}finally{Y?Oo(B):B()}}}}}function xG(e){return b3("(prefers-color-scheme: dark)",e)}function wG(e,t,r={}){const{window:n=$u,...i}=r;let a;const o=W1(()=>n&&"ResizeObserver"in n),s=()=>{a&&(a.disconnect(),a=void 0)},c=ke(()=>Array.isArray(e)?e.map(v=>ih(v)):[ih(e)]),f=zr(c,v=>{if(s(),o.value&&n){a=new ResizeObserver(t);for(const y of v)y&&a.observe(y,i)}},{immediate:!0,flush:"post",deep:!0}),p=()=>{s(),f()};return G1(p),{isSupported:o,stop:p}}function SG(e,t={width:0,height:0},r={}){const{window:n=$u,box:i="content-box"}=r,a=ke(()=>{var v,y;return(y=(v=ih(e))==null?void 0:v.namespaceURI)==null?void 0:y.includes("svg")}),o=tr(t.width),s=tr(t.height),{stop:c}=wG(e,([v])=>{const y=i==="border-box"?v.borderBoxSize:i==="content-box"?v.contentBoxSize:v.devicePixelContentBoxSize;if(n&&a.value){const _=ih(e);if(_){const S=n.getComputedStyle(_);o.value=Number.parseFloat(S.width),s.value=Number.parseFloat(S.height)}}else if(y){const _=Array.isArray(y)?y:[y];o.value=_.reduce((S,{inlineSize:E})=>S+E,0),s.value=_.reduce((S,{blockSize:E})=>S+E,0)}else o.value=v.contentRect.width,s.value=v.contentRect.height},r);GC(()=>{const v=ih(e);v&&(o.value="offsetWidth"in v?v.offsetWidth:t.width,s.value="offsetHeight"in v?v.offsetHeight:t.height)});const f=zr(()=>ih(e),v=>{o.value=v?t.width:0,s.value=v?t.height:0});function p(){c(),f()}return{width:o,height:s,stop:p}}function TG(e={}){const{window:t=$u,behavior:r="auto"}=e;if(!t)return{x:tr(0),y:tr(0)};const n=tr(t.scrollX),i=tr(t.scrollY),a=ke({get(){return n.value},set(s){scrollTo({left:s,behavior:r})}}),o=ke({get(){return i.value},set(s){scrollTo({top:s,behavior:r})}});return El(t,"scroll",()=>{n.value=t.scrollX,i.value=t.scrollY},{capture:!1,passive:!0}),{x:a,y:o}}function CG(e={}){const{window:t=$u,initialWidth:r=Number.POSITIVE_INFINITY,initialHeight:n=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:a=!0}=e,o=tr(r),s=tr(n),c=()=>{t&&(a?(o.value=t.innerWidth,s.value=t.innerHeight):(o.value=t.document.documentElement.clientWidth,s.value=t.document.documentElement.clientHeight))};if(c(),GC(c),El("resize",c,{passive:!0}),i){const f=b3("(orientation: portrait)");zr(f,()=>c())}return{width:o,height:s}}const qI=async(e,t)=>{const{path:r,query:n}=e.currentRoute.value,{scrollBehavior:i}=e.options;e.options.scrollBehavior=void 0,await e.replace({path:r,query:n,hash:t}),e.options.scrollBehavior=i},AG=({headerLinkSelector:e,headerAnchorSelector:t,delay:r,offset:n=5})=>{const i=Dh();El("scroll",uG(()=>{var S,E;const o=Math.max(window.scrollY,document.documentElement.scrollTop,document.body.scrollTop);if(Math.abs(o-0)<n){qI(i,"");return}const c=window.innerHeight+o,f=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),p=Math.abs(f-c)<n,v=Array.from(document.querySelectorAll(e)),_=Array.from(document.querySelectorAll(t)).filter(P=>v.some(I=>I.hash===P.hash));for(let P=0;P<_.length;P++){const I=_[P],D=_[P+1],L=o>=(((S=I.parentElement)==null?void 0:S.offsetTop)??0)-n,B=!D||o<(((E=D.parentElement)==null?void 0:E.offsetTop)??0)-n;if(!(L&&B))continue;const V=decodeURIComponent(i.currentRoute.value.hash),N=decodeURIComponent(I.hash);if(V===N)return;if(p){for(let G=P+1;G<_.length;G++)if(V===decodeURIComponent(_[G].hash))return}qI(i,N);return}},r))},MG="a.sidebar-item",EG=".header-anchor",PG=300,IG=5,DG=zo({setup(){AG({headerLinkSelector:MG,headerAnchorSelector:EG,delay:PG,offset:IG})}}),w3=e=>{const t=Zd();return ke(()=>e[t.value]??{})},LG=()=>{const e=Yj();return ke(()=>Object.keys(e.value))},cw=(e,t)=>{var n;const r=(n=(t==null?void 0:t._instance)||kl())==null?void 0:n.appContext.components;return r?e in r||Io(e)in r||vg(Io(e))in r:!1};var kG={"/":{backToTop:"返回顶部"}};const RG=Jt({name:"BackToTop",setup(e){const t=Ds(),r=w3(kG),n=yn(),{height:i}=SG(n),{height:a}=CG(),{y:o}=TG(),s=ke(()=>t.value.backToTop!==!1&&o.value>100),c=ke(()=>o.value/(i.value-a.value)*100);return On(()=>{n.value=document.body}),()=>Tr(Rl,{name:"back-to-top"},()=>s.value?Tr("button",{type:"button",class:"vp-back-to-top-button","aria-label":r.value.backToTop,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})}},[Tr("span",{class:"vp-scroll-progress",role:"progressbar","aria-labelledby":"loadinglabel","aria-valuenow":c.value},Tr("svg",Tr("circle",{cx:"50%",cy:"50%",style:{"stroke-dasharray":`calc(${Math.PI*c.value}% - ${4*Math.PI}px) calc(${Math.PI*100}% - ${4*Math.PI}px)`}}))),Tr("div",{class:"back-to-top-icon"})]):null)}}),OG=zo({rootComponents:[RG]}),zG=/\b(?:Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini)/i,BG=()=>typeof window<"u"&&window.navigator&&"userAgent"in window.navigator&&zG.test(navigator.userAgent),hw=new Map,FG=({delay:e=500,duration:t=2e3,locales:r,selector:n,showInMobile:i})=>{const{copy:a}=mG({legacy:!0}),o=w3(r),s=hh(),c=v=>{if(!v.hasAttribute("copy-code-registered")){const y=document.createElement("button");y.type="button",y.classList.add("vp-copy-code-button"),y.innerHTML='<div class="vp-copy-icon" />',y.setAttribute("aria-label",o.value.copy),y.setAttribute("data-copied",o.value.copied),v.parentElement&&v.parentElement.insertBefore(y,v),v.setAttribute("copy-code-registered","")}},f=()=>{Oo().then(()=>setTimeout(()=>{n.forEach(v=>{document.querySelectorAll(v).forEach(c)})},e))},p=(v,y,_)=>{let{innerText:S=""}=y;/language-(shellscript|shell|bash|sh|zsh)/.test(v.classList.toString())&&(S=S.replace(/^ *(\$|>) /gm,"")),a(S).then(()=>{_.classList.add("copied"),clearTimeout(hw.get(_));const E=setTimeout(()=>{_.classList.remove("copied"),_.blur(),hw.delete(_)},t);hw.set(_,E)})};On(()=>{const v=!BG()||i;v&&f(),El("click",y=>{const _=y.target;if(_.matches('div[class*="language-"] > button.copy')){const S=_.parentElement,E=_.nextElementSibling;E&&p(S,E,_)}else if(_.matches('div[class*="language-"] div.vp-copy-icon')){const S=_.parentElement,E=S.parentElement,P=S.nextElementSibling;P&&p(E,P,S)}}),zr(()=>s.value.path,()=>{v&&f()})})};var $G={"/":{copy:"复制代码",copied:"已复制"}},NG=['.theme-default-content div[class*="language-"] pre'];const VG=500,HG=2e3,UG=$G,jG=NG,GG=!1,WG=zo({setup:()=>{FG({selector:jG,locales:UG,duration:HG,delay:VG,showInMobile:GG})}}),qG=Tr("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[Tr("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),Tr("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),ZG=Jt({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(e){const t=Zd(),r=ke(()=>e.locales[t.value]??{openInNewWindow:"open in new window"});return()=>Tr("span",[qG,Tr("span",{class:"external-link-icon-sr-only"},r.value.openInNewWindow)])}});var XG={"/":{openInNewWindow:"在新窗口打开"}};const YG=XG,KG=zo({enhance({app:e}){e.component("ExternalLinkIcon",Tr(ZG,{locales:YG}))}});/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */var qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a_=function(t){return t.tagName==="IMG"},JG=function(t){return NodeList.prototype.isPrototypeOf(t)},a0=function(t){return t&&t.nodeType===1},ZI=function(t){var r=t.currentSrc||t.src;return r.substr(-4).toLowerCase()===".svg"},XI=function(t){try{return Array.isArray(t)?t.filter(a_):JG(t)?[].slice.call(t).filter(a_):a0(t)?[t].filter(a_):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(a_):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},QG=function(t){var r=document.createElement("div");return r.classList.add("medium-zoom-overlay"),r.style.background=t,r},eW=function(t){var r=t.getBoundingClientRect(),n=r.top,i=r.left,a=r.width,o=r.height,s=t.cloneNode(),c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,f=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return s.removeAttribute("id"),s.style.position="absolute",s.style.top=n+c+"px",s.style.left=i+f+"px",s.style.width=a+"px",s.style.height=o+"px",s.style.transform="",s},kf=function(t,r){var n=qc({bubbles:!1,cancelable:!1,detail:void 0},r);if(typeof window.CustomEvent=="function")return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i},tW=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=window.Promise||function(X){function ne(){}X(ne,ne)},i=function(X){var ne=X.target;if(ne===Y){S();return}L.indexOf(ne)!==-1&&E({target:ne})},a=function(){if(!(U||!G.original)){var X=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(V-X)>N.scrollOffset&&setTimeout(S,150)}},o=function(X){var ne=X.key||X.keyCode;(ne==="Escape"||ne==="Esc"||ne===27)&&S()},s=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=X;if(X.background&&(Y.style.background=X.background),X.container&&X.container instanceof Object&&(ne.container=qc({},N.container,X.container)),X.template){var we=a0(X.template)?X.template:document.querySelector(X.template);ne.template=we}return N=qc({},N,ne),L.forEach(function(fe){fe.dispatchEvent(kf("medium-zoom:update",{detail:{zoom:ee}}))}),ee},c=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(qc({},N,X))},f=function(){for(var X=arguments.length,ne=Array(X),we=0;we<X;we++)ne[we]=arguments[we];var fe=ne.reduce(function(me,Ve){return[].concat(me,XI(Ve))},[]);return fe.filter(function(me){return L.indexOf(me)===-1}).forEach(function(me){L.push(me),me.classList.add("medium-zoom-image")}),B.forEach(function(me){var Ve=me.type,Oe=me.listener,ct=me.options;fe.forEach(function(_t){_t.addEventListener(Ve,Oe,ct)})}),ee},p=function(){for(var X=arguments.length,ne=Array(X),we=0;we<X;we++)ne[we]=arguments[we];G.zoomed&&S();var fe=ne.length>0?ne.reduce(function(me,Ve){return[].concat(me,XI(Ve))},[]):L;return fe.forEach(function(me){me.classList.remove("medium-zoom-image"),me.dispatchEvent(kf("medium-zoom:detach",{detail:{zoom:ee}}))}),L=L.filter(function(me){return fe.indexOf(me)===-1}),ee},v=function(X,ne){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L.forEach(function(fe){fe.addEventListener("medium-zoom:"+X,ne,we)}),B.push({type:"medium-zoom:"+X,listener:ne,options:we}),ee},y=function(X,ne){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L.forEach(function(fe){fe.removeEventListener("medium-zoom:"+X,ne,we)}),B=B.filter(function(fe){return!(fe.type==="medium-zoom:"+X&&fe.listener.toString()===ne.toString())}),ee},_=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=X.target,we=function(){var me={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},Ve=void 0,Oe=void 0;if(N.container)if(N.container instanceof Object)me=qc({},me,N.container),Ve=me.width-me.left-me.right-N.margin*2,Oe=me.height-me.top-me.bottom-N.margin*2;else{var ct=a0(N.container)?N.container:document.querySelector(N.container),_t=ct.getBoundingClientRect(),zt=_t.width,Mt=_t.height,ar=_t.left,rr=_t.top;me=qc({},me,{width:zt,height:Mt,left:ar,top:rr})}Ve=Ve||me.width-N.margin*2,Oe=Oe||me.height-N.margin*2;var wr=G.zoomedHd||G.original,Xt=ZI(wr)?Ve:wr.naturalWidth||Ve,Ue=ZI(wr)?Oe:wr.naturalHeight||Oe,st=wr.getBoundingClientRect(),at=st.top,dt=st.left,vt=st.width,It=st.height,de=Math.min(Math.max(vt,Xt),Ve)/vt,be=Math.min(Math.max(It,Ue),Oe)/It,Be=Math.min(de,be),Xe=(-dt+(Ve-vt)/2+N.margin+me.left)/Be,ye=(-at+(Oe-It)/2+N.margin+me.top)/Be,lt="scale("+Be+") translate3d("+Xe+"px, "+ye+"px, 0)";G.zoomed.style.transform=lt,G.zoomedHd&&(G.zoomedHd.style.transform=lt)};return new n(function(fe){if(ne&&L.indexOf(ne)===-1){fe(ee);return}var me=function zt(){U=!1,G.zoomed.removeEventListener("transitionend",zt),G.original.dispatchEvent(kf("medium-zoom:opened",{detail:{zoom:ee}})),fe(ee)};if(G.zoomed){fe(ee);return}if(ne)G.original=ne;else if(L.length>0){var Ve=L;G.original=Ve[0]}else{fe(ee);return}if(G.original.dispatchEvent(kf("medium-zoom:open",{detail:{zoom:ee}})),V=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,U=!0,G.zoomed=eW(G.original),document.body.appendChild(Y),N.template){var Oe=a0(N.template)?N.template:document.querySelector(N.template);G.template=document.createElement("div"),G.template.appendChild(Oe.content.cloneNode(!0)),document.body.appendChild(G.template)}if(G.original.parentElement&&G.original.parentElement.tagName==="PICTURE"&&G.original.currentSrc&&(G.zoomed.src=G.original.currentSrc),document.body.appendChild(G.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),G.original.classList.add("medium-zoom-image--hidden"),G.zoomed.classList.add("medium-zoom-image--opened"),G.zoomed.addEventListener("click",S),G.zoomed.addEventListener("transitionend",me),G.original.getAttribute("data-zoom-src")){G.zoomedHd=G.zoomed.cloneNode(),G.zoomedHd.removeAttribute("srcset"),G.zoomedHd.removeAttribute("sizes"),G.zoomedHd.removeAttribute("loading"),G.zoomedHd.src=G.zoomed.getAttribute("data-zoom-src"),G.zoomedHd.onerror=function(){clearInterval(ct),console.warn("Unable to reach the zoom image target "+G.zoomedHd.src),G.zoomedHd=null,we()};var ct=setInterval(function(){G.zoomedHd.complete&&(clearInterval(ct),G.zoomedHd.classList.add("medium-zoom-image--opened"),G.zoomedHd.addEventListener("click",S),document.body.appendChild(G.zoomedHd),we())},10)}else if(G.original.hasAttribute("srcset")){G.zoomedHd=G.zoomed.cloneNode(),G.zoomedHd.removeAttribute("sizes"),G.zoomedHd.removeAttribute("loading");var _t=G.zoomedHd.addEventListener("load",function(){G.zoomedHd.removeEventListener("load",_t),G.zoomedHd.classList.add("medium-zoom-image--opened"),G.zoomedHd.addEventListener("click",S),document.body.appendChild(G.zoomedHd),we()})}else we()})},S=function(){return new n(function(X){if(U||!G.original){X(ee);return}var ne=function we(){G.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(G.zoomed),G.zoomedHd&&document.body.removeChild(G.zoomedHd),document.body.removeChild(Y),G.zoomed.classList.remove("medium-zoom-image--opened"),G.template&&document.body.removeChild(G.template),U=!1,G.zoomed.removeEventListener("transitionend",we),G.original.dispatchEvent(kf("medium-zoom:closed",{detail:{zoom:ee}})),G.original=null,G.zoomed=null,G.zoomedHd=null,G.template=null,X(ee)};U=!0,document.body.classList.remove("medium-zoom--opened"),G.zoomed.style.transform="",G.zoomedHd&&(G.zoomedHd.style.transform=""),G.template&&(G.template.style.transition="opacity 150ms",G.template.style.opacity=0),G.original.dispatchEvent(kf("medium-zoom:close",{detail:{zoom:ee}})),G.zoomed.addEventListener("transitionend",ne)})},E=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=X.target;return G.original?S():_({target:ne})},P=function(){return N},I=function(){return L},D=function(){return G.original},L=[],B=[],U=!1,V=0,N=r,G={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?N=t:(t||typeof t=="string")&&f(t),N=qc({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},N);var Y=QG(N.background);document.addEventListener("click",i),document.addEventListener("keyup",o),document.addEventListener("scroll",a),window.addEventListener("resize",S);var ee={open:_,close:S,toggle:E,update:s,clone:c,attach:f,detach:p,on:v,off:y,getOptions:P,getImages:I,getZoomedImage:D};return ee};function rW(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var nW=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";rW(nW);const iW=Symbol("mediumZoom");var aW={};const oW=".theme-default-content > img, .theme-default-content :not(a) > img",sW=aW,lW=300,uW=zo({enhance({app:e,router:t}){const r=tW(sW);r.refresh=(n=oW)=>{r.detach(),r.attach(n)},e.provide(iW,r),t.afterEach(()=>{setTimeout(()=>r.refresh(),lW)})}});/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */const $r={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:e=>{const t=$r.isStarted();e=fw(e,$r.settings.minimum,1),$r.status=e===1?null:e;const r=$r.render(!t),n=r.querySelector($r.settings.barSelector),i=$r.settings.speed,a=$r.settings.easing;return r.offsetWidth,cW(o=>{o_(n,{transform:"translate3d("+YI(e)+"%,0,0)",transition:"all "+i+"ms "+a}),e===1?(o_(r,{transition:"none",opacity:"1"}),r.offsetWidth,setTimeout(function(){o_(r,{transition:"all "+i+"ms linear",opacity:"0"}),setTimeout(function(){$r.remove(),o()},i)},i)):setTimeout(()=>o(),i)}),$r},isStarted:()=>typeof $r.status=="number",start:()=>{$r.status||$r.set(0);const e=()=>{setTimeout(()=>{$r.status&&($r.trickle(),e())},$r.settings.trickleSpeed)};return $r.settings.trickle&&e(),$r},done:e=>!e&&!$r.status?$r:$r.inc(.3+.5*Math.random()).set(1),inc:e=>{let t=$r.status;return t?(typeof e!="number"&&(e=(1-t)*fw(Math.random()*t,.1,.95)),t=fw(t+e,0,.994),$r.set(t)):$r.start()},trickle:()=>$r.inc(Math.random()*$r.settings.trickleRate),render:e=>{if($r.isRendered())return document.getElementById("nprogress");KI(document.documentElement,"nprogress-busy");const t=document.createElement("div");t.id="nprogress",t.innerHTML=$r.settings.template;const r=t.querySelector($r.settings.barSelector),n=e?"-100":YI($r.status||0),i=document.querySelector($r.settings.parent);return o_(r,{transition:"all 0 linear",transform:"translate3d("+n+"%,0,0)"}),i!==document.body&&KI(i,"nprogress-custom-parent"),i==null||i.appendChild(t),t},remove:()=>{JI(document.documentElement,"nprogress-busy"),JI(document.querySelector($r.settings.parent),"nprogress-custom-parent");const e=document.getElementById("nprogress");e&&hW(e)},isRendered:()=>!!document.getElementById("nprogress")},fw=(e,t,r)=>e<t?t:e>r?r:e,YI=e=>(-1+e)*100,cW=function(){const e=[];function t(){const r=e.shift();r&&r(t)}return function(r){e.push(r),e.length===1&&t()}}(),o_=function(){const e=["Webkit","O","Moz","ms"],t={};function r(o){return o.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(s,c){return c.toUpperCase()})}function n(o){const s=document.body.style;if(o in s)return o;let c=e.length;const f=o.charAt(0).toUpperCase()+o.slice(1);let p;for(;c--;)if(p=e[c]+f,p in s)return p;return o}function i(o){return o=r(o),t[o]??(t[o]=n(o))}function a(o,s,c){s=i(s),o.style[s]=c}return function(o,s){for(const c in s){const f=s[c];f!==void 0&&Object.prototype.hasOwnProperty.call(s,c)&&a(o,c,f)}}}(),S3=(e,t)=>(typeof e=="string"?e:WC(e)).indexOf(" "+t+" ")>=0,KI=(e,t)=>{const r=WC(e),n=r+t;S3(r,t)||(e.className=n.substring(1))},JI=(e,t)=>{const r=WC(e);if(!S3(e,t))return;const n=r.replace(" "+t+" "," ");e.className=n.substring(1,n.length-1)},WC=e=>(" "+(e.className||"")+" ").replace(/\s+/gi," "),hW=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},fW=()=>{On(()=>{const e=Dh(),t=new Set;t.add(e.currentRoute.value.path),e.beforeEach(r=>{t.has(r.path)||$r.start()}),e.afterEach(r=>{t.add(r.path),$r.done()})})},dW=zo({setup(){fW()}}),pW=JSON.parse('{"navbar":[{"text":"主页","link":"/"},{"text":"快讯网","link":"https://daily.sustech.online/"},{"text":"小程序","link":"/miniapp/"},{"text":"关于","link":"/about/"},{"text":"站点帮助","link":"/site-help/"}],"repo":"sustech-cra/sustech-online-ng","repoLabel":"在Github上查看","docsRepo":"sustech-cra/sustech-online-ng","docsDir":"docs","editLinkText":"一起完善这本手册！","lastUpdatedText":"上次更新","contributorsText":"贡献者","editLink":true,"docsBranch":"master","tip":"提示","warning":"注意","danger":"警告","notFound":["这里什么都没有","我们怎么到这来了？","这是一个 404 页面","看起来我们进入了错误的链接"],"backToHome":"返回首页","openInNewWindow":"在新窗口打开","toggleColorMode":"切换夜间模式","toggleSidebar":"切换侧边栏","sidebarDepth":2,"sidebar":["/","/facility/","/contact/","/calendar/","/service/","/life/","/study/","/canteen/","/organizations/","/media/",{"text":"🚄交通","link":"/transport/","children":[{"text":"🚌新版巴士时刻表","link":"/transport/bustimer.md","children":[]},{"text":"🚌校园巴士-工作日","link":"/transport/workday.md","children":[]},{"text":"🚌校园巴士-节假日","link":"/transport/holiday.md","children":[]},{"text":"周围交通","link":"/transport/","children":[]}]},"/surroundings/"],"locales":{"/":{"selectLanguageName":"English"}},"colorMode":"auto","colorModeSwitch":true,"logo":null,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","lastUpdated":true,"contributors":true}'),mW=tr(pW),T3=()=>mW,C3=Symbol(""),vW=()=>{const e=on(C3);if(!e)throw new Error("useThemeLocaleData() is called without provider.");return e},gW=(e,t)=>{const{locales:r,...n}=e;return{...n,...r==null?void 0:r[t]}},yW=zo({enhance({app:e}){const t=T3(),r=e._context.provides[NC],n=ke(()=>gW(t.value,r.routeLocale.value));e.provide(C3,n),Object.defineProperties(e.config.globalProperties,{$theme:{get(){return t.value}},$themeLocale:{get(){return n.value}}})}}),_W=Jt({__name:"Badge",props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(e){return(t,r)=>(rt(),Ct("span",{class:Vi(["badge",e.type]),style:Wd({verticalAlign:e.vertical})},[fn(t.$slots,"default",{},()=>[Os(br(e.text),1)])],6))}}),Dr=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},bW=Dr(_W,[["__file","Badge.vue"]]),xW=Jt({name:"CodeGroup",slots:Object,setup(e,{slots:t}){const r=tr([]),n=tr(-1),i=x3("vuepress-code-group",{}),a=ke(()=>r.value.map(f=>f.innerText).join(","));On(()=>{zr(()=>i.value[a.value],(f=-1)=>{n.value!==f&&(n.value=f)},{immediate:!0}),zr(n,f=>{i.value[a.value]!==f&&(i.value[a.value]=f)})});const o=(f=n.value)=>{f<r.value.length-1?n.value=f+1:n.value=0,r.value[n.value].focus()},s=(f=n.value)=>{f>0?n.value=f-1:n.value=r.value.length-1,r.value[n.value].focus()},c=(f,p)=>{f.key===" "||f.key==="Enter"?(f.preventDefault(),n.value=p):f.key==="ArrowRight"?(f.preventDefault(),o(p)):f.key==="ArrowLeft"&&(f.preventDefault(),s(p))};return()=>{var p;const f=(((p=t.default)==null?void 0:p.call(t))||[]).filter(v=>v.type.name==="CodeGroupItem").map(v=>(v.props===null&&(v.props={}),v));return f.length===0?null:(n.value<0||n.value>f.length-1?(n.value=f.findIndex(v=>v.props.active===""||v.props.active===!0),n.value===-1&&(n.value=0)):f.forEach((v,y)=>{v.props.active=y===n.value}),Tr("div",{class:"code-group"},[Tr("div",{class:"code-group__nav",role:"tablist"},f.map((v,y)=>{const _=y===n.value;return Tr("button",{ref:S=>{S&&(r.value[y]=S)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":_},role:"tab",ariaSelected:_,onClick:()=>n.value=y,onKeydown:S=>c(S,y)},v.props.title)})),f]))}}}),wW=Jt({name:"CodeGroupItem",__name:"CodeGroupItem",props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(e){return(t,r)=>(rt(),Ct("div",{class:Vi(["code-group-item",{"code-group-item__active":e.active}]),role:"tabpanel"},[fn(t.$slots,"default")],2))}}),SW=Dr(wW,[["__file","CodeGroupItem.vue"]]),TW=()=>T3(),$i=()=>vW(),A3=Symbol(""),qC=()=>{const e=on(A3);if(!e)throw new Error("useDarkMode() is called without provider.");return e},CW=()=>{const e=$i(),t=xG(),r=x3("vuepress-color-scheme",e.value.colorMode),n=ke({get(){return e.value.colorModeSwitch?r.value==="auto"?t.value:r.value==="dark":e.value.colorMode==="dark"},set(i){i===t.value?r.value="auto":r.value=i?"dark":"light"}});Hi(A3,n),AW(n)},AW=e=>{const t=(r=e.value)=>{const n=window==null?void 0:window.document.querySelector("html");n==null||n.classList.toggle("dark",r)};On(()=>{zr(e,t,{immediate:!0})}),qd(()=>t())};let dw=null,fm=null;const MW={wait:()=>dw,pending:()=>{dw=new Promise(e=>fm=e)},resolve:()=>{fm==null||fm(),dw=null,fm=null}},M3=()=>MW,ZC=e=>{const{notFound:t,meta:r,path:n}=HC(e);return t?{text:n,link:n}:{text:r.title||n,link:n}},QI=e=>decodeURI(e).replace(/#.*$/,"").replace(/(index)?\.(md|html)$/,""),EW=(e,t)=>{if(t.hash===e)return!0;const r=QI(t.path),n=QI(e);return r===n},E3=(e,t)=>e.link&&EW(e.link,t)?!0:e.children?e.children.some(r=>E3(r,t)):!1,P3=e=>!wg(e)||/github\.com/.test(e)?"GitHub":/bitbucket\.org/.test(e)?"Bitbucket":/gitlab\.com/.test(e)?"GitLab":/gitee\.com/.test(e)?"Gitee":null,PW={GitHub:":repo/edit/:branch/:path",GitLab:":repo/-/edit/:branch/:path",Gitee:":repo/edit/:branch/:path",Bitbucket:":repo/src/:branch/:path?mode=edit&spa=0&at=:branch&fileviewer=file-view-default"},IW=({docsRepo:e,editLinkPattern:t})=>{if(t)return t;const r=P3(e);return r!==null?PW[r]:null},DW=({docsRepo:e,docsBranch:t,docsDir:r,filePathRelative:n,editLinkPattern:i})=>{if(!n)return null;const a=IW({docsRepo:e,editLinkPattern:i});return a?a.replace(/:repo/,wg(e)?e:`https://github.com/${e}`).replace(/:branch/,t).replace(/:path/,e3(`${Qz(r)}/${n}`)):null},I3=Symbol("sidebarItems"),XC=()=>{const e=on(I3);if(!e)throw new Error("useSidebarItems() is called without provider.");return e},LW=()=>{const e=$i(),t=Ds(),r=hh(),n=Gu(),i=ke(()=>kW(t.value,e.value,r.value,n.path));Hi(I3,i)},kW=(e,t,r,n)=>{const i=e.sidebar??t.sidebar??"auto",a=e.sidebarDepth??t.sidebarDepth??2;return e.home||i===!1?[]:i==="auto"?D3(r,a):Array.isArray(i)?L3(r,n,i,a):BC(i)?OW(r,n,i,a):[]},RW=(e,t)=>({text:e.title,link:e.link,children:YC(e.children,t)}),YC=(e,t)=>t>0?e.map(r=>RW(r,t-1)):[],D3=(e,t)=>[{text:e.title,children:YC(e.headers,t)}],L3=(e,t,r,n)=>{const i=a=>{var s;let o;if(Sl(a)?o=ZC(a):o=a,o.children)return{...o,children:o.children.map(c=>i(c))};if(o.link===t){const c=((s=e.headers[0])==null?void 0:s.level)===1?e.headers[0].children:e.headers;return{...o,children:YC(c,n)}}return o};return r.map(a=>i(a))},OW=(e,t,r,n)=>{const i=t3(r,t),a=r[i]??[];return a==="heading"?D3(e,n):L3(e,t,a,n)},zW="719px",BW={mobile:zW};var Bv;(function(e){e.MOBILE="mobile"})(Bv||(Bv={}));var V5;const FW={[Bv.MOBILE]:Number.parseInt((V5=BW.mobile)==null?void 0:V5.replace("px",""),10)},k3=(e,t)=>{const r=FW[e];Number.isInteger(r)&&On(()=>{t(r),window.addEventListener("resize",()=>t(r),!1),window.addEventListener("orientationchange",()=>t(r),!1)})},$W={},NW={class:"theme-default-content"};function VW(e,t){const r=gn("Content");return rt(),Ct("div",NW,[De(r)])}const HW=Dr($W,[["render",VW],["__file","HomeContent.vue"]]),UW={key:0,class:"features"},jW=Jt({__name:"HomeFeatures",setup(e){const t=Ds(),r=ke(()=>Array.isArray(t.value.features)?t.value.features:[]);return(n,i)=>r.value.length?(rt(),Ct("div",UW,[(rt(!0),Ct(Mr,null,Aa(r.value,a=>(rt(),Ct("div",{key:a.title,class:"feature"},[Nt("h2",null,br(a.title),1),Nt("p",null,br(a.details),1)]))),128))])):Hr("",!0)}}),GW=Dr(jW,[["__file","HomeFeatures.vue"]]),WW=["innerHTML"],qW=["textContent"],ZW=Jt({__name:"HomeFooter",setup(e){const t=Ds(),r=ke(()=>t.value.footer),n=ke(()=>t.value.footerHtml);return(i,a)=>r.value?(rt(),Ct(Mr,{key:0},[n.value?(rt(),Ct("div",{key:0,class:"footer",innerHTML:r.value},null,8,WW)):(rt(),Ct("div",{key:1,class:"footer",textContent:br(r.value)},null,8,qW))],64)):Hr("",!0)}}),XW=Dr(ZW,[["__file","HomeFooter.vue"]]),YW=["href","rel","target","aria-label"],KW=Jt({inheritAttrs:!1,__name:"AutoLink",props:{item:{type:Object,required:!0}},setup(e){const t=e,r=Gu(),n=p3(),{item:i}=gg(t),a=ke(()=>wg(i.value.link)),o=ke(()=>!a.value&&$U(i.value.link)),s=ke(()=>{if(!o.value){if(i.value.target)return i.value.target;if(a.value)return"_blank"}}),c=ke(()=>s.value==="_blank"),f=ke(()=>!a.value&&!o.value&&!c.value),p=ke(()=>{if(!o.value){if(i.value.rel)return i.value.rel;if(c.value)return"noopener noreferrer"}}),v=ke(()=>i.value.ariaLabel||i.value.text),y=ke(()=>{const E=Object.keys(n.value.locales);return E.length?!E.some(P=>P===i.value.link):i.value.link!=="/"}),_=ke(()=>y.value?r.path.startsWith(i.value.link):!1),S=ke(()=>f.value?i.value.activeMatch?new RegExp(i.value.activeMatch).test(r.path):_.value:!1);return(E,P)=>{const I=gn("RouteLink"),D=gn("AutoLinkExternalIcon");return f.value?(rt(),Sn(I,N0({key:0,active:S.value,to:Kt(i).link,"aria-label":v.value},E.$attrs),{default:Jr(()=>[fn(E.$slots,"before"),Os(" "+br(Kt(i).text)+" ",1),fn(E.$slots,"after")]),_:3},16,["active","to","aria-label"])):(rt(),Ct("a",N0({key:1,class:"external-link",href:Kt(i).link,rel:p.value,target:s.value,"aria-label":v.value},E.$attrs),[fn(E.$slots,"before"),Os(" "+br(Kt(i).text)+" ",1),c.value?(rt(),Sn(D,{key:0})):Hr("",!0),fn(E.$slots,"after")],16,YW))}}}),Tl=Dr(KW,[["__file","AutoLink.vue"]]),JW={class:"hero"},QW={key:0,id:"main-title"},eq={key:1,class:"description"},tq={key:2,class:"actions"},rq=Jt({__name:"HomeHero",setup(e){const t=Ds(),r=VC(),n=qC(),i=ke(()=>n.value&&t.value.heroImageDark!==void 0?t.value.heroImageDark:t.value.heroImage),a=ke(()=>t.value.heroAlt||s.value||"hero"),o=ke(()=>t.value.heroHeight||280),s=ke(()=>t.value.heroText===null?null:t.value.heroText||r.value.title||"Hello"),c=ke(()=>t.value.tagline===null?null:t.value.tagline||r.value.description||"Welcome to your VuePress site"),f=ke(()=>Array.isArray(t.value.actions)?t.value.actions.map(({text:v,link:y,type:_="primary"})=>({text:v,link:y,type:_})):[]),p=()=>{if(!i.value)return null;const v=Tr("img",{src:Sg(i.value),alt:a.value,height:o.value});return t.value.heroImageDark===void 0?v:Tr(UC,()=>v)};return(v,y)=>(rt(),Ct("header",JW,[De(p),s.value?(rt(),Ct("h1",QW,br(s.value),1)):Hr("",!0),c.value?(rt(),Ct("p",eq,br(c.value),1)):Hr("",!0),f.value.length?(rt(),Ct("p",tq,[(rt(!0),Ct(Mr,null,Aa(f.value,_=>(rt(),Sn(Tl,{key:_.text,class:Vi(["action-button",[_.type]]),item:_},null,8,["class","item"]))),128))])):Hr("",!0)]))}}),nq=Dr(rq,[["__file","HomeHero.vue"]]),iq={class:"home"},aq=Jt({__name:"Home",setup(e){return(t,r)=>(rt(),Ct("main",iq,[De(nq),De(GW),De(HW),De(XW)]))}}),oq=Dr(aq,[["__file","Home.vue"]]),sq=["aria-hidden"],lq=Jt({__name:"NavbarBrand",setup(e){const t=Zd(),r=VC(),n=$i(),i=qC(),a=ke(()=>n.value.home||t.value),o=ke(()=>r.value.title),s=ke(()=>i.value&&n.value.logoDark!==void 0?n.value.logoDark:n.value.logo),c=ke(()=>n.value.logoAlt??o.value),f=ke(()=>o.value.toLocaleUpperCase().trim()===c.value.toLocaleUpperCase().trim()),p=()=>{if(!s.value)return null;const v=Tr("img",{class:"logo",src:Sg(s.value),alt:c.value});return n.value.logoDark===void 0?v:Tr(UC,()=>v)};return(v,y)=>(rt(),Sn(Kt(Xd),{to:a.value},{default:Jr(()=>[De(p),o.value?(rt(),Ct("span",{key:0,class:Vi(["site-name",{"can-hide":s.value}]),"aria-hidden":f.value},br(o.value),11,sq)):Hr("",!0)]),_:1},8,["to"]))}}),uq=Dr(lq,[["__file","NavbarBrand.vue"]]),cq=Jt({__name:"DropdownTransition",setup(e){const t=n=>{n.style.height=n.scrollHeight+"px"},r=n=>{n.style.height=""};return(n,i)=>(rt(),Sn(Rl,{name:"dropdown",onEnter:t,onAfterEnter:r,onBeforeLeave:t},{default:Jr(()=>[fn(n.$slots,"default")]),_:3}))}}),R3=Dr(cq,[["__file","DropdownTransition.vue"]]),hq=["aria-label"],fq={class:"title"},dq=Nt("span",{class:"arrow down"},null,-1),pq=["aria-label"],mq={class:"title"},vq={class:"navbar-dropdown"},gq={class:"navbar-dropdown-subtitle"},yq={key:1},_q={class:"navbar-dropdown-subitem-wrapper"},bq=Jt({__name:"NavbarDropdown",props:{item:{type:Object,required:!0}},setup(e){const t=e,{item:r}=gg(t),n=ke(()=>r.value.ariaLabel||r.value.text),i=tr(!1),a=Gu();zr(()=>a.path,()=>{i.value=!1});const o=c=>{c.detail===0?i.value=!i.value:i.value=!1},s=(c,f)=>f[f.length-1]===c;return(c,f)=>(rt(),Ct("div",{class:Vi(["navbar-dropdown-wrapper",{open:i.value}])},[Nt("button",{class:"navbar-dropdown-title",type:"button","aria-label":n.value,onClick:o},[Nt("span",fq,br(Kt(r).text),1),dq],8,hq),Nt("button",{class:"navbar-dropdown-title-mobile",type:"button","aria-label":n.value,onClick:f[0]||(f[0]=p=>i.value=!i.value)},[Nt("span",mq,br(Kt(r).text),1),Nt("span",{class:Vi(["arrow",i.value?"down":"right"])},null,2)],8,pq),De(R3,null,{default:Jr(()=>[B0(Nt("ul",vq,[(rt(!0),Ct(Mr,null,Aa(Kt(r).children,p=>(rt(),Ct("li",{key:p.text,class:"navbar-dropdown-item"},[p.children?(rt(),Ct(Mr,{key:0},[Nt("h4",gq,[p.link?(rt(),Sn(Tl,{key:0,item:p,onFocusout:v=>s(p,Kt(r).children)&&p.children.length===0&&(i.value=!1)},null,8,["item","onFocusout"])):(rt(),Ct("span",yq,br(p.text),1))]),Nt("ul",_q,[(rt(!0),Ct(Mr,null,Aa(p.children,v=>(rt(),Ct("li",{key:v.link,class:"navbar-dropdown-subitem"},[De(Tl,{item:v,onFocusout:y=>s(v,p.children)&&s(p,Kt(r).children)&&(i.value=!1)},null,8,["item","onFocusout"])]))),128))])],64)):(rt(),Sn(Tl,{key:1,item:p,onFocusout:v=>s(p,Kt(r).children)&&(i.value=!1)},null,8,["item","onFocusout"]))]))),128))],512),[[H0,i.value]])]),_:1})],2))}}),xq=Dr(bq,[["__file","NavbarDropdown.vue"]]),wq=["aria-label"],Sq=Jt({__name:"NavbarItems",setup(e){const t=()=>{const v=Gu(),y=LG(),_=Zd(),S=p3(),E=VC(),P=TW(),I=$i();return ke(()=>{const D=Object.keys(S.value.locales);if(D.length<2)return[];const L=v.path,B=v.fullPath;return[{text:`${I.value.selectLanguageText}`,ariaLabel:`${I.value.selectLanguageAriaLabel??I.value.selectLanguageText}`,children:D.map(V=>{var X,ne;const N=((X=S.value.locales)==null?void 0:X[V])??{},G=((ne=P.value.locales)==null?void 0:ne[V])??{},Y=`${N.lang}`,ee=G.selectLanguageName??Y;let J;if(Y===E.value.lang)J=B;else{const we=L.replace(_.value,V);y.value.some(fe=>fe===we)?J=B.replace(L,we):J=G.home??V}return{text:ee,link:J}})}]})},r=()=>{const v=$i(),y=ke(()=>v.value.repo),_=ke(()=>y.value?P3(y.value):null),S=ke(()=>y.value&&!wg(y.value)?`https://github.com/${y.value}`:y.value),E=ke(()=>S.value?v.value.repoLabel?v.value.repoLabel:_.value===null?"Source":_.value:null);return ke(()=>!S.value||!E.value?[]:[{text:E.value,link:S.value}])},n=v=>Sl(v)?ZC(v):v.children?{...v,children:v.children.map(y=>n(y))}:v,i=()=>{const v=$i();return ke(()=>(v.value.navbar||[]).map(y=>n(y)))},a=tr(!1),o=i(),s=t(),c=r(),f=ke(()=>[...o.value,...s.value,...c.value]);k3(Bv.MOBILE,v=>{window.innerWidth<v?a.value=!0:a.value=!1});const p=ke(()=>$i().value.navbarLabel??"site navigation");return(v,y)=>f.value.length?(rt(),Ct("nav",{key:0,class:"navbar-items","aria-label":p.value},[(rt(!0),Ct(Mr,null,Aa(f.value,_=>(rt(),Ct("div",{key:_.text,class:"navbar-item"},["children"in _?(rt(),Sn(xq,{key:0,item:_,class:Vi(a.value?"mobile":"")},null,8,["item","class"])):(rt(),Sn(Tl,{key:1,item:_},null,8,["item"]))]))),128))],8,wq)):Hr("",!0)}}),O3=Dr(Sq,[["__file","NavbarItems.vue"]]),Tq=["title"],Cq={class:"icon",focusable:"false",viewBox:"0 0 32 32"},Aq=j7('<path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path>',9),Mq=[Aq],Eq={class:"icon",focusable:"false",viewBox:"0 0 32 32"},Pq=Nt("path",{d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z",fill:"currentColor"},null,-1),Iq=[Pq],Dq=Jt({__name:"ToggleColorModeButton",setup(e){const t=$i(),r=qC(),n=()=>{r.value=!r.value};return(i,a)=>(rt(),Ct("button",{class:"toggle-color-mode-button",title:Kt(t).toggleColorMode,onClick:n},[B0((rt(),Ct("svg",Cq,Mq,512)),[[H0,!Kt(r)]]),B0((rt(),Ct("svg",Eq,Iq,512)),[[H0,Kt(r)]])],8,Tq))}}),Lq=Dr(Dq,[["__file","ToggleColorModeButton.vue"]]),kq=["title"],Rq=Nt("div",{class:"icon","aria-hidden":"true"},[Nt("span"),Nt("span"),Nt("span")],-1),Oq=[Rq],zq=Jt({__name:"ToggleSidebarButton",emits:["toggle"],setup(e){const t=$i();return(r,n)=>(rt(),Ct("div",{class:"toggle-sidebar-button",title:Kt(t).toggleSidebar,"aria-expanded":"false",role:"button",tabindex:"0",onClick:n[0]||(n[0]=i=>r.$emit("toggle"))},Oq,8,kq))}}),Bq=Dr(zq,[["__file","ToggleSidebarButton.vue"]]),Fq=Jt({__name:"Navbar",emits:["toggle-sidebar"],setup(e){const t=$i(),r=tr(null),n=tr(null),i=tr(0),a=ke(()=>i.value?{maxWidth:i.value+"px"}:{});k3(Bv.MOBILE,s=>{var f;const c=o(r.value,"paddingLeft")+o(r.value,"paddingRight");window.innerWidth<s?i.value=0:i.value=r.value.offsetWidth-c-(((f=n.value)==null?void 0:f.offsetWidth)||0)});function o(s,c){var v,y,_;const f=(_=(y=(v=s==null?void 0:s.ownerDocument)==null?void 0:v.defaultView)==null?void 0:y.getComputedStyle(s,null))==null?void 0:_[c],p=Number.parseInt(f,10);return Number.isNaN(p)?0:p}return(s,c)=>{const f=gn("NavbarSearch");return rt(),Ct("header",{ref_key:"navbar",ref:r,class:"navbar"},[De(Bq,{onToggle:c[0]||(c[0]=p=>s.$emit("toggle-sidebar"))}),Nt("span",{ref_key:"navbarBrand",ref:n},[De(uq)],512),Nt("div",{class:"navbar-items-wrapper",style:Wd(a.value)},[fn(s.$slots,"before"),De(O3,{class:"can-hide"}),fn(s.$slots,"after"),Kt(t).colorModeSwitch?(rt(),Sn(Lq,{key:0})):Hr("",!0),De(f)],4)],512)}}}),$q=Dr(Fq,[["__file","Navbar.vue"]]),Nq={class:"page-meta"},Vq={key:0,class:"meta-item edit-link"},Hq={key:1,class:"meta-item last-updated"},Uq={class:"meta-item-label"},jq={class:"meta-item-info"},Gq={key:2,class:"meta-item contributors"},Wq={class:"meta-item-label"},qq={class:"meta-item-info"},Zq=["title"],Xq=Jt({__name:"PageMeta",setup(e){const t=()=>{const c=$i(),f=hh(),p=Ds();return ke(()=>{if(!(p.value.editLink??c.value.editLink??!0))return null;const{repo:y,docsRepo:_=y,docsBranch:S="main",docsDir:E="",editLinkText:P}=c.value;if(!_)return null;const I=DW({docsRepo:_,docsBranch:S,docsDir:E,filePathRelative:f.value.filePathRelative,editLinkPattern:p.value.editLinkPattern??c.value.editLinkPattern});return I?{text:P??"Edit this page",link:I}:null})},r=()=>{const c=$i(),f=hh(),p=Ds();return ke(()=>{var _,S;return!(p.value.lastUpdated??c.value.lastUpdated??!0)||!((_=f.value.git)!=null&&_.updatedTime)?null:new Date((S=f.value.git)==null?void 0:S.updatedTime).toLocaleString()})},n=()=>{const c=$i(),f=hh(),p=Ds();return ke(()=>{var y;return p.value.contributors??c.value.contributors??!0?((y=f.value.git)==null?void 0:y.contributors)??null:null})},i=$i(),a=t(),o=r(),s=n();return(c,f)=>{const p=gn("ClientOnly");return rt(),Ct("footer",Nq,[Kt(a)?(rt(),Ct("div",Vq,[De(Tl,{class:"meta-item-label",item:Kt(a)},null,8,["item"])])):Hr("",!0),Kt(o)?(rt(),Ct("div",Hq,[Nt("span",Uq,br(Kt(i).lastUpdatedText)+": ",1),De(p,null,{default:Jr(()=>[Nt("span",jq,br(Kt(o)),1)]),_:1})])):Hr("",!0),Kt(s)&&Kt(s).length?(rt(),Ct("div",Gq,[Nt("span",Wq,br(Kt(i).contributorsText)+": ",1),Nt("span",qq,[(rt(!0),Ct(Mr,null,Aa(Kt(s),(v,y)=>(rt(),Ct(Mr,{key:y},[Nt("span",{class:"contributor",title:`email: ${v.email}`},br(v.name),9,Zq),y!==Kt(s).length-1?(rt(),Ct(Mr,{key:0},[Os(", ")],64)):Hr("",!0)],64))),128))])])):Hr("",!0)])}}}),Yq=Dr(Xq,[["__file","PageMeta.vue"]]),Kq=["aria-label"],Jq={class:"inner"},Qq={key:0,class:"prev"},eZ={key:1,class:"next"},tZ=Jt({__name:"PageNav",setup(e){const t=(p,v)=>v===!1?null:Sl(v)?ZC(p):BC(v)?v:!1,r=(p,v,y)=>{const _=p.findIndex(S=>S.link===v);if(_!==-1){const S=p[_+y];return S!=null&&S.link?S:null}for(const S of p)if(S.children){const E=r(S.children,v,y);if(E)return E}return null},n=Ds(),i=XC(),a=Gu(),o=Dh(),s=ke(()=>{const p=t(o,n.value.prev);return p!==!1?p:r(i.value,a.path,-1)}),c=ke(()=>{const p=t(o,n.value.next);return p!==!1?p:r(i.value,a.path,1)}),f=ke(()=>$i().value.pageNavbarLabel??"page navigation");return(p,v)=>s.value||c.value?(rt(),Ct("nav",{key:0,class:"page-nav","aria-label":f.value},[Nt("p",Jq,[s.value?(rt(),Ct("span",Qq,[De(Tl,{item:s.value},null,8,["item"])])):Hr("",!0),c.value?(rt(),Ct("span",eZ,[De(Tl,{item:c.value},null,8,["item"])])):Hr("",!0)])],8,Kq)):Hr("",!0)}}),rZ=Dr(tZ,[["__file","PageNav.vue"]]),nZ={class:"page"},iZ={class:"theme-default-content"},aZ=Jt({__name:"Page",setup(e){return(t,r)=>{const n=gn("Content");return rt(),Ct("main",nZ,[fn(t.$slots,"top"),Nt("div",iZ,[fn(t.$slots,"content-top"),De(n),fn(t.$slots,"content-bottom")]),De(Yq),De(rZ),fn(t.$slots,"bottom")])}}}),oZ=Dr(aZ,[["__file","Page.vue"]]),sZ={class:"sidebar-item-children"},lZ=Jt({__name:"SidebarItem",props:{item:{type:Object,required:!0},depth:{type:Number,required:!1,default:0}},setup(e){const t=e,{item:r,depth:n}=gg(t),i=Gu(),a=Dh(),o=ke(()=>E3(r.value,i)),s=ke(()=>({"sidebar-item":!0,"sidebar-heading":n.value===0,active:o.value,collapsible:r.value.collapsible})),c=ke(()=>r.value.collapsible?o.value:!0),[f,p]=dG(c.value),v=_=>{r.value.collapsible&&(_.preventDefault(),p())},y=a.afterEach(_=>{Oo(()=>{f.value=c.value})});return ju(()=>{y()}),(_,S)=>{var P;const E=gn("SidebarItem",!0);return rt(),Ct("li",null,[Kt(r).link?(rt(),Sn(Tl,{key:0,class:Vi(s.value),item:Kt(r)},null,8,["class","item"])):(rt(),Ct("p",{key:1,tabindex:"0",class:Vi(s.value),onClick:v,onKeydown:PU(v,["enter"])},[Os(br(Kt(r).text)+" ",1),Kt(r).collapsible?(rt(),Ct("span",{key:0,class:Vi(["arrow",Kt(f)?"down":"right"])},null,2)):Hr("",!0)],34)),(P=Kt(r).children)!=null&&P.length?(rt(),Sn(R3,{key:2},{default:Jr(()=>[B0(Nt("ul",sZ,[(rt(!0),Ct(Mr,null,Aa(Kt(r).children,I=>(rt(),Sn(E,{key:`${Kt(n)}${I.text}${I.link}`,item:I,depth:Kt(n)+1},null,8,["item","depth"]))),128))],512),[[H0,Kt(f)]])]),_:1})):Hr("",!0)])}}}),uZ=Dr(lZ,[["__file","SidebarItem.vue"]]),cZ={key:0,class:"sidebar-items"},hZ=Jt({__name:"SidebarItems",setup(e){const t=Gu(),r=XC();return On(()=>{zr(()=>t.hash,n=>{const i=document.querySelector(".sidebar");if(!i)return;const a=document.querySelector(`.sidebar a.sidebar-item[href="${t.path}${n}"]`);if(!a)return;const{top:o,height:s}=i.getBoundingClientRect(),{top:c,height:f}=a.getBoundingClientRect();c<o?a.scrollIntoView(!0):c+f>o+s&&a.scrollIntoView(!1)})}),(n,i)=>Kt(r).length?(rt(),Ct("ul",cZ,[(rt(!0),Ct(Mr,null,Aa(Kt(r),a=>(rt(),Sn(uZ,{key:`${a.text}${a.link}`,item:a},null,8,["item"]))),128))])):Hr("",!0)}}),fZ=Dr(hZ,[["__file","SidebarItems.vue"]]),dZ={class:"sidebar"},pZ=Jt({__name:"Sidebar",setup(e){return(t,r)=>(rt(),Ct("aside",dZ,[De(O3),fn(t.$slots,"top"),De(fZ),fn(t.$slots,"bottom")]))}}),mZ=Dr(pZ,[["__file","Sidebar.vue"]]),vZ=Jt({__name:"Layout",setup(e){const t=hh(),r=Ds(),n=$i(),i=ke(()=>r.value.navbar!==!1&&n.value.navbar!==!1),a=XC(),o=tr(!1),s=P=>{o.value=typeof P=="boolean"?P:!o.value},c={x:0,y:0},f=P=>{c.x=P.changedTouches[0].clientX,c.y=P.changedTouches[0].clientY},p=P=>{const I=P.changedTouches[0].clientX-c.x,D=P.changedTouches[0].clientY-c.y;Math.abs(I)>Math.abs(D)&&Math.abs(I)>40&&(I>0&&c.x<=80?s(!0):s(!1))},v=ke(()=>[{"no-navbar":!i.value,"no-sidebar":!a.value.length,"sidebar-open":o.value},r.value.pageClass]);let y;On(()=>{y=Dh().afterEach(()=>{s(!1)})}),qd(()=>{y()});const _=M3(),S=_.resolve,E=_.pending;return(P,I)=>(rt(),Ct("div",{class:Vi(["theme-container",v.value]),onTouchstart:f,onTouchend:p},[fn(P.$slots,"navbar",{},()=>[i.value?(rt(),Sn($q,{key:0,onToggleSidebar:s},{before:Jr(()=>[fn(P.$slots,"navbar-before")]),after:Jr(()=>[fn(P.$slots,"navbar-after")]),_:3})):Hr("",!0)]),Nt("div",{class:"sidebar-mask",onClick:I[0]||(I[0]=D=>s(!1))}),fn(P.$slots,"sidebar",{},()=>[De(mZ,null,{top:Jr(()=>[fn(P.$slots,"sidebar-top")]),bottom:Jr(()=>[fn(P.$slots,"sidebar-bottom")]),_:3})]),fn(P.$slots,"page",{},()=>[Kt(r).home?(rt(),Sn(oq,{key:0})):(rt(),Sn(Rl,{key:1,name:"fade-slide-y",mode:"out-in",onBeforeEnter:Kt(S),onBeforeLeave:Kt(E)},{default:Jr(()=>[(rt(),Sn(oZ,{key:Kt(t).path},{top:Jr(()=>[fn(P.$slots,"page-top")]),"content-top":Jr(()=>[fn(P.$slots,"page-content-top")]),"content-bottom":Jr(()=>[fn(P.$slots,"page-content-bottom")]),bottom:Jr(()=>[fn(P.$slots,"page-bottom")]),_:3}))]),_:3},8,["onBeforeEnter","onBeforeLeave"]))])],34))}}),gZ=Dr(vZ,[["__file","Layout.vue"]]),yZ={class:"theme-container"},_Z={class:"page"},bZ={class:"theme-default-content"},xZ=Nt("h1",null,"404",-1),wZ=Jt({__name:"NotFound",setup(e){const t=Zd(),r=$i(),n=r.value.notFound??["Not Found"],i=()=>n[Math.floor(Math.random()*n.length)],a=r.value.home??t.value,o=r.value.backToHome??"Back to home";return(s,c)=>(rt(),Ct("div",yZ,[Nt("main",_Z,[Nt("div",bZ,[xZ,Nt("blockquote",null,br(i()),1),De(Kt(Xd),{to:Kt(a)},{default:Jr(()=>[Os(br(Kt(o)),1)]),_:1},8,["to"])])])]))}}),SZ=Dr(wZ,[["__file","NotFound.vue"]]),TZ=zo({enhance({app:e,router:t}){cw("Badge")||e.component("Badge",bW),cw("CodeGroup")||e.component("CodeGroup",xW),cw("CodeGroupItem")||e.component("CodeGroupItem",SW),e.component("AutoLinkExternalIcon",()=>{const n=e.component("ExternalLinkIcon");return n?Tr(n):null}),e.component("NavbarSearch",()=>{const n=e.component("Docsearch")||e.component("SearchBox");return n?Tr(n):null});const r=t.options.scrollBehavior;t.options.scrollBehavior=async(...n)=>(await M3().wait(),r(...n))},setup(){CW(),LW()},layouts:{Layout:gZ,NotFound:SZ}}),CZ=e=>{const t=El("keydown",r=>{const n=r.key==="k"&&(r.ctrlKey||r.metaKey);!(r.key==="/")&&!n||(r.preventDefault(),e(),t())})};function AZ(e,t,r){var n,i,a;t===void 0&&(t=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,s=(i=r.callback)!=null&&i,c=r.maxWait,f=Date.now(),p=[];function v(){if(c!==void 0){var _=Date.now()-f;if(_+t>=c)return c-_}return t}var y=function(){var _=[].slice.call(arguments),S=this;return new Promise(function(E,P){var I=o&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,f=Date.now(),!o){var L=e.apply(S,_);s&&s(L),p.forEach(function(B){return(0,B.resolve)(L)}),p=[]}},v()),I){var D=e.apply(S,_);return s&&s(D),E(D)}p.push({resolve:E,reject:P})})};return y.cancel=function(_){a!==void 0&&clearTimeout(a),p.forEach(function(S){return(0,S.reject)(_)}),p=[]},y}const MZ=e=>e.button===1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,EZ=()=>{const e=Dh();return{hitComponent:({hit:t,children:r})=>({type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:t.url,onClick:n=>{MZ(n)||(n.preventDefault(),e.push(MI(t.url,"/")))},children:r},__v:null}),navigator:{navigate:({itemUrl:t})=>{e.push(MI(t,"/"))}},transformSearchClient:t=>{const r=AZ(t.search,500);return{...t,search:async(...n)=>r(...n)}}}},PZ=(e=[],t)=>[`lang:${t}`,...Array.isArray(e)?e:[e]],IZ=({buttonText:e="Search",buttonAriaLabel:t=e}={})=>`<button type="button" class="DocSearch DocSearch-Button" aria-label="${t}"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">${e}</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button>`,DZ=16,z3=()=>{if(document.querySelector(".DocSearch-Modal"))return;const e=new Event("keydown");e.key="k",e.metaKey=!0,window.dispatchEvent(e),setTimeout(z3,DZ)},LZ=e=>{const t="algolia-preconnect";(window.requestIdleCallback||setTimeout)(()=>{if(document.head.querySelector(`#${t}`))return;const n=document.createElement("link");n.id=t,n.rel="preconnect",n.href=`https://${e}-dsn.algolia.net`,n.crossOrigin="",document.head.appendChild(n)})};var kZ={appId:"51MD42WJ9Y",apiKey:"9b4e38ac3e880ab6800175b16f674d78",indexName:"sustech",locales:{"/":{placeholder:"搜索手册",translations:{button:{buttonText:"搜索手册",buttonAriaLabel:"搜索手册"},modal:{searchBox:{resetButtonTitle:"清除查询条件",resetButtonAriaLabel:"清除查询条件",cancelButtonText:"取消",cancelButtonAriaLabel:"取消"},startScreen:{recentSearchesTitle:"搜索历史",noRecentSearchesText:"没有搜索历史",saveRecentSearchButtonTitle:"保存至搜索历史",removeRecentSearchButtonTitle:"从搜索历史中移除",favoriteSearchesTitle:"收藏",removeFavoriteSearchButtonTitle:"从收藏中移除"},errorScreen:{titleText:"无法获取结果",helpText:"你可能需要检查你的网络连接"},footer:{selectText:"选择",navigateText:"切换",closeText:"关闭",searchByText:"搜索提供者"},noResultsScreen:{noResultsText:"无法找到相关结果",suggestedQueryText:"你可以尝试查询",reportMissingResultsText:"你认为该查询应该有结果？",reportMissingResultsLinkText:"点击反馈"}}}}}};const RZ=kZ;St(()=>import("./style-w40geAFS.js"),__vite__mapDeps([])),St(()=>import("./docsearch-w40geAFS.js"),__vite__mapDeps([]));const OZ=Jt({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!1,default:()=>RZ}},setup(e){const t=EZ(),r=d3(),n=Zd(),i=tr(!1),a=tr(!1),o=ke(()=>{var f;return{...e.options,...(f=e.options.locales)==null?void 0:f[n.value]}}),s=async()=>{var p;const{default:f}=await St(()=>import("./index-QOy62Fup.js"),__vite__mapDeps([]));f({...t,...o.value,container:`#${e.containerId}`,searchParameters:{...o.value.searchParameters,facetFilters:PZ((p=o.value.searchParameters)==null?void 0:p.facetFilters,r.value)}}),i.value=!0},c=()=>{a.value||i.value||(a.value=!0,s(),z3(),zr(n,s))};return CZ(c),On(()=>LZ(o.value.appId)),()=>{var f;return[Tr("div",{id:e.containerId,style:{display:i.value?"block":"none"}}),i.value?null:Tr("div",{onClick:c,innerHTML:IZ((f=o.value.translations)==null?void 0:f.button)})]}}}),zZ=zo({enhance({app:e}){e.component("Docsearch",OZ)}});function BZ(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}const FZ=Symbol("pwaEvent"),$Z="service-worker.js",NZ=zo({setup(){const e=(...r)=>console.log("[@vuepress/plugin-pwa]",...r),t=BZ();Hi(FZ,t),On(async()=>{const{register:r}=await St(()=>import("./index-7SG8bi1h.js"),__vite__mapDeps([]));r(Sg($Z),{ready(n){e("Service worker is active."),t.emit("ready",n)},registered(n){e("Service worker has been registered."),t.emit("registered",n)},cached(n){e("Content has been cached for offline use."),t.emit("cached",n)},updatefound(n){e("New content is downloading."),t.emit("updatefound",n)},updated(n){e("New content is available, please refresh."),t.emit("updated",n)},offline(){e("No internet connection found. App is running in offline mode."),t.emit("offline")},error(n){e("Error during service worker registration:",n),t.emit("error",n)}})})}}),VZ=(e,t,r)=>{const n=`#${e.slug}`,i=[t.linkClass];return t.linkActiveClass&&r.hash===n&&i.push(t.linkActiveClass),t.linkChildrenActiveClass&&e.children.some(a=>`#${a.slug}`===r.hash)&&i.push(t.linkChildrenActiveClass),t.linkTag==="RouteLink"?Tr(Xd,{to:n,class:i,ariaLabel:e.title},()=>e.title):t.linkTag==="RouterLink"?Tr(f3,{to:n,class:i,ariaLabel:e.title},()=>e.title):Tr("a",{href:n,class:i,ariaLabel:e.title},e.title)},B3=(e,t,r)=>e.length===0?[]:[Tr("ul",{class:t.listClass},e.map(n=>Tr("li",{class:t.itemClass},[VZ(n,t,r),B3(n.children,t,r)])))],HZ=Jt({name:"Toc",props:{headers:{type:Array,required:!1,default:null},options:{type:Object,required:!1,default:()=>({})}},setup(e){const{headers:t,options:r}=gg(e),n=Gu(),i=hh(),a=ke(()=>{var c;const s=t.value||i.value.headers;return((c=s[0])==null?void 0:c.level)===1?s[0].children:s}),o=ke(()=>({containerTag:"nav",containerClass:"vuepress-toc",listClass:"vuepress-toc-list",itemClass:"vuepress-toc-item",linkTag:"RouteLink",linkClass:"vuepress-toc-link",linkActiveClass:"active",linkChildrenActiveClass:"active",...r.value}));return()=>{const s=B3(a.value,o.value,n);return o.value.containerTag?Tr(o.value.containerTag,{class:o.value.containerClass},s):s}}});var UZ={};const jZ=UZ,GZ=zo({enhance({app:e}){e.component("Toc",t=>Tr(HZ,{headers:t.headers,options:{...jZ,...t.options}}))}});function F3(e,t){return function(){return e.apply(t,arguments)}}const{toString:WZ}=Object.prototype,{getPrototypeOf:KC}=Object,q1=(e=>t=>{const r=WZ.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ns=e=>(e=e.toLowerCase(),t=>q1(t)===e),Z1=e=>t=>typeof t===e,{isArray:Yd}=Array,Fv=Z1("undefined");function qZ(e){return e!==null&&!Fv(e)&&e.constructor!==null&&!Fv(e.constructor)&&Eo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $3=Ns("ArrayBuffer");function ZZ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&$3(e.buffer),t}const XZ=Z1("string"),Eo=Z1("function"),N3=Z1("number"),X1=e=>e!==null&&typeof e=="object",YZ=e=>e===!0||e===!1,o0=e=>{if(q1(e)!=="object")return!1;const t=KC(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},KZ=Ns("Date"),JZ=Ns("File"),QZ=Ns("Blob"),eX=Ns("FileList"),tX=e=>X1(e)&&Eo(e.pipe),rX=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Eo(e.append)&&((t=q1(e))==="formdata"||t==="object"&&Eo(e.toString)&&e.toString()==="[object FormData]"))},nX=Ns("URLSearchParams"),iX=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tg(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Yd(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(n=0;n<o;n++)s=a[n],t.call(null,e[s],s,e)}}function V3(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const H3=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U3=e=>!Fv(e)&&e!==H3;function M2(){const{caseless:e}=U3(this)&&this||{},t={},r=(n,i)=>{const a=e&&V3(t,i)||i;o0(t[a])&&o0(n)?t[a]=M2(t[a],n):o0(n)?t[a]=M2({},n):Yd(n)?t[a]=n.slice():t[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Tg(arguments[n],r);return t}const aX=(e,t,r,{allOwnKeys:n}={})=>(Tg(t,(i,a)=>{r&&Eo(i)?e[a]=F3(i,r):e[a]=i},{allOwnKeys:n}),e),oX=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),sX=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},lX=(e,t,r,n)=>{let i,a,o;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!n||n(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=r!==!1&&KC(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},uX=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},cX=e=>{if(!e)return null;if(Yd(e))return e;let t=e.length;if(!N3(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},hX=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&KC(Uint8Array)),fX=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},dX=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},pX=Ns("HTMLFormElement"),mX=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),eD=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),vX=Ns("RegExp"),j3=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Tg(r,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(n[a]=o||i)}),Object.defineProperties(e,n)},gX=e=>{j3(e,(t,r)=>{if(Eo(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Eo(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},yX=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return Yd(e)?n(e):n(String(e).split(t)),r},_X=()=>{},bX=(e,t)=>(e=+e,Number.isFinite(e)?e:t),pw="abcdefghijklmnopqrstuvwxyz",tD="0123456789",G3={DIGIT:tD,ALPHA:pw,ALPHA_DIGIT:pw+pw.toUpperCase()+tD},xX=(e=16,t=G3.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function wX(e){return!!(e&&Eo(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const SX=e=>{const t=new Array(10),r=(n,i)=>{if(X1(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const a=Yd(n)?[]:{};return Tg(n,(o,s)=>{const c=r(o,i+1);!Fv(c)&&(a[s]=c)}),t[i]=void 0,a}}return n};return r(e,0)},TX=Ns("AsyncFunction"),CX=e=>e&&(X1(e)||Eo(e))&&Eo(e.then)&&Eo(e.catch),tt={isArray:Yd,isArrayBuffer:$3,isBuffer:qZ,isFormData:rX,isArrayBufferView:ZZ,isString:XZ,isNumber:N3,isBoolean:YZ,isObject:X1,isPlainObject:o0,isUndefined:Fv,isDate:KZ,isFile:JZ,isBlob:QZ,isRegExp:vX,isFunction:Eo,isStream:tX,isURLSearchParams:nX,isTypedArray:hX,isFileList:eX,forEach:Tg,merge:M2,extend:aX,trim:iX,stripBOM:oX,inherits:sX,toFlatObject:lX,kindOf:q1,kindOfTest:Ns,endsWith:uX,toArray:cX,forEachEntry:fX,matchAll:dX,isHTMLForm:pX,hasOwnProperty:eD,hasOwnProp:eD,reduceDescriptors:j3,freezeMethods:gX,toObjectSet:yX,toCamelCase:mX,noop:_X,toFiniteNumber:bX,findKey:V3,global:H3,isContextDefined:U3,ALPHABET:G3,generateString:xX,isSpecCompliantForm:wX,toJSONObject:SX,isAsyncFn:TX,isThenable:CX};function Or(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}tt.inherits(Or,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const W3=Or.prototype,q3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{q3[e]={value:e}});Object.defineProperties(Or,q3);Object.defineProperty(W3,"isAxiosError",{value:!0});Or.from=(e,t,r,n,i,a)=>{const o=Object.create(W3);return tt.toFlatObject(e,o,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),Or.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const AX=null;function E2(e){return tt.isPlainObject(e)||tt.isArray(e)}function Z3(e){return tt.endsWith(e,"[]")?e.slice(0,-2):e}function rD(e,t,r){return e?e.concat(t).map(function(i,a){return i=Z3(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function MX(e){return tt.isArray(e)&&!e.some(E2)}const EX=tt.toFlatObject(tt,{},null,function(t){return/^is[A-Z]/.test(t)});function Y1(e,t,r){if(!tt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=tt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,P){return!tt.isUndefined(P[E])});const n=r.metaTokens,i=r.visitor||p,a=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&tt.isSpecCompliantForm(t);if(!tt.isFunction(i))throw new TypeError("visitor must be a function");function f(S){if(S===null)return"";if(tt.isDate(S))return S.toISOString();if(!c&&tt.isBlob(S))throw new Or("Blob is not supported. Use a Buffer instead.");return tt.isArrayBuffer(S)||tt.isTypedArray(S)?c&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function p(S,E,P){let I=S;if(S&&!P&&typeof S=="object"){if(tt.endsWith(E,"{}"))E=n?E:E.slice(0,-2),S=JSON.stringify(S);else if(tt.isArray(S)&&MX(S)||(tt.isFileList(S)||tt.endsWith(E,"[]"))&&(I=tt.toArray(S)))return E=Z3(E),I.forEach(function(L,B){!(tt.isUndefined(L)||L===null)&&t.append(o===!0?rD([E],B,a):o===null?E:E+"[]",f(L))}),!1}return E2(S)?!0:(t.append(rD(P,E,a),f(S)),!1)}const v=[],y=Object.assign(EX,{defaultVisitor:p,convertValue:f,isVisitable:E2});function _(S,E){if(!tt.isUndefined(S)){if(v.indexOf(S)!==-1)throw Error("Circular reference detected in "+E.join("."));v.push(S),tt.forEach(S,function(I,D){(!(tt.isUndefined(I)||I===null)&&i.call(t,I,tt.isString(D)?D.trim():D,E,y))===!0&&_(I,E?E.concat(D):[D])}),v.pop()}}if(!tt.isObject(e))throw new TypeError("data must be an object");return _(e),t}function nD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function JC(e,t){this._pairs=[],e&&Y1(e,this,t)}const X3=JC.prototype;X3.append=function(t,r){this._pairs.push([t,r])};X3.toString=function(t){const r=t?function(n){return t.call(this,n,nD)}:nD;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function PX(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Y3(e,t,r){if(!t)return e;const n=r&&r.encode||PX,i=r&&r.serialize;let a;if(i?a=i(t,r):a=tt.isURLSearchParams(t)?t.toString():new JC(t,r).toString(n),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class iD{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){tt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const K3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IX=typeof URLSearchParams<"u"?URLSearchParams:JC,DX=typeof FormData<"u"?FormData:null,LX=typeof Blob<"u"?Blob:null,kX={isBrowser:!0,classes:{URLSearchParams:IX,FormData:DX,Blob:LX},protocols:["http","https","file","blob","url","data"]},J3=typeof window<"u"&&typeof document<"u",RX=(e=>J3&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),OX=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zX=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:J3,hasStandardBrowserEnv:RX,hasStandardBrowserWebWorkerEnv:OX},Symbol.toStringTag,{value:"Module"})),Ms={...zX,...kX};function BX(e,t){return Y1(e,new Ms.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return Ms.isNode&&tt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function FX(e){return tt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function $X(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function Q3(e){function t(r,n,i,a){let o=r[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),c=a>=r.length;return o=!o&&tt.isArray(i)?i.length:o,c?(tt.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):((!i[o]||!tt.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],a)&&tt.isArray(i[o])&&(i[o]=$X(i[o])),!s)}if(tt.isFormData(e)&&tt.isFunction(e.entries)){const r={};return tt.forEachEntry(e,(n,i)=>{t(FX(n),i,r,0)}),r}return null}function NX(e,t,r){if(tt.isString(e))try{return(t||JSON.parse)(e),tt.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const QC={transitional:K3,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=tt.isObject(t);if(a&&tt.isHTMLForm(t)&&(t=new FormData(t)),tt.isFormData(t))return i?JSON.stringify(Q3(t)):t;if(tt.isArrayBuffer(t)||tt.isBuffer(t)||tt.isStream(t)||tt.isFile(t)||tt.isBlob(t))return t;if(tt.isArrayBufferView(t))return t.buffer;if(tt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return BX(t,this.formSerializer).toString();if((s=tt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Y1(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),NX(t)):t}],transformResponse:[function(t){const r=this.transitional||QC.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(t&&tt.isString(t)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?Or.from(s,Or.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ms.classes.FormData,Blob:Ms.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tt.forEach(["delete","get","head","post","put","patch"],e=>{QC.headers[e]={}});const eA=QC,VX=tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HX=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&VX[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},aD=Symbol("internals");function dm(e){return e&&String(e).trim().toLowerCase()}function s0(e){return e===!1||e==null?e:tt.isArray(e)?e.map(s0):String(e)}function UX(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const jX=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function mw(e,t,r,n,i){if(tt.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!tt.isString(t)){if(tt.isString(n))return t.indexOf(n)!==-1;if(tt.isRegExp(n))return n.test(t)}}function GX(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function WX(e,t){const r=tt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}class K1{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(s,c,f){const p=dm(c);if(!p)throw new Error("header name must be a non-empty string");const v=tt.findKey(i,p);(!v||i[v]===void 0||f===!0||f===void 0&&i[v]!==!1)&&(i[v||c]=s0(s))}const o=(s,c)=>tt.forEach(s,(f,p)=>a(f,p,c));return tt.isPlainObject(t)||t instanceof this.constructor?o(t,r):tt.isString(t)&&(t=t.trim())&&!jX(t)?o(HX(t),r):t!=null&&a(r,t,n),this}get(t,r){if(t=dm(t),t){const n=tt.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return UX(i);if(tt.isFunction(r))return r.call(this,i,n);if(tt.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=dm(t),t){const n=tt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||mw(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(o){if(o=dm(o),o){const s=tt.findKey(n,o);s&&(!r||mw(n,n[s],s,r))&&(delete n[s],i=!0)}}return tt.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||mw(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return tt.forEach(this,(i,a)=>{const o=tt.findKey(n,a);if(o){r[o]=s0(i),delete r[a];return}const s=t?GX(a):String(a).trim();s!==a&&delete r[a],r[s]=s0(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return tt.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&tt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[aD]=this[aD]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=dm(o);n[s]||(WX(i,o),n[s]=!0)}return tt.isArray(t)?t.forEach(a):a(t),this}}K1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);tt.reduceDescriptors(K1.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});tt.freezeMethods(K1);const Cl=K1;function vw(e,t){const r=this||eA,n=t||r,i=Cl.from(n.headers);let a=n.data;return tt.forEach(e,function(s){a=s.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function e4(e){return!!(e&&e.__CANCEL__)}function Cg(e,t,r){Or.call(this,e??"canceled",Or.ERR_CANCELED,t,r),this.name="CanceledError"}tt.inherits(Cg,Or,{__CANCEL__:!0});function qX(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Or("Request failed with status code "+r.status,[Or.ERR_BAD_REQUEST,Or.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const ZX=Ms.hasStandardBrowserEnv?{write(e,t,r,n,i,a){const o=[e+"="+encodeURIComponent(t)];tt.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),tt.isString(n)&&o.push("path="+n),tt.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function XX(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function YX(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function t4(e,t){return e&&!XX(t)?YX(e,t):t}const KX=Ms.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(a){let o=a;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){const s=tt.isString(o)?i(o):o;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function JX(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function QX(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const f=Date.now(),p=n[a];o||(o=f),r[i]=c,n[i]=f;let v=a,y=0;for(;v!==i;)y+=r[v++],v=v%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),f-o<t)return;const _=p&&f-p;return _?Math.round(y*1e3/_):void 0}}function oD(e,t){let r=0;const n=QX(50,250);return i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-r,c=n(s),f=a<=o;r=a;const p={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:c||void 0,estimated:c&&o&&f?(o-a)/c:void 0,event:i};p[t?"download":"upload"]=!0,e(p)}}const eY=typeof XMLHttpRequest<"u",tY=eY&&function(e){return new Promise(function(r,n){let i=e.data;const a=Cl.from(e.headers).normalize();let{responseType:o,withXSRFToken:s}=e,c;function f(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let p;if(tt.isFormData(i)){if(Ms.hasStandardBrowserEnv||Ms.hasStandardBrowserWebWorkerEnv)a.setContentType(!1);else if((p=a.getContentType())!==!1){const[E,...P]=p?p.split(";").map(I=>I.trim()).filter(Boolean):[];a.setContentType([E||"multipart/form-data",...P].join("; "))}}let v=new XMLHttpRequest;if(e.auth){const E=e.auth.username||"",P=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(E+":"+P))}const y=t4(e.baseURL,e.url);v.open(e.method.toUpperCase(),Y3(y,e.params,e.paramsSerializer),!0),v.timeout=e.timeout;function _(){if(!v)return;const E=Cl.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),I={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:E,config:e,request:v};qX(function(L){r(L),f()},function(L){n(L),f()},I),v=null}if("onloadend"in v?v.onloadend=_:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(_)},v.onabort=function(){v&&(n(new Or("Request aborted",Or.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new Or("Network Error",Or.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let P=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const I=e.transitional||K3;e.timeoutErrorMessage&&(P=e.timeoutErrorMessage),n(new Or(P,I.clarifyTimeoutError?Or.ETIMEDOUT:Or.ECONNABORTED,e,v)),v=null},Ms.hasStandardBrowserEnv&&(s&&tt.isFunction(s)&&(s=s(e)),s||s!==!1&&KX(y))){const E=e.xsrfHeaderName&&e.xsrfCookieName&&ZX.read(e.xsrfCookieName);E&&a.set(e.xsrfHeaderName,E)}i===void 0&&a.setContentType(null),"setRequestHeader"in v&&tt.forEach(a.toJSON(),function(P,I){v.setRequestHeader(I,P)}),tt.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),o&&o!=="json"&&(v.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&v.addEventListener("progress",oD(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&v.upload&&v.upload.addEventListener("progress",oD(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=E=>{v&&(n(!E||E.type?new Cg(null,e,v):E),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const S=JX(y);if(S&&Ms.protocols.indexOf(S)===-1){n(new Or("Unsupported protocol "+S+":",Or.ERR_BAD_REQUEST,e));return}v.send(i||null)})},P2={http:AX,xhr:tY};tt.forEach(P2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const sD=e=>`- ${e}`,rY=e=>tt.isFunction(e)||e===null||e===!1,r4={getAdapter:e=>{e=tt.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let a=0;a<t;a++){r=e[a];let o;if(n=r,!rY(r)&&(n=P2[(o=String(r)).toLowerCase()],n===void 0))throw new Or(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+a]=n}if(!n){const a=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(sD).join(`
`):" "+sD(a[0]):"as no adapter specified";throw new Or("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:P2};function gw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cg(null,e)}function lD(e){return gw(e),e.headers=Cl.from(e.headers),e.data=vw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),r4.getAdapter(e.adapter||eA.adapter)(e).then(function(n){return gw(e),n.data=vw.call(e,e.transformResponse,n),n.headers=Cl.from(n.headers),n},function(n){return e4(n)||(gw(e),n&&n.response&&(n.response.data=vw.call(e,e.transformResponse,n.response),n.response.headers=Cl.from(n.response.headers))),Promise.reject(n)})}const uD=e=>e instanceof Cl?e.toJSON():e;function Pd(e,t){t=t||{};const r={};function n(f,p,v){return tt.isPlainObject(f)&&tt.isPlainObject(p)?tt.merge.call({caseless:v},f,p):tt.isPlainObject(p)?tt.merge({},p):tt.isArray(p)?p.slice():p}function i(f,p,v){if(tt.isUndefined(p)){if(!tt.isUndefined(f))return n(void 0,f,v)}else return n(f,p,v)}function a(f,p){if(!tt.isUndefined(p))return n(void 0,p)}function o(f,p){if(tt.isUndefined(p)){if(!tt.isUndefined(f))return n(void 0,f)}else return n(void 0,p)}function s(f,p,v){if(v in t)return n(f,p);if(v in e)return n(void 0,f)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(f,p)=>i(uD(f),uD(p),!0)};return tt.forEach(Object.keys(Object.assign({},e,t)),function(p){const v=c[p]||i,y=v(e[p],t[p],p);tt.isUndefined(y)&&v!==s||(r[p]=y)}),r}const n4="1.6.7",tA={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tA[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const cD={};tA.transitional=function(t,r,n){function i(a,o){return"[Axios v"+n4+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,s)=>{if(t===!1)throw new Or(i(o," has been removed"+(r?" in "+r:"")),Or.ERR_DEPRECATED);return r&&!cD[o]&&(cD[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,s):!0}};function nY(e,t,r){if(typeof e!="object")throw new Or("options must be an object",Or.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const s=e[a],c=s===void 0||o(s,a,e);if(c!==!0)throw new Or("option "+a+" must be "+c,Or.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Or("Unknown option "+a,Or.ERR_BAD_OPTION)}}const I2={assertOptions:nY,validators:tA},su=I2.validators;class W0{constructor(t){this.defaults=t,this.interceptors={request:new iD,response:new iD}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Pd(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&I2.assertOptions(n,{silentJSONParsing:su.transitional(su.boolean),forcedJSONParsing:su.transitional(su.boolean),clarifyTimeoutError:su.transitional(su.boolean)},!1),i!=null&&(tt.isFunction(i)?r.paramsSerializer={serialize:i}:I2.assertOptions(i,{encode:su.function,serialize:su.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&tt.merge(a.common,a[r.method]);a&&tt.forEach(["delete","get","head","post","put","patch","common"],S=>{delete a[S]}),r.headers=Cl.concat(o,a);const s=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(c=c&&E.synchronous,s.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,v=0,y;if(!c){const S=[lD.bind(this),void 0];for(S.unshift.apply(S,s),S.push.apply(S,f),y=S.length,p=Promise.resolve(r);v<y;)p=p.then(S[v++],S[v++]);return p}y=s.length;let _=r;for(v=0;v<y;){const S=s[v++],E=s[v++];try{_=S(_)}catch(P){E.call(this,P);break}}try{p=lD.call(this,_)}catch(S){return Promise.reject(S)}for(v=0,y=f.length;v<y;)p=p.then(f[v++],f[v++]);return p}getUri(t){t=Pd(this.defaults,t);const r=t4(t.baseURL,t.url);return Y3(r,t.params,t.paramsSerializer)}}tt.forEach(["delete","get","head","options"],function(t){W0.prototype[t]=function(r,n){return this.request(Pd(n||{},{method:t,url:r,data:(n||{}).data}))}});tt.forEach(["post","put","patch"],function(t){function r(n){return function(a,o,s){return this.request(Pd(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}W0.prototype[t]=r(),W0.prototype[t+"Form"]=r(!0)});const l0=W0;class rA{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,s){n.reason||(n.reason=new Cg(a,o,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new rA(function(i){t=i}),cancel:t}}}const iY=rA;function aY(e){return function(r){return e.apply(null,r)}}function oY(e){return tt.isObject(e)&&e.isAxiosError===!0}const D2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(D2).forEach(([e,t])=>{D2[t]=e});const sY=D2;function i4(e){const t=new l0(e),r=F3(l0.prototype.request,t);return tt.extend(r,l0.prototype,t,{allOwnKeys:!0}),tt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return i4(Pd(e,i))},r}const Rr=i4(eA);Rr.Axios=l0;Rr.CanceledError=Cg;Rr.CancelToken=iY;Rr.isCancel=e4;Rr.VERSION=n4;Rr.toFormData=Y1;Rr.AxiosError=Or;Rr.Cancel=Rr.CanceledError;Rr.all=function(t){return Promise.all(t)};Rr.spread=aY;Rr.isAxiosError=oY;Rr.mergeConfig=Pd;Rr.AxiosHeaders=Cl;Rr.formToJSON=e=>Q3(tt.isHTMLForm(e)?new FormData(e):e);Rr.getAdapter=r4.getAdapter;Rr.HttpStatusCode=sY;Rr.default=Rr;function hD(e){let t=Math.abs(e),r=Math.floor(t/3600);t-=r*3600;let n=Math.floor(t/60);return t-=n*60,[r,n,t]}function fD(e){return e<10?"0"+e:e}const lY={props:{secondFromDispatch:{type:Number},stationEstimate:{type:String},startSecond:{type:Number}},computed:{timeToShow:function(){let e=hD(this.secondFromDispatch),t=e[2]>=30;return e[1]>0?[e[0]>0?e[0]+"时":"",e[1],"分",t?"半":""].join(""):t?"半分钟":"不到半分"},startTime:function(){let e=hD(this.startSecond);return["",fD(e[0]),":",fD(e[1])].join("")},isWaiting:function(){return this.secondFromDispatch<=0}}},uY={key:0};function cY(e,t,r,n,i,a){return r.secondFromDispatch?(rt(),Ct("tr",{key:0,class:Vi(a.isWaiting?"bus-waiting":"bus-running")},[Nt("td",null,br(a.startTime),1),Nt("td",null,br(a.isWaiting?"距出发":"已出发"),1),Nt("td",null,br((a.isWaiting,""+a.timeToShow)),1),r.stationEstimate?(rt(),Ct("td",uY,br(r.stationEstimate),1)):Hr("",!0)],2)):Hr("",!0)}const hY=Dr(lY,[["render",cY],["__scopeId","data-v-259a8620"],["__file","BusItem.vue"]]);function a4(e,t,r){return e*3600+t*60+r}function fY(e){let t=[];for(let r of e){let n=r.split(":"),i=a4(Number(n[0].trim()),Number(n[1].trim()),0);t.push(i)}return t.sort((r,n)=>r-n)}const dY={data(){return{secondFromZero:0,second:0,minute:0,hour:0,timeRangeAfterReach:3}},props:{times:{},stations:{},minuteOnRoad:{type:Number,default:20},timeRangeBeforeDispatch:{type:Number,default:60}},components:{BusItem:hY},mounted(){setInterval(()=>{this.tick()},1e3)},methods:{tick:function(){var e=new Date;this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds(),this.secondFromZero=a4(this.hour,this.minute,this.second)},formatNumber:function(e){return e<10?"0"+e:e},stationEstimate:function(e){if(!this.stationNames)return"null";if(e<=0)return this.stationNames[0];let t=this.stationNames.length;if(e>=this.minuteOnRoad*60)return this.stationNames[t-1];let r=e/60/this.minuteOnRoad,n="";for(let i in this.stationPositions)if(r<this.stationPositions[i]){n=this.stationNames[i];break}return n}},computed:{secondList:function(){return fY(this.times)},busToShow:function(){if(!this.secondList)return null;let e=[],t=[];for(let r of this.secondList){let n=this.secondFromZero-r;n<0&&n>-this.timeRangeBeforeDispatch*60&&t.push([n,r]),n>0&&n<(this.minuteOnRoad+this.timeRangeAfterReach)*60&&e.push([n,r])}return e.concat(t)},stationNames:function(){let e=[];for(let t of this.stations)e.push(t[0]);return e},stationPositions:function(){let e=[];for(let t of this.stations)e.push(t[1]);return e}}},pY=e=>(gz("data-v-dc817d2c"),e=e(),yz(),e),mY={key:0,class:"bus-timer-tb"},vY={colspan:"2"},gY={colspan:"2",style:{"text-align":"right"}},yY={key:0,colspan:"4"},_Y=pY(()=>Nt("p",{class:"plus-note"},"* 站点估计仅供参考",-1));function bY(e,t,r,n,i,a){const o=gn("bus-item");return rt(),Ct("div",null,[a.busToShow?(rt(),Ct("table",mY,[Nt("thead",null,[Nt("tr",null,[Nt("th",vY,br(r.stations[0][0])+" > "+br(r.stations[r.stations.length-1][0]),1),Nt("th",gY,br(a.formatNumber(i.hour))+":"+br(a.formatNumber(i.minute))+":"+br(a.formatNumber(i.second)),1)]),(rt(!0),Ct(Mr,null,Aa(a.busToShow,(s,c)=>(rt(),Sn(o,{secondFromDispatch:s[0],stationEstimate:a.stationEstimate(s[0]),startSecond:s[1],key:c},null,8,["secondFromDispatch","stationEstimate","startSecond"]))),128)),Nt("tr",null,[Object.keys(a.busToShow).length==0?(rt(),Ct("td",yY," 短时间内没有班次了 ")):Hr("",!0)])])])):Hr("",!0),_Y])}const xY=Dr(dY,[["render",bY],["__scopeId","data-v-dc817d2c"],["__file","BusTimer.vue"]]);function $v(e){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(e)}function wY(e,t){if($v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SY(e){var t=wY(e,"string");return $v(t)=="symbol"?t:String(t)}function TY(e,t,r){return t=SY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dD(Object(r),!0).forEach(function(n){TY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$e.apply(this,arguments)}const CY=Array.isArray,AY=e=>typeof e=="string",MY=e=>e!==null&&typeof e=="object";function nd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return typeof e=="function"?e(t):e??r}function EY(e){let t;const r=new Promise(i=>{t=e(()=>{i(!0)})}),n=()=>{t==null||t()};return n.then=(i,a)=>r.then(i,a),n.promise=r,n}function gi(){const e=[];for(let t=0;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r){if(AY(r))e.push(r);else if(CY(r))for(let n=0;n<r.length;n++){const i=gi(r[n]);i&&e.push(i)}else if(MY(r))for(const n in r)r[n]&&e.push(n)}}return e.join(" ")}const PY=e=>e!=null&&e!=="",o4=(e,t)=>{const r=$e({},e);return Object.keys(t).forEach(n=>{const i=r[n];if(i)i.type||i.default?i.default=t[n]:i.def?i.def(t[n]):r[n]={type:i,default:t[n]};else throw new Error(`not have ${n} prop`)}),r},IY=Symbol("skipFlatten"),Nv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Array.isArray(e)?e:[e],n=[];return r.forEach(i=>{Array.isArray(i)?n.push(...Nv(i,t)):i&&i.type===Mr?i.key===IY?n.push(i):n.push(...Nv(i.children,t)):i&&kv(i)?t&&!s4(i)?n.push(i):t||n.push(i):PY(i)&&n.push(i)}),n},L2=e=>{var t;let r=((t=e==null?void 0:e.vnode)===null||t===void 0?void 0:t.el)||e&&(e.$el||e);for(;r&&!r.tagName;)r=r.nextSibling;return r};function s4(e){return e&&(e.type===Na||e.type===Mr&&e.children.length===0||e.type===Bu&&e.children.trim()==="")}function l4(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return e.forEach(r=>{Array.isArray(r)?t.push(...r):(r==null?void 0:r.type)===Mr?t.push(...l4(r.children)):t.push(r)}),t.filter(r=>!s4(r))}let u4=e=>setTimeout(e,16),c4=e=>clearTimeout(e);typeof window<"u"&&"requestAnimationFrame"in window&&(u4=e=>window.requestAnimationFrame(e),c4=e=>window.cancelAnimationFrame(e));let pD=0;const nA=new Map;function h4(e){nA.delete(e)}function k2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;pD+=1;const r=pD;function n(i){if(i===0)h4(r),e();else{const a=u4(()=>{n(i-1)});nA.set(r,a)}}return n(t),r}k2.cancel=e=>{const t=nA.get(e);return h4(t),c4(t)};const q0=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},J1=e=>{const t=e;return t.install=function(r){r.component(t.displayName||t.name,e)},e};function mD(){return{type:[Function,Array]}}function za(e){return{type:Object,default:e}}function fh(e){return{type:Boolean,default:e}}function vD(e){return{type:Function,default:e}}function Ko(e,t){const r={validator:()=>!0,default:e};return r}function R2(e){return{type:Array,default:e}}function O2(e){return{type:String,default:e}}function f4(e,t){return e?{type:e,default:t}:Ko(t)}const iA="anticon",DY=Symbol("GlobalFormContextKey"),LY=e=>{Hi(DY,e)},kY=()=>({iconPrefixCls:String,getTargetContainer:{type:Function},getPopupContainer:{type:Function},prefixCls:String,getPrefixCls:{type:Function},renderEmpty:{type:Function},transformCellText:{type:Function},csp:za(),input:za(),autoInsertSpaceInButton:{type:Boolean,default:void 0},locale:za(),pageHeader:za(),componentSize:{type:String},componentDisabled:{type:Boolean,default:void 0},direction:{type:String,default:"ltr"},space:za(),virtual:{type:Boolean,default:void 0},dropdownMatchSelectWidth:{type:[Number,Boolean],default:!0},form:za(),pagination:za(),theme:za(),select:za(),wave:za()}),aA=Symbol("configProvider"),d4={getPrefixCls:(e,t)=>t||(e?`ant-${e}`:"ant"),iconPrefixCls:ke(()=>iA),getPopupContainer:ke(()=>()=>document.body),direction:ke(()=>"ltr")},p4=()=>on(aA,d4),RY=e=>Hi(aA,e),m4=Symbol("DisabledContextKey"),oA=()=>on(m4,tr(void 0)),OY=e=>{const t=oA();return Hi(m4,ke(()=>{var r;return(r=e.value)!==null&&r!==void 0?r:t.value})),e},zY={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},BY={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},FY=BY,$Y={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},v4=$Y,NY={lang:$e({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},FY),timePickerLocale:$e({},v4)},gD=NY,Ka="${label} is not a valid ${type}",Vv={locale:"en",Pagination:zY,DatePicker:gD,TimePicker:v4,Calendar:gD,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Ka,method:Ka,array:Ka,object:Ka,number:Ka,date:Ka,boolean:Ka,integer:Ka,float:Ka,regexp:Ka,email:Ka,url:Ka,hex:Ka},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"}},g4=Jt({compatConfig:{MODE:3},name:"LocaleReceiver",props:{componentName:String,defaultLocale:{type:[Object,Function]},children:{type:Function}},setup(e,t){let{slots:r}=t;const n=on("localeData",{}),i=ke(()=>{const{componentName:o="global",defaultLocale:s}=e,c=s||Vv[o||"global"],{antLocale:f}=n,p=o&&f?f[o]:{};return $e($e({},typeof c=="function"?c():c),p||{})}),a=ke(()=>{const{antLocale:o}=n,s=o&&o.locale;return o&&o.exist&&!s?Vv.locale:s});return()=>{const o=e.children||r.default,{antLocale:s}=n;return o==null?void 0:o(i.value,a.value,s)}}});function sA(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}const yD="%";class VY{constructor(t){this.cache=new Map,this.instanceId=t}get(t){return this.cache.get(Array.isArray(t)?t.join(yD):t)||null}update(t,r){const n=Array.isArray(t)?t.join(yD):t,i=this.cache.get(n),a=r(i);a===null?this.cache.delete(n):this.cache.set(n,a)}}const HY=VY,y4="data-token-hash",dh="data-css-hash",id="__cssinjs_instance__";function Hv(){const e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){const t=document.body.querySelectorAll(`style[${dh}]`)||[],{firstChild:r}=document.head;Array.from(t).forEach(i=>{i[id]=i[id]||e,i[id]===e&&document.head.insertBefore(i,r)});const n={};Array.from(document.querySelectorAll(`style[${dh}]`)).forEach(i=>{var a;const o=i.getAttribute(dh);n[o]?i[id]===e&&((a=i.parentNode)===null||a===void 0||a.removeChild(i)):n[o]=!0})}return new HY(e)}const _4=Symbol("StyleContextKey"),UY=()=>{var e,t,r;const n=kl();let i;if(n&&n.appContext){const a=(r=(t=(e=n.appContext)===null||e===void 0?void 0:e.config)===null||t===void 0?void 0:t.globalProperties)===null||r===void 0?void 0:r.__ANTDV_CSSINJS_CACHE__;a?i=a:(i=Hv(),n.appContext.config.globalProperties&&(n.appContext.config.globalProperties.__ANTDV_CSSINJS_CACHE__=i))}else i=Hv();return i},b4={cache:Hv(),defaultCache:!0,hashPriority:"low"},Q1=()=>{const e=UY();return on(_4,yn($e($e({},b4),{cache:e})))},jY=e=>{const t=Q1(),r=yn($e($e({},b4),{cache:Hv()}));return zr([()=>Kt(e),t],()=>{const n=$e({},t.value),i=Kt(e);Object.keys(i).forEach(o=>{const s=i[o];i[o]!==void 0&&(n[o]=s)});const{cache:a}=i;n.cache=n.cache||Hv(),n.defaultCache=!a&&t.value.defaultCache,r.value=n},{immediate:!0}),Hi(_4,r),r},GY=()=>({autoClear:fh(),mock:O2(),cache:za(),defaultCache:fh(),hashPriority:O2(),container:f4(),ssrInline:fh(),transformers:R2(),linters:R2()});J1(Jt({name:"AStyleProvider",inheritAttrs:!1,props:GY(),setup(e,t){let{slots:r}=t;return jY(e),()=>{var n;return(n=r.default)===null||n===void 0?void 0:n.call(r)}}}));function x4(e,t,r,n){const i=Q1(),a=yn(""),o=yn();Ml(()=>{a.value=[e,...t.value].join("%")});const s=c=>{i.value.cache.update(c,f=>{const[p=0,v]=f||[];return p-1===0?(n==null||n(v,!1),null):[p-1,v]})};return zr(a,(c,f)=>{f&&s(f),i.value.cache.update(c,p=>{const[v=0,y]=p||[],S=y||r();return[v+1,S]}),o.value=i.value.cache.get(a.value)[1]},{immediate:!0}),ju(()=>{s(a.value)}),o}function Kd(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function WY(e,t){return e&&e.contains?e.contains(t):!1}const _D="data-vc-order",qY="vc-util-key",z2=new Map;function w4(){let{mark:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e?e.startsWith("data-")?e:`data-${e}`:qY}function eb(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function ZY(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function S4(e){return Array.from((z2.get(e)||e).children).filter(t=>t.tagName==="STYLE")}function T4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Kd())return null;const{csp:r,prepend:n}=t,i=document.createElement("style");i.setAttribute(_D,ZY(n)),r!=null&&r.nonce&&(i.nonce=r==null?void 0:r.nonce),i.innerHTML=e;const a=eb(t),{firstChild:o}=a;if(n){if(n==="queue"){const s=S4(a).filter(c=>["prepend","prependQueue"].includes(c.getAttribute(_D)));if(s.length)return a.insertBefore(i,s[s.length-1].nextSibling),i}a.insertBefore(i,o)}else a.appendChild(i);return i}function C4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=eb(t);return S4(r).find(n=>n.getAttribute(w4(t))===e)}function A4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=C4(e,t);r&&eb(t).removeChild(r)}function XY(e,t){const r=z2.get(e);if(!r||!WY(document,r)){const n=T4("",t),{parentNode:i}=n;z2.set(e,i),e.removeChild(n)}}function Z0(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var n,i,a;const o=eb(r);XY(o,r);const s=C4(t,r);if(s)return!((n=r.csp)===null||n===void 0)&&n.nonce&&s.nonce!==((i=r.csp)===null||i===void 0?void 0:i.nonce)&&(s.nonce=(a=r.csp)===null||a===void 0?void 0:a.nonce),s.innerHTML!==e&&(s.innerHTML=e),s;const c=T4(e,r);return c.setAttribute(w4(r),t),c}function YY(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}class Id{constructor(){this.cache=new Map,this.keys=[],this.cacheCallTimes=0}size(){return this.keys.length}internalGet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n={map:this.cache};return t.forEach(i=>{var a;n?n=(a=n==null?void 0:n.map)===null||a===void 0?void 0:a.get(i):n=void 0}),n!=null&&n.value&&r&&(n.value[1]=this.cacheCallTimes++),n==null?void 0:n.value}get(t){var r;return(r=this.internalGet(t,!0))===null||r===void 0?void 0:r[0]}has(t){return!!this.internalGet(t)}set(t,r){if(!this.has(t)){if(this.size()+1>Id.MAX_CACHE_SIZE+Id.MAX_CACHE_OFFSET){const[i]=this.keys.reduce((a,o)=>{const[,s]=a;return this.internalGet(o)[1]<s?[o,this.internalGet(o)[1]]:a},[this.keys[0],this.cacheCallTimes]);this.delete(i)}this.keys.push(t)}let n=this.cache;t.forEach((i,a)=>{if(a===t.length-1)n.set(i,{value:[r,this.cacheCallTimes++]});else{const o=n.get(i);o?o.map||(o.map=new Map):n.set(i,{map:new Map}),n=n.get(i).map}})}deleteByPath(t,r){var n;const i=t.get(r[0]);if(r.length===1)return i.map?t.set(r[0],{map:i.map}):t.delete(r[0]),(n=i.value)===null||n===void 0?void 0:n[0];const a=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&t.delete(r[0]),a}delete(t){if(this.has(t))return this.keys=this.keys.filter(r=>!YY(r,t)),this.deleteByPath(this.cache,t)}}Id.MAX_CACHE_SIZE=20;Id.MAX_CACHE_OFFSET=5;let bD={};function KY(e,t){}function JY(e,t,r){!t&&!bD[r]&&(e(!1,r),bD[r]=!0)}function QY(e,t){JY(KY,e,t)}function eK(){}let M4=eK,xD=0;class E4{constructor(t){this.derivatives=Array.isArray(t)?t:[t],this.id=xD,t.length===0&&M4(t.length>0),xD+=1}getDerivativeToken(t){return this.derivatives.reduce((r,n)=>n(t,r),void 0)}}const yw=new Id;function P4(e){const t=Array.isArray(e)?e:[e];return yw.has(t)||yw.set(t,new E4(t)),yw.get(t)}const wD=new WeakMap;function X0(e){let t=wD.get(e)||"";return t||(Object.keys(e).forEach(r=>{const n=e[r];t+=r,n instanceof E4?t+=n.id:n&&typeof n=="object"?t+=X0(n):t+=n}),wD.set(e,t)),t}function tK(e,t){return sA(`${t}_${X0(e)}`)}const sv=`random-${Date.now()}-${Math.random()}`.replace(/\./g,""),I4="_bAmBoO_";function rK(e,t,r){var n,i;if(Kd()){Z0(e,sv);const a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",t==null||t(a),document.body.appendChild(a);const o=r?r(a):(n=getComputedStyle(a).content)===null||n===void 0?void 0:n.includes(I4);return(i=a.parentNode)===null||i===void 0||i.removeChild(a),A4(sv),o}return!1}let _w;function nK(){return _w===void 0&&(_w=rK(`@layer ${sv} { .${sv} { content: "${I4}"!important; } }`,e=>{e.className=sv})),_w}const SD={},iK=!0,aK=!1,oK=!iK&&!aK?"css-dev-only-do-not-override":"css",Jc=new Map;function sK(e){Jc.set(e,(Jc.get(e)||0)+1)}function lK(e,t){typeof document<"u"&&document.querySelectorAll(`style[${y4}="${e}"]`).forEach(n=>{var i;n[id]===t&&((i=n.parentNode)===null||i===void 0||i.removeChild(n))})}const uK=0;function cK(e,t){Jc.set(e,(Jc.get(e)||0)-1);const r=Array.from(Jc.keys()),n=r.filter(i=>(Jc.get(i)||0)<=0);r.length-n.length>uK&&n.forEach(i=>{lK(i,t),Jc.delete(i)})}const hK=(e,t,r,n)=>{const i=r.getDerivativeToken(e);let a=$e($e({},i),t);return n&&(a=n(a)),a};function fK(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tr({});const n=Q1(),i=ke(()=>$e({},...t.value)),a=ke(()=>X0(i.value)),o=ke(()=>X0(r.value.override||SD));return x4("token",ke(()=>[r.value.salt||"",e.value.id,a.value,o.value]),()=>{const{salt:c="",override:f=SD,formatToken:p,getComputedToken:v}=r.value,y=v?v(i.value,f,e.value):hK(i.value,f,e.value,p),_=tK(y,c);y._tokenKey=_,sK(_);const S=`${oK}-${sA(_)}`;return y._hashId=S,[y,S]},c=>{var f;cK(c[0]._tokenKey,(f=n.value)===null||f===void 0?void 0:f.cache.instanceId)})}var dK={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},D4="comm",L4="rule",k4="decl",pK="@import",mK="@keyframes",vK="@layer",R4=Math.abs,lA=String.fromCharCode;function O4(e){return e.trim()}function u0(e,t,r){return e.replace(t,r)}function gK(e,t,r){return e.indexOf(t,r)}function Uv(e,t){return e.charCodeAt(t)|0}function jv(e,t,r){return e.slice(t,r)}function _l(e){return e.length}function yK(e){return e.length}function s_(e,t){return t.push(e),e}var tb=1,Dd=1,z4=0,Do=0,ci=0,Jd="";function uA(e,t,r,n,i,a,o,s){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:tb,column:Dd,length:o,return:"",siblings:s}}function _K(){return ci}function bK(){return ci=Do>0?Uv(Jd,--Do):0,Dd--,ci===10&&(Dd=1,tb--),ci}function es(){return ci=Do<z4?Uv(Jd,Do++):0,Dd++,ci===10&&(Dd=1,tb++),ci}function ph(){return Uv(Jd,Do)}function c0(){return Do}function rb(e,t){return jv(Jd,e,t)}function B2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function xK(e){return tb=Dd=1,z4=_l(Jd=e),Do=0,[]}function wK(e){return Jd="",e}function bw(e){return O4(rb(Do-1,F2(e===91?e+2:e===40?e+1:e)))}function SK(e){for(;(ci=ph())&&ci<33;)es();return B2(e)>2||B2(ci)>3?"":" "}function TK(e,t){for(;--t&&es()&&!(ci<48||ci>102||ci>57&&ci<65||ci>70&&ci<97););return rb(e,c0()+(t<6&&ph()==32&&es()==32))}function F2(e){for(;es();)switch(ci){case e:return Do;case 34:case 39:e!==34&&e!==39&&F2(ci);break;case 40:e===41&&F2(e);break;case 92:es();break}return Do}function CK(e,t){for(;es()&&e+ci!==57;)if(e+ci===84&&ph()===47)break;return"/*"+rb(t,Do-1)+"*"+lA(e===47?e:es())}function AK(e){for(;!B2(ph());)es();return rb(e,Do)}function MK(e){return wK(h0("",null,null,null,[""],e=xK(e),0,[0],e))}function h0(e,t,r,n,i,a,o,s,c){for(var f=0,p=0,v=o,y=0,_=0,S=0,E=1,P=1,I=1,D=0,L="",B=i,U=a,V=n,N=L;P;)switch(S=D,D=es()){case 40:if(S!=108&&Uv(N,v-1)==58){gK(N+=u0(bw(D),"&","&\f"),"&\f",R4(f?s[f-1]:0))!=-1&&(I=-1);break}case 34:case 39:case 91:N+=bw(D);break;case 9:case 10:case 13:case 32:N+=SK(S);break;case 92:N+=TK(c0()-1,7);continue;case 47:switch(ph()){case 42:case 47:s_(EK(CK(es(),c0()),t,r,c),c);break;default:N+="/"}break;case 123*E:s[f++]=_l(N)*I;case 125*E:case 59:case 0:switch(D){case 0:case 125:P=0;case 59+p:I==-1&&(N=u0(N,/\f/g,"")),_>0&&_l(N)-v&&s_(_>32?CD(N+";",n,r,v-1,c):CD(u0(N," ","")+";",n,r,v-2,c),c);break;case 59:N+=";";default:if(s_(V=TD(N,t,r,f,p,i,s,L,B=[],U=[],v,a),a),D===123)if(p===0)h0(N,t,V,V,B,a,v,s,U);else switch(y===99&&Uv(N,3)===110?100:y){case 100:case 108:case 109:case 115:h0(e,V,V,n&&s_(TD(e,V,V,0,0,i,s,L,i,B=[],v,U),U),i,U,v,s,n?B:U);break;default:h0(N,V,V,V,[""],U,0,s,U)}}f=p=_=0,E=I=1,L=N="",v=o;break;case 58:v=1+_l(N),_=S;default:if(E<1){if(D==123)--E;else if(D==125&&E++==0&&bK()==125)continue}switch(N+=lA(D),D*E){case 38:I=p>0?1:(N+="\f",-1);break;case 44:s[f++]=(_l(N)-1)*I,I=1;break;case 64:ph()===45&&(N+=bw(es())),y=ph(),p=v=_l(L=N+=AK(c0())),D++;break;case 45:S===45&&_l(N)==2&&(E=0)}}return a}function TD(e,t,r,n,i,a,o,s,c,f,p,v){for(var y=i-1,_=i===0?a:[""],S=yK(_),E=0,P=0,I=0;E<n;++E)for(var D=0,L=jv(e,y+1,y=R4(P=o[E])),B=e;D<S;++D)(B=O4(P>0?_[D]+" "+L:u0(L,/&\f/g,_[D])))&&(c[I++]=B);return uA(e,t,r,i===0?L4:s,c,f,p,v)}function EK(e,t,r,n){return uA(e,t,r,D4,lA(_K()),jv(e,2,-2),0,n)}function CD(e,t,r,n,i){return uA(e,t,r,k4,jv(e,0,n),jv(e,n+1,-1),n,i)}function $2(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function PK(e,t,r,n){switch(e.type){case vK:if(e.children.length)break;case pK:case k4:return e.return=e.return||e.value;case D4:return"";case mK:return e.return=e.value+"{"+$2(e.children,n)+"}";case L4:if(!_l(e.value=e.props.join(",")))return""}return _l(r=$2(e.children,n))?e.return=e.value+"{"+r+"}":""}const AD="data-ant-cssinjs-cache-path",IK="_FILE_STYLE__";let mh,B4=!0;function DK(){var e;if(!mh&&(mh={},Kd())){const t=document.createElement("div");t.className=AD,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);let r=getComputedStyle(t).content||"";r=r.replace(/^"/,"").replace(/"$/,""),r.split(";").forEach(i=>{const[a,o]=i.split(":");mh[a]=o});const n=document.querySelector(`style[${AD}]`);n&&(B4=!1,(e=n.parentNode)===null||e===void 0||e.removeChild(n)),document.body.removeChild(t)}}function LK(e){return DK(),!!mh[e]}function kK(e){const t=mh[e];let r=null;if(t&&Kd())if(B4)r=IK;else{const n=document.querySelector(`style[${dh}="${mh[e]}"]`);n?r=n.innerHTML:delete mh[e]}return[r,t]}const MD=Kd(),RK="_skip_check_",F4="_multi_value_";function ED(e){return $2(MK(e),PK).replace(/\{%%%\:[^;];}/g,";")}function OK(e){return typeof e=="object"&&e&&(RK in e||F4 in e)}function zK(e,t,r){if(!t)return e;const n=`.${t}`,i=r==="low"?`:where(${n})`:n;return e.split(",").map(o=>{var s;const c=o.trim().split(/\s+/);let f=c[0]||"";const p=((s=f.match(/^\w+/))===null||s===void 0?void 0:s[0])||"";return f=`${p}${i}${f.slice(p.length)}`,[f,...c.slice(1)].join(" ")}).join(",")}const PD=new Set,N2=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{root:r,injectHash:n,parentSelectors:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]};const{hashId:a,layer:o,path:s,hashPriority:c,transformers:f=[],linters:p=[]}=t;let v="",y={};function _(P){const I=P.getName(a);if(!y[I]){const[D]=N2(P.style,t,{root:!1,parentSelectors:i});y[I]=`@keyframes ${P.getName(a)}${D}`}}function S(P){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return P.forEach(D=>{Array.isArray(D)?S(D,I):D&&I.push(D)}),I}if(S(Array.isArray(e)?e:[e]).forEach(P=>{const I=typeof P=="string"&&!r?{}:P;if(typeof I=="string")v+=`${I}
`;else if(I._keyframe)_(I);else{const D=f.reduce((L,B)=>{var U;return((U=B==null?void 0:B.visit)===null||U===void 0?void 0:U.call(B,L))||L},I);Object.keys(D).forEach(L=>{var B;const U=D[L];if(typeof U=="object"&&U&&(L!=="animationName"||!U._keyframe)&&!OK(U)){let V=!1,N=L.trim(),G=!1;(r||n)&&a?N.startsWith("@")?V=!0:N=zK(L,a,c):r&&!a&&(N==="&"||N==="")&&(N="",G=!0);const[Y,ee]=N2(U,t,{root:G,injectHash:V,parentSelectors:[...i,N]});y=$e($e({},y),ee),v+=`${N}${Y}`}else{let V=function(G,Y){const ee=G.replace(/[A-Z]/g,X=>`-${X.toLowerCase()}`);let J=Y;!dK[G]&&typeof J=="number"&&J!==0&&(J=`${J}px`),G==="animationName"&&(Y!=null&&Y._keyframe)&&(_(Y),J=Y.getName(a)),v+=`${ee}:${J};`};const N=(B=U==null?void 0:U.value)!==null&&B!==void 0?B:U;typeof U=="object"&&(U!=null&&U[F4])&&Array.isArray(N)?N.forEach(G=>{V(L,G)}):V(L,N)}})}}),!r)v=`{${v}}`;else if(o&&nK()){const P=o.split(",");v=`@layer ${P[P.length-1].trim()} {${v}}`,P.length>1&&(v=`@layer ${o}{%%%:%}${v}`)}return[v,y]};function BK(e,t){return sA(`${e.join("%")}${t}`)}function V2(e,t){const r=Q1(),n=ke(()=>e.value.token._tokenKey),i=ke(()=>[n.value,...e.value.path]);let a=MD;return x4("style",i,()=>{const{path:o,hashId:s,layer:c,nonce:f,clientOnly:p,order:v=0}=e.value,y=i.value.join("|");if(LK(y)){const[N,G]=kK(y);if(N)return[N,n.value,G,{},p,v]}const _=t(),{hashPriority:S,container:E,transformers:P,linters:I,cache:D}=r.value,[L,B]=N2(_,{hashId:s,hashPriority:S,layer:c,path:o.join("-"),transformers:P,linters:I}),U=ED(L),V=BK(i.value,U);if(a){const N={mark:dh,prepend:"queue",attachTo:E,priority:v},G=typeof f=="function"?f():f;G&&(N.csp={nonce:G});const Y=Z0(U,V,N);Y[id]=D.instanceId,Y.setAttribute(y4,n.value),Object.keys(B).forEach(ee=>{PD.has(ee)||(PD.add(ee),Z0(ED(B[ee]),`_effect-${ee}`,{mark:dh,prepend:"queue",attachTo:E}))})}return[U,n.value,V,B,p,v]},(o,s)=>{let[,,c]=o;(s||r.value.autoClear)&&MD&&A4(c,{mark:dh})}),o=>o}class vh{constructor(t,r){this._keyframe=!0,this.name=t,this.style=r}getName(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t?`${t}-${this.name}`:this.name}}const FK="4.1.2";function Ui(e,t){$K(e)&&(e="100%");var r=NK(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function l_(e){return Math.min(1,Math.max(0,e))}function $K(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function NK(e){return typeof e=="string"&&e.indexOf("%")!==-1}function $4(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function u_(e){return e<=1?"".concat(Number(e)*100,"%"):e}function ah(e){return e.length===1?"0"+e:String(e)}function VK(e,t,r){return{r:Ui(e,255)*255,g:Ui(t,255)*255,b:Ui(r,255)*255}}function ID(e,t,r){e=Ui(e,255),t=Ui(t,255),r=Ui(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,o=0,s=(n+i)/2;if(n===i)o=0,a=0;else{var c=n-i;switch(o=s>.5?c/(2-n-i):c/(n+i),n){case e:a=(t-r)/c+(t<r?6:0);break;case t:a=(r-e)/c+2;break;case r:a=(e-t)/c+4;break}a/=6}return{h:a,s:o,l:s}}function xw(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function HK(e,t,r){var n,i,a;if(e=Ui(e,360),t=Ui(t,100),r=Ui(r,100),t===0)i=r,a=r,n=r;else{var o=r<.5?r*(1+t):r+t-r*t,s=2*r-o;n=xw(s,o,e+1/3),i=xw(s,o,e),a=xw(s,o,e-1/3)}return{r:n*255,g:i*255,b:a*255}}function H2(e,t,r){e=Ui(e,255),t=Ui(t,255),r=Ui(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,o=n,s=n-i,c=n===0?0:s/n;if(n===i)a=0;else{switch(n){case e:a=(t-r)/s+(t<r?6:0);break;case t:a=(r-e)/s+2;break;case r:a=(e-t)/s+4;break}a/=6}return{h:a,s:c,v:o}}function UK(e,t,r){e=Ui(e,360)*6,t=Ui(t,100),r=Ui(r,100);var n=Math.floor(e),i=e-n,a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),c=n%6,f=[r,o,a,a,s,r][c],p=[s,r,r,o,a,a][c],v=[a,a,s,r,r,o][c];return{r:f*255,g:p*255,b:v*255}}function U2(e,t,r,n){var i=[ah(Math.round(e).toString(16)),ah(Math.round(t).toString(16)),ah(Math.round(r).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function jK(e,t,r,n,i){var a=[ah(Math.round(e).toString(16)),ah(Math.round(t).toString(16)),ah(Math.round(r).toString(16)),ah(GK(n))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function GK(e){return Math.round(parseFloat(e)*255).toString(16)}function DD(e){return Ja(e)/255}function Ja(e){return parseInt(e,16)}function WK(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var j2={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Jf(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,a=null,o=!1,s=!1;return typeof e=="string"&&(e=XK(e)),typeof e=="object"&&(ul(e.r)&&ul(e.g)&&ul(e.b)?(t=VK(e.r,e.g,e.b),o=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ul(e.h)&&ul(e.s)&&ul(e.v)?(n=u_(e.s),i=u_(e.v),t=UK(e.h,n,i),o=!0,s="hsv"):ul(e.h)&&ul(e.s)&&ul(e.l)&&(n=u_(e.s),a=u_(e.l),t=HK(e.h,n,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=$4(r),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var qK="[-\\+]?\\d+%?",ZK="[-\\+]?\\d*\\.\\d+%?",Au="(?:".concat(ZK,")|(?:").concat(qK,")"),ww="[\\s|\\(]+(".concat(Au,")[,|\\s]+(").concat(Au,")[,|\\s]+(").concat(Au,")\\s*\\)?"),Sw="[\\s|\\(]+(".concat(Au,")[,|\\s]+(").concat(Au,")[,|\\s]+(").concat(Au,")[,|\\s]+(").concat(Au,")\\s*\\)?"),qo={CSS_UNIT:new RegExp(Au),rgb:new RegExp("rgb"+ww),rgba:new RegExp("rgba"+Sw),hsl:new RegExp("hsl"+ww),hsla:new RegExp("hsla"+Sw),hsv:new RegExp("hsv"+ww),hsva:new RegExp("hsva"+Sw),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function XK(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(j2[e])e=j2[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=qo.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=qo.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=qo.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=qo.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=qo.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=qo.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=qo.hex8.exec(e),r?{r:Ja(r[1]),g:Ja(r[2]),b:Ja(r[3]),a:DD(r[4]),format:t?"name":"hex8"}:(r=qo.hex6.exec(e),r?{r:Ja(r[1]),g:Ja(r[2]),b:Ja(r[3]),format:t?"name":"hex"}:(r=qo.hex4.exec(e),r?{r:Ja(r[1]+r[1]),g:Ja(r[2]+r[2]),b:Ja(r[3]+r[3]),a:DD(r[4]+r[4]),format:t?"name":"hex8"}:(r=qo.hex3.exec(e),r?{r:Ja(r[1]+r[1]),g:Ja(r[2]+r[2]),b:Ja(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function ul(e){return!!qo.CSS_UNIT.exec(String(e))}var Ni=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var n;if(t instanceof e)return t;typeof t=="number"&&(t=WK(t)),this.originalInput=t;var i=Jf(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=r.format)!==null&&n!==void 0?n:i.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,n,i,a=t.r/255,o=t.g/255,s=t.b/255;return a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*r+.7152*n+.0722*i},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=$4(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=H2(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=H2(this.r,this.g,this.b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=ID(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=ID(this.r,this.g,this.b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),U2(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),jK(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(n,")"):"rgba(".concat(t,", ").concat(r,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(Ui(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(Ui(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+U2(this.r,this.g,this.b,!1),r=0,n=Object.entries(j2);r<n.length;r++){var i=n[r],a=i[0],o=i[1];if(t===o)return a}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var n=!1,i=this.a<1&&this.a>=0,a=!r&&i&&(t.startsWith("hex")||t==="name");return a?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=l_(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=l_(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=l_(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=l_(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var n=this.toRgb(),i=new e(t).toRgb(),a=r/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return new e(o)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var n=this.toHsl(),i=360/r,a=[this];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,a.push(new e(n));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/t;t--;)o.push(new e({h:n,s:i,v:a})),a=(a+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),n=new e(t).toRgb(),i=r.a+n.a*(1-r.a);return new e({r:(r.r*r.a+n.r*n.a*(1-r.a))/i,g:(r.g*r.a+n.g*n.a*(1-r.a))/i,b:(r.b*r.a+n.b*n.a*(1-r.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),n=r.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(n+o*a)%360,s:r.s,l:r.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),c_=2,LD=.16,YK=.05,KK=.05,JK=.15,N4=5,V4=4,QK=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function kD(e){var t=e.r,r=e.g,n=e.b,i=H2(t,r,n);return{h:i.h*360,s:i.s,v:i.v}}function h_(e){var t=e.r,r=e.g,n=e.b;return"#".concat(U2(t,r,n,!1))}function eJ(e,t,r){var n=r/100,i={r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b};return i}function RD(e,t,r){var n;return Math.round(e.h)>=60&&Math.round(e.h)<=240?n=r?Math.round(e.h)-c_*t:Math.round(e.h)+c_*t:n=r?Math.round(e.h)+c_*t:Math.round(e.h)-c_*t,n<0?n+=360:n>=360&&(n-=360),n}function OD(e,t,r){if(e.h===0&&e.s===0)return e.s;var n;return r?n=e.s-LD*t:t===V4?n=e.s+LD:n=e.s+YK*t,n>1&&(n=1),r&&t===N4&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function zD(e,t,r){var n;return r?n=e.v+KK*t:n=e.v-JK*t,n>1&&(n=1),Number(n.toFixed(2))}function xh(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],n=Jf(e),i=N4;i>0;i-=1){var a=kD(n),o=h_(Jf({h:RD(a,i,!0),s:OD(a,i,!0),v:zD(a,i,!0)}));r.push(o)}r.push(h_(n));for(var s=1;s<=V4;s+=1){var c=kD(n),f=h_(Jf({h:RD(c,s),s:OD(c,s),v:zD(c,s)}));r.push(f)}return t.theme==="dark"?QK.map(function(p){var v=p.index,y=p.opacity,_=h_(eJ(Jf(t.backgroundColor||"#141414"),Jf(r[v]),y*100));return _}):r}var Tw={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},f0={},Cw={};Object.keys(Tw).forEach(function(e){f0[e]=xh(Tw[e]),f0[e].primary=f0[e][5],Cw[e]=xh(Tw[e],{theme:"dark",backgroundColor:"#141414"}),Cw[e].primary=Cw[e][5]});var tJ=f0.blue;const rJ=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}};function nJ(e){const{sizeUnit:t,sizeStep:r}=e;return{sizeXXL:t*(r+8),sizeXL:t*(r+4),sizeLG:t*(r+2),sizeMD:t*(r+1),sizeMS:t*r,size:t*r,sizeSM:t*(r-1),sizeXS:t*(r-2),sizeXXS:t*(r-3)}}const H4={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},iJ=$e($e({},H4),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1}),nb=iJ;function aJ(e,t){let{generateColorPalettes:r,generateNeutralColorPalettes:n}=t;const{colorSuccess:i,colorWarning:a,colorError:o,colorInfo:s,colorPrimary:c,colorBgBase:f,colorTextBase:p}=e,v=r(c),y=r(i),_=r(a),S=r(o),E=r(s),P=n(f,p);return $e($e({},P),{colorPrimaryBg:v[1],colorPrimaryBgHover:v[2],colorPrimaryBorder:v[3],colorPrimaryBorderHover:v[4],colorPrimaryHover:v[5],colorPrimary:v[6],colorPrimaryActive:v[7],colorPrimaryTextHover:v[8],colorPrimaryText:v[9],colorPrimaryTextActive:v[10],colorSuccessBg:y[1],colorSuccessBgHover:y[2],colorSuccessBorder:y[3],colorSuccessBorderHover:y[4],colorSuccessHover:y[4],colorSuccess:y[6],colorSuccessActive:y[7],colorSuccessTextHover:y[8],colorSuccessText:y[9],colorSuccessTextActive:y[10],colorErrorBg:S[1],colorErrorBgHover:S[2],colorErrorBorder:S[3],colorErrorBorderHover:S[4],colorErrorHover:S[5],colorError:S[6],colorErrorActive:S[7],colorErrorTextHover:S[8],colorErrorText:S[9],colorErrorTextActive:S[10],colorWarningBg:_[1],colorWarningBgHover:_[2],colorWarningBorder:_[3],colorWarningBorderHover:_[4],colorWarningHover:_[4],colorWarning:_[6],colorWarningActive:_[7],colorWarningTextHover:_[8],colorWarningText:_[9],colorWarningTextActive:_[10],colorInfoBg:E[1],colorInfoBgHover:E[2],colorInfoBorder:E[3],colorInfoBorderHover:E[4],colorInfoHover:E[4],colorInfo:E[6],colorInfoActive:E[7],colorInfoTextHover:E[8],colorInfoText:E[9],colorInfoTextActive:E[10],colorBgMask:new Ni("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const oJ=e=>{let t=e,r=e,n=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?n=1:e>=6&&(n=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e>16?16:e,borderRadiusXS:n,borderRadiusSM:r,borderRadiusLG:t,borderRadiusOuter:i}};function sJ(e){const{motionUnit:t,motionBase:r,borderRadius:n,lineWidth:i}=e;return $e({motionDurationFast:`${(r+t).toFixed(1)}s`,motionDurationMid:`${(r+t*2).toFixed(1)}s`,motionDurationSlow:`${(r+t*3).toFixed(1)}s`,lineWidthBold:i+1},oJ(n))}const cl=(e,t)=>new Ni(e).setAlpha(t).toRgbString(),pm=(e,t)=>new Ni(e).darken(t).toHexString(),lJ=e=>{const t=xh(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},uJ=(e,t)=>{const r=e||"#fff",n=t||"#000";return{colorBgBase:r,colorTextBase:n,colorText:cl(n,.88),colorTextSecondary:cl(n,.65),colorTextTertiary:cl(n,.45),colorTextQuaternary:cl(n,.25),colorFill:cl(n,.15),colorFillSecondary:cl(n,.06),colorFillTertiary:cl(n,.04),colorFillQuaternary:cl(n,.02),colorBgLayout:pm(r,4),colorBgContainer:pm(r,0),colorBgElevated:pm(r,0),colorBgSpotlight:cl(n,.85),colorBorder:pm(r,15),colorBorderSecondary:pm(r,6)}};function cJ(e){const t=new Array(10).fill(null).map((r,n)=>{const i=n-1,a=e*Math.pow(2.71828,i/5),o=n>1?Math.floor(a):Math.ceil(a);return Math.floor(o/2)*2});return t[1]=e,t.map(r=>{const n=r+8;return{size:r,lineHeight:n/r}})}const hJ=e=>{const t=cJ(e),r=t.map(i=>i.size),n=t.map(i=>i.lineHeight);return{fontSizeSM:r[0],fontSize:r[1],fontSizeLG:r[2],fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:n[1],lineHeightLG:n[2],lineHeightSM:n[0],lineHeightHeading1:n[6],lineHeightHeading2:n[5],lineHeightHeading3:n[4],lineHeightHeading4:n[3],lineHeightHeading5:n[2]}};function fJ(e){const t=Object.keys(H4).map(r=>{const n=xh(e[r]);return new Array(10).fill(1).reduce((i,a,o)=>(i[`${r}-${o+1}`]=n[o],i),{})}).reduce((r,n)=>(r=$e($e({},r),n),r),{});return $e($e($e($e($e($e($e({},e),t),aJ(e,{generateColorPalettes:lJ,generateNeutralColorPalettes:uJ})),hJ(e.fontSize)),nJ(e)),rJ(e)),sJ(e))}function Aw(e){return e>=0&&e<=255}function f_(e,t){const{r,g:n,b:i,a}=new Ni(e).toRgb();if(a<1)return e;const{r:o,g:s,b:c}=new Ni(t).toRgb();for(let f=.01;f<=1;f+=.01){const p=Math.round((r-o*(1-f))/f),v=Math.round((n-s*(1-f))/f),y=Math.round((i-c*(1-f))/f);if(Aw(p)&&Aw(v)&&Aw(y))return new Ni({r:p,g:v,b:y,a:Math.round(f*100)/100}).toRgbString()}return new Ni({r,g:n,b:i,a:1}).toRgbString()}var dJ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function pJ(e){const{override:t}=e,r=dJ(e,["override"]),n=$e({},t);Object.keys(nb).forEach(_=>{delete n[_]});const i=$e($e({},r),n),a=480,o=576,s=768,c=992,f=1200,p=1600,v=2e3;return $e($e($e({},i),{colorLink:i.colorInfoText,colorLinkHover:i.colorInfoHover,colorLinkActive:i.colorInfoActive,colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:f_(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:f_(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:f_(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:f_(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:a,screenXSMin:a,screenXSMax:o-1,screenSM:o,screenSMMin:o,screenSMMax:s-1,screenMD:s,screenMDMin:s,screenMDMax:c-1,screenLG:c,screenLGMin:c,screenLGMax:f-1,screenXL:f,screenXLMin:f,screenXLMax:p-1,screenXXL:p,screenXXLMin:p,screenXXLMax:v-1,screenXXXL:v,screenXXXLMin:v,boxShadowPopoverArrow:"3px 3px 7px rgba(0, 0, 0, 0.1)",boxShadowCard:`
      0 1px 2px -2px ${new Ni("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ni("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ni("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),n)}const mJ={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},cA=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),vJ=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),gJ=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),yJ=(e,t)=>{const{fontFamily:r,fontSize:n}=e,i=`[class^="${t}"], [class*=" ${t}"]`;return{[i]:{fontFamily:r,fontSize:n,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[i]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},_J=e=>({outline:`${e.lineWidthBold}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),bJ=e=>({"&:focus-visible":$e({},_J(e))});function Lh(e,t,r){return n=>{const i=ke(()=>n==null?void 0:n.value),[a,o,s]=Ag(),{getPrefixCls:c,iconPrefixCls:f}=p4(),p=ke(()=>c()),v=ke(()=>({theme:a.value,token:o.value,hashId:s.value,path:["Shared",p.value]}));V2(v,()=>[{"&":gJ(o.value)}]);const y=ke(()=>({theme:a.value,token:o.value,hashId:s.value,path:[e,i.value,f.value]}));return[V2(y,()=>{const{token:_,flush:S}=wJ(o.value),E=typeof r=="function"?r(_):r,P=$e($e({},E),o.value[e]),I=`.${i.value}`,D=Wu(_,{componentCls:I,prefixCls:i.value,iconCls:`.${f.value}`,antCls:`.${p.value}`},P),L=t(D,{hashId:s.value,prefixCls:i.value,rootPrefixCls:p.value,iconPrefixCls:f.value,overrideComponentToken:o.value[e]});return S(e,P),[yJ(o.value,i.value),L]}),s]}}const U4=typeof CSSINJS_STATISTIC<"u";let G2=!0;function Wu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!U4)return $e({},...t);G2=!1;const n={};return t.forEach(i=>{Object.keys(i).forEach(o=>{Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>i[o]})})}),G2=!0,n}function xJ(){}function wJ(e){let t,r=e,n=xJ;return U4&&(t=new Set,r=new Proxy(e,{get(i,a){return G2&&t.add(a),i[a]}}),n=(i,a)=>{Array.from(t)}),{token:r,keys:t,flush:n}}const SJ=P4(fJ),j4={token:nb,hashed:!0},G4=Symbol("DesignTokenContext"),W2=yn(),TJ=e=>{Hi(G4,e),zr(e,()=>{W2.value=Kt(e),NH(W2)},{immediate:!0,deep:!0})},CJ=Jt({props:{value:za()},setup(e,t){let{slots:r}=t;return TJ(ke(()=>e.value)),()=>{var n;return(n=r.default)===null||n===void 0?void 0:n.call(r)}}});function Ag(){const e=on(G4,ke(()=>W2.value||j4)),t=ke(()=>`${FK}-${e.value.hashed||""}`),r=ke(()=>e.value.theme||SJ),n=fK(r,ke(()=>[nb,e.value.token]),ke(()=>({salt:t.value,override:$e({override:e.value.token},e.value.components),formatToken:pJ})));return[r,ke(()=>n.value[0]),ke(()=>e.value.hashed?n.value[1]:"")]}const W4=Jt({compatConfig:{MODE:3},setup(){const[,e]=Ag(),t=ke(()=>new Ni(e.value.colorBgBase).toHsl().l<.5?{opacity:.65}:{});return()=>De("svg",{style:t.value,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},[De("g",{fill:"none","fill-rule":"evenodd"},[De("g",{transform:"translate(24 31.67)"},[De("ellipse",{"fill-opacity":".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},null),De("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"},null),De("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"},null),De("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"},null),De("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"},null)]),De("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"},null),De("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},[De("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},null),De("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},null)])])])}});W4.PRESENTED_IMAGE_DEFAULT=!0;const AJ=W4,q4=Jt({compatConfig:{MODE:3},setup(){const[,e]=Ag(),t=ke(()=>{const{colorFill:r,colorFillTertiary:n,colorFillQuaternary:i,colorBgContainer:a}=e.value;return{borderColor:new Ni(r).onBackground(a).toHexString(),shadowColor:new Ni(n).onBackground(a).toHexString(),contentColor:new Ni(i).onBackground(a).toHexString()}});return()=>De("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},[De("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[De("ellipse",{fill:t.value.shadowColor,cx:"32",cy:"33",rx:"32",ry:"7"},null),De("g",{"fill-rule":"nonzero",stroke:t.value.borderColor},[De("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"},null),De("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:t.value.contentColor},null)])])])}});q4.PRESENTED_IMAGE_SIMPLE=!0;const MJ=q4,EJ=e=>{const{componentCls:t,margin:r,marginXS:n,marginXL:i,fontSize:a,lineHeight:o}=e;return{[t]:{marginInline:n,fontSize:a,lineHeight:o,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:n,opacity:e.opacityImage,img:{height:"100%"},svg:{height:"100%",margin:"auto"}},[`${t}-footer`]:{marginTop:r},"&-normal":{marginBlock:i,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:n,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},PJ=Lh("Empty",e=>{const{componentCls:t,controlHeightLG:r}=e,n=Wu(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r*2.5,emptyImgHeightMD:r,emptyImgHeightSM:r*.875});return[EJ(n)]});var IJ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Z4=De(AJ,null,null),X4=De(MJ,null,null),DJ=()=>({prefixCls:String,imageStyle:za(),image:Ko(),description:Ko()}),hA=Jt({name:"AEmpty",compatConfig:{MODE:3},inheritAttrs:!1,props:DJ(),setup(e,t){let{slots:r={},attrs:n}=t;const{direction:i,prefixCls:a}=Ol("empty",e),[o,s]=PJ(a);return()=>{var c,f;const p=a.value,v=$e($e({},e),n),{image:y=((c=r.image)===null||c===void 0?void 0:c.call(r))||Z4,description:_=((f=r.description)===null||f===void 0?void 0:f.call(r))||void 0,imageStyle:S,class:E=""}=v,P=IJ(v,["image","description","imageStyle","class"]);return o(De(g4,{componentName:"Empty",children:I=>{const D=typeof _<"u"?_:I.description,L=typeof D=="string"?D:"empty";let B=null;return typeof y=="string"?B=De("img",{alt:L,src:y},null):B=y,De("div",_n({class:gi(p,E,s.value,{[`${p}-normal`]:y===X4,[`${p}-rtl`]:i.value==="rtl"})},P),[De("div",{class:`${p}-image`,style:S},[B]),D&&De("p",{class:`${p}-description`},[D]),r.default&&De("div",{class:`${p}-footer`},[l4(r.default())])])}},null))}}});hA.PRESENTED_IMAGE_DEFAULT=Z4;hA.PRESENTED_IMAGE_SIMPLE=X4;const mm=J1(hA),Y4=e=>{const{prefixCls:t}=Ol("empty",e);return(n=>{switch(n){case"Table":case"List":return De(mm,{image:mm.PRESENTED_IMAGE_SIMPLE},null);case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return De(mm,{image:mm.PRESENTED_IMAGE_SIMPLE,class:`${t.value}-small`},null);default:return De(mm,null,null)}})(e.componentName)};function LJ(e){return De(Y4,{componentName:e},null)}const K4=Symbol("SizeContextKey"),J4=()=>on(K4,tr(void 0)),kJ=e=>{const t=J4();return Hi(K4,ke(()=>e.value||t.value)),e},Ol=(e,t)=>{const r=J4(),n=oA(),i=on(aA,$e($e({},d4),{renderEmpty:N=>Tr(Y4,{componentName:N})})),a=ke(()=>i.getPrefixCls(e,t.prefixCls)),o=ke(()=>{var N,G;return(N=t.direction)!==null&&N!==void 0?N:(G=i.direction)===null||G===void 0?void 0:G.value}),s=ke(()=>{var N;return(N=t.iconPrefixCls)!==null&&N!==void 0?N:i.iconPrefixCls.value}),c=ke(()=>i.getPrefixCls()),f=ke(()=>{var N;return(N=i.autoInsertSpaceInButton)===null||N===void 0?void 0:N.value}),p=i.renderEmpty,v=i.space,y=i.pageHeader,_=i.form,S=ke(()=>{var N,G;return(N=t.getTargetContainer)!==null&&N!==void 0?N:(G=i.getTargetContainer)===null||G===void 0?void 0:G.value}),E=ke(()=>{var N,G,Y;return(G=(N=t.getContainer)!==null&&N!==void 0?N:t.getPopupContainer)!==null&&G!==void 0?G:(Y=i.getPopupContainer)===null||Y===void 0?void 0:Y.value}),P=ke(()=>{var N,G;return(N=t.dropdownMatchSelectWidth)!==null&&N!==void 0?N:(G=i.dropdownMatchSelectWidth)===null||G===void 0?void 0:G.value}),I=ke(()=>{var N;return(t.virtual===void 0?((N=i.virtual)===null||N===void 0?void 0:N.value)!==!1:t.virtual!==!1)&&P.value!==!1}),D=ke(()=>t.size||r.value),L=ke(()=>{var N,G,Y;return(N=t.autocomplete)!==null&&N!==void 0?N:(Y=(G=i.input)===null||G===void 0?void 0:G.value)===null||Y===void 0?void 0:Y.autocomplete}),B=ke(()=>{var N;return(N=t.disabled)!==null&&N!==void 0?N:n.value}),U=ke(()=>{var N;return(N=t.csp)!==null&&N!==void 0?N:i.csp}),V=ke(()=>{var N,G;return(N=t.wave)!==null&&N!==void 0?N:(G=i.wave)===null||G===void 0?void 0:G.value});return{configProvider:i,prefixCls:a,direction:o,size:D,getTargetContainer:S,getPopupContainer:E,space:v,pageHeader:y,form:_,autoInsertSpaceInButton:f,renderEmpty:p,virtual:I,dropdownMatchSelectWidth:P,rootPrefixCls:c,getPrefixCls:i.getPrefixCls,autocomplete:L,csp:U,iconPrefixCls:s,disabled:B,select:i.select,wave:V}};function BD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q4(e,t,r){return t&&BD(e.prototype,t),r&&BD(e,r),e}function d0(){return(d0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function eB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function tB(e,t){if(e==null)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(i[r]=e[r]);return i}function FD(e){return((t=e)!=null&&typeof t=="object"&&Array.isArray(t)===!1)==1&&Object.prototype.toString.call(e)==="[object Object]";var t}var rB=Object.prototype,nB=rB.toString,RJ=rB.hasOwnProperty,iB=/^\s*function (\w+)/;function $D(e){var t,r=(t=e==null?void 0:e.type)!==null&&t!==void 0?t:e;if(r){var n=r.toString().match(iB);return n?n[1]:""}return""}var wh=function(e){var t,r;return FD(e)!==!1&&typeof(t=e.constructor)=="function"&&FD(r=t.prototype)!==!1&&r.hasOwnProperty("isPrototypeOf")!==!1},OJ=function(e){return e},wa=OJ,Gv=function(e,t){return RJ.call(e,t)},zJ=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e},Ld=Array.isArray||function(e){return nB.call(e)==="[object Array]"},kd=function(e){return nB.call(e)==="[object Function]"},Y0=function(e){return wh(e)&&Gv(e,"_vueTypes_name")},aB=function(e){return wh(e)&&(Gv(e,"type")||["_vueTypes_name","validator","default","required"].some(function(t){return Gv(e,t)}))};function fA(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function kh(e,t,r){var n;r===void 0&&(r=!1);var i=!0,a="";n=wh(e)?e:{type:e};var o=Y0(n)?n._vueTypes_name+" - ":"";if(aB(n)&&n.type!==null){if(n.type===void 0||n.type===!0||!n.required&&t===void 0)return i;Ld(n.type)?(i=n.type.some(function(v){return kh(v,t,!0)===!0}),a=n.type.map(function(v){return $D(v)}).join(" or ")):i=(a=$D(n))==="Array"?Ld(t):a==="Object"?wh(t):a==="String"||a==="Number"||a==="Boolean"||a==="Function"?function(v){if(v==null)return"";var y=v.constructor.toString().match(iB);return y?y[1]:""}(t)===a:t instanceof n.type}if(!i){var s=o+'value "'+t+'" should be of type "'+a+'"';return r===!1?(wa(s),!1):s}if(Gv(n,"validator")&&kd(n.validator)){var c=wa,f=[];if(wa=function(v){f.push(v)},i=n.validator(t),wa=c,!i){var p=(f.length>1?"* ":"")+f.join(`
* `);return f.length=0,r===!1?(wa(p),i):p}}return i}function ao(e,t){var r=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(i){return i!==void 0||this.default?kd(i)||kh(this,i,!0)===!0?(this.default=Ld(i)?function(){return[].concat(i)}:wh(i)?function(){return Object.assign({},i)}:i,this):(wa(this._vueTypes_name+' - invalid default value: "'+i+'"'),this):this}}}),n=r.validator;return kd(n)&&(r.validator=fA(n,r)),r}function Bs(e,t){var r=ao(e,t);return Object.defineProperty(r,"validate",{value:function(n){return kd(this.validator)&&wa(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=fA(n,this),this}})}function ND(e,t,r){var n,i,a=(n=t,i={},Object.getOwnPropertyNames(n).forEach(function(v){i[v]=Object.getOwnPropertyDescriptor(n,v)}),Object.defineProperties({},i));if(a._vueTypes_name=e,!wh(r))return a;var o,s,c=r.validator,f=tB(r,["validator"]);if(kd(c)){var p=a.validator;p&&(p=(s=(o=p).__original)!==null&&s!==void 0?s:o),a.validator=fA(p?function(v){return p.call(this,v)&&c.call(this,v)}:c,a)}return Object.assign(a,f)}function ib(e){return e.replace(/^(?!\s*$)/gm,"  ")}var BJ=function(){return Bs("any",{})},FJ=function(){return Bs("function",{type:Function})},$J=function(){return Bs("boolean",{type:Boolean})},NJ=function(){return Bs("string",{type:String})},VJ=function(){return Bs("number",{type:Number})},HJ=function(){return Bs("array",{type:Array})},UJ=function(){return Bs("object",{type:Object})},jJ=function(){return ao("integer",{type:Number,validator:function(e){return zJ(e)}})},GJ=function(){return ao("symbol",{validator:function(e){return typeof e=="symbol"}})};function WJ(e,t){if(t===void 0&&(t="custom validation failed"),typeof e!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return ao(e.name||"<<anonymous function>>",{validator:function(r){var n=e(r);return n||wa(this._vueTypes_name+" - "+t),n}})}function qJ(e){if(!Ld(e))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var t='oneOf - value should be one of "'+e.join('", "')+'".',r=e.reduce(function(n,i){if(i!=null){var a=i.constructor;n.indexOf(a)===-1&&n.push(a)}return n},[]);return ao("oneOf",{type:r.length>0?r:void 0,validator:function(n){var i=e.indexOf(n)!==-1;return i||wa(t),i}})}function ZJ(e){if(!Ld(e))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var t=!1,r=[],n=0;n<e.length;n+=1){var i=e[n];if(aB(i)){if(Y0(i)&&i._vueTypes_name==="oneOf"){r=r.concat(i.type);continue}if(kd(i.validator)&&(t=!0),i.type!==!0&&i.type){r=r.concat(i.type);continue}}r.push(i)}return r=r.filter(function(a,o){return r.indexOf(a)===o}),ao("oneOfType",t?{type:r,validator:function(a){var o=[],s=e.some(function(c){var f=kh(Y0(c)&&c._vueTypes_name==="oneOf"?c.type||null:c,a,!0);return typeof f=="string"&&o.push(f),f===!0});return s||wa("oneOfType - provided value does not match any of the "+o.length+` passed-in validators:
`+ib(o.join(`
`))),s}}:{type:r})}function XJ(e){return ao("arrayOf",{type:Array,validator:function(t){var r,n=t.every(function(i){return(r=kh(e,i,!0))===!0});return n||wa(`arrayOf - value validation error:
`+ib(r)),n}})}function YJ(e){return ao("instanceOf",{type:e})}function KJ(e){return ao("objectOf",{type:Object,validator:function(t){var r,n=Object.keys(t).every(function(i){return(r=kh(e,t[i],!0))===!0});return n||wa(`objectOf - value validation error:
`+ib(r)),n}})}function JJ(e){var t=Object.keys(e),r=t.filter(function(i){var a;return!!(!((a=e[i])===null||a===void 0)&&a.required)}),n=ao("shape",{type:Object,validator:function(i){var a=this;if(!wh(i))return!1;var o=Object.keys(i);if(r.length>0&&r.some(function(c){return o.indexOf(c)===-1})){var s=r.filter(function(c){return o.indexOf(c)===-1});return wa(s.length===1?'shape - required property "'+s[0]+'" is not defined.':'shape - required properties "'+s.join('", "')+'" are not defined.'),!1}return o.every(function(c){if(t.indexOf(c)===-1)return a._vueTypes_isLoose===!0||(wa('shape - shape definition does not include a "'+c+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var f=kh(e[c],i[c],!0);return typeof f=="string"&&wa('shape - "'+c+`" property validation error:
 `+ib(f)),f===!0})}});return Object.defineProperty(n,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(n,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),n}var ws=function(){function e(){}return e.extend=function(t){var r=this;if(Ld(t))return t.forEach(function(v){return r.extend(v)}),this;var n=t.name,i=t.validate,a=i!==void 0&&i,o=t.getter,s=o!==void 0&&o,c=tB(t,["name","validate","getter"]);if(Gv(this,n))throw new TypeError('[VueTypes error]: Type "'+n+'" already defined');var f,p=c.type;return Y0(p)?(delete c.type,Object.defineProperty(this,n,s?{get:function(){return ND(n,p,c)}}:{value:function(){var v,y=ND(n,p,c);return y.validator&&(y.validator=(v=y.validator).bind.apply(v,[y].concat([].slice.call(arguments)))),y}})):(f=s?{get:function(){var v=Object.assign({},c);return a?Bs(n,v):ao(n,v)},enumerable:!0}:{value:function(){var v,y,_=Object.assign({},c);return v=a?Bs(n,_):ao(n,_),_.validator&&(v.validator=(y=_.validator).bind.apply(y,[v].concat([].slice.call(arguments)))),v},enumerable:!0},Object.defineProperty(this,n,f))},Q4(e,null,[{key:"any",get:function(){return BJ()}},{key:"func",get:function(){return FJ().def(this.defaults.func)}},{key:"bool",get:function(){return $J().def(this.defaults.bool)}},{key:"string",get:function(){return NJ().def(this.defaults.string)}},{key:"number",get:function(){return VJ().def(this.defaults.number)}},{key:"array",get:function(){return HJ().def(this.defaults.array)}},{key:"object",get:function(){return UJ().def(this.defaults.object)}},{key:"integer",get:function(){return jJ().def(this.defaults.integer)}},{key:"symbol",get:function(){return GJ()}}]),e}();function oB(e){var t;return e===void 0&&(e={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(t=function(r){function n(){return r.apply(this,arguments)||this}return eB(n,r),Q4(n,null,[{key:"sensibleDefaults",get:function(){return d0({},this.defaults)},set:function(i){this.defaults=i!==!1?d0({},i!==!0?i:e):{}}}]),n}(ws)).defaults=d0({},e),t}ws.defaults={},ws.custom=WJ,ws.oneOf=qJ,ws.instanceOf=YJ,ws.oneOfType=ZJ,ws.arrayOf=XJ,ws.objectOf=KJ,ws.shape=JJ,ws.utils={validate:function(e,t){return kh(t,e,!0)===!0},toType:function(e,t,r){return r===void 0&&(r=!1),r?Bs(e,t):ao(e,t)}};(function(e){function t(){return e.apply(this,arguments)||this}return eB(t,e),t})(oB());const Rd=oB({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});Rd.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VueNode",getter:!0,type:null}]);const sB=(e,t,r)=>{QY(e,`[ant-design-vue: ${t}] ${r}`)};function QJ(e){let{prefixCls:t,animation:r,transitionName:n}=e;return r?{name:`${t}-${r}`}:n?{name:n}:{}}const eQ=e=>{if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){const t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){const t=e.getBoundingClientRect();if(t.width||t.height)return!0}return!1};var lB=typeof global=="object"&&global&&global.Object===Object&&global,tQ=typeof self=="object"&&self&&self.Object===Object&&self,qu=lB||tQ||Function("return this")(),K0=qu.Symbol,uB=Object.prototype,rQ=uB.hasOwnProperty,nQ=uB.toString,vm=K0?K0.toStringTag:void 0;function iQ(e){var t=rQ.call(e,vm),r=e[vm];try{e[vm]=void 0;var n=!0}catch{}var i=nQ.call(e);return n&&(t?e[vm]=r:delete e[vm]),i}var aQ=Object.prototype,oQ=aQ.toString;function sQ(e){return oQ.call(e)}var lQ="[object Null]",uQ="[object Undefined]",VD=K0?K0.toStringTag:void 0;function Mg(e){return e==null?e===void 0?uQ:lQ:VD&&VD in Object(e)?iQ(e):sQ(e)}function cB(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var cQ="[object AsyncFunction]",hQ="[object Function]",fQ="[object GeneratorFunction]",dQ="[object Proxy]";function hB(e){if(!cB(e))return!1;var t=Mg(e);return t==hQ||t==fQ||t==cQ||t==dQ}var Mw=qu["__core-js_shared__"],HD=function(){var e=/[^.]+$/.exec(Mw&&Mw.keys&&Mw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function pQ(e){return!!HD&&HD in e}var mQ=Function.prototype,vQ=mQ.toString;function Rh(e){if(e!=null){try{return vQ.call(e)}catch{}try{return e+""}catch{}}return""}var gQ=/[\\^$.*+?()[\]{}|]/g,yQ=/^\[object .+?Constructor\]$/,_Q=Function.prototype,bQ=Object.prototype,xQ=_Q.toString,wQ=bQ.hasOwnProperty,SQ=RegExp("^"+xQ.call(wQ).replace(gQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function TQ(e){if(!cB(e)||pQ(e))return!1;var t=hB(e)?SQ:yQ;return t.test(Rh(e))}function CQ(e,t){return e==null?void 0:e[t]}function Eg(e,t){var r=CQ(e,t);return TQ(r)?r:void 0}var q2=Eg(qu,"Map"),AQ=Array.isArray;function dA(e){return e!=null&&typeof e=="object"}var MQ="[object Arguments]";function UD(e){return dA(e)&&Mg(e)==MQ}var fB=Object.prototype,EQ=fB.hasOwnProperty,PQ=fB.propertyIsEnumerable,IQ=UD(function(){return arguments}())?UD:function(e){return dA(e)&&EQ.call(e,"callee")&&!PQ.call(e,"callee")};const DQ=IQ;function LQ(){return!1}var dB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jD=dB&&typeof module=="object"&&module&&!module.nodeType&&module,kQ=jD&&jD.exports===dB,GD=kQ?qu.Buffer:void 0,RQ=GD?GD.isBuffer:void 0,OQ=RQ||LQ;const zQ=OQ;var BQ=9007199254740991;function pB(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=BQ}var FQ="[object Arguments]",$Q="[object Array]",NQ="[object Boolean]",VQ="[object Date]",HQ="[object Error]",UQ="[object Function]",jQ="[object Map]",GQ="[object Number]",WQ="[object Object]",qQ="[object RegExp]",ZQ="[object Set]",XQ="[object String]",YQ="[object WeakMap]",KQ="[object ArrayBuffer]",JQ="[object DataView]",QQ="[object Float32Array]",eee="[object Float64Array]",tee="[object Int8Array]",ree="[object Int16Array]",nee="[object Int32Array]",iee="[object Uint8Array]",aee="[object Uint8ClampedArray]",oee="[object Uint16Array]",see="[object Uint32Array]",In={};In[QQ]=In[eee]=In[tee]=In[ree]=In[nee]=In[iee]=In[aee]=In[oee]=In[see]=!0;In[FQ]=In[$Q]=In[KQ]=In[NQ]=In[JQ]=In[VQ]=In[HQ]=In[UQ]=In[jQ]=In[GQ]=In[WQ]=In[qQ]=In[ZQ]=In[XQ]=In[YQ]=!1;function lee(e){return dA(e)&&pB(e.length)&&!!In[Mg(e)]}function uee(e){return function(t){return e(t)}}var mB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lv=mB&&typeof module=="object"&&module&&!module.nodeType&&module,cee=lv&&lv.exports===mB,Ew=cee&&lB.process,WD=function(){try{var e=lv&&lv.require&&lv.require("util").types;return e||Ew&&Ew.binding&&Ew.binding("util")}catch{}}(),qD=WD&&WD.isTypedArray,hee=qD?uee(qD):lee;const fee=hee;var dee=Object.prototype;function vB(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||dee;return e===r}function pee(e,t){return function(r){return e(t(r))}}var mee=pee(Object.keys,Object),vee=Object.prototype,gee=vee.hasOwnProperty;function yee(e){if(!vB(e))return mee(e);var t=[];for(var r in Object(e))gee.call(e,r)&&r!="constructor"&&t.push(r);return t}function _ee(e){return e!=null&&pB(e.length)&&!hB(e)}var Z2=Eg(qu,"DataView"),X2=Eg(qu,"Promise"),Y2=Eg(qu,"Set"),K2=Eg(qu,"WeakMap"),ZD="[object Map]",bee="[object Object]",XD="[object Promise]",YD="[object Set]",KD="[object WeakMap]",JD="[object DataView]",xee=Rh(Z2),wee=Rh(q2),See=Rh(X2),Tee=Rh(Y2),Cee=Rh(K2),Zc=Mg;(Z2&&Zc(new Z2(new ArrayBuffer(1)))!=JD||q2&&Zc(new q2)!=ZD||X2&&Zc(X2.resolve())!=XD||Y2&&Zc(new Y2)!=YD||K2&&Zc(new K2)!=KD)&&(Zc=function(e){var t=Mg(e),r=t==bee?e.constructor:void 0,n=r?Rh(r):"";if(n)switch(n){case xee:return JD;case wee:return ZD;case See:return XD;case Tee:return YD;case Cee:return KD}return t});const Aee=Zc;q0("bottomLeft","bottomRight","topLeft","topRight");const gB=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $e(e?{name:e,appear:!0,appearActiveClass:`${e}`,appearToClass:`${e}-appear ${e}-appear-active`,enterFromClass:`${e}-appear ${e}-enter ${e}-appear-prepare ${e}-enter-prepare`,enterActiveClass:`${e}`,enterToClass:`${e}-enter ${e}-appear ${e}-appear-active ${e}-enter-active`,leaveActiveClass:`${e} ${e}-leave`,leaveToClass:`${e}-leave-active`}:{css:!1},t)},yB=Symbol("PortalContextKey"),Mee=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inTriggerContext:!0};Hi(yB,{inTriggerContext:t.inTriggerContext,shouldRender:ke(()=>{const{sPopupVisible:r,popupRef:n,forceRender:i,autoDestroy:a}=e||{};let o=!1;return(r||n||i)&&(o=!0),!r&&a&&(o=!1),o})})},Eee=()=>{Mee({},{inTriggerContext:!1});const e=on(yB,{shouldRender:ke(()=>!1),inTriggerContext:!1});return{shouldRender:ke(()=>e.shouldRender.value||e.inTriggerContext===!1)}},Pee=Jt({compatConfig:{MODE:3},name:"Portal",inheritAttrs:!1,props:{getContainer:Rd.func.isRequired,didUpdate:Function},setup(e,t){let{slots:r}=t,n=!0,i;const{shouldRender:a}=Eee();function o(){a.value&&(i=e.getContainer())}Az(()=>{n=!1,o()}),On(()=>{i||o()});const s=zr(a,()=>{a.value&&!i&&(i=e.getContainer()),i&&s()});return N1(()=>{Oo(()=>{var c;a.value&&((c=e.didUpdate)===null||c===void 0||c.call(e,e))})}),()=>{var c;return a.value?n?(c=r.default)===null||c===void 0?void 0:c.call(r):i?De(Fz,{to:i},r):null:null}}});function Sc(e){const t=typeof e=="function"?e():e,r=tr(t);function n(i){r.value=i}return[r,n]}var Iee=Symbol("iconContext"),_B=function(){return on(Iee,{prefixCls:tr("anticon"),rootClassName:tr(""),csp:tr()})};function pA(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Dee(e,t){return e&&e.contains?e.contains(t):!1}var QD="data-vc-order",Lee="vc-icon-key",J2=new Map;function bB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):Lee}function mA(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function kee(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function xB(e){return Array.from((J2.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function wB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!pA())return null;var r=t.csp,n=t.prepend,i=document.createElement("style");i.setAttribute(QD,kee(n)),r&&r.nonce&&(i.nonce=r.nonce),i.innerHTML=e;var a=mA(t),o=a.firstChild;if(n){if(n==="queue"){var s=xB(a).filter(function(c){return["prepend","prependQueue"].includes(c.getAttribute(QD))});if(s.length)return a.insertBefore(i,s[s.length-1].nextSibling),i}a.insertBefore(i,o)}else a.appendChild(i);return i}function Ree(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=mA(t);return xB(r).find(function(n){return n.getAttribute(bB(t))===e})}function Oee(e,t){var r=J2.get(e);if(!r||!Dee(document,r)){var n=wB("",t),i=n.parentNode;J2.set(e,i),e.removeChild(n)}}function zee(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=mA(r);Oee(n,r);var i=Ree(t,r);if(i)return r.csp&&r.csp.nonce&&i.nonce!==r.csp.nonce&&(i.nonce=r.csp.nonce),i.innerHTML!==e&&(i.innerHTML=e),i;var a=wB(e,r);return a.setAttribute(bB(r),t),a}function eL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Bee(e,i,r[i])})}return e}function Bee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tL(e){return typeof e=="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(typeof e.icon=="object"||typeof e.icon=="function")}function Q2(e,t,r){return r?Tr(e.tag,eL({key:t},r,e.attrs),(e.children||[]).map(function(n,i){return Q2(n,"".concat(t,"-").concat(e.tag,"-").concat(i))})):Tr(e.tag,eL({key:t},e.attrs),(e.children||[]).map(function(n,i){return Q2(n,"".concat(t,"-").concat(e.tag,"-").concat(i))}))}function SB(e){return xh(e)[0]}function TB(e){return e?Array.isArray(e)?e:[e]:[]}var Fee=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;function CB(e){return e&&e.getRootNode&&e.getRootNode()}function $ee(e){return pA()?CB(e)instanceof ShadowRoot:!1}function Nee(e){return $ee(e)?CB(e):null}var Vee=function(){var t=_B(),r=t.prefixCls,n=t.csp,i=kl(),a=Fee;r&&(a=a.replace(/anticon/g,r.value)),Oo(function(){if(pA()){var o=i.vnode.el,s=Nee(o);zee(a,"@ant-design-vue-icons",{prepend:!0,csp:n.value,attachTo:s})}})},Hee=["icon","primaryColor","secondaryColor"];function Uee(e,t){if(e==null)return{};var r=jee(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jee(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function p0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Gee(e,i,r[i])})}return e}function Gee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uv=io({primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1});function Wee(e){var t=e.primaryColor,r=e.secondaryColor;uv.primaryColor=t,uv.secondaryColor=r||SB(t),uv.calculated=!!r}function qee(){return p0({},uv)}var Qd=function(t,r){var n=p0({},t,r.attrs),i=n.icon,a=n.primaryColor,o=n.secondaryColor,s=Uee(n,Hee),c=uv;if(a&&(c={primaryColor:a,secondaryColor:o||SB(a)}),tL(i),!tL(i))return null;var f=i;return f&&typeof f.icon=="function"&&(f=p0({},f,{icon:f.icon(c.primaryColor,c.secondaryColor)})),Q2(f.icon,"svg-".concat(f.name),p0({},s,{"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};Qd.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};Qd.inheritAttrs=!1;Qd.displayName="IconBase";Qd.getTwoToneColors=qee;Qd.setTwoToneColors=Wee;const vA=Qd;function Zee(e,t){return Jee(e)||Kee(e,t)||Yee(e,t)||Xee()}function Xee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yee(e,t){if(e){if(typeof e=="string")return rL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rL(e,t)}}function rL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(c){a=!0,s=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function Jee(e){if(Array.isArray(e))return e}function AB(e){var t=TB(e),r=Zee(t,2),n=r[0],i=r[1];return vA.setTwoToneColors({primaryColor:n,secondaryColor:i})}function Qee(){var e=vA.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var ete=Jt({name:"InsertStyles",setup:function(){return Vee(),function(){return null}}}),tte=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function rte(e,t){return ote(e)||ate(e,t)||ite(e,t)||nte()}function nte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ite(e,t){if(e){if(typeof e=="string")return nL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nL(e,t)}}function nL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ate(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(c){a=!0,s=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function ote(e){if(Array.isArray(e))return e}function iL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Vm(e,i,r[i])})}return e}function Vm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ste(e,t){if(e==null)return{};var r=lte(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lte(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}AB(tJ.primary);var ep=function(t,r){var n,i=iL({},t,r.attrs),a=i.class,o=i.icon,s=i.spin,c=i.rotate,f=i.tabindex,p=i.twoToneColor,v=i.onClick,y=ste(i,tte),_=_B(),S=_.prefixCls,E=_.rootClassName,P=(n={},Vm(n,E.value,!!E.value),Vm(n,S.value,!0),Vm(n,"".concat(S.value,"-").concat(o.name),!!o.name),Vm(n,"".concat(S.value,"-spin"),!!s||o.name==="loading"),n),I=f;I===void 0&&v&&(I=-1);var D=c?{msTransform:"rotate(".concat(c,"deg)"),transform:"rotate(".concat(c,"deg)")}:void 0,L=TB(p),B=rte(L,2),U=B[0],V=B[1];return De("span",iL({role:"img","aria-label":o.name},y,{onClick:v,class:[P,a],tabindex:I}),[De(vA,{icon:o,primaryColor:U,secondaryColor:V,style:D},null),De(ete,null,null)])};ep.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:[String,Array]};ep.displayName="AntdIcon";ep.inheritAttrs=!1;ep.getTwoToneColor=Qee;ep.setTwoToneColor=AB;const Vs=ep;var ute={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const cte=ute;function aL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){hte(e,i,r[i])})}return e}function hte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gA=function(t,r){var n=aL({},t,r.attrs);return De(Vs,aL({},n,{icon:cte}),null)};gA.displayName="LoadingOutlined";gA.inheritAttrs=!1;const Wv=gA;var fte={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const dte=fte;function oL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){pte(e,i,r[i])})}return e}function pte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yA=function(t,r){var n=oL({},t,r.attrs);return De(Vs,oL({},n,{icon:dte}),null)};yA.displayName="CloseOutlined";yA.inheritAttrs=!1;const _A=yA;var mte={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const vte=mte;function sL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){gte(e,i,r[i])})}return e}function gte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bA=function(t,r){var n=sL({},t,r.attrs);return De(Vs,sL({},n,{icon:vte}),null)};bA.displayName="CloseCircleFilled";bA.inheritAttrs=!1;const ab=bA;function MB(e){const t=Symbol("contextKey");return{useProvide:(i,a)=>{const o=io({});return Hi(t,o),Ml(()=>{$e(o,i,a||{})}),o},useInject:()=>on(t,e)||{}}}const yte=e=>{const{componentCls:t}=e;return{[t]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},_te=e=>{const{componentCls:t}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-space-item`]:{"&:empty":{display:"none"}}}}},bte=Lh("Space",e=>[_te(e),yte(e)]);var xte="[object Map]",wte="[object Set]",Ste=Object.prototype,Tte=Ste.hasOwnProperty;function EB(e){if(e==null)return!0;if(_ee(e)&&(AQ(e)||typeof e=="string"||typeof e.splice=="function"||zQ(e)||fee(e)||DQ(e)))return!e.length;var t=Aee(e);if(t==xte||t==wte)return!e.size;if(vB(e))return!yee(e).length;for(var r in e)if(Tte.call(e,r))return!1;return!0}const Cte=()=>({compactSize:String,compactDirection:Rd.oneOf(q0("horizontal","vertical")).def("horizontal"),isFirstItem:fh(),isLastItem:fh()}),xA=MB(null),Ate=(e,t)=>{const r=xA.useInject(),n=ke(()=>{if(!r||EB(r))return"";const{compactDirection:i,isFirstItem:a,isLastItem:o}=r,s=i==="vertical"?"-vertical-":"-";return gi({[`${e.value}-compact${s}item`]:!0,[`${e.value}-compact${s}first-item`]:a,[`${e.value}-compact${s}last-item`]:o,[`${e.value}-compact${s}item-rtl`]:t.value==="rtl"})});return{compactSize:ke(()=>r==null?void 0:r.compactSize),compactDirection:ke(()=>r==null?void 0:r.compactDirection),compactItemClassnames:n}},Mte=()=>({prefixCls:String,size:{type:String},direction:Rd.oneOf(q0("horizontal","vertical")).def("horizontal"),align:Rd.oneOf(q0("start","end","center","baseline")),block:{type:Boolean,default:void 0}}),Ete=Jt({name:"CompactItem",props:Cte(),setup(e,t){let{slots:r}=t;return xA.useProvide(e),()=>{var n;return(n=r.default)===null||n===void 0?void 0:n.call(r)}}});Mte();function Pte(e,t,r){const{focusElCls:n,focus:i,borderElCls:a}=r,o=a?"> *":"",s=["hover",i?"focus":null,"active"].filter(Boolean).map(c=>`&:${c} ${o}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":$e($e({[s]:{zIndex:2}},n?{[`&${n}`]:{zIndex:2}}:{}),{[`&[disabled] ${o}`]:{zIndex:0}})}}function Ite(e,t,r){const{borderElCls:n}=r,i=n?`> ${n}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Dte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=e,n=`${r}-compact`;return{[n]:$e($e({},Pte(e,n,t)),Ite(r,n,t))}}var Lte={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};const kte=Lte;function lL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Rte(e,i,r[i])})}return e}function Rte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wA=function(t,r){var n=lL({},t,r.attrs);return De(Vs,lL({},n,{icon:kte}),null)};wA.displayName="CheckCircleOutlined";wA.inheritAttrs=!1;const Ote=wA;var zte={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};const Bte=zte;function uL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Fte(e,i,r[i])})}return e}function Fte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SA=function(t,r){var n=uL({},t,r.attrs);return De(Vs,uL({},n,{icon:Bte}),null)};SA.displayName="ExclamationCircleOutlined";SA.inheritAttrs=!1;const $te=SA;var Nte={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};const Vte=Nte;function cL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Hte(e,i,r[i])})}return e}function Hte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TA=function(t,r){var n=cL({},t,r.attrs);return De(Vs,cL({},n,{icon:Vte}),null)};TA.displayName="InfoCircleOutlined";TA.inheritAttrs=!1;const Ute=TA;var jte={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};const Gte=jte;function hL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Wte(e,i,r[i])})}return e}function Wte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var CA=function(t,r){var n=hL({},t,r.attrs);return De(Vs,hL({},n,{icon:Gte}),null)};CA.displayName="CloseCircleOutlined";CA.inheritAttrs=!1;const qte=CA;var Zte={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const Xte=Zte;function fL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Yte(e,i,r[i])})}return e}function Yte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AA=function(t,r){var n=fL({},t,r.attrs);return De(Vs,fL({},n,{icon:Xte}),null)};AA.displayName="CheckCircleFilled";AA.inheritAttrs=!1;const ob=AA;var Kte={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const Jte=Kte;function dL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Qte(e,i,r[i])})}return e}function Qte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MA=function(t,r){var n=dL({},t,r.attrs);return De(Vs,dL({},n,{icon:Jte}),null)};MA.displayName="ExclamationCircleFilled";MA.inheritAttrs=!1;const sb=MA;var ere={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const tre=ere;function pL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){rre(e,i,r[i])})}return e}function rre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var EA=function(t,r){var n=pL({},t,r.attrs);return De(Vs,pL({},n,{icon:tre}),null)};EA.displayName="InfoCircleFilled";EA.inheritAttrs=!1;const lb=EA,nre=e=>{const{componentCls:t,colorPrimary:r}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},ire=Lh("Wave",e=>[nre(e)]);function are(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function Pw(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&are(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ore(e){const{borderTopColor:t,borderColor:r,backgroundColor:n}=getComputedStyle(e);return Pw(t)?t:Pw(r)?r:Pw(n)?n:null}function Iw(e){return Number.isNaN(e)?0:e}const sre=Jt({props:{target:za(),className:String},setup(e){const t=yn(null),[r,n]=Sc(null),[i,a]=Sc([]),[o,s]=Sc(0),[c,f]=Sc(0),[p,v]=Sc(0),[y,_]=Sc(0),[S,E]=Sc(!1);function P(){const{target:N}=e,G=getComputedStyle(N);n(ore(N));const Y=G.position==="static",{borderLeftWidth:ee,borderTopWidth:J}=G;s(Y?N.offsetLeft:Iw(-parseFloat(ee))),f(Y?N.offsetTop:Iw(-parseFloat(J))),v(N.offsetWidth),_(N.offsetHeight);const{borderTopLeftRadius:X,borderTopRightRadius:ne,borderBottomLeftRadius:we,borderBottomRightRadius:fe}=G;a([X,ne,fe,we].map(me=>Iw(parseFloat(me))))}let I,D,L;const B=()=>{clearTimeout(L),k2.cancel(D),I==null||I.disconnect()},U=()=>{var N;const G=(N=t.value)===null||N===void 0?void 0:N.parentElement;G&&(j0(null,G),G.parentElement&&G.parentElement.removeChild(G))};On(()=>{B(),L=setTimeout(()=>{U()},5e3);const{target:N}=e;N&&(D=k2(()=>{P(),E(!0)}),typeof ResizeObserver<"u"&&(I=new ResizeObserver(P),I.observe(N)))}),ju(()=>{B()});const V=N=>{N.propertyName==="opacity"&&U()};return()=>{if(!S.value)return null;const N={left:`${o.value}px`,top:`${c.value}px`,width:`${p.value}px`,height:`${y.value}px`,borderRadius:i.value.map(G=>`${G}px`).join(" ")};return r&&(N["--wave-color"]=r.value),De(Rl,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[De("div",{ref:t,class:e.className,style:N,onTransitionend:V},null)]})}}});function lre(e,t){const r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.top="0px",e==null||e.insertBefore(r,e==null?void 0:e.firstChild),j0(De(sre,{target:e,className:t},null),r)}function ure(e,t,r){function n(){var i;const a=L2(e);!((i=r==null?void 0:r.value)===null||i===void 0)&&i.disabled||!a||lre(a,t.value)}return n}const cre=Jt({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(e,t){let{slots:r}=t;const n=kl(),{prefixCls:i,wave:a}=Ol("wave",e),[,o]=ire(i),s=ure(n,ke(()=>gi(i.value,o.value)),a);let c;const f=()=>{L2(n).removeEventListener("click",c,!0)};return On(()=>{zr(()=>e.disabled,()=>{f(),Oo(()=>{const p=L2(n);p==null||p.removeEventListener("click",c,!0),!(!p||p.nodeType!==1||e.disabled)&&(c=v=>{v.target.tagName==="INPUT"||!eQ(v.target)||!p.getAttribute||p.getAttribute("disabled")||p.disabled||p.className.includes("disabled")||p.className.includes("-leave")||s()},p.addEventListener("click",c,!0))})},{immediate:!0,flush:"post"})}),ju(()=>{f()}),()=>{var p;return(p=r.default)===null||p===void 0?void 0:p.call(r)[0]}}}),hre=()=>({prefixCls:String,type:String,htmlType:{type:String,default:"button"},shape:{type:String},size:{type:String},loading:{type:[Boolean,Object],default:()=>!1},disabled:{type:Boolean,default:void 0},ghost:{type:Boolean,default:void 0},block:{type:Boolean,default:void 0},danger:{type:Boolean,default:void 0},icon:Rd.any,href:String,target:String,title:String,onClick:mD(),onMousedown:mD()}),mL=e=>{e&&(e.style.width="0px",e.style.opacity="0",e.style.transform="scale(0)")},vL=e=>{Oo(()=>{e&&(e.style.width=`${e.scrollWidth}px`,e.style.opacity="1",e.style.transform="scale(1)")})},gL=e=>{e&&e.style&&(e.style.width=null,e.style.opacity=null,e.style.transform=null)},fre=Jt({compatConfig:{MODE:3},name:"LoadingIcon",props:{prefixCls:String,loading:[Boolean,Object],existIcon:Boolean},setup(e){return()=>{const{existIcon:t,prefixCls:r,loading:n}=e;if(t)return De("span",{class:`${r}-loading-icon`},[De(Wv,null,null)]);const i=!!n;return De(Rl,{name:`${r}-loading-icon-motion`,onBeforeEnter:mL,onEnter:vL,onAfterEnter:gL,onBeforeLeave:vL,onLeave:a=>{setTimeout(()=>{mL(a)})},onAfterLeave:gL},{default:()=>[i?De("span",{class:`${r}-loading-icon`},[De(Wv,null,null)]):null]})}}}),yL=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),dre=e=>{const{componentCls:t,fontSize:r,lineWidth:n,colorPrimaryHover:i,colorErrorHover:a}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-n,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:r}},yL(`${t}-primary`,i),yL(`${t}-danger`,a)]}},pre=dre;function mre(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function vre(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function gre(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:$e($e({},mre(e,t)),vre(e.componentCls,t))}}const yre=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"> span":{display:"inline-block"},[`> ${r} + span, > span + ${r}`]:{marginInlineStart:e.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":$e({},bJ(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},Pl=(e,t)=>({"&:not(:disabled)":{"&:hover":e,"&:active":t}}),_re=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),bre=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),eT=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),J0=(e,t,r,n,i,a,o)=>({[`&${e}-background-ghost`]:$e($e({color:t||void 0,backgroundColor:"transparent",borderColor:r||void 0,boxShadow:"none"},Pl($e({backgroundColor:"transparent"},a),$e({backgroundColor:"transparent"},o))),{"&:disabled":{cursor:"not-allowed",color:n||void 0,borderColor:i||void 0}})}),PA=e=>({"&:disabled":$e({},eT(e))}),PB=e=>$e({},PA(e)),Q0=e=>({"&:disabled":{cursor:"not-allowed",color:e.colorTextDisabled}}),IB=e=>$e($e($e($e($e({},PB(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),Pl({color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),J0(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:$e($e($e({color:e.colorError,borderColor:e.colorError},Pl({color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),J0(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),PA(e))}),xre=e=>$e($e($e($e($e({},PB(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),Pl({color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),J0(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:$e($e($e({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},Pl({backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),J0(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),PA(e))}),wre=e=>$e($e({},IB(e)),{borderStyle:"dashed"}),Sre=e=>$e($e($e({color:e.colorLink},Pl({color:e.colorLinkHover},{color:e.colorLinkActive})),Q0(e)),{[`&${e.componentCls}-dangerous`]:$e($e({color:e.colorError},Pl({color:e.colorErrorHover},{color:e.colorErrorActive})),Q0(e))}),Tre=e=>$e($e($e({},Pl({color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),Q0(e)),{[`&${e.componentCls}-dangerous`]:$e($e({color:e.colorError},Q0(e)),Pl({color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),Cre=e=>$e($e({},eT(e)),{[`&${e.componentCls}:hover`]:$e({},eT(e))}),Are=e=>{const{componentCls:t}=e;return{[`${t}-default`]:IB(e),[`${t}-primary`]:xre(e),[`${t}-dashed`]:wre(e),[`${t}-link`]:Sre(e),[`${t}-text`]:Tre(e),[`${t}-disabled`]:Cre(e)}},IA=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,iconCls:n,controlHeight:i,fontSize:a,lineHeight:o,lineWidth:s,borderRadius:c,buttonPaddingHorizontal:f}=e,p=Math.max(0,(i-a*o)/2-s),v=f-s,y=`${r}-icon-only`;return[{[`${r}${t}`]:{fontSize:a,height:i,padding:`${p}px ${v}px`,borderRadius:c,[`&${y}`]:{width:i,paddingInlineStart:0,paddingInlineEnd:0,[`&${r}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${r}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${r}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`&:not(${y}) ${r}-loading-icon > ${n}`]:{marginInlineEnd:e.marginXS}}},{[`${r}${r}-circle${t}`]:_re(e)},{[`${r}${r}-round${t}`]:bre(e)}]},Mre=e=>IA(e),Ere=e=>{const t=Wu(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM});return IA(t,`${e.componentCls}-sm`)},Pre=e=>{const t=Wu(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG});return IA(t,`${e.componentCls}-lg`)},Ire=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},Dre=Lh("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:r}=e,n=Wu(e,{colorOutlineDefault:t,buttonPaddingHorizontal:r});return[yre(n),Ere(n),Mre(n),Pre(n),Ire(n),Are(n),pre(n),Dte(e,{focus:!1}),gre(e)]}),Lre=()=>({prefixCls:String,size:{type:String}}),DB=MB(),tT=Jt({compatConfig:{MODE:3},name:"AButtonGroup",props:Lre(),setup(e,t){let{slots:r}=t;const{prefixCls:n,direction:i}=Ol("btn-group",e),[,,a]=Ag();DB.useProvide(io({size:ke(()=>e.size)}));const o=ke(()=>{const{size:s}=e;let c="";switch(s){case"large":c="lg";break;case"small":c="sm";break;case"middle":case void 0:break;default:sB(!s,"Button.Group","Invalid prop `size`.")}return{[`${n.value}`]:!0,[`${n.value}-${c}`]:c,[`${n.value}-rtl`]:i.value==="rtl",[a.value]:!0}});return()=>{var s;return De("div",{class:o.value},[Nv((s=r.default)===null||s===void 0?void 0:s.call(r))])}}}),_L=/^[\u4e00-\u9fa5]{2}$/,bL=_L.test.bind(_L);function d_(e){return e==="text"||e==="link"}const cv=Jt({compatConfig:{MODE:3},name:"AButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:o4(hre(),{type:"default"}),slots:Object,setup(e,t){let{slots:r,attrs:n,emit:i,expose:a}=t;const{prefixCls:o,autoInsertSpaceInButton:s,direction:c,size:f}=Ol("btn",e),[p,v]=Dre(o),y=DB.useInject(),_=oA(),S=ke(()=>{var fe;return(fe=e.disabled)!==null&&fe!==void 0?fe:_.value}),E=yn(null),P=yn(void 0);let I=!1;const D=yn(!1),L=yn(!1),B=ke(()=>s.value!==!1),{compactSize:U,compactItemClassnames:V}=Ate(o,c),N=ke(()=>typeof e.loading=="object"&&e.loading.delay?e.loading.delay||!0:!!e.loading);zr(N,fe=>{clearTimeout(P.value),typeof N.value=="number"?P.value=setTimeout(()=>{D.value=fe},N.value):D.value=fe},{immediate:!0});const G=ke(()=>{const{type:fe,shape:me="default",ghost:Ve,block:Oe,danger:ct}=e,_t=o.value,zt={large:"lg",small:"sm",middle:void 0},Mt=U.value||(y==null?void 0:y.size)||f.value,ar=Mt&&zt[Mt]||"";return[V.value,{[v.value]:!0,[`${_t}`]:!0,[`${_t}-${me}`]:me!=="default"&&me,[`${_t}-${fe}`]:fe,[`${_t}-${ar}`]:ar,[`${_t}-loading`]:D.value,[`${_t}-background-ghost`]:Ve&&!d_(fe),[`${_t}-two-chinese-chars`]:L.value&&B.value,[`${_t}-block`]:Oe,[`${_t}-dangerous`]:!!ct,[`${_t}-rtl`]:c.value==="rtl"}]}),Y=()=>{const fe=E.value;if(!fe||s.value===!1)return;const me=fe.textContent;I&&bL(me)?L.value||(L.value=!0):L.value&&(L.value=!1)},ee=fe=>{if(D.value||S.value){fe.preventDefault();return}i("click",fe)},J=fe=>{i("mousedown",fe)},X=(fe,me)=>{const Ve=me?" ":"";if(fe.type===Bu){let Oe=fe.children.trim();return bL(Oe)&&(Oe=Oe.split("").join(Ve)),De("span",null,[Oe])}return fe};return Ml(()=>{sB(!(e.ghost&&d_(e.type)),"Button","`link` or `text` button can't be a `ghost` button.")}),On(Y),N1(Y),ju(()=>{P.value&&clearTimeout(P.value)}),a({focus:()=>{var fe;(fe=E.value)===null||fe===void 0||fe.focus()},blur:()=>{var fe;(fe=E.value)===null||fe===void 0||fe.blur()}}),()=>{var fe,me;const{icon:Ve=(fe=r.icon)===null||fe===void 0?void 0:fe.call(r)}=e,Oe=Nv((me=r.default)===null||me===void 0?void 0:me.call(r));I=Oe.length===1&&!Ve&&!d_(e.type);const{type:ct,htmlType:_t,href:zt,title:Mt,target:ar}=e,rr=D.value?"loading":Ve,wr=$e($e({},n),{title:Mt,disabled:S.value,class:[G.value,n.class,{[`${o.value}-icon-only`]:Oe.length===0&&!!rr}],onClick:ee,onMousedown:J});S.value||delete wr.disabled;const Xt=Ve&&!D.value?Ve:De(fre,{existIcon:!!Ve,prefixCls:o.value,loading:!!D.value},null),Ue=Oe.map(at=>X(at,I&&B.value));if(zt!==void 0)return p(De("a",_n(_n({},wr),{},{href:zt,target:ar,ref:E}),[Xt,Ue]));let st=De("button",_n(_n({},wr),{},{ref:E,type:_t}),[Xt,Ue]);if(!d_(ct)){const at=function(){return st}();st=De(cre,{ref:"wave",disabled:!!D.value},{default:()=>[at]})}return p(st)}}});cv.Group=tT;cv.install=function(e){return e.component(cv.name,cv),e.component(tT.name,tT),e};function LB(e,t){return e.classList?e.classList.contains(t):` ${e.className} `.indexOf(` ${t} `)>-1}function kre(e,t){e.classList?e.classList.add(t):LB(e,t)||(e.className=`${e.className} ${t}`)}function Rre(e,t){if(e.classList)e.classList.remove(t);else if(LB(e,t)){const r=e.className;e.className=` ${r} `.replace(` ${t} `," ")}}var kB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function OB(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}let Dw=$e({},Vv.Modal);function Ore(e){e?Dw=$e($e({},Dw),e):Dw=$e({},Vv.Modal)}const rT="internalMark",m0=Jt({compatConfig:{MODE:3},name:"ALocaleProvider",props:{locale:{type:Object},ANT_MARK__:String},setup(e,t){let{slots:r}=t;M4(e.ANT_MARK__===rT);const n=io({antLocale:$e($e({},e.locale),{exist:!0}),ANT_MARK__:rT});return Hi("localeData",n),zr(()=>e.locale,i=>{Ore(i&&i.Modal),n.antLocale=$e($e({},i),{exist:!0})},{immediate:!0}),()=>{var i;return(i=r.default)===null||i===void 0?void 0:i.call(r)}}});m0.install=function(e){return e.component(m0.name,m0),e};const zre=J1(m0),zB=Jt({name:"Notice",inheritAttrs:!1,props:["prefixCls","duration","updateMark","noticeKey","closeIcon","closable","props","onClick","onClose","holder","visible"],setup(e,t){let{attrs:r,slots:n}=t,i,a=!1;const o=ke(()=>e.duration===void 0?4.5:e.duration),s=()=>{o.value&&!a&&(i=setTimeout(()=>{f()},o.value*1e3))},c=()=>{i&&(clearTimeout(i),i=null)},f=v=>{v&&v.stopPropagation(),c();const{onClose:y,noticeKey:_}=e;y&&y(_)},p=()=>{c(),s()};return On(()=>{s()}),qd(()=>{a=!0,c()}),zr([o,()=>e.updateMark,()=>e.visible],(v,y)=>{let[_,S,E]=v,[P,I,D]=y;(_!==P||S!==I||E!==D&&D)&&p()},{flush:"post"}),()=>{var v,y;const{prefixCls:_,closable:S,closeIcon:E=(v=n.closeIcon)===null||v===void 0?void 0:v.call(n),onClick:P,holder:I}=e,{class:D,style:L}=r,B=`${_}-notice`,U=Object.keys(r).reduce((N,G)=>((G.startsWith("data-")||G.startsWith("aria-")||G==="role")&&(N[G]=r[G]),N),{}),V=De("div",_n({class:gi(B,D,{[`${B}-closable`]:S}),style:L,onMouseenter:c,onMouseleave:s,onClick:P},U),[De("div",{class:`${B}-content`},[(y=n.default)===null||y===void 0?void 0:y.call(n)]),S?De("a",{tabindex:0,onClick:f,class:`${B}-close`},[E||De("span",{class:`${B}-close-x`},null)]):null]);return I?De(Fz,{to:I},{default:()=>V}):V}}});var Bre=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let xL=0;const Fre=Date.now();function wL(){const e=xL;return xL+=1,`rcNotification_${Fre}_${e}`}const nT=Jt({name:"Notification",inheritAttrs:!1,props:["prefixCls","transitionName","animation","maxCount","closeIcon","hashId"],setup(e,t){let{attrs:r,expose:n,slots:i}=t;const a=new Map,o=tr([]),s=ke(()=>{const{prefixCls:p,animation:v="fade"}=e;let y=e.transitionName;return!y&&v&&(y=`${p}-${v}`),gB(y)}),c=(p,v)=>{const y=p.key||wL(),_=$e($e({},p),{key:y}),{maxCount:S}=e,E=o.value.map(I=>I.notice.key).indexOf(y),P=o.value.concat();E!==-1?P.splice(E,1,{notice:_,holderCallback:v}):(S&&o.value.length>=S&&(_.key=P[0].notice.key,_.updateMark=wL(),_.userPassKey=y,P.shift()),P.push({notice:_,holderCallback:v})),o.value=P},f=p=>{o.value=o.value.filter(v=>{let{notice:{key:y,userPassKey:_}}=v;return(_||y)!==p})};return n({add:c,remove:f,notices:o}),()=>{var p;const{prefixCls:v,closeIcon:y=(p=i.closeIcon)===null||p===void 0?void 0:p.call(i,{prefixCls:v})}=e,_=o.value.map((E,P)=>{let{notice:I,holderCallback:D}=E;const L=P===o.value.length-1?I.updateMark:void 0,{key:B,userPassKey:U}=I,{content:V}=I,N=$e($e($e({prefixCls:v,closeIcon:typeof y=="function"?y({prefixCls:v}):y},I),I.props),{key:B,noticeKey:U||B,updateMark:L,onClose:G=>{var Y;f(G),(Y=I.onClose)===null||Y===void 0||Y.call(I)},onClick:I.onClick});return D?De("div",{key:B,class:`${v}-hook-holder`,ref:G=>{typeof B>"u"||(G?(a.set(B,G),D(G,N)):a.delete(B))}},null):De(zB,_n(_n({},N),{},{class:gi(N.class,e.hashId)}),{default:()=>[typeof V=="function"?V({prefixCls:v}):V]})}),S={[v]:1,[r.class]:!!r.class,[e.hashId]:!0};return De("div",{class:S,style:r.style||{top:"65px",left:"50%"}},[De(Kz,_n({tag:"div"},s.value),{default:()=>[_]})])}}});nT.newInstance=function(t,r){const n=t||{},{name:i="notification",getContainer:a,appContext:o,prefixCls:s,rootPrefixCls:c,transitionName:f,hasTransitionName:p,useStyle:v}=n,y=Bre(n,["name","getContainer","appContext","prefixCls","rootPrefixCls","transitionName","hasTransitionName","useStyle"]),_=document.createElement("div");a?a().appendChild(_):document.body.appendChild(_);const E=De(Jt({compatConfig:{MODE:3},name:"NotificationWrapper",setup(P,I){let{attrs:D}=I;const L=yn(),B=ke(()=>ra.getPrefixCls(i,s)),[,U]=v(B);return On(()=>{r({notice(V){var N;(N=L.value)===null||N===void 0||N.add(V)},removeNotice(V){var N;(N=L.value)===null||N===void 0||N.remove(V)},destroy(){j0(null,_),_.parentNode&&_.parentNode.removeChild(_)},component:L})}),()=>{const V=ra,N=V.getRootPrefixCls(c,B.value),G=p?f:`${B.value}-${f}`;return De(LA,_n(_n({},V),{},{prefixCls:N}),{default:()=>[De(nT,_n(_n({ref:L},D),{},{prefixCls:B.value,transitionName:G,hashId:U.value}),null)]})}}}),y);E.appContext=o||E.appContext,j0(E,_)};const BB=nT;let SL=0;const $re=Date.now();function TL(){const e=SL;return SL+=1,`rcNotification_${$re}_${e}`}const Nre=Jt({name:"HookNotification",inheritAttrs:!1,props:["prefixCls","transitionName","animation","maxCount","closeIcon","hashId","remove","notices","getStyles","getClassName","onAllRemoved","getContainer"],setup(e,t){let{attrs:r,slots:n}=t;const i=new Map,a=ke(()=>e.notices),o=ke(()=>{let p=e.transitionName;if(!p&&e.animation)switch(typeof e.animation){case"string":p=e.animation;break;case"function":p=e.animation().name;break;case"object":p=e.animation.name;break;default:p=`${e.prefixCls}-fade`;break}return gB(p)}),s=p=>e.remove(p),c=tr({});zr(a,()=>{const p={};Object.keys(c.value).forEach(v=>{p[v]=[]}),e.notices.forEach(v=>{const{placement:y="topRight"}=v.notice;y&&(p[y]=p[y]||[],p[y].push(v))}),c.value=p});const f=ke(()=>Object.keys(c.value));return()=>{var p;const{prefixCls:v,closeIcon:y=(p=n.closeIcon)===null||p===void 0?void 0:p.call(n,{prefixCls:v})}=e,_=f.value.map(S=>{var E,P;const I=c.value[S],D=(E=e.getClassName)===null||E===void 0?void 0:E.call(e,S),L=(P=e.getStyles)===null||P===void 0?void 0:P.call(e,S),B=I.map((N,G)=>{let{notice:Y,holderCallback:ee}=N;const J=G===a.value.length-1?Y.updateMark:void 0,{key:X,userPassKey:ne}=Y,{content:we}=Y,fe=$e($e($e({prefixCls:v,closeIcon:typeof y=="function"?y({prefixCls:v}):y},Y),Y.props),{key:X,noticeKey:ne||X,updateMark:J,onClose:me=>{var Ve;s(me),(Ve=Y.onClose)===null||Ve===void 0||Ve.call(Y)},onClick:Y.onClick});return ee?De("div",{key:X,class:`${v}-hook-holder`,ref:me=>{typeof X>"u"||(me?(i.set(X,me),ee(me,fe)):i.delete(X))}},null):De(zB,_n(_n({},fe),{},{class:gi(fe.class,e.hashId)}),{default:()=>[typeof we=="function"?we({prefixCls:v}):we]})}),U={[v]:1,[`${v}-${S}`]:1,[r.class]:!!r.class,[e.hashId]:!0,[D]:!!D};function V(){var N;I.length>0||(Reflect.deleteProperty(c.value,S),(N=e.onAllRemoved)===null||N===void 0||N.call(e))}return De("div",{key:S,class:U,style:r.style||L||{top:"65px",left:"50%"}},[De(Kz,_n(_n({tag:"div"},o.value),{},{onAfterLeave:V}),{default:()=>[B]})])});return De(Pee,{getContainer:e.getContainer},{default:()=>[_]})}}}),Vre=Nre;var Hre=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Ure=()=>document.body;let CL=0;function jre(){const e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(i=>{i&&Object.keys(i).forEach(a=>{const o=i[a];o!==void 0&&(e[a]=o)})}),e}function FB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{getContainer:t=Ure,motion:r,prefixCls:n,maxCount:i,getClassName:a,getStyles:o,onAllRemoved:s}=e,c=Hre(e,["getContainer","motion","prefixCls","maxCount","getClassName","getStyles","onAllRemoved"]),f=yn([]),p=yn(),v=(I,D)=>{const L=I.key||TL(),B=$e($e({},I),{key:L}),U=f.value.map(N=>N.notice.key).indexOf(L),V=f.value.concat();U!==-1?V.splice(U,1,{notice:B,holderCallback:D}):(i&&f.value.length>=i&&(B.key=V[0].notice.key,B.updateMark=TL(),B.userPassKey=L,V.shift()),V.push({notice:B,holderCallback:D})),f.value=V},y=I=>{f.value=f.value.filter(D=>{let{notice:{key:L,userPassKey:B}}=D;return(B||L)!==I})},_=()=>{f.value=[]},S=()=>De(Vre,{ref:p,prefixCls:n,maxCount:i,notices:f.value,remove:y,getClassName:a,getStyles:o,animation:r,hashId:e.hashId,onAllRemoved:s,getContainer:t},null),E=yn([]),P={open:I=>{const D=jre(c,I);(D.key===null||D.key===void 0)&&(D.key=`vc-notification-${CL}`,CL+=1),E.value=[...E.value,{type:"open",config:D}]},close:I=>{E.value=[...E.value,{type:"close",key:I}]},destroy:()=>{E.value=[...E.value,{type:"destroy"}]}};return zr(E,()=>{E.value.length&&(E.value.forEach(I=>{switch(I.type){case"open":v(I.config);break;case"close":y(I.key);break;case"destroy":_();break}}),E.value=[])}),[P,S]}const Gre=e=>{const{componentCls:t,iconCls:r,boxShadowSecondary:n,colorBgElevated:i,colorSuccess:a,colorError:o,colorWarning:s,colorInfo:c,fontSizeLG:f,motionEaseInOutCirc:p,motionDurationSlow:v,marginXS:y,paddingXS:_,borderRadiusLG:S,zIndexPopup:E,messageNoticeContentPadding:P}=e,I=new vh("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:_,transform:"translateY(0)",opacity:1}}),D=new vh("MessageMoveOut",{"0%":{maxHeight:e.height,padding:_,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}});return[{[t]:$e($e({},cA(e)),{position:"fixed",top:y,left:"50%",transform:"translateX(-50%)",width:"100%",pointerEvents:"none",zIndex:E,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:I,animationDuration:v,animationPlayState:"paused",animationTimingFunction:p},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:D,animationDuration:v,animationPlayState:"paused",animationTimingFunction:p},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[`${t}-notice`]:{padding:_,textAlign:"center",[r]:{verticalAlign:"text-bottom",marginInlineEnd:y,fontSize:f},[`${t}-notice-content`]:{display:"inline-block",padding:P,background:i,borderRadius:S,boxShadow:n,pointerEvents:"all"},[`${t}-success ${r}`]:{color:a},[`${t}-error ${r}`]:{color:o},[`${t}-warning ${r}`]:{color:s},[`
        ${t}-info ${r},
        ${t}-loading ${r}`]:{color:c}}},{[`${t}-notice-pure-panel`]:{padding:0,textAlign:"start"}}]},$B=Lh("Message",e=>{const t=Wu(e,{messageNoticeContentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`});return[Gre(t)]},e=>({height:150,zIndexPopup:e.zIndexPopupBase+10})),Wre={info:De(lb,null,null),success:De(ob,null,null),error:De(ab,null,null),warning:De(sb,null,null),loading:De(Wv,null,null)},qre=Jt({name:"PureContent",inheritAttrs:!1,props:["prefixCls","type","icon"],setup(e,t){let{slots:r}=t;return()=>{var n;return De("div",{class:gi(`${e.prefixCls}-custom-content`,`${e.prefixCls}-${e.type}`)},[e.icon||Wre[e.type],De("span",null,[(n=r.default)===null||n===void 0?void 0:n.call(r)])])}}});var Zre=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Xre=8,Yre=3,Kre=Jt({name:"Holder",inheritAttrs:!1,props:["top","prefixCls","getContainer","maxCount","duration","rtl","transitionName","onAllRemoved"],setup(e,t){let{expose:r}=t;var n,i;const{getPrefixCls:a,getPopupContainer:o}=Ol("message",e),s=ke(()=>a("message",e.prefixCls)),[,c]=$B(s),f=()=>{var E;const P=(E=e.top)!==null&&E!==void 0?E:Xre;return{left:"50%",transform:"translateX(-50%)",top:typeof P=="number"?`${P}px`:P}},p=()=>gi(c.value,e.rtl?`${s.value}-rtl`:""),v=()=>{var E;return QJ({prefixCls:s.value,animation:(E=e.animation)!==null&&E!==void 0?E:"move-up",transitionName:e.transitionName})},y=De("span",{class:`${s.value}-close-x`},[De(_A,{class:`${s.value}-close-icon`},null)]),[_,S]=FB({getStyles:f,prefixCls:s.value,getClassName:p,motion:v,closable:!1,closeIcon:y,duration:(n=e.duration)!==null&&n!==void 0?n:Yre,getContainer:(i=e.staticGetContainer)!==null&&i!==void 0?i:o.value,maxCount:e.maxCount,onAllRemoved:e.onAllRemoved});return r($e($e({},_),{prefixCls:s,hashId:c})),S}});let AL=0;function Jre(e){const t=yn(null),r=Symbol("messageHolderKey"),n=c=>{var f;(f=t.value)===null||f===void 0||f.close(c)},i=c=>{if(!t.value){const U=()=>{};return U.then=()=>{},U}const{open:f,prefixCls:p,hashId:v}=t.value,y=`${p}-notice`,{content:_,icon:S,type:E,key:P,class:I,onClose:D}=c,L=Zre(c,["content","icon","type","key","class","onClose"]);let B=P;return B==null&&(AL+=1,B=`antd-message-${AL}`),EY(U=>(f($e($e({},L),{key:B,content:()=>De(qre,{prefixCls:p,type:E,icon:typeof S=="function"?S():S},{default:()=>[typeof _=="function"?_():_]}),placement:"top",class:gi(E&&`${y}-${E}`,v,I),onClose:()=>{D==null||D(),U()}})),()=>{n(B)}))},o={open:i,destroy:c=>{var f;c!==void 0?n(c):(f=t.value)===null||f===void 0||f.destroy()}};return["info","success","warning","error","loading"].forEach(c=>{const f=(p,v,y)=>{let _;p&&typeof p=="object"&&"content"in p?_=p:_={content:p};let S,E;typeof v=="function"?E=v:(S=v,E=y);const P=$e($e({onClose:E,duration:S},_),{type:c});return i(P)};o[c]=f}),[o,()=>De(Kre,_n(_n({key:r},e),{},{ref:t}),null)]}function Qre(e){return Jre(e)}let NB=3,VB,Sa,ene=1,HB="",UB="move-up",jB=!1,GB=()=>document.body,WB,qB=!1;function tne(){return ene++}function rne(e){e.top!==void 0&&(VB=e.top,Sa=null),e.duration!==void 0&&(NB=e.duration),e.prefixCls!==void 0&&(HB=e.prefixCls),e.getContainer!==void 0&&(GB=e.getContainer,Sa=null),e.transitionName!==void 0&&(UB=e.transitionName,Sa=null,jB=!0),e.maxCount!==void 0&&(WB=e.maxCount,Sa=null),e.rtl!==void 0&&(qB=e.rtl)}function nne(e,t){if(Sa){t(Sa);return}BB.newInstance({appContext:e.appContext,prefixCls:e.prefixCls||HB,rootPrefixCls:e.rootPrefixCls,transitionName:UB,hasTransitionName:jB,style:{top:VB},getContainer:GB||e.getPopupContainer,maxCount:WB,name:"message",useStyle:$B},r=>{if(Sa){t(Sa);return}Sa=r,t(r)})}const ZB={info:lb,success:ob,error:ab,warning:sb,loading:Wv},ine=Object.keys(ZB);function ane(e){const t=e.duration!==void 0?e.duration:NB,r=e.key||tne(),n=new Promise(a=>{const o=()=>(typeof e.onClose=="function"&&e.onClose(),a(!0));nne(e,s=>{s.notice({key:r,duration:t,style:e.style||{},class:e.class,content:c=>{let{prefixCls:f}=c;const p=ZB[e.type],v=p?De(p,null,null):"",y=gi(`${f}-custom-content`,{[`${f}-${e.type}`]:e.type,[`${f}-rtl`]:qB===!0});return De("div",{class:y},[typeof e.icon=="function"?e.icon():e.icon||v,De("span",null,[typeof e.content=="function"?e.content():e.content])])},onClose:o,onClick:e.onClick})})}),i=()=>{Sa&&Sa.removeNotice(r)};return i.then=(a,o)=>n.then(a,o),i.promise=n,i}function one(e){return Object.prototype.toString.call(e)==="[object Object]"&&!!e.content}const qv={open:ane,config:rne,destroy(e){if(Sa)if(e){const{removeNotice:t}=Sa;t(e)}else{const{destroy:t}=Sa;t(),Sa=null}}};function sne(e,t){e[t]=(r,n,i)=>one(r)?e.open($e($e({},r),{type:t})):(typeof n=="function"&&(i=n,n=void 0),e.open({content:r,duration:n,type:t,onClose:i}))}ine.forEach(e=>sne(qv,e));qv.warn=qv.warning;qv.useMessage=Qre;const lne=qv,une=e=>{const{componentCls:t,width:r,notificationMarginEdge:n}=e,i=new vh("antNotificationTopFadeIn",{"0%":{marginTop:"-100%",opacity:0},"100%":{marginTop:0,opacity:1}}),a=new vh("antNotificationBottomFadeIn",{"0%":{marginBottom:"-100%",opacity:0},"100%":{marginBottom:0,opacity:1}}),o=new vh("antNotificationLeftFadeIn",{"0%":{right:{_skip_check_:!0,value:r},opacity:0},"100%":{right:{_skip_check_:!0,value:0},opacity:1}});return{[`&${t}-top, &${t}-bottom`]:{marginInline:0},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:i}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:a}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginInlineEnd:0,marginInlineStart:n,[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:o}}}},cne=e=>{const{iconCls:t,componentCls:r,boxShadowSecondary:n,fontSizeLG:i,notificationMarginBottom:a,borderRadiusLG:o,colorSuccess:s,colorInfo:c,colorWarning:f,colorError:p,colorTextHeading:v,notificationBg:y,notificationPadding:_,notificationMarginEdge:S,motionDurationMid:E,motionEaseInOut:P,fontSize:I,lineHeight:D,width:L,notificationIconSize:B}=e,U=`${r}-notice`,V=new vh("antNotificationFadeIn",{"0%":{left:{_skip_check_:!0,value:L},opacity:0},"100%":{left:{_skip_check_:!0,value:0},opacity:1}}),N=new vh("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:a,opacity:1},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[r]:$e($e($e($e({},cA(e)),{position:"fixed",zIndex:e.zIndexPopup,marginInlineEnd:S,[`${r}-hook-holder`]:{position:"relative"},[`&${r}-top, &${r}-bottom`]:{[`${r}-notice`]:{marginInline:"auto auto"}},[`&${r}-topLeft, &${r}-bottomLeft`]:{[`${r}-notice`]:{marginInlineEnd:"auto",marginInlineStart:0}},[`${r}-fade-enter, ${r}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:P,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${r}-fade-leave`]:{animationTimingFunction:P,animationFillMode:"both",animationDuration:E,animationPlayState:"paused"},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:V,animationPlayState:"running"},[`${r}-fade-leave${r}-fade-leave-active`]:{animationName:N,animationPlayState:"running"}}),une(e)),{"&-rtl":{direction:"rtl",[`${r}-notice-btn`]:{float:"left"}}})},{[U]:{position:"relative",width:L,maxWidth:`calc(100vw - ${S*2}px)`,marginBottom:a,marginInlineStart:"auto",padding:_,overflow:"hidden",lineHeight:D,wordWrap:"break-word",background:y,borderRadius:o,boxShadow:n,[`${r}-close-icon`]:{fontSize:I,cursor:"pointer"},[`${U}-message`]:{marginBottom:e.marginXS,color:v,fontSize:i,lineHeight:e.lineHeightLG},[`${U}-description`]:{fontSize:I},[`&${U}-closable ${U}-message`]:{paddingInlineEnd:e.paddingLG},[`${U}-with-icon ${U}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.marginSM+B,fontSize:i},[`${U}-with-icon ${U}-description`]:{marginInlineStart:e.marginSM+B,fontSize:I},[`${U}-icon`]:{position:"absolute",fontSize:B,lineHeight:0,[`&-success${t}`]:{color:s},[`&-info${t}`]:{color:c},[`&-warning${t}`]:{color:f},[`&-error${t}`]:{color:p}},[`${U}-close`]:{position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.wireframe?"transparent":e.colorFillContent}},[`${U}-btn`]:{float:"right",marginTop:e.marginSM}}},{[`${U}-pure-panel`]:{margin:0}}]},XB=Lh("Notification",e=>{const t=e.paddingMD,r=e.paddingLG,n=Wu(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:r,notificationPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`,notificationMarginBottom:e.margin,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationIconSize:e.fontSizeLG*e.lineHeightLG,notificationCloseButtonSize:e.controlHeightLG*.55});return[cne(n)]},e=>({zIndexPopup:e.zIndexPopupBase+50,width:384}));function hne(e,t){return t||De("span",{class:`${e}-close-x`},[De(_A,{class:`${e}-close-icon`},null)])}De(lb,null,null),De(ob,null,null),De(ab,null,null),De(sb,null,null),De(Wv,null,null);const fne={success:ob,info:lb,error:ab,warning:sb};function dne(e){let{prefixCls:t,icon:r,type:n,message:i,description:a,btn:o}=e,s=null;if(r)s=De("span",{class:`${t}-icon`},[nd(r)]);else if(n){const c=fne[n];s=De(c,{class:`${t}-icon ${t}-icon-${n}`},null)}return De("div",{class:gi({[`${t}-with-icon`]:s}),role:"alert"},[s,De("div",{class:`${t}-message`},[i]),De("div",{class:`${t}-description`},[a]),o&&De("div",{class:`${t}-btn`},[o])])}function YB(e,t,r){let n;switch(t=typeof t=="number"?`${t}px`:t,r=typeof r=="number"?`${r}px`:r,e){case"top":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":n={left:0,top:t,bottom:"auto"};break;case"topRight":n={right:0,top:t,bottom:"auto"};break;case"bottom":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":n={left:0,top:"auto",bottom:r};break;default:n={right:0,top:"auto",bottom:r};break}return n}function pne(e){return{name:`${e}-fade`}}var mne=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const ML=24,vne=4.5,gne=Jt({name:"Holder",inheritAttrs:!1,props:["prefixCls","class","type","icon","content","onAllRemoved"],setup(e,t){let{expose:r}=t;const{getPrefixCls:n,getPopupContainer:i}=Ol("notification",e),a=ke(()=>e.prefixCls||n("notification")),o=y=>{var _,S;return YB(y,(_=e.top)!==null&&_!==void 0?_:ML,(S=e.bottom)!==null&&S!==void 0?S:ML)},[,s]=XB(a),c=()=>gi(s.value,{[`${a.value}-rtl`]:e.rtl}),f=()=>pne(a.value),[p,v]=FB({prefixCls:a.value,getStyles:o,getClassName:c,motion:f,closable:!0,closeIcon:hne(a.value),duration:vne,getContainer:()=>{var y,_;return((y=e.getPopupContainer)===null||y===void 0?void 0:y.call(e))||((_=i.value)===null||_===void 0?void 0:_.call(i))||document.body},maxCount:e.maxCount,hashId:s.value,onAllRemoved:e.onAllRemoved});return r($e($e({},p),{prefixCls:a.value,hashId:s})),v}});function yne(e){const t=yn(null),r=Symbol("notificationHolderKey"),n=s=>{if(!t.value)return;const{open:c,prefixCls:f,hashId:p}=t.value,v=`${f}-notice`,{message:y,description:_,icon:S,type:E,btn:P,class:I}=s,D=mne(s,["message","description","icon","type","btn","class"]);return c($e($e({placement:"topRight"},D),{content:()=>De(dne,{prefixCls:v,icon:typeof S=="function"?S():S,type:E,message:typeof y=="function"?y():y,description:typeof _=="function"?_():_,btn:typeof P=="function"?P():P},null),class:gi(E&&`${v}-${E}`,p,I)}))},a={open:n,destroy:s=>{var c,f;s!==void 0?(c=t.value)===null||c===void 0||c.close(s):(f=t.value)===null||f===void 0||f.destroy()}};return["success","info","warning","error"].forEach(s=>{a[s]=c=>n($e($e({},c),{type:s}))}),[a,()=>De(gne,_n(_n({key:r},e),{},{ref:t}),null)]}function _ne(e){return yne(e)}const Qc={};let KB=4.5,JB="24px",QB="24px",iT="",e6="topRight",t6=()=>document.body,r6=null,aT=!1,n6;function bne(e){const{duration:t,placement:r,bottom:n,top:i,getContainer:a,closeIcon:o,prefixCls:s}=e;s!==void 0&&(iT=s),t!==void 0&&(KB=t),r!==void 0&&(e6=r),n!==void 0&&(QB=typeof n=="number"?`${n}px`:n),i!==void 0&&(JB=typeof i=="number"?`${i}px`:i),a!==void 0&&(t6=a),o!==void 0&&(r6=o),e.rtl!==void 0&&(aT=e.rtl),e.maxCount!==void 0&&(n6=e.maxCount)}function xne(e,t){let{prefixCls:r,placement:n=e6,getContainer:i=t6,top:a,bottom:o,closeIcon:s=r6,appContext:c}=e;const{getPrefixCls:f}=Rne(),p=f("notification",r||iT),v=`${p}-${n}-${aT}`,y=Qc[v];if(y){Promise.resolve(y).then(S=>{t(S)});return}const _=gi(`${p}-${n}`,{[`${p}-rtl`]:aT===!0});BB.newInstance({name:"notification",prefixCls:r||iT,useStyle:XB,class:_,style:YB(n,a??JB,o??QB),appContext:c,getContainer:i,closeIcon:S=>{let{prefixCls:E}=S;return De("span",{class:`${E}-close-x`},[nd(s,{},De(_A,{class:`${E}-close-icon`},null))])},maxCount:n6,hasTransitionName:!0},S=>{Qc[v]=S,t(S)})}const wne={success:Ote,info:Ute,error:qte,warning:$te};function Sne(e){const{icon:t,type:r,description:n,message:i,btn:a}=e,o=e.duration===void 0?KB:e.duration;xne(e,s=>{s.notice({content:c=>{let{prefixCls:f}=c;const p=`${f}-notice`;let v=null;if(t)v=()=>De("span",{class:`${p}-icon`},[nd(t)]);else if(r){const y=wne[r];v=()=>De(y,{class:`${p}-icon ${p}-icon-${r}`},null)}return De("div",{class:v?`${p}-with-icon`:""},[v&&v(),De("div",{class:`${p}-message`},[!n&&v?De("span",{class:`${p}-message-single-line-auto-margin`},null):null,nd(i)]),De("div",{class:`${p}-description`},[nd(n)]),a?De("span",{class:`${p}-btn`},[nd(a)]):null])},duration:o,closable:!0,onClose:e.onClose,onClick:e.onClick,key:e.key,style:e.style||{},class:e.class})})}const Od={open:Sne,close(e){Object.keys(Qc).forEach(t=>Promise.resolve(Qc[t]).then(r=>{r.removeNotice(e)}))},config:bne,destroy(){Object.keys(Qc).forEach(e=>{Promise.resolve(Qc[e]).then(t=>{t.destroy()}),delete Qc[e]})}},Tne=["success","info","warning","error"];Tne.forEach(e=>{Od[e]=t=>Od.open($e($e({},t),{type:e}))});Od.warn=Od.warning;Od.useNotification=_ne;const Cne=Od,Ane=`-ant-${Date.now()}-${Math.random()}`;function Mne(e,t){const r={},n=(o,s)=>{let c=o.clone();return c=(s==null?void 0:s(c))||c,c.toRgbString()},i=(o,s)=>{const c=new Ni(o),f=xh(c.toRgbString());r[`${s}-color`]=n(c),r[`${s}-color-disabled`]=f[1],r[`${s}-color-hover`]=f[4],r[`${s}-color-active`]=f[6],r[`${s}-color-outline`]=c.clone().setAlpha(.2).toRgbString(),r[`${s}-color-deprecated-bg`]=f[0],r[`${s}-color-deprecated-border`]=f[2]};if(t.primaryColor){i(t.primaryColor,"primary");const o=new Ni(t.primaryColor),s=xh(o.toRgbString());s.forEach((f,p)=>{r[`primary-${p+1}`]=f}),r["primary-color-deprecated-l-35"]=n(o,f=>f.lighten(35)),r["primary-color-deprecated-l-20"]=n(o,f=>f.lighten(20)),r["primary-color-deprecated-t-20"]=n(o,f=>f.tint(20)),r["primary-color-deprecated-t-50"]=n(o,f=>f.tint(50)),r["primary-color-deprecated-f-12"]=n(o,f=>f.setAlpha(f.getAlpha()*.12));const c=new Ni(s[0]);r["primary-color-active-deprecated-f-30"]=n(c,f=>f.setAlpha(f.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=n(c,f=>f.darken(2))}return t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(o=>`--${e}-${o}: ${r[o]};`).join(`
`)}
  }
  `.trim()}function Ene(e,t){const r=Mne(e,t);Kd()&&Z0(r,`${Ane}-dynamic-theme`)}const Pne=e=>{const[t,r]=Ag();return V2(ke(()=>({theme:t.value,token:r.value,hashId:"",path:["ant-design-icons",e.value]})),()=>[{[`.${e.value}`]:$e($e({},vJ()),{[`.${e.value} .${e.value}-icon`]:{display:"block"}})}])};function Ine(e,t){const r=ke(()=>(e==null?void 0:e.value)||{}),n=ke(()=>r.value.inherit===!1||!(t!=null&&t.value)?j4:t.value);return ke(()=>{if(!(e!=null&&e.value))return t==null?void 0:t.value;const a=$e({},n.value.components);return Object.keys(e.value.components||{}).forEach(o=>{a[o]=$e($e({},a[o]),e.value.components[o])}),$e($e($e({},n.value),r.value),{token:$e($e({},n.value.token),r.value.token),components:a})})}var Dne=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Lne="ant";function yd(){return ra.prefixCls||Lne}function i6(){return ra.iconPrefixCls||iA}const DA=io({}),ra=io({});Ml(()=>{$e(ra,DA),ra.prefixCls=yd(),ra.iconPrefixCls=i6(),ra.getPrefixCls=(e,t)=>t||(e?`${ra.prefixCls}-${e}`:ra.prefixCls),ra.getRootPrefixCls=()=>ra.prefixCls?ra.prefixCls:yd()});let Lw;const kne=e=>{Lw&&Lw(),Lw=Ml(()=>{$e(DA,io(e)),$e(ra,io(e))}),e.theme&&Ene(yd(),e.theme)},Rne=()=>({getPrefixCls:(e,t)=>t||(e?`${yd()}-${e}`:yd()),getIconPrefixCls:i6,getRootPrefixCls:()=>ra.prefixCls?ra.prefixCls:yd()}),hv=Jt({compatConfig:{MODE:3},name:"AConfigProvider",inheritAttrs:!1,props:kY(),setup(e,t){let{slots:r}=t;const n=p4(),i=(fe,me)=>{const{prefixCls:Ve="ant"}=e;if(me)return me;const Oe=Ve||n.getPrefixCls("");return fe?`${Oe}-${fe}`:Oe},a=ke(()=>e.iconPrefixCls||n.iconPrefixCls.value||iA),o=ke(()=>a.value!==n.iconPrefixCls.value),s=ke(()=>{var fe;return e.csp||((fe=n.csp)===null||fe===void 0?void 0:fe.value)}),c=Pne(a),f=Ine(ke(()=>e.theme),ke(()=>{var fe;return(fe=n.theme)===null||fe===void 0?void 0:fe.value})),p=fe=>(e.renderEmpty||r.renderEmpty||n.renderEmpty||LJ)(fe),v=ke(()=>{var fe,me;return(fe=e.autoInsertSpaceInButton)!==null&&fe!==void 0?fe:(me=n.autoInsertSpaceInButton)===null||me===void 0?void 0:me.value}),y=ke(()=>{var fe;return e.locale||((fe=n.locale)===null||fe===void 0?void 0:fe.value)});zr(y,()=>{DA.locale=y.value},{immediate:!0});const _=ke(()=>{var fe;return e.direction||((fe=n.direction)===null||fe===void 0?void 0:fe.value)}),S=ke(()=>{var fe,me;return(fe=e.space)!==null&&fe!==void 0?fe:(me=n.space)===null||me===void 0?void 0:me.value}),E=ke(()=>{var fe,me;return(fe=e.virtual)!==null&&fe!==void 0?fe:(me=n.virtual)===null||me===void 0?void 0:me.value}),P=ke(()=>{var fe,me;return(fe=e.dropdownMatchSelectWidth)!==null&&fe!==void 0?fe:(me=n.dropdownMatchSelectWidth)===null||me===void 0?void 0:me.value}),I=ke(()=>{var fe;return e.getTargetContainer!==void 0?e.getTargetContainer:(fe=n.getTargetContainer)===null||fe===void 0?void 0:fe.value}),D=ke(()=>{var fe;return e.getPopupContainer!==void 0?e.getPopupContainer:(fe=n.getPopupContainer)===null||fe===void 0?void 0:fe.value}),L=ke(()=>{var fe;return e.pageHeader!==void 0?e.pageHeader:(fe=n.pageHeader)===null||fe===void 0?void 0:fe.value}),B=ke(()=>{var fe;return e.input!==void 0?e.input:(fe=n.input)===null||fe===void 0?void 0:fe.value}),U=ke(()=>{var fe;return e.pagination!==void 0?e.pagination:(fe=n.pagination)===null||fe===void 0?void 0:fe.value}),V=ke(()=>{var fe;return e.form!==void 0?e.form:(fe=n.form)===null||fe===void 0?void 0:fe.value}),N=ke(()=>{var fe;return e.select!==void 0?e.select:(fe=n.select)===null||fe===void 0?void 0:fe.value}),G=ke(()=>e.componentSize),Y=ke(()=>e.componentDisabled),ee=ke(()=>{var fe,me;return(fe=e.wave)!==null&&fe!==void 0?fe:(me=n.wave)===null||me===void 0?void 0:me.value}),J={csp:s,autoInsertSpaceInButton:v,locale:y,direction:_,space:S,virtual:E,dropdownMatchSelectWidth:P,getPrefixCls:i,iconPrefixCls:a,theme:ke(()=>{var fe,me;return(fe=f.value)!==null&&fe!==void 0?fe:(me=n.theme)===null||me===void 0?void 0:me.value}),renderEmpty:p,getTargetContainer:I,getPopupContainer:D,pageHeader:L,input:B,pagination:U,form:V,select:N,componentSize:G,componentDisabled:Y,transformCellText:ke(()=>e.transformCellText),wave:ee},X=ke(()=>{const fe=f.value||{},{algorithm:me,token:Ve}=fe,Oe=Dne(fe,["algorithm","token"]),ct=me&&(!Array.isArray(me)||me.length>0)?P4(me):void 0;return $e($e({},Oe),{theme:ct,token:$e($e({},nb),Ve)})}),ne=ke(()=>{var fe,me;let Ve={};return y.value&&(Ve=((fe=y.value.Form)===null||fe===void 0?void 0:fe.defaultValidateMessages)||((me=Vv.Form)===null||me===void 0?void 0:me.defaultValidateMessages)||{}),e.form&&e.form.validateMessages&&(Ve=$e($e({},Ve),e.form.validateMessages)),Ve});RY(J),LY({validateMessages:ne}),kJ(G),OY(Y);const we=fe=>{var me,Ve;let Oe=o.value?c((me=r.default)===null||me===void 0?void 0:me.call(r)):(Ve=r.default)===null||Ve===void 0?void 0:Ve.call(r);if(e.theme){const ct=function(){return Oe}();Oe=De(CJ,{value:X.value},{default:()=>[ct]})}return De(zre,{locale:y.value||fe,ANT_MARK__:rT},{default:()=>[Oe]})};return Ml(()=>{_.value&&(lne.config({rtl:_.value==="rtl"}),Cne.config({rtl:_.value==="rtl"}))}),()=>De(g4,{children:(fe,me,Ve)=>we(Ve)},null)}});hv.config=kne;hv.install=function(e){e.component(hv.name,hv)};const LA=hv;function EL(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function PL(e){return{backgroundColor:e.bgColorSelected,boxShadow:e.boxShadow}}const One=$e({overflow:"hidden"},mJ),zne=e=>{const{componentCls:t}=e;return{[t]:$e($e($e($e($e({},cA(e)),{display:"inline-block",padding:e.segmentedContainerPadding,color:e.labelColor,backgroundColor:e.bgColor,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,"&-selected":$e($e({},PL(e)),{color:e.labelColorHover}),"&::after":{content:'""',position:"absolute",width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${e.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.labelColorHover,"&::after":{backgroundColor:e.bgColorHover}},"&-label":$e({minHeight:e.controlHeight-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeight-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`},One),"&-icon + *":{marginInlineStart:e.marginSM/2},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:$e($e({},PL(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${e.paddingXXS}px 0`,borderRadius:e.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:e.controlHeightLG-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightLG-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:e.controlHeightSM-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightSM-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontalSM}px`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),EL(`&-disabled ${t}-item`,e)),EL(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"}})}},Bne=Lh("Segmented",e=>{const{lineWidthBold:t,lineWidth:r,colorTextLabel:n,colorText:i,colorFillSecondary:a,colorBgLayout:o,colorBgElevated:s}=e,c=Wu(e,{segmentedPaddingHorizontal:e.controlPaddingHorizontal-r,segmentedPaddingHorizontalSM:e.controlPaddingHorizontalSM-r,segmentedContainerPadding:t,labelColor:n,labelColorHover:i,bgColor:o,bgColorHover:a,bgColorSelected:s});return[zne(c)]}),IL=e=>e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null,Rf=e=>e!==void 0?`${e}px`:void 0,Fne=Jt({props:{value:Ko(),getValueIndex:Ko(),prefixCls:Ko(),motionName:Ko(),onMotionStart:Ko(),onMotionEnd:Ko(),direction:Ko(),containerRef:Ko()},emits:["motionStart","motionEnd"],setup(e,t){let{emit:r}=t;const n=tr(),i=S=>{var E;const P=e.getValueIndex(S),I=(E=e.containerRef.value)===null||E===void 0?void 0:E.querySelectorAll(`.${e.prefixCls}-item`)[P];return(I==null?void 0:I.offsetParent)&&I},a=tr(null),o=tr(null);zr(()=>e.value,(S,E)=>{const P=i(E),I=i(S),D=IL(P),L=IL(I);a.value=D,o.value=L,r(P&&I?"motionStart":"motionEnd")},{flush:"post"});const s=ke(()=>{var S,E;return e.direction==="rtl"?Rf(-((S=a.value)===null||S===void 0?void 0:S.right)):Rf((E=a.value)===null||E===void 0?void 0:E.left)}),c=ke(()=>{var S,E;return e.direction==="rtl"?Rf(-((S=o.value)===null||S===void 0?void 0:S.right)):Rf((E=o.value)===null||E===void 0?void 0:E.left)});let f;const p=S=>{clearTimeout(f),Oo(()=>{S&&(S.style.transform="translateX(var(--thumb-start-left))",S.style.width="var(--thumb-start-width)")})},v=S=>{f=setTimeout(()=>{S&&(kre(S,`${e.motionName}-appear-active`),S.style.transform="translateX(var(--thumb-active-left))",S.style.width="var(--thumb-active-width)")})},y=S=>{a.value=null,o.value=null,S&&(S.style.transform=null,S.style.width=null,Rre(S,`${e.motionName}-appear-active`)),r("motionEnd")},_=ke(()=>{var S,E;return{"--thumb-start-left":s.value,"--thumb-start-width":Rf((S=a.value)===null||S===void 0?void 0:S.width),"--thumb-active-left":c.value,"--thumb-active-width":Rf((E=o.value)===null||E===void 0?void 0:E.width)}});return ju(()=>{clearTimeout(f)}),()=>{const S={ref:n,style:_.value,class:[`${e.prefixCls}-thumb`]};return De(Rl,{appear:!0,onBeforeEnter:p,onEnter:v,onAfterEnter:y},{default:()=>[!a.value||!o.value?null:De("div",S,null)]})}}}),$ne=Fne;function Nne(e){return e.map(t=>typeof t=="object"&&t!==null?t:{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t})}const Vne=()=>({prefixCls:String,options:R2(),block:fh(),disabled:fh(),size:O2(),value:$e($e({},f4([String,Number])),{required:!0}),motionName:String,onChange:vD(),"onUpdate:value":vD()}),a6=(e,t)=>{let{slots:r,emit:n}=t;const{value:i,disabled:a,payload:o,title:s,prefixCls:c,label:f=r.label,checked:p,className:v}=e,y=_=>{a||n("change",_,i)};return De("label",{class:gi({[`${c}-item-disabled`]:a},v)},[De("input",{class:`${c}-item-input`,type:"radio",disabled:a,checked:p,onChange:y},null),De("div",{class:`${c}-item-label`,title:typeof s=="string"?s:""},[typeof f=="function"?f({value:i,disabled:a,payload:o,title:s}):f??i])])};a6.inheritAttrs=!1;const Hne=Jt({name:"ASegmented",inheritAttrs:!1,props:o4(Vne(),{options:[],motionName:"thumb-motion"}),slots:Object,setup(e,t){let{emit:r,slots:n,attrs:i}=t;const{prefixCls:a,direction:o,size:s}=Ol("segmented",e),[c,f]=Bne(a),p=yn(),v=yn(!1),y=ke(()=>Nne(e.options)),_=(S,E)=>{e.disabled||(r("update:value",E),r("change",E))};return()=>{const S=a.value;return c(De("div",_n(_n({},i),{},{class:gi(S,{[f.value]:!0,[`${S}-block`]:e.block,[`${S}-disabled`]:e.disabled,[`${S}-lg`]:s.value=="large",[`${S}-sm`]:s.value=="small",[`${S}-rtl`]:o.value==="rtl"},i.class),ref:p}),[De("div",{class:`${S}-group`},[De($ne,{containerRef:p,prefixCls:S,value:e.value,motionName:`${S}-${e.motionName}`,direction:o.value,getValueIndex:E=>y.value.findIndex(P=>P.value===E),onMotionStart:()=>{v.value=!0},onMotionEnd:()=>{v.value=!1}},null),y.value.map(E=>De(a6,_n(_n({key:E.value,prefixCls:S,checked:E.value===e.value,onChange:_},E),{},{className:gi(E.className,`${S}-item`,{[`${S}-item-selected`]:E.value===e.value&&!v.value}),disabled:!!e.disabled||!!E.disabled}),n))])]))}}}),o6=J1(Hne),Une={components:{AButton:cv},data(){return{keySelected:null}},props:{objs:{},initPos:{type:Number,default:0}},mounted(){this.select(Object.keys(this.objs)[this.initPos])},watch:{objs(e){for(let t in this.objs){this.keySelected=t;break}}},computed:{},methods:{select:function(e){this.keySelected=e}}};function jne(e,t,r,n,i,a){const o=gn("a-button");return rt(),Ct(Mr,null,[(rt(!0),Ct(Mr,null,Aa(r.objs,(s,c,f)=>(rt(),Sn(o,{key:f,onClick:p=>a.select(c),class:Vi(c==i.keySelected?"selected":"unselected"),type:c==i.keySelected?"primary":"default",size:"large"},{default:Jr(()=>[Os(br(c),1)]),_:2},1032,["onClick","class","type"]))),128)),fn(e.$slots,"default",{selected:r.objs[i.keySelected]})],64)}const s6=Dr(Une,[["render",jne],["__file","ObjectSelector.vue"]]),Gne={data(){return{data:null}},props:{path:{type:String}},watch:{path(e){if(e)return Rr.get(e).then(t=>{this.data=t.data})}}};function Wne(e,t,r,n,i,a){return fn(e.$slots,"default",{data:i.data})}const l6=Dr(Gne,[["render",Wne],["__file","DataRequest.vue"]]),qne={props:["data"]},Zne={class:"cards"};function Xne(e,t,r,n,i,a){return rt(),Ct("div",Zne,[(rt(!0),Ct(Mr,null,Aa(r.data,(o,s)=>(rt(),Ct("div",{key:s,class:"card"},br(o),1))),128))])}const Yne=Dr(qne,[["render",Xne],["__scopeId","data-v-00202de1"],["__file","GridList.vue"]]),Kne={name:"BusTable",components:{"a-config-provider":LA,"bus-timer":xY,"data-request":l6,"object-selector":s6,"grid-list":Yne},mounted(){function e(t){var r={};for(let v=0;v<t.days.length;v++)r[t.days[v].date]=t.days[v].isOffDay;var n=new Date,i=new Intl.DateTimeFormat("en",{year:"numeric"}).format(n),a=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(n),o=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(n),s=`${i}-${a}-${o}`,c;if(r[s]==null){console.log("Not in GOV declaration");var f=n.getDay(),p=f==6||f==0;c=p}else console.log("In GOV declaration"),c=r[s];c?(console.log("节假日"),document.getElementById("bustable").getElementsByTagName("button")[1].click()):(console.log("工作日"),document.getElementById("bustable").getElementsByTagName("button")[0].click())}Rr.get("/2024.json").then(t=>{e(t.data)})}},Jne={id:"bustable"},Qne=Nt("br",null,null,-1);function eie(e,t,r,n,i,a){const o=gn("bus-timer"),s=gn("grid-list"),c=gn("data-request"),f=gn("object-selector"),p=gn("a-config-provider");return rt(),Ct("div",Jne,[De(p,{theme:{token:{colorPrimary:"#ED6D00"}}},{default:Jr(()=>[De(f,{objs:{"工作日 Workday":!0,"节假日 Holiday":!1}},{default:Jr(v=>[Qne,De(p,{theme:{token:{colorPrimary:"#49BF7C"}}},{default:Jr(()=>[De(f,{objs:v.selected?{"Line 1 号线 │ 工学院方向 To COE":"/bus_times/one_down.json","Line 1 号线 │ 欣园方向 To Joy Highland":"/bus_times/one_up.json","Line 2 号线 │ 科研楼方向 To Research Bldg.":"/bus_times/two_down.json","Line 2 号线 │ 欣园方向 To Joy Highland":"/bus_times/two_up.json"}:{"Line 1 号线 │ 工学院方向  To COE":"/bus_times/one_down_holiday.json","Line 1 号线 │ 欣园方向 To Joy Highland":"/bus_times/one_up_holiday.json"}},{default:Jr(y=>[De(c,{path:y.selected},{default:Jr(({data:_})=>[_?(rt(),Sn(o,fH(N0({key:0},_)),null,16)):Hr("",!0),_?(rt(),Sn(s,{key:1,data:_.times},null,8,["data"])):Hr("",!0)]),_:2},1032,["path"])]),_:2},1032,["objs"])]),_:2},1024)]),_:1})]),_:1})])}const tie=Dr(Kne,[["render",eie],["__file","BusTable.vue"]]),rie={name:"TabView",components:{ASegmented:o6},props:{isMapTabEnabled:{type:Boolean,default:!0}},setup(e){const t=tr("bus-location"),r=tr("bus-location"),n=tr([{value:"bus-location",payload:{title:"车辆实时位置",subTitle:"Bus Realtime Location"}},{value:"timetable",payload:{title:"时间表",subTitle:"Timetable"}}]),i=o=>{r.value=o};let a=e.isMapTabEnabled;return{initSelect:t,currentSelect:r,tabOptions:n,switchTab:i,showMapChart:a}}},nie={style:{padding:"4px 8px"}},iie={class:"tab-container"},aie={key:0},oie={key:0,class:"bus-location-hint"},sie={key:1};function lie(e,t,r,n,i,a){const o=gn("a-segmented"),s=gn("RealtimeMap"),c=gn("BusChartVue"),f=gn("BusTable");return rt(),Ct("div",null,[De(o,{value:n.initSelect,"onUpdate:value":t[0]||(t[0]=p=>n.initSelect=p),options:n.tabOptions,onChange:n.switchTab},{label:Jr(({payload:p})=>[Nt("div",nie,[Nt("div",null,br(p.title),1),Nt("div",null,br(p.subTitle),1)])]),_:1},8,["value","options","onChange"]),Nt("div",iie,[n.currentSelect==="bus-location"?(rt(),Ct("div",aie,[n.showMapChart?(rt(),Ct("div",oie,"位置每5秒自动刷新。Location refreshes automatically every 5 seconds. ")):Hr("",!0),n.showMapChart?(rt(),Sn(s,{key:1})):Hr("",!0),De(c)])):Hr("",!0),n.currentSelect==="timetable"?(rt(),Ct("div",sie,[De(f)])):Hr("",!0)])])}const uie=Dr(rie,[["render",lie],["__scopeId","data-v-193a2a3d"],["__file","TabView.vue"]]);var u6={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kB,function(){var r={},n={};function i(o,s,c){if(n[o]=c,o==="index"){var f="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",p={};return n.shared(p),n.index(r,p),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),r}}i("shared",["exports"],function(o){function s(h,l,d,g){return new(d||(d=Promise))(function(x,A){function M($){try{O(g.next($))}catch(j){A(j)}}function k($){try{O(g.throw($))}catch(j){A(j)}}function O($){var j;$.done?x($.value):(j=$.value,j instanceof d?j:new d(function(W){W(j)})).then(M,k)}O((g=g.apply(h,l||[])).next())})}function c(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}typeof SuppressedError=="function"&&SuppressedError;var f=p;function p(h,l){this.x=h,this.y=l}p.prototype={clone:function(){return new p(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,l){return this.clone()._rotateAround(h,l)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var l=h.x-this.x,d=h.y-this.y;return l*l+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,l){return Math.atan2(this.x*l-this.y*h,this.x*h+this.y*l)},_matMult:function(h){var l=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=l,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var l=Math.cos(h),d=Math.sin(h),g=d*this.x+l*this.y;return this.x=l*this.x-d*this.y,this.y=g,this},_rotateAround:function(h,l){var d=Math.cos(h),g=Math.sin(h),x=l.y+g*(this.x-l.x)+d*(this.y-l.y);return this.x=l.x+d*(this.x-l.x)-g*(this.y-l.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(h){return h instanceof p?h:Array.isArray(h)?new p(h[0],h[1]):h};var v=c(f),y=_;function _(h,l,d,g){this.cx=3*h,this.bx=3*(d-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=l,this.p2x=d,this.p2y=g}_.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,l){if(l===void 0&&(l=1e-6),h<0)return 0;if(h>1)return 1;for(var d=h,g=0;g<8;g++){var x=this.sampleCurveX(d)-h;if(Math.abs(x)<l)return d;var A=this.sampleCurveDerivativeX(d);if(Math.abs(A)<1e-6)break;d-=x/A}var M=0,k=1;for(d=h,g=0;g<20&&(x=this.sampleCurveX(d),!(Math.abs(x-h)<l));g++)h>x?M=d:k=d,d=.5*(k-M)+M;return d},solve:function(h,l){return this.sampleCurveY(this.solveCurveX(h,l))}};var S=c(y);let E,P;function I(){return E==null&&(E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),E}function D(){if(P==null&&(P=!1,I())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let g=0;g<5*5;g++){const x=4*g;l.fillStyle=`rgb(${x},${x+1},${x+2})`,l.fillRect(g%5,Math.floor(g/5),1,1)}const d=l.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&d[g]!==g){P=!0;break}}}return P||!1}function L(h,l,d,g){const x=new S(h,l,d,g);return function(A){return x.solve(A)}}const B=L(.25,.1,.25,1);function U(h,l,d){return Math.min(d,Math.max(l,h))}function V(h,l,d){const g=d-l,x=((h-l)%g+g)%g+l;return x===l?d:x}function N(h,...l){for(const d of l)for(const g in d)h[g]=d[g];return h}let G=1;function Y(h,l,d){const g={};for(const x in h)g[x]=l.call(d||this,h[x],x,h);return g}function ee(h,l,d){const g={};for(const x in h)l.call(d||this,h[x],x,h)&&(g[x]=h[x]);return g}function J(h){return Array.isArray(h)?h.map(J):typeof h=="object"&&h?Y(h,J):h}const X={};function ne(h){X[h]||(typeof console<"u"&&console.warn(h),X[h]=!0)}function we(h,l,d){return(d.y-h.y)*(l.x-h.x)>(l.y-h.y)*(d.x-h.x)}function fe(h){let l=0;for(let d,g,x=0,A=h.length,M=A-1;x<A;M=x++)d=h[x],g=h[M],l+=(g.x-d.x)*(d.y+g.y);return l}function me(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Ve=null;function Oe(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _t(h,l,d,g,x){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const A=new VideoFrame(h,{timestamp:0});try{const M=A==null?void 0:A.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);const k=M.startsWith("BGR"),O=new Uint8ClampedArray(g*x*4);if(yield A.copyTo(O,function($,j,W,Q,re){const ae=4*Math.max(-j,0),se=(Math.max(0,W)-W)*Q*4+ae,pe=4*Q,xe=Math.max(0,j),Re=Math.max(0,W);return{rect:{x:xe,y:Re,width:Math.min($.width,j+Q)-xe,height:Math.min($.height,W+re)-Re},layout:[{offset:se,stride:pe}]}}(h,l,d,g,x)),k)for(let $=0;$<O.length;$+=4){const j=O[$];O[$]=O[$+2],O[$+2]=j}return O}finally{A.close()}})}let zt,Mt;const ar="AbortError";function rr(){return new Error(ar)}const wr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Xt(h){return wr.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const Ue="global-dispatcher";class st extends Error{constructor(l,d,g,x){super(`AJAXError: ${d} (${l}): ${g}`),this.status=l,this.statusText=d,this.url=g,this.body=x}}const at=()=>me(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,dt=function(h,l){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const g=Xt(h.url);if(g)return g(h,l);if(me(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:h,targetMapId:Ue},l)}if(!(/^file:/.test(d=h.url)||/^file:/.test(at())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(g,x){return s(this,void 0,void 0,function*(){const A=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:at(),signal:x.signal});g.type==="json"&&A.headers.set("Accept","application/json");const M=yield fetch(A);if(!M.ok){const $=yield M.blob();throw new st(M.status,M.statusText,g.url,$)}const k=g.type==="arrayBuffer"||g.type==="image"?M.arrayBuffer():g.type==="json"?M.json():M.text(),O=yield k;if(x.signal.aborted)throw rr();return{data:O,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}})}(h,l);if(me(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:h,mustQueue:!0,targetMapId:Ue},l)}var d;return function(g,x){return new Promise((A,M)=>{const k=new XMLHttpRequest;k.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(k.responseType="arraybuffer");for(const O in g.headers)k.setRequestHeader(O,g.headers[O]);g.type==="json"&&(k.responseType="text",k.setRequestHeader("Accept","application/json")),k.withCredentials=g.credentials==="include",k.onerror=()=>{M(new Error(k.statusText))},k.onload=()=>{if(!x.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let O=k.response;if(g.type==="json")try{O=JSON.parse(k.response)}catch($){return void M($)}A({data:O,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const O=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});M(new st(k.status,k.statusText,g.url,O))}},x.signal.addEventListener("abort",()=>{k.abort(),M(rr())}),k.send(g.body)})}(h,l)};function vt(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const l=new URL(h),d=window.location;return l.protocol===d.protocol&&l.host===d.host}function It(h,l,d){d[h]&&d[h].indexOf(l)!==-1||(d[h]=d[h]||[],d[h].push(l))}function de(h,l,d){if(d&&d[h]){const g=d[h].indexOf(l);g!==-1&&d[h].splice(g,1)}}class be{constructor(l,d={}){N(this,d),this.type=l}}class Be extends be{constructor(l,d={}){super("error",N({error:l},d))}}class Xe{on(l,d){return this._listeners=this._listeners||{},It(l,d,this._listeners),this}off(l,d){return de(l,d,this._listeners),de(l,d,this._oneTimeListeners),this}once(l,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},It(l,d,this._oneTimeListeners),this):new Promise(g=>this.once(l,g))}fire(l,d){typeof l=="string"&&(l=new be(l,d||{}));const g=l.type;if(this.listens(g)){l.target=this;const x=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const k of x)k.call(this,l);const A=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const k of A)de(g,k,this._oneTimeListeners),k.call(this,l);const M=this._eventedParent;M&&(N(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(l))}else l instanceof Be&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,d){return this._eventedParent=l,this._eventedParentData=d,this}}var ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const lt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xt(h,l){const d={};for(const g in h)g!=="ref"&&(d[g]=h[g]);return lt.forEach(g=>{g in l&&(d[g]=l[g])}),d}function Ze(h,l){if(Array.isArray(h)){if(!Array.isArray(l)||h.length!==l.length)return!1;for(let d=0;d<h.length;d++)if(!Ze(h[d],l[d]))return!1;return!0}if(typeof h=="object"&&h!==null&&l!==null){if(typeof l!="object"||Object.keys(h).length!==Object.keys(l).length)return!1;for(const d in h)if(!Ze(h[d],l[d]))return!1;return!0}return h===l}function ut(h,l){h.push(l)}function nt(h,l,d){ut(d,{command:"addSource",args:[h,l[h]]})}function Lt(h,l,d){ut(l,{command:"removeSource",args:[h]}),d[h]=!0}function qt(h,l,d,g){Lt(h,d,g),nt(h,l,d)}function Vt(h,l,d){let g;for(g in h[d])if(Object.prototype.hasOwnProperty.call(h[d],g)&&g!=="data"&&!Ze(h[d][g],l[d][g]))return!1;for(g in l[d])if(Object.prototype.hasOwnProperty.call(l[d],g)&&g!=="data"&&!Ze(h[d][g],l[d][g]))return!1;return!0}function er(h,l,d,g,x,A){h=h||{},l=l||{};for(const M in h)Object.prototype.hasOwnProperty.call(h,M)&&(Ze(h[M],l[M])||d.push({command:A,args:[g,M,l[M],x]}));for(const M in l)Object.prototype.hasOwnProperty.call(l,M)&&!Object.prototype.hasOwnProperty.call(h,M)&&(Ze(h[M],l[M])||d.push({command:A,args:[g,M,l[M],x]}))}function gr(h){return h.id}function Pr(h,l){return h[l.id]=l,h}class Ke{constructor(l,d,g,x){this.message=(l?`${l}: `:"")+g,x&&(this.identifier=x),d!=null&&d.__line__&&(this.line=d.__line__)}}function Zr(h,...l){for(const d of l)for(const g in d)h[g]=d[g];return h}class pn extends Error{constructor(l,d){super(d),this.message=d,this.key=l}}class Ma{constructor(l,d=[]){this.parent=l,this.bindings={};for(const[g,x]of d)this.bindings[g]=x}concat(l){return new Ma(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const Wn={kind:"null"},ht={kind:"number"},sr={kind:"string"},Ut={kind:"boolean"},Fr={kind:"color"},ha={kind:"object"},lr={kind:"value"},js={kind:"collator"},qn={kind:"formatted"},ve={kind:"padding"},K={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function oe(h,l){return{kind:"array",itemType:h,N:l}}function ue(h){if(h.kind==="array"){const l=ue(h.itemType);return typeof h.N=="number"?`array<${l}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${l}>`}return h.kind}const Me=[Wn,ht,sr,Ut,Fr,qn,ha,oe(lr),ve,K,te];function Ee(h,l){if(l.kind==="error")return null;if(h.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Ee(h.itemType,l.itemType))&&(typeof h.N!="number"||h.N===l.N))return null}else{if(h.kind===l.kind)return null;if(h.kind==="value"){for(const d of Me)if(!Ee(d,l))return null}}return`Expected ${ue(h)} but found ${ue(l)} instead.`}function Le(h,l){return l.some(d=>d.kind===h.kind)}function Ce(h,l){return l.some(d=>d==="null"?h===null:d==="array"?Array.isArray(h):d==="object"?h&&!Array.isArray(h)&&typeof h=="object":d===typeof h)}function ze(h,l){return h.kind==="array"&&l.kind==="array"?h.itemType.kind===l.itemType.kind&&typeof h.N=="number":h.kind===l.kind}const Je=.96422,Ge=.82521,We=4/29,$t=6/29,jt=3*$t*$t,ur=$t*$t*$t,nr=Math.PI/180,Cr=180/Math.PI;function Xr(h){return(h%=360)<0&&(h+=360),h}function mn([h,l,d,g]){let x,A;const M=cr((.2225045*(h=Vn(h))+.7168786*(l=Vn(l))+.0606169*(d=Vn(d)))/1);h===l&&l===d?x=A=M:(x=cr((.4360747*h+.3850649*l+.1430804*d)/Je),A=cr((.0139322*h+.0971045*l+.7141733*d)/Ge));const k=116*M-16;return[k<0?0:k,500*(x-M),200*(M-A),g]}function Vn(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function cr(h){return h>ur?Math.pow(h,1/3):h/jt+We}function Cn([h,l,d,g]){let x=(h+16)/116,A=isNaN(l)?x:x+l/500,M=isNaN(d)?x:x-d/200;return x=1*Mi(x),A=Je*Mi(A),M=Ge*Mi(M),[Zn(3.1338561*A-1.6168667*x-.4906146*M),Zn(-.9787684*A+1.9161415*x+.033454*M),Zn(.0719453*A-.2289914*x+1.4052427*M),g]}function Zn(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Mi(h){return h>$t?h*h*h:jt*(h-We)}function ji(h){return parseInt(h.padEnd(2,h),16)/255}function si(h,l){return so(l?h/100:h,0,1)}function so(h,l,d){return Math.min(Math.max(l,h),d)}function Vg(h){return!h.some(Number.isNaN)}const jb={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class jr{constructor(l,d,g,x=1,A=!0){this.r=l,this.g=d,this.b=g,this.a=x,A||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[l,d,g,x]))}static parse(l){if(l instanceof jr)return l;if(typeof l!="string")return;const d=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const x=jb[g];if(x){const[M,k,O]=x;return[M/255,k/255,O/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const M=g.length<6?1:2;let k=1;return[ji(g.slice(k,k+=M)),ji(g.slice(k,k+=M)),ji(g.slice(k,k+=M)),ji(g.slice(k,k+M)||"ff")]}if(g.startsWith("rgb")){const M=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[k,O,$,j,W,Q,re,ae,se,pe,xe,Re]=M,Se=[j||" ",re||" ",pe].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const Pe=[$,Q,se].join(""),je=Pe==="%%%"?100:Pe===""?255:0;if(je){const Ye=[so(+O/je,0,1),so(+W/je,0,1),so(+ae/je,0,1),xe?si(+xe,Re):1];if(Vg(Ye))return Ye}}return}}const A=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[M,k,O,$,j,W,Q,re,ae]=A,se=[O||" ",j||" ",Q].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const pe=[+k,so(+$,0,100),so(+W,0,100),re?si(+re,ae):1];if(Vg(pe))return function([xe,Re,Se,Pe]){function je(Ye){const Tt=(Ye+xe/30)%12,Rt=Re*Math.min(Se,1-Se);return Se-Rt*Math.max(-1,Math.min(Tt-3,9-Tt,1))}return xe=Xr(xe),Re/=100,Se/=100,[je(0),je(8),je(4),Pe]}(pe)}}}(l);return d?new jr(...d,!1):void 0}get rgb(){const{r:l,g:d,b:g,a:x}=this,A=x||1/0;return this.overwriteGetter("rgb",[l/A,d/A,g/A,x])}get hcl(){return this.overwriteGetter("hcl",function(l){const[d,g,x,A]=mn(l),M=Math.sqrt(g*g+x*x);return[Math.round(1e4*M)?Xr(Math.atan2(x,g)*Cr):NaN,M,d,A]}(this.rgb))}get lab(){return this.overwriteGetter("lab",mn(this.rgb))}overwriteGetter(l,d){return Object.defineProperty(this,l,{value:d}),d}toString(){const[l,d,g,x]=this.rgb;return`rgba(${[l,d,g].map(A=>Math.round(255*A)).join(",")},${x})`}}jr.black=new jr(0,0,0,1),jr.white=new jr(1,1,1,1),jr.transparent=new jr(0,0,0,0),jr.red=new jr(1,0,0,1);class lp{constructor(l,d,g){this.sensitivity=l?d?"variant":"case":d?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,d){return this.collator.compare(l,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class up{constructor(l,d,g,x,A){this.text=l,this.image=d,this.scale=g,this.fontStack=x,this.textColor=A}}class fa{constructor(l){this.sections=l}static fromString(l){return new fa([new up(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof fa?l:fa.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class Gi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Gi)return l;if(typeof l=="number")return new Gi([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const d of l)if(typeof d!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Gi(l)}}toString(){return JSON.stringify(this.values)}}const Zu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ea{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ea)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let d=0;d<l.length;d+=2){const g=l[d],x=l[d+1];if(typeof g!="string"||!Zu.has(g)||!Array.isArray(x)||x.length!==2||typeof x[0]!="number"||typeof x[1]!="number")return}return new Ea(l)}}toString(){return JSON.stringify(this.values)}}class Pa{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Pa({name:l,available:!1}):null}}function $l(h,l,d,g){return typeof h=="number"&&h>=0&&h<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof d=="number"&&d>=0&&d<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[h,l,d,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[h,l,d,g]:[h,l,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fh(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof jr||h instanceof lp||h instanceof fa||h instanceof Gi||h instanceof Ea||h instanceof Pa)return!0;if(Array.isArray(h)){for(const l of h)if(!Fh(l))return!1;return!0}if(typeof h=="object"){for(const l in h)if(!Fh(h[l]))return!1;return!0}return!1}function Hn(h){if(h===null)return Wn;if(typeof h=="string")return sr;if(typeof h=="boolean")return Ut;if(typeof h=="number")return ht;if(h instanceof jr)return Fr;if(h instanceof lp)return js;if(h instanceof fa)return qn;if(h instanceof Gi)return ve;if(h instanceof Ea)return te;if(h instanceof Pa)return K;if(Array.isArray(h)){const l=h.length;let d;for(const g of h){const x=Hn(g);if(d){if(d===x)continue;d=lr;break}d=x}return oe(d||lr,l)}return ha}function Xu(h){const l=typeof h;return h===null?"":l==="string"||l==="number"||l==="boolean"?String(h):h instanceof jr||h instanceof fa||h instanceof Gi||h instanceof Ea||h instanceof Pa?h.toString():JSON.stringify(h)}class ls{constructor(l,d){this.type=l,this.value=d}static parse(l,d){if(l.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Fh(l[1]))return d.error("invalid value");const g=l[1];let x=Hn(g);const A=d.expectedType;return x.kind!=="array"||x.N!==0||!A||A.kind!=="array"||typeof A.N=="number"&&A.N!==0||(x=A),new ls(x,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class bn{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const $h={string:sr,number:ht,boolean:Ut,object:ha};class da{constructor(l,d){this.type=l,this.args=d}static parse(l,d){if(l.length<2)return d.error("Expected at least one argument.");let g,x=1;const A=l[0];if(A==="array"){let k,O;if(l.length>2){const $=l[1];if(typeof $!="string"||!($ in $h)||$==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);k=$h[$],x++}else k=lr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return d.error('The length argument to "array" must be a positive integer literal',2);O=l[2],x++}g=oe(k,O)}else{if(!$h[A])throw new Error(`Types doesn't contain name = ${A}`);g=$h[A]}const M=[];for(;x<l.length;x++){const k=d.parse(l[x],x,lr);if(!k)return null;M.push(k)}return new da(g,M)}evaluate(l){for(let d=0;d<this.args.length;d++){const g=this.args[d].evaluate(l);if(!Ee(this.type,Hn(g)))return g;if(d===this.args.length-1)throw new bn(`Expected value to be of type ${ue(this.type)}, but found ${ue(Hn(g))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Nh={"to-boolean":Ut,"to-color":Fr,"to-number":ht,"to-string":sr};class lo{constructor(l,d){this.type=l,this.args=d}static parse(l,d){if(l.length<2)return d.error("Expected at least one argument.");const g=l[0];if(!Nh[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&l.length!==2)return d.error("Expected one argument.");const x=Nh[g],A=[];for(let M=1;M<l.length;M++){const k=d.parse(l[M],M,lr);if(!k)return null;A.push(k)}return new lo(x,A)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let d,g;for(const x of this.args){if(d=x.evaluate(l),g=null,d instanceof jr)return d;if(typeof d=="string"){const A=l.parseColor(d);if(A)return A}else if(Array.isArray(d)&&(g=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:$l(d[0],d[1],d[2],d[3]),!g))return new jr(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new bn(g||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const g of this.args){d=g.evaluate(l);const x=Gi.parse(d);if(x)return x}throw new bn(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const g of this.args){d=g.evaluate(l);const x=Ea.parse(d);if(x)return x}throw new bn(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const g of this.args){if(d=g.evaluate(l),d===null)return 0;const x=Number(d);if(!isNaN(x))return x}throw new bn(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return fa.fromString(Xu(this.args[0].evaluate(l)));case"resolvedImage":return Pa.fromString(Xu(this.args[0].evaluate(l)));default:return Xu(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Yu=["Unknown","Point","LineString","Polygon"];class Gr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let d=this._parseColorCache[l];return d||(d=this._parseColorCache[l]=jr.parse(l)),d}}class Vh{constructor(l,d,g=[],x,A=new Ma,M=[]){this.registry=l,this.path=g,this.key=g.map(k=>`[${k}]`).join(""),this.scope=A,this.errors=M,this.expectedType=x,this._isConstant=d}parse(l,d,g,x,A={}){return d?this.concat(d,g,x)._parse(l,A):this._parse(l,A)}_parse(l,d){function g(x,A,M){return M==="assert"?new da(A,[x]):M==="coerce"?new lo(A,[x]):x}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=l[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const A=this.registry[x];if(A){let M=A.parse(l,this);if(!M)return null;if(this.expectedType){const k=this.expectedType,O=M.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||O.kind!=="value")if(k.kind!=="color"&&k.kind!=="formatted"&&k.kind!=="resolvedImage"||O.kind!=="value"&&O.kind!=="string")if(k.kind!=="padding"||O.kind!=="value"&&O.kind!=="number"&&O.kind!=="array")if(k.kind!=="variableAnchorOffsetCollection"||O.kind!=="value"&&O.kind!=="array"){if(this.checkSubtype(k,O))return null}else M=g(M,k,d.typeAnnotation||"coerce");else M=g(M,k,d.typeAnnotation||"coerce");else M=g(M,k,d.typeAnnotation||"coerce");else M=g(M,k,d.typeAnnotation||"assert")}if(!(M instanceof ls)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){const k=new Gr;try{M=new ls(M.type,M.evaluate(k))}catch(O){return this.error(O.message),null}}return M}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,d,g){const x=typeof l=="number"?this.path.concat(l):this.path,A=g?this.scope.concat(g):this.scope;return new Vh(this.registry,this._isConstant,x,d||null,A,this.errors)}error(l,...d){const g=`${this.key}${d.map(x=>`[${x}]`).join("")}`;this.errors.push(new pn(g,l))}checkSubtype(l,d){const g=Ee(l,d);return g&&this.error(g),g}}class Nl{constructor(l,d,g){this.type=js,this.locale=g,this.caseSensitive=l,this.diacriticSensitive=d}static parse(l,d){if(l.length!==2)return d.error("Expected one argument.");const g=l[1];if(typeof g!="object"||Array.isArray(g))return d.error("Collator options argument must be an object.");const x=d.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Ut);if(!x)return null;const A=d.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Ut);if(!A)return null;let M=null;return g.locale&&(M=d.parse(g.locale,1,sr),!M)?null:new Nl(x,A,M)}evaluate(l){return new lp(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}const us=8192;function Hh(h,l){h[0]=Math.min(h[0],l[0]),h[1]=Math.min(h[1],l[1]),h[2]=Math.max(h[2],l[0]),h[3]=Math.max(h[3],l[1])}function Ku(h,l){return!(h[0]<=l[0]||h[2]>=l[2]||h[1]<=l[1]||h[3]>=l[3])}function Gb(h,l){const d=(180+h[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,x=Math.pow(2,l.z);return[Math.round(d*x*us),Math.round(g*x*us)]}function Hg(h,l,d){const g=h[0]-l[0],x=h[1]-l[1],A=h[0]-d[0],M=h[1]-d[1];return g*M-A*x==0&&g*A<=0&&x*M<=0}function Uh(h,l){let d=!1;for(let M=0,k=l.length;M<k;M++){const O=l[M];for(let $=0,j=O.length;$<j-1;$++){if(Hg(h,O[$],O[$+1]))return!1;(x=O[$])[1]>(g=h)[1]!=(A=O[$+1])[1]>g[1]&&g[0]<(A[0]-x[0])*(g[1]-x[1])/(A[1]-x[1])+x[0]&&(d=!d)}}var g,x,A;return d}function Wb(h,l){for(let d=0;d<l.length;d++)if(Uh(h,l[d]))return!0;return!1}function Ug(h,l,d,g){const x=g[0]-d[0],A=g[1]-d[1],M=(h[0]-d[0])*A-x*(h[1]-d[1]),k=(l[0]-d[0])*A-x*(l[1]-d[1]);return M>0&&k<0||M<0&&k>0}function qb(h,l,d){for(const $ of d)for(let j=0;j<$.length-1;++j)if((k=[(M=$[j+1])[0]-(A=$[j])[0],M[1]-A[1]])[0]*(O=[(x=l)[0]-(g=h)[0],x[1]-g[1]])[1]-k[1]*O[0]!=0&&Ug(g,x,A,M)&&Ug(A,M,g,x))return!0;var g,x,A,M,k,O;return!1}function jg(h,l){for(let d=0;d<h.length;++d)if(!Uh(h[d],l))return!1;for(let d=0;d<h.length-1;++d)if(qb(h[d],h[d+1],l))return!1;return!0}function Gg(h,l){for(let d=0;d<l.length;d++)if(jg(h,l[d]))return!0;return!1}function jh(h,l,d){const g=[];for(let x=0;x<h.length;x++){const A=[];for(let M=0;M<h[x].length;M++){const k=Gb(h[x][M],d);Hh(l,k),A.push(k)}g.push(A)}return g}function Wg(h,l,d){const g=[];for(let x=0;x<h.length;x++){const A=jh(h[x],l,d);g.push(A)}return g}function qg(h,l,d,g){if(h[0]<d[0]||h[0]>d[2]){const x=.5*g;let A=h[0]-d[0]>x?-g:d[0]-h[0]>x?g:0;A===0&&(A=h[0]-d[2]>x?-g:d[2]-h[0]>x?g:0),h[0]+=A}Hh(l,h)}function Gh(h,l,d,g){const x=Math.pow(2,g.z)*us,A=[g.x*us,g.y*us],M=[];for(const k of h)for(const O of k){const $=[O.x+A[0],O.y+A[1]];qg($,l,d,x),M.push($)}return M}function Zg(h,l,d,g){const x=Math.pow(2,g.z)*us,A=[g.x*us,g.y*us],M=[];for(const O of h){const $=[];for(const j of O){const W=[j.x+A[0],j.y+A[1]];Hh(l,W),$.push(W)}M.push($)}if(l[2]-l[0]<=x/2){(k=l)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const O of M)for(const $ of O)qg($,l,d,x)}var k;return M}class Gs{constructor(l,d){this.type=Ut,this.geojson=l,this.geometries=d}static parse(l,d){if(l.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Fh(l[1])){const g=l[1];if(g.type==="FeatureCollection"){const x=[];for(const A of g.features){const{type:M,coordinates:k}=A.geometry;M==="Polygon"&&x.push(k),M==="MultiPolygon"&&x.push(...k)}if(x.length)return new Gs(g,{type:"MultiPolygon",coordinates:x})}else if(g.type==="Feature"){const x=g.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Gs(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Gs(g,g)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(d,g){const x=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],M=d.canonicalID();if(g.type==="Polygon"){const k=jh(g.coordinates,A,M),O=Gh(d.geometry(),x,A,M);if(!Ku(x,A))return!1;for(const $ of O)if(!Uh($,k))return!1}if(g.type==="MultiPolygon"){const k=Wg(g.coordinates,A,M),O=Gh(d.geometry(),x,A,M);if(!Ku(x,A))return!1;for(const $ of O)if(!Wb($,k))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(d,g){const x=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],M=d.canonicalID();if(g.type==="Polygon"){const k=jh(g.coordinates,A,M),O=Zg(d.geometry(),x,A,M);if(!Ku(x,A))return!1;for(const $ of O)if(!jg($,k))return!1}if(g.type==="MultiPolygon"){const k=Wg(g.coordinates,A,M),O=Zg(d.geometry(),x,A,M);if(!Ku(x,A))return!1;for(const $ of O)if(!Gg($,k))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Wh{constructor(l,d){this.type=d.type,this.name=l,this.boundExpression=d}static parse(l,d){if(l.length!==2||typeof l[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const g=l[1];return d.scope.has(g)?new Wh(g,d.scope.get(g)):d.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class pa{constructor(l,d,g,x){this.name=l,this.type=d,this._evaluate=g,this.args=x}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,d){const g=l[0],x=pa.definitions[g];if(!x)return d.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const A=Array.isArray(x)?x[0]:x.type,M=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,k=M.filter(([$])=>!Array.isArray($)||$.length===l.length-1);let O=null;for(const[$,j]of k){O=new Vh(d.registry,Ju,d.path,null,d.scope);const W=[];let Q=!1;for(let re=1;re<l.length;re++){const ae=l[re],se=Array.isArray($)?$[re-1]:$.type,pe=O.parse(ae,1+W.length,se);if(!pe){Q=!0;break}W.push(pe)}if(!Q)if(Array.isArray($)&&$.length!==W.length)O.error(`Expected ${$.length} arguments, but found ${W.length} instead.`);else{for(let re=0;re<W.length;re++){const ae=Array.isArray($)?$[re]:$.type,se=W[re];O.concat(re+1).checkSubtype(ae,se.type)}if(O.errors.length===0)return new pa(g,A,j,W)}}if(k.length===1)d.errors.push(...O.errors);else{const $=(k.length?k:M).map(([W])=>{return Q=W,Array.isArray(Q)?`(${Q.map(ue).join(", ")})`:`(${ue(Q.type)}...)`;var Q}).join(" | "),j=[];for(let W=1;W<l.length;W++){const Q=d.parse(l[W],1+j.length);if(!Q)return null;j.push(ue(Q.type))}d.error(`Expected arguments of type ${$}, but found (${j.join(", ")}) instead.`)}return null}static register(l,d){pa.definitions=d;for(const g in d)l[g]=pa}}function Ju(h){if(h instanceof Wh)return Ju(h.boundExpression);if(h instanceof pa&&h.name==="error"||h instanceof Nl||h instanceof Gs)return!1;const l=h instanceof lo||h instanceof da;let d=!0;return h.eachChild(g=>{d=l?d&&Ju(g):d&&g instanceof ls}),!!d&&qh(h)&&ec(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function qh(h){if(h instanceof pa&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Gs)return!1;let l=!0;return h.eachChild(d=>{l&&!qh(d)&&(l=!1)}),l}function Qu(h){if(h instanceof pa&&h.name==="feature-state")return!1;let l=!0;return h.eachChild(d=>{l&&!Qu(d)&&(l=!1)}),l}function ec(h,l){if(h instanceof pa&&l.indexOf(h.name)>=0)return!1;let d=!0;return h.eachChild(g=>{d&&!ec(g,l)&&(d=!1)}),d}function tc(h,l){const d=h.length-1;let g,x,A=0,M=d,k=0;for(;A<=M;)if(k=Math.floor((A+M)/2),g=h[k],x=h[k+1],g<=l){if(k===d||l<x)return k;A=k+1}else{if(!(g>l))throw new bn("Input is not a number.");M=k-1}return 0}class rc{constructor(l,d,g){this.type=l,this.input=d,this.labels=[],this.outputs=[];for(const[x,A]of g)this.labels.push(x),this.outputs.push(A)}static parse(l,d){if(l.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return d.error("Expected an even number of arguments.");const g=d.parse(l[1],1,ht);if(!g)return null;const x=[];let A=null;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);for(let M=1;M<l.length;M+=2){const k=M===1?-1/0:l[M],O=l[M+1],$=M,j=M+1;if(typeof k!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(x.length&&x[x.length-1][0]>=k)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const W=d.parse(O,j,A);if(!W)return null;A=A||W.type,x.push([k,W])}return new rc(A,g,x)}evaluate(l){const d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(l);const x=this.input.evaluate(l);if(x<=d[0])return g[0].evaluate(l);const A=d.length;return x>=d[A-1]?g[A-1].evaluate(l):g[tc(d,x)].evaluate(l)}eachChild(l){l(this.input);for(const d of this.outputs)l(d)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Zb(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Xb=Xg;function Xg(h,l,d,g){this.cx=3*h,this.bx=3*(d-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=l,this.p2x=d,this.p2y=g}Xg.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,l){if(l===void 0&&(l=1e-6),h<0)return 0;if(h>1)return 1;for(var d=h,g=0;g<8;g++){var x=this.sampleCurveX(d)-h;if(Math.abs(x)<l)return d;var A=this.sampleCurveDerivativeX(d);if(Math.abs(A)<1e-6)break;d-=x/A}var M=0,k=1;for(d=h,g=0;g<20&&(x=this.sampleCurveX(d),!(Math.abs(x-h)<l));g++)h>x?M=d:k=d,d=.5*(k-M)+M;return d},solve:function(h,l){return this.sampleCurveY(this.solveCurveX(h,l))}};var Yb=Zb(Xb);function Ws(h,l,d){return h+d*(l-h)}function Zh(h,l,d){return h.map((g,x)=>Ws(g,l[x],d))}const Ei={number:Ws,color:function(h,l,d,g="rgb"){switch(g){case"rgb":{const[x,A,M,k]=Zh(h.rgb,l.rgb,d);return new jr(x,A,M,k,!1)}case"hcl":{const[x,A,M,k]=h.hcl,[O,$,j,W]=l.hcl;let Q,re;if(isNaN(x)||isNaN(O))isNaN(x)?isNaN(O)?Q=NaN:(Q=O,M!==1&&M!==0||(re=$)):(Q=x,j!==1&&j!==0||(re=A));else{let Re=O-x;O>x&&Re>180?Re-=360:O<x&&x-O>180&&(Re+=360),Q=x+d*Re}const[ae,se,pe,xe]=function([Re,Se,Pe,je]){return Re=isNaN(Re)?0:Re*nr,Cn([Pe,Math.cos(Re)*Se,Math.sin(Re)*Se,je])}([Q,re??Ws(A,$,d),Ws(M,j,d),Ws(k,W,d)]);return new jr(ae,se,pe,xe,!1)}case"lab":{const[x,A,M,k]=Cn(Zh(h.lab,l.lab,d));return new jr(x,A,M,k,!1)}}},array:Zh,padding:function(h,l,d){return new Gi(Zh(h.values,l.values,d))},variableAnchorOffsetCollection:function(h,l,d){const g=h.values,x=l.values;if(g.length!==x.length)throw new bn(`Cannot interpolate values of different length. from: ${h.toString()}, to: ${l.toString()}`);const A=[];for(let M=0;M<g.length;M+=2){if(g[M]!==x[M])throw new bn(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${g[M]}, to[${M}]: ${x[M]}`);A.push(g[M]);const[k,O]=g[M+1],[$,j]=x[M+1];A.push([Ws(k,$,d),Ws(O,j,d)])}return new Ea(A)}};class _i{constructor(l,d,g,x,A){this.type=l,this.operator=d,this.interpolation=g,this.input=x,this.labels=[],this.outputs=[];for(const[M,k]of A)this.labels.push(M),this.outputs.push(k)}static interpolationFactor(l,d,g,x){let A=0;if(l.name==="exponential")A=kr(d,l.base,g,x);else if(l.name==="linear")A=kr(d,1,g,x);else if(l.name==="cubic-bezier"){const M=l.controlPoints;A=new Yb(M[0],M[1],M[2],M[3]).solve(kr(d,1,g,x))}return A}static parse(l,d){let[g,x,A,...M]=l;if(!Array.isArray(x)||x.length===0)return d.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const $=x[1];if(typeof $!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:$}}else{if(x[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const $=x.slice(1);if($.length!==4||$.some(j=>typeof j!="number"||j<0||j>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:$}}}if(l.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(A=d.parse(A,2,ht),!A)return null;const k=[];let O=null;g==="interpolate-hcl"||g==="interpolate-lab"?O=Fr:d.expectedType&&d.expectedType.kind!=="value"&&(O=d.expectedType);for(let $=0;$<M.length;$+=2){const j=M[$],W=M[$+1],Q=$+3,re=$+4;if(typeof j!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(k.length&&k[k.length-1][0]>=j)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);const ae=d.parse(W,re,O);if(!ae)return null;O=O||ae.type,k.push([j,ae])}return ze(O,ht)||ze(O,Fr)||ze(O,ve)||ze(O,te)||ze(O,oe(ht))?new _i(O,g,x,A,k):d.error(`Type ${ue(O)} is not interpolatable.`)}evaluate(l){const d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(l);const x=this.input.evaluate(l);if(x<=d[0])return g[0].evaluate(l);const A=d.length;if(x>=d[A-1])return g[A-1].evaluate(l);const M=tc(d,x),k=_i.interpolationFactor(this.interpolation,x,d[M],d[M+1]),O=g[M].evaluate(l),$=g[M+1].evaluate(l);switch(this.operator){case"interpolate":return Ei[this.type.kind](O,$,k);case"interpolate-hcl":return Ei.color(O,$,k,"hcl");case"interpolate-lab":return Ei.color(O,$,k,"lab")}}eachChild(l){l(this.input);for(const d of this.outputs)l(d)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function kr(h,l,d,g){const x=g-d,A=h-d;return x===0?0:l===1?A/x:(Math.pow(l,A)-1)/(Math.pow(l,x)-1)}class Xh{constructor(l,d){this.type=l,this.args=d}static parse(l,d){if(l.length<2)return d.error("Expectected at least one argument.");let g=null;const x=d.expectedType;x&&x.kind!=="value"&&(g=x);const A=[];for(const k of l.slice(1)){const O=d.parse(k,1+A.length,g,void 0,{typeAnnotation:"omit"});if(!O)return null;g=g||O.type,A.push(O)}if(!g)throw new Error("No output type");const M=x&&A.some(k=>Ee(x,k.type));return new Xh(M?lr:g,A)}evaluate(l){let d,g=null,x=0;for(const A of this.args)if(x++,g=A.evaluate(l),g&&g instanceof Pa&&!g.available&&(d||(d=g.name),g=null,x===this.args.length&&(g=d)),g!==null)break;return g}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}class Yh{constructor(l,d){this.type=d.type,this.bindings=[].concat(l),this.result=d}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const d of this.bindings)l(d[1]);l(this.result)}static parse(l,d){if(l.length<4)return d.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const g=[];for(let A=1;A<l.length-1;A+=2){const M=l[A];if(typeof M!="string")return d.error(`Expected string, but found ${typeof M} instead.`,A);if(/[^a-zA-Z0-9_]/.test(M))return d.error("Variable names must contain only alphanumeric characters or '_'.",A);const k=d.parse(l[A+1],A+1);if(!k)return null;g.push([M,k])}const x=d.parse(l[l.length-1],l.length-1,d.expectedType,g);return x?new Yh(g,x):null}outputDefined(){return this.result.outputDefined()}}class cp{constructor(l,d,g){this.type=l,this.index=d,this.input=g}static parse(l,d){if(l.length!==3)return d.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const g=d.parse(l[1],1,ht),x=d.parse(l[2],2,oe(d.expectedType||lr));return g&&x?new cp(x.type.itemType,g,x):null}evaluate(l){const d=this.index.evaluate(l),g=this.input.evaluate(l);if(d<0)throw new bn(`Array index out of bounds: ${d} < 0.`);if(d>=g.length)throw new bn(`Array index out of bounds: ${d} > ${g.length-1}.`);if(d!==Math.floor(d))throw new bn(`Array index must be an integer, but found ${d} instead.`);return g[d]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class hp{constructor(l,d){this.type=Ut,this.needle=l,this.haystack=d}static parse(l,d){if(l.length!==3)return d.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const g=d.parse(l[1],1,lr),x=d.parse(l[2],2,lr);return g&&x?Le(g.type,[Ut,sr,ht,Wn,lr])?new hp(g,x):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ue(g.type)} instead`):null}evaluate(l){const d=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!g)return!1;if(!Ce(d,["boolean","string","number","null"]))throw new bn(`Expected first argument to be of type boolean, string, number or null, but found ${ue(Hn(d))} instead.`);if(!Ce(g,["string","array"]))throw new bn(`Expected second argument to be of type array or string, but found ${ue(Hn(g))} instead.`);return g.indexOf(d)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Kh{constructor(l,d,g){this.type=ht,this.needle=l,this.haystack=d,this.fromIndex=g}static parse(l,d){if(l.length<=2||l.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const g=d.parse(l[1],1,lr),x=d.parse(l[2],2,lr);if(!g||!x)return null;if(!Le(g.type,[Ut,sr,ht,Wn,lr]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ue(g.type)} instead`);if(l.length===4){const A=d.parse(l[3],3,ht);return A?new Kh(g,x,A):null}return new Kh(g,x)}evaluate(l){const d=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!Ce(d,["boolean","string","number","null"]))throw new bn(`Expected first argument to be of type boolean, string, number or null, but found ${ue(Hn(d))} instead.`);if(!Ce(g,["string","array"]))throw new bn(`Expected second argument to be of type array or string, but found ${ue(Hn(g))} instead.`);if(this.fromIndex){const x=this.fromIndex.evaluate(l);return g.indexOf(d,x)}return g.indexOf(d)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class fp{constructor(l,d,g,x,A,M){this.inputType=l,this.type=d,this.input=g,this.cases=x,this.outputs=A,this.otherwise=M}static parse(l,d){if(l.length<5)return d.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return d.error("Expected an even number of arguments.");let g,x;d.expectedType&&d.expectedType.kind!=="value"&&(x=d.expectedType);const A={},M=[];for(let $=2;$<l.length-1;$+=2){let j=l[$];const W=l[$+1];Array.isArray(j)||(j=[j]);const Q=d.concat($);if(j.length===0)return Q.error("Expected at least one branch label.");for(const ae of j){if(typeof ae!="number"&&typeof ae!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof ae=="number"&&Math.abs(ae)>Number.MAX_SAFE_INTEGER)return Q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ae=="number"&&Math.floor(ae)!==ae)return Q.error("Numeric branch labels must be integer values.");if(g){if(Q.checkSubtype(g,Hn(ae)))return null}else g=Hn(ae);if(A[String(ae)]!==void 0)return Q.error("Branch labels must be unique.");A[String(ae)]=M.length}const re=d.parse(W,$,x);if(!re)return null;x=x||re.type,M.push(re)}const k=d.parse(l[1],1,lr);if(!k)return null;const O=d.parse(l[l.length-1],l.length-1,x);return O?k.type.kind!=="value"&&d.concat(1).checkSubtype(g,k.type)?null:new fp(g,x,k,A,M,O):null}evaluate(l){const d=this.input.evaluate(l);return(Hn(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class dp{constructor(l,d,g){this.type=l,this.branches=d,this.otherwise=g}static parse(l,d){if(l.length<4)return d.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return d.error("Expected an odd number of arguments.");let g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);const x=[];for(let M=1;M<l.length-1;M+=2){const k=d.parse(l[M],M,Ut);if(!k)return null;const O=d.parse(l[M+1],M+1,g);if(!O)return null;x.push([k,O]),g=g||O.type}const A=d.parse(l[l.length-1],l.length-1,g);if(!A)return null;if(!g)throw new Error("Can't infer output type");return new dp(g,x,A)}evaluate(l){for(const[d,g]of this.branches)if(d.evaluate(l))return g.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[d,g]of this.branches)l(d),l(g);l(this.otherwise)}outputDefined(){return this.branches.every(([l,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class Jh{constructor(l,d,g,x){this.type=l,this.input=d,this.beginIndex=g,this.endIndex=x}static parse(l,d){if(l.length<=2||l.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const g=d.parse(l[1],1,lr),x=d.parse(l[2],2,ht);if(!g||!x)return null;if(!Le(g.type,[oe(lr),sr,lr]))return d.error(`Expected first argument to be of type array or string, but found ${ue(g.type)} instead`);if(l.length===4){const A=d.parse(l[3],3,ht);return A?new Jh(g.type,g,x,A):null}return new Jh(g.type,g,x)}evaluate(l){const d=this.input.evaluate(l),g=this.beginIndex.evaluate(l);if(!Ce(d,["string","array"]))throw new bn(`Expected first argument to be of type array or string, but found ${ue(Hn(d))} instead.`);if(this.endIndex){const x=this.endIndex.evaluate(l);return d.slice(g,x)}return d.slice(g)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Yg(h,l){return h==="=="||h==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Kg(h,l,d,g){return g.compare(l,d)===0}function Vl(h,l,d){const g=h!=="=="&&h!=="!=";return class c6{constructor(A,M,k){this.type=Ut,this.lhs=A,this.rhs=M,this.collator=k,this.hasUntypedArgument=A.type.kind==="value"||M.type.kind==="value"}static parse(A,M){if(A.length!==3&&A.length!==4)return M.error("Expected two or three arguments.");const k=A[0];let O=M.parse(A[1],1,lr);if(!O)return null;if(!Yg(k,O.type))return M.concat(1).error(`"${k}" comparisons are not supported for type '${ue(O.type)}'.`);let $=M.parse(A[2],2,lr);if(!$)return null;if(!Yg(k,$.type))return M.concat(2).error(`"${k}" comparisons are not supported for type '${ue($.type)}'.`);if(O.type.kind!==$.type.kind&&O.type.kind!=="value"&&$.type.kind!=="value")return M.error(`Cannot compare types '${ue(O.type)}' and '${ue($.type)}'.`);g&&(O.type.kind==="value"&&$.type.kind!=="value"?O=new da($.type,[O]):O.type.kind!=="value"&&$.type.kind==="value"&&($=new da(O.type,[$])));let j=null;if(A.length===4){if(O.type.kind!=="string"&&$.type.kind!=="string"&&O.type.kind!=="value"&&$.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(j=M.parse(A[3],3,js),!j)return null}return new c6(O,$,j)}evaluate(A){const M=this.lhs.evaluate(A),k=this.rhs.evaluate(A);if(g&&this.hasUntypedArgument){const O=Hn(M),$=Hn(k);if(O.kind!==$.kind||O.kind!=="string"&&O.kind!=="number")throw new bn(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${O.kind}, ${$.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const O=Hn(M),$=Hn(k);if(O.kind!=="string"||$.kind!=="string")return l(A,M,k)}return this.collator?d(A,M,k,this.collator.evaluate(A)):l(A,M,k)}eachChild(A){A(this.lhs),A(this.rhs),this.collator&&A(this.collator)}outputDefined(){return!0}}}const Kb=Vl("==",function(h,l,d){return l===d},Kg),Jb=Vl("!=",function(h,l,d){return l!==d},function(h,l,d,g){return!Kg(0,l,d,g)}),Qb=Vl("<",function(h,l,d){return l<d},function(h,l,d,g){return g.compare(l,d)<0}),ex=Vl(">",function(h,l,d){return l>d},function(h,l,d,g){return g.compare(l,d)>0}),tx=Vl("<=",function(h,l,d){return l<=d},function(h,l,d,g){return g.compare(l,d)<=0}),rx=Vl(">=",function(h,l,d){return l>=d},function(h,l,d,g){return g.compare(l,d)>=0});class pp{constructor(l,d,g,x,A){this.type=sr,this.number=l,this.locale=d,this.currency=g,this.minFractionDigits=x,this.maxFractionDigits=A}static parse(l,d){if(l.length!==3)return d.error("Expected two arguments.");const g=d.parse(l[1],1,ht);if(!g)return null;const x=l[2];if(typeof x!="object"||Array.isArray(x))return d.error("NumberFormat options argument must be an object.");let A=null;if(x.locale&&(A=d.parse(x.locale,1,sr),!A))return null;let M=null;if(x.currency&&(M=d.parse(x.currency,1,sr),!M))return null;let k=null;if(x["min-fraction-digits"]&&(k=d.parse(x["min-fraction-digits"],1,ht),!k))return null;let O=null;return x["max-fraction-digits"]&&(O=d.parse(x["max-fraction-digits"],1,ht),!O)?null:new pp(g,A,M,k,O)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Qh{constructor(l){this.type=qn,this.sections=l}static parse(l,d){if(l.length<2)return d.error("Expected at least one argument.");const g=l[1];if(!Array.isArray(g)&&typeof g=="object")return d.error("First argument must be an image or text section.");const x=[];let A=!1;for(let M=1;M<=l.length-1;++M){const k=l[M];if(A&&typeof k=="object"&&!Array.isArray(k)){A=!1;let O=null;if(k["font-scale"]&&(O=d.parse(k["font-scale"],1,ht),!O))return null;let $=null;if(k["text-font"]&&($=d.parse(k["text-font"],1,oe(sr)),!$))return null;let j=null;if(k["text-color"]&&(j=d.parse(k["text-color"],1,Fr),!j))return null;const W=x[x.length-1];W.scale=O,W.font=$,W.textColor=j}else{const O=d.parse(l[M],1,lr);if(!O)return null;const $=O.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");A=!0,x.push({content:O,scale:null,font:null,textColor:null})}}return new Qh(x)}evaluate(l){return new fa(this.sections.map(d=>{const g=d.content.evaluate(l);return Hn(g)===K?new up("",g,null,null,null):new up(Xu(g),null,d.scale?d.scale.evaluate(l):null,d.font?d.font.evaluate(l).join(","):null,d.textColor?d.textColor.evaluate(l):null)}))}eachChild(l){for(const d of this.sections)l(d.content),d.scale&&l(d.scale),d.font&&l(d.font),d.textColor&&l(d.textColor)}outputDefined(){return!1}}class mp{constructor(l){this.type=K,this.input=l}static parse(l,d){if(l.length!==2)return d.error("Expected two arguments.");const g=d.parse(l[1],1,sr);return g?new mp(g):d.error("No image name provided.")}evaluate(l){const d=this.input.evaluate(l),g=Pa.fromString(d);return g&&l.availableImages&&(g.available=l.availableImages.indexOf(d)>-1),g}eachChild(l){l(this.input)}outputDefined(){return!1}}class vp{constructor(l){this.type=ht,this.input=l}static parse(l,d){if(l.length!==2)return d.error(`Expected 1 argument, but found ${l.length-1} instead.`);const g=d.parse(l[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${ue(g.type)} instead.`):new vp(g):null}evaluate(l){const d=this.input.evaluate(l);if(typeof d=="string"||Array.isArray(d))return d.length;throw new bn(`Expected value to be of type string or array, but found ${ue(Hn(d))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Hl={"==":Kb,"!=":Jb,">":ex,"<":Qb,">=":rx,"<=":tx,array:da,at:cp,boolean:da,case:dp,coalesce:Xh,collator:Nl,format:Qh,image:mp,in:hp,"index-of":Kh,interpolate:_i,"interpolate-hcl":_i,"interpolate-lab":_i,length:vp,let:Yh,literal:ls,match:fp,number:da,"number-format":pp,object:da,slice:Jh,step:rc,string:da,"to-boolean":lo,"to-color":lo,"to-number":lo,"to-string":lo,var:Wh,within:Gs};function Jg(h,[l,d,g,x]){l=l.evaluate(h),d=d.evaluate(h),g=g.evaluate(h);const A=x?x.evaluate(h):1,M=$l(l,d,g,A);if(M)throw new bn(M);return new jr(l/255,d/255,g/255,A,!1)}function Qg(h,l){return h in l}function gp(h,l){const d=l[h];return d===void 0?null:d}function qs(h){return{type:h}}function ey(h){return{result:"success",value:h}}function Ul(h){return{result:"error",value:h}}function jl(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function ty(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function yp(h){return!!h.expression&&h.expression.interpolated}function Ir(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function ef(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function nx(h){return h}function ry(h,l){const d=l.type==="color",g=h.stops&&typeof h.stops[0][0]=="object",x=g||!(g||h.property!==void 0),A=h.type||(yp(l)?"exponential":"interval");if(d||l.type==="padding"){const j=d?jr.parse:Gi.parse;(h=Zr({},h)).stops&&(h.stops=h.stops.map(W=>[W[0],j(W[1])])),h.default=j(h.default?h.default:l.default)}if(h.colorSpace&&(M=h.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var M;let k,O,$;if(A==="exponential")k=Ar;else if(A==="interval")k=ix;else if(A==="categorical"){k=zn,O=Object.create(null);for(const j of h.stops)O[j[0]]=j[1];$=typeof h.stops[0][0]}else{if(A!=="identity")throw new Error(`Unknown function type "${A}"`);k=_p}if(g){const j={},W=[];for(let ae=0;ae<h.stops.length;ae++){const se=h.stops[ae],pe=se[0].zoom;j[pe]===void 0&&(j[pe]={zoom:pe,type:h.type,property:h.property,default:h.default,stops:[]},W.push(pe)),j[pe].stops.push([se[0].value,se[1]])}const Q=[];for(const ae of W)Q.push([j[ae].zoom,ry(j[ae],l)]);const re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:_i.interpolationFactor.bind(void 0,re),zoomStops:Q.map(ae=>ae[0]),evaluate:({zoom:ae},se)=>Ar({stops:Q,base:h.base},l,ae).evaluate(ae,se)}}if(x){const j=A==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:_i.interpolationFactor.bind(void 0,j),zoomStops:h.stops.map(W=>W[0]),evaluate:({zoom:W})=>k(h,l,W,O,$)}}return{kind:"source",evaluate(j,W){const Q=W&&W.properties?W.properties[h.property]:void 0;return Q===void 0?nc(h.default,l.default):k(h,l,Q,O,$)}}}function nc(h,l,d){return h!==void 0?h:l!==void 0?l:d!==void 0?d:void 0}function zn(h,l,d,g,x){return nc(typeof d===x?g[d]:void 0,h.default,l.default)}function ix(h,l,d){if(Ir(d)!=="number")return nc(h.default,l.default);const g=h.stops.length;if(g===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[g-1][0])return h.stops[g-1][1];const x=tc(h.stops.map(A=>A[0]),d);return h.stops[x][1]}function Ar(h,l,d){const g=h.base!==void 0?h.base:1;if(Ir(d)!=="number")return nc(h.default,l.default);const x=h.stops.length;if(x===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[x-1][0])return h.stops[x-1][1];const A=tc(h.stops.map(j=>j[0]),d),M=function(j,W,Q,re){const ae=re-Q,se=j-Q;return ae===0?0:W===1?se/ae:(Math.pow(W,se)-1)/(Math.pow(W,ae)-1)}(d,g,h.stops[A][0],h.stops[A+1][0]),k=h.stops[A][1],O=h.stops[A+1][1],$=Ei[l.type]||nx;return typeof k.evaluate=="function"?{evaluate(...j){const W=k.evaluate.apply(void 0,j),Q=O.evaluate.apply(void 0,j);if(W!==void 0&&Q!==void 0)return $(W,Q,M,h.colorSpace)}}:$(k,O,M,h.colorSpace)}function _p(h,l,d){switch(l.type){case"color":d=jr.parse(d);break;case"formatted":d=fa.fromString(d.toString());break;case"resolvedImage":d=Pa.fromString(d.toString());break;case"padding":d=Gi.parse(d);break;default:Ir(d)===l.type||l.type==="enum"&&l.values[d]||(d=void 0)}return nc(d,h.default,l.default)}pa.register(Hl,{error:[{kind:"error"},[sr],(h,[l])=>{throw new bn(l.evaluate(h))}],typeof:[sr,[lr],(h,[l])=>ue(Hn(l.evaluate(h)))],"to-rgba":[oe(ht,4),[Fr],(h,[l])=>{const[d,g,x,A]=l.evaluate(h).rgb;return[255*d,255*g,255*x,A]}],rgb:[Fr,[ht,ht,ht],Jg],rgba:[Fr,[ht,ht,ht,ht],Jg],has:{type:Ut,overloads:[[[sr],(h,[l])=>Qg(l.evaluate(h),h.properties())],[[sr,ha],(h,[l,d])=>Qg(l.evaluate(h),d.evaluate(h))]]},get:{type:lr,overloads:[[[sr],(h,[l])=>gp(l.evaluate(h),h.properties())],[[sr,ha],(h,[l,d])=>gp(l.evaluate(h),d.evaluate(h))]]},"feature-state":[lr,[sr],(h,[l])=>gp(l.evaluate(h),h.featureState||{})],properties:[ha,[],h=>h.properties()],"geometry-type":[sr,[],h=>h.geometryType()],id:[lr,[],h=>h.id()],zoom:[ht,[],h=>h.globals.zoom],"heatmap-density":[ht,[],h=>h.globals.heatmapDensity||0],"line-progress":[ht,[],h=>h.globals.lineProgress||0],accumulated:[lr,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[ht,qs(ht),(h,l)=>{let d=0;for(const g of l)d+=g.evaluate(h);return d}],"*":[ht,qs(ht),(h,l)=>{let d=1;for(const g of l)d*=g.evaluate(h);return d}],"-":{type:ht,overloads:[[[ht,ht],(h,[l,d])=>l.evaluate(h)-d.evaluate(h)],[[ht],(h,[l])=>-l.evaluate(h)]]},"/":[ht,[ht,ht],(h,[l,d])=>l.evaluate(h)/d.evaluate(h)],"%":[ht,[ht,ht],(h,[l,d])=>l.evaluate(h)%d.evaluate(h)],ln2:[ht,[],()=>Math.LN2],pi:[ht,[],()=>Math.PI],e:[ht,[],()=>Math.E],"^":[ht,[ht,ht],(h,[l,d])=>Math.pow(l.evaluate(h),d.evaluate(h))],sqrt:[ht,[ht],(h,[l])=>Math.sqrt(l.evaluate(h))],log10:[ht,[ht],(h,[l])=>Math.log(l.evaluate(h))/Math.LN10],ln:[ht,[ht],(h,[l])=>Math.log(l.evaluate(h))],log2:[ht,[ht],(h,[l])=>Math.log(l.evaluate(h))/Math.LN2],sin:[ht,[ht],(h,[l])=>Math.sin(l.evaluate(h))],cos:[ht,[ht],(h,[l])=>Math.cos(l.evaluate(h))],tan:[ht,[ht],(h,[l])=>Math.tan(l.evaluate(h))],asin:[ht,[ht],(h,[l])=>Math.asin(l.evaluate(h))],acos:[ht,[ht],(h,[l])=>Math.acos(l.evaluate(h))],atan:[ht,[ht],(h,[l])=>Math.atan(l.evaluate(h))],min:[ht,qs(ht),(h,l)=>Math.min(...l.map(d=>d.evaluate(h)))],max:[ht,qs(ht),(h,l)=>Math.max(...l.map(d=>d.evaluate(h)))],abs:[ht,[ht],(h,[l])=>Math.abs(l.evaluate(h))],round:[ht,[ht],(h,[l])=>{const d=l.evaluate(h);return d<0?-Math.round(-d):Math.round(d)}],floor:[ht,[ht],(h,[l])=>Math.floor(l.evaluate(h))],ceil:[ht,[ht],(h,[l])=>Math.ceil(l.evaluate(h))],"filter-==":[Ut,[sr,lr],(h,[l,d])=>h.properties()[l.value]===d.value],"filter-id-==":[Ut,[lr],(h,[l])=>h.id()===l.value],"filter-type-==":[Ut,[sr],(h,[l])=>h.geometryType()===l.value],"filter-<":[Ut,[sr,lr],(h,[l,d])=>{const g=h.properties()[l.value],x=d.value;return typeof g==typeof x&&g<x}],"filter-id-<":[Ut,[lr],(h,[l])=>{const d=h.id(),g=l.value;return typeof d==typeof g&&d<g}],"filter->":[Ut,[sr,lr],(h,[l,d])=>{const g=h.properties()[l.value],x=d.value;return typeof g==typeof x&&g>x}],"filter-id->":[Ut,[lr],(h,[l])=>{const d=h.id(),g=l.value;return typeof d==typeof g&&d>g}],"filter-<=":[Ut,[sr,lr],(h,[l,d])=>{const g=h.properties()[l.value],x=d.value;return typeof g==typeof x&&g<=x}],"filter-id-<=":[Ut,[lr],(h,[l])=>{const d=h.id(),g=l.value;return typeof d==typeof g&&d<=g}],"filter->=":[Ut,[sr,lr],(h,[l,d])=>{const g=h.properties()[l.value],x=d.value;return typeof g==typeof x&&g>=x}],"filter-id->=":[Ut,[lr],(h,[l])=>{const d=h.id(),g=l.value;return typeof d==typeof g&&d>=g}],"filter-has":[Ut,[lr],(h,[l])=>l.value in h.properties()],"filter-has-id":[Ut,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Ut,[oe(sr)],(h,[l])=>l.value.indexOf(h.geometryType())>=0],"filter-id-in":[Ut,[oe(lr)],(h,[l])=>l.value.indexOf(h.id())>=0],"filter-in-small":[Ut,[sr,oe(lr)],(h,[l,d])=>d.value.indexOf(h.properties()[l.value])>=0],"filter-in-large":[Ut,[sr,oe(lr)],(h,[l,d])=>function(g,x,A,M){for(;A<=M;){const k=A+M>>1;if(x[k]===g)return!0;x[k]>g?M=k-1:A=k+1}return!1}(h.properties()[l.value],d.value,0,d.value.length-1)],all:{type:Ut,overloads:[[[Ut,Ut],(h,[l,d])=>l.evaluate(h)&&d.evaluate(h)],[qs(Ut),(h,l)=>{for(const d of l)if(!d.evaluate(h))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],(h,[l,d])=>l.evaluate(h)||d.evaluate(h)],[qs(Ut),(h,l)=>{for(const d of l)if(d.evaluate(h))return!0;return!1}]]},"!":[Ut,[Ut],(h,[l])=>!l.evaluate(h)],"is-supported-script":[Ut,[sr],(h,[l])=>{const d=h.globals&&h.globals.isSupportedScript;return!d||d(l.evaluate(h))}],upcase:[sr,[sr],(h,[l])=>l.evaluate(h).toUpperCase()],downcase:[sr,[sr],(h,[l])=>l.evaluate(h).toLowerCase()],concat:[sr,qs(lr),(h,l)=>l.map(d=>Xu(d.evaluate(h))).join("")],"resolved-locale":[sr,[js],(h,[l])=>l.evaluate(h).resolvedLocale()]});class sn{constructor(l,d){var g;this.expression=l,this._warningHistory={},this._evaluator=new Gr,this._defaultValue=d?(g=d).type==="color"&&ef(g.default)?new jr(0,0,0,0):g.type==="color"?jr.parse(g.default)||null:g.type==="padding"?Gi.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?Ea.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(l,d,g,x,A,M){return this._evaluator.globals=l,this._evaluator.feature=d,this._evaluator.featureState=g,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(l,d,g,x,A,M){this._evaluator.globals=l,this._evaluator.feature=d||null,this._evaluator.featureState=g||null,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=M||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new bn(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function en(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Hl}function Zs(h,l){const d=new Vh(Hl,Ju,[],l?function(x){const A={color:Fr,string:sr,number:ht,enum:sr,boolean:Ut,formatted:qn,padding:ve,resolvedImage:K,variableAnchorOffsetCollection:te};return x.type==="array"?oe(A[x.value]||lr,x.length):A[x.type]}(l):void 0),g=d.parse(h,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?ey(new sn(g,l)):Ul(d.errors)}class tf{constructor(l,d){this.kind=l,this._styleExpression=d,this.isStateDependent=l!=="constant"&&!Qu(d.expression)}evaluateWithoutErrorHandling(l,d,g,x,A,M){return this._styleExpression.evaluateWithoutErrorHandling(l,d,g,x,A,M)}evaluate(l,d,g,x,A,M){return this._styleExpression.evaluate(l,d,g,x,A,M)}}class bp{constructor(l,d,g,x){this.kind=l,this.zoomStops=g,this._styleExpression=d,this.isStateDependent=l!=="camera"&&!Qu(d.expression),this.interpolationType=x}evaluateWithoutErrorHandling(l,d,g,x,A,M){return this._styleExpression.evaluateWithoutErrorHandling(l,d,g,x,A,M)}evaluate(l,d,g,x,A,M){return this._styleExpression.evaluate(l,d,g,x,A,M)}interpolationFactor(l,d,g){return this.interpolationType?_i.interpolationFactor(this.interpolationType,l,d,g):0}}function ny(h,l){const d=Zs(h,l);if(d.result==="error")return d;const g=d.value.expression,x=qh(g);if(!x&&!jl(l))return Ul([new pn("","data expressions not supported")]);const A=ec(g,["zoom"]);if(!A&&!ty(l))return Ul([new pn("","zoom expressions not supported")]);const M=nf(g);return M||A?M instanceof pn?Ul([M]):M instanceof _i&&!yp(l)?Ul([new pn("",'"interpolate" expressions cannot be used with this property')]):ey(M?new bp(x?"camera":"composite",d.value,M.labels,M instanceof _i?M.interpolation:void 0):new tf(x?"constant":"source",d.value)):Ul([new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rf{constructor(l,d){this._parameters=l,this._specification=d,Zr(this,ry(this._parameters,this._specification))}static deserialize(l){return new rf(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function nf(h){let l=null;if(h instanceof Yh)l=nf(h.result);else if(h instanceof Xh){for(const d of h.args)if(l=nf(d),l)break}else(h instanceof rc||h instanceof _i)&&h.input instanceof pa&&h.input.name==="zoom"&&(l=h);return l instanceof pn||h.eachChild(d=>{const g=nf(d);g instanceof pn?l=g:!l&&g?l=new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&g&&l!==g&&(l=new pn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function af(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const l of h.slice(1))if(!af(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const iy={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function of(h){if(h==null)return{filter:()=>!0,needGeometry:!1};af(h)||(h=lf(h));const l=Zs(h,iy);if(l.result==="error")throw new Error(l.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,g,x)=>l.value.evaluate(d,g,{},x),needGeometry:sf(h)}}function ay(h,l){return h<l?-1:h>l?1:0}function sf(h){if(!Array.isArray(h))return!1;if(h[0]==="within")return!0;for(let l=1;l<h.length;l++)if(sf(h[l]))return!0;return!1}function lf(h){if(!h)return!0;const l=h[0];return h.length<=1?l!=="any":l==="=="?xp(h[1],h[2],"=="):l==="!="?uf(xp(h[1],h[2],"==")):l==="<"||l===">"||l==="<="||l===">="?xp(h[1],h[2],l):l==="any"?(d=h.slice(1),["any"].concat(d.map(lf))):l==="all"?["all"].concat(h.slice(1).map(lf)):l==="none"?["all"].concat(h.slice(1).map(lf).map(uf)):l==="in"?oy(h[1],h.slice(2)):l==="!in"?uf(oy(h[1],h.slice(2))):l==="has"?sy(h[1]):l==="!has"?uf(sy(h[1])):l!=="within"||h;var d}function xp(h,l,d){switch(h){case"$type":return[`filter-type-${d}`,l];case"$id":return[`filter-id-${d}`,l];default:return[`filter-${d}`,h,l]}}function oy(h,l){if(l.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(d=>typeof d!=typeof l[0])?["filter-in-large",h,["literal",l.sort(ay)]]:["filter-in-small",h,["literal",l]]}}function sy(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function uf(h){return["!",h]}function wp(h){const l=typeof h;if(l==="number"||l==="boolean"||l==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let x="[";for(const A of h)x+=`${wp(A)},`;return`${x}]`}const d=Object.keys(h).sort();let g="{";for(let x=0;x<d.length;x++)g+=`${JSON.stringify(d[x])}:${wp(h[d[x]])},`;return`${g}}`}function ax(h){let l="";for(const d of lt)l+=`/${wp(h[d])}`;return l}function ly(h){const l=h.value;return l?[new Ke(h.key,l,"constants have been deprecated as of v8")]:[]}function An(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function cs(h){if(Array.isArray(h))return h.map(cs);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const l={};for(const d in h)l[d]=cs(h[d]);return l}return An(h)}function Pi(h){const l=h.key,d=h.value,g=h.valueSpec||{},x=h.objectElementValidators||{},A=h.style,M=h.styleSpec,k=h.validateSpec;let O=[];const $=Ir(d);if($!=="object")return[new Ke(l,d,`object expected, ${$} found`)];for(const j in d){const W=j.split(".")[0],Q=g[W]||g["*"];let re;if(x[W])re=x[W];else if(g[W])re=k;else if(x["*"])re=x["*"];else{if(!g["*"]){O.push(new Ke(l,d[j],`unknown property "${j}"`));continue}re=k}O=O.concat(re({key:(l&&`${l}.`)+j,value:d[j],valueSpec:Q,style:A,styleSpec:M,object:d,objectKey:j,validateSpec:k},d))}for(const j in g)x[j]||g[j].required&&g[j].default===void 0&&d[j]===void 0&&O.push(new Ke(l,d,`missing required property "${j}"`));return O}function Sp(h){const l=h.value,d=h.valueSpec,g=h.style,x=h.styleSpec,A=h.key,M=h.arrayElementValidator||h.validateSpec;if(Ir(l)!=="array")return[new Ke(A,l,`array expected, ${Ir(l)} found`)];if(d.length&&l.length!==d.length)return[new Ke(A,l,`array length ${d.length} expected, length ${l.length} found`)];if(d["min-length"]&&l.length<d["min-length"])return[new Ke(A,l,`array length at least ${d["min-length"]} expected, length ${l.length} found`)];let k={type:d.value,values:d.values};x.$version<7&&(k.function=d.function),Ir(d.value)==="object"&&(k=d.value);let O=[];for(let $=0;$<l.length;$++)O=O.concat(M({array:l,arrayIndex:$,value:l[$],valueSpec:k,validateSpec:h.validateSpec,style:g,styleSpec:x,key:`${A}[${$}]`}));return O}function cf(h){const l=h.key,d=h.value,g=h.valueSpec;let x=Ir(d);return x==="number"&&d!=d&&(x="NaN"),x!=="number"?[new Ke(l,d,`number expected, ${x} found`)]:"minimum"in g&&d<g.minimum?[new Ke(l,d,`${d} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&d>g.maximum?[new Ke(l,d,`${d} is greater than the maximum value ${g.maximum}`)]:[]}function uy(h){const l=h.valueSpec,d=An(h.value.type);let g,x,A,M={};const k=d!=="categorical"&&h.value.property===void 0,O=!k,$=Ir(h.value.stops)==="array"&&Ir(h.value.stops[0])==="array"&&Ir(h.value.stops[0][0])==="object",j=Pi({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(re){if(d==="identity")return[new Ke(re.key,re.value,'identity function may not have a "stops" property')];let ae=[];const se=re.value;return ae=ae.concat(Sp({key:re.key,value:se,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:W})),Ir(se)==="array"&&se.length===0&&ae.push(new Ke(re.key,se,"array must have at least one stop")),ae},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:l,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return d==="identity"&&k&&j.push(new Ke(h.key,h.value,'missing required property "property"')),d==="identity"||h.value.stops||j.push(new Ke(h.key,h.value,'missing required property "stops"')),d==="exponential"&&h.valueSpec.expression&&!yp(h.valueSpec)&&j.push(new Ke(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(O&&!jl(h.valueSpec)?j.push(new Ke(h.key,h.value,"property functions not supported")):k&&!ty(h.valueSpec)&&j.push(new Ke(h.key,h.value,"zoom functions not supported"))),d!=="categorical"&&!$||h.value.property!==void 0||j.push(new Ke(h.key,h.value,'"property" property is required')),j;function W(re){let ae=[];const se=re.value,pe=re.key;if(Ir(se)!=="array")return[new Ke(pe,se,`array expected, ${Ir(se)} found`)];if(se.length!==2)return[new Ke(pe,se,`array length 2 expected, length ${se.length} found`)];if($){if(Ir(se[0])!=="object")return[new Ke(pe,se,`object expected, ${Ir(se[0])} found`)];if(se[0].zoom===void 0)return[new Ke(pe,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Ke(pe,se,"object stop key must have value")];if(A&&A>An(se[0].zoom))return[new Ke(pe,se[0].zoom,"stop zoom values must appear in ascending order")];An(se[0].zoom)!==A&&(A=An(se[0].zoom),x=void 0,M={}),ae=ae.concat(Pi({key:`${pe}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:cf,value:Q}}))}else ae=ae.concat(Q({key:`${pe}[0]`,value:se[0],valueSpec:{},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},se));return en(cs(se[1]))?ae.concat([new Ke(`${pe}[1]`,se[1],"expressions are not allowed in function stops.")]):ae.concat(re.validateSpec({key:`${pe}[1]`,value:se[1],valueSpec:l,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function Q(re,ae){const se=Ir(re.value),pe=An(re.value),xe=re.value!==null?re.value:ae;if(g){if(se!==g)return[new Ke(re.key,xe,`${se} stop domain type must match previous stop domain type ${g}`)]}else g=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new Ke(re.key,xe,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&d!=="categorical"){let Re=`number expected, ${se} found`;return jl(l)&&d===void 0&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ke(re.key,xe,Re)]}return d!=="categorical"||se!=="number"||isFinite(pe)&&Math.floor(pe)===pe?d!=="categorical"&&se==="number"&&x!==void 0&&pe<x?[new Ke(re.key,xe,"stop domain values must appear in ascending order")]:(x=pe,d==="categorical"&&pe in M?[new Ke(re.key,xe,"stop domain values must be unique")]:(M[pe]=!0,[])):[new Ke(re.key,xe,`integer expected, found ${pe}`)]}}function hs(h){const l=(h.expressionContext==="property"?ny:Zs)(cs(h.value),h.valueSpec);if(l.result==="error")return l.value.map(g=>new Ke(`${h.key}${g.key}`,h.value,g.message));const d=l.value.expression||l.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!d.outputDefined())return[new Ke(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Qu(d))return[new Ke(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Qu(d))return[new Ke(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!ec(d,["zoom","feature-state"]))return[new Ke(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!qh(d))return[new Ke(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fs(h){const l=h.key,d=h.value,g=h.valueSpec,x=[];return Array.isArray(g.values)?g.values.indexOf(An(d))===-1&&x.push(new Ke(l,d,`expected one of [${g.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(g.values).indexOf(An(d))===-1&&x.push(new Ke(l,d,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(d)} found`)),x}function Gl(h){return af(cs(h.value))?hs(Zr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):hf(h)}function hf(h){const l=h.value,d=h.key;if(Ir(l)!=="array")return[new Ke(d,l,`array expected, ${Ir(l)} found`)];const g=h.styleSpec;let x,A=[];if(l.length<1)return[new Ke(d,l,"filter array must have at least 1 element")];switch(A=A.concat(fs({key:`${d}[0]`,value:l[0],valueSpec:g.filter_operator,style:h.style,styleSpec:h.styleSpec})),An(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&An(l[1])==="$type"&&A.push(new Ke(d,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&A.push(new Ke(d,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(x=Ir(l[1]),x!=="string"&&A.push(new Ke(`${d}[1]`,l[1],`string expected, ${x} found`)));for(let M=2;M<l.length;M++)x=Ir(l[M]),An(l[1])==="$type"?A=A.concat(fs({key:`${d}[${M}]`,value:l[M],valueSpec:g.geometry_type,style:h.style,styleSpec:h.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&A.push(new Ke(`${d}[${M}]`,l[M],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let M=1;M<l.length;M++)A=A.concat(hf({key:`${d}[${M}]`,value:l[M],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":x=Ir(l[1]),l.length!==2?A.push(new Ke(d,l,`filter array for "${l[0]}" operator must have 2 elements`)):x!=="string"&&A.push(new Ke(`${d}[1]`,l[1],`string expected, ${x} found`));break;case"within":x=Ir(l[1]),l.length!==2?A.push(new Ke(d,l,`filter array for "${l[0]}" operator must have 2 elements`)):x!=="object"&&A.push(new Ke(`${d}[1]`,l[1],`object expected, ${x} found`))}return A}function Tp(h,l){const d=h.key,g=h.validateSpec,x=h.style,A=h.styleSpec,M=h.value,k=h.objectKey,O=A[`${l}_${h.layerType}`];if(!O)return[];const $=k.match(/^(.*)-transition$/);if(l==="paint"&&$&&O[$[1]]&&O[$[1]].transition)return g({key:d,value:M,valueSpec:A.transition,style:x,styleSpec:A});const j=h.valueSpec||O[k];if(!j)return[new Ke(d,M,`unknown property "${k}"`)];let W;if(Ir(M)==="string"&&jl(j)&&!j.tokens&&(W=/^{([^}]+)}$/.exec(M)))return[new Ke(d,M,`"${k}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];const Q=[];return h.layerType==="symbol"&&(k==="text-field"&&x&&!x.glyphs&&Q.push(new Ke(d,M,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&ef(cs(M))&&An(M.type)==="identity"&&Q.push(new Ke(d,M,'"text-font" does not support identity functions'))),Q.concat(g({key:h.key,value:M,valueSpec:j,style:x,styleSpec:A,expressionContext:"property",propertyType:l,propertyKey:k}))}function Cp(h){return Tp(h,"paint")}function ic(h){return Tp(h,"layout")}function cy(h){let l=[];const d=h.value,g=h.key,x=h.style,A=h.styleSpec;d.type||d.ref||l.push(new Ke(g,d,'either "type" or "ref" is required'));let M=An(d.type);const k=An(d.ref);if(d.id){const O=An(d.id);for(let $=0;$<h.arrayIndex;$++){const j=x.layers[$];An(j.id)===O&&l.push(new Ke(g,d.id,`duplicate layer id "${d.id}", previously used at line ${j.id.__line__}`))}}if("ref"in d){let O;["type","source","source-layer","filter","layout"].forEach($=>{$ in d&&l.push(new Ke(g,d[$],`"${$}" is prohibited for ref layers`))}),x.layers.forEach($=>{An($.id)===k&&(O=$)}),O?O.ref?l.push(new Ke(g,d.ref,"ref cannot reference another ref layer")):M=An(O.type):l.push(new Ke(g,d.ref,`ref layer "${k}" not found`))}else if(M!=="background")if(d.source){const O=x.sources&&x.sources[d.source],$=O&&An(O.type);O?$==="vector"&&M==="raster"?l.push(new Ke(g,d.source,`layer "${d.id}" requires a raster source`)):$!=="raster-dem"&&M==="hillshade"?l.push(new Ke(g,d.source,`layer "${d.id}" requires a raster-dem source`)):$==="raster"&&M!=="raster"?l.push(new Ke(g,d.source,`layer "${d.id}" requires a vector source`)):$!=="vector"||d["source-layer"]?$==="raster-dem"&&M!=="hillshade"?l.push(new Ke(g,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):M!=="line"||!d.paint||!d.paint["line-gradient"]||$==="geojson"&&O.lineMetrics||l.push(new Ke(g,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Ke(g,d,`layer "${d.id}" must specify a "source-layer"`)):l.push(new Ke(g,d.source,`source "${d.source}" not found`))}else l.push(new Ke(g,d,'missing required property "source"'));return l=l.concat(Pi({key:g,value:d,valueSpec:A.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${g}.type`,value:d.type,valueSpec:A.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:d,objectKey:"type"}),filter:Gl,layout:O=>Pi({layer:d,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":$=>ic(Zr({layerType:M},$))}}),paint:O=>Pi({layer:d,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":$=>Cp(Zr({layerType:M},$))}})}})),l}function Xs(h){const l=h.value,d=h.key,g=Ir(l);return g!=="string"?[new Ke(d,l,`string expected, ${g} found`)]:[]}const hy={promoteId:function({key:h,value:l}){if(Ir(l)==="string")return Xs({key:h,value:l});{const d=[];for(const g in l)d.push(...Xs({key:`${h}.${g}`,value:l[g]}));return d}}};function fy(h){const l=h.value,d=h.key,g=h.styleSpec,x=h.style,A=h.validateSpec;if(!l.type)return[new Ke(d,l,'"type" is required')];const M=An(l.type);let k;switch(M){case"vector":case"raster":return k=Pi({key:d,value:l,valueSpec:g[`source_${M.replace("-","_")}`],style:h.style,styleSpec:g,objectElementValidators:hy,validateSpec:A}),k;case"raster-dem":return k=function(O){var $;const j=($=O.sourceName)!==null&&$!==void 0?$:"",W=O.value,Q=O.styleSpec,re=Q.source_raster_dem,ae=O.style;let se=[];const pe=Ir(W);if(W===void 0)return se;if(pe!=="object")return se.push(new Ke("source_raster_dem",W,`object expected, ${pe} found`)),se;const xe=An(W.encoding)==="custom",Re=["redFactor","greenFactor","blueFactor","baseShift"],Se=O.value.encoding?`"${O.value.encoding}"`:"Default";for(const Pe in W)!xe&&Re.includes(Pe)?se.push(new Ke(Pe,W[Pe],`In "${j}": "${Pe}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):re[Pe]?se=se.concat(O.validateSpec({key:Pe,value:W[Pe],valueSpec:re[Pe],validateSpec:O.validateSpec,style:ae,styleSpec:Q})):se.push(new Ke(Pe,W[Pe],`unknown property "${Pe}"`));return se}({sourceName:d,value:l,style:h.style,styleSpec:g,validateSpec:A}),k;case"geojson":if(k=Pi({key:d,value:l,valueSpec:g.source_geojson,style:x,styleSpec:g,validateSpec:A,objectElementValidators:hy}),l.cluster)for(const O in l.clusterProperties){const[$,j]=l.clusterProperties[O],W=typeof $=="string"?[$,["accumulated"],["get",O]]:$;k.push(...hs({key:`${d}.${O}.map`,value:j,validateSpec:A,expressionContext:"cluster-map"})),k.push(...hs({key:`${d}.${O}.reduce`,value:W,validateSpec:A,expressionContext:"cluster-reduce"}))}return k;case"video":return Pi({key:d,value:l,valueSpec:g.source_video,style:x,validateSpec:A,styleSpec:g});case"image":return Pi({key:d,value:l,valueSpec:g.source_image,style:x,validateSpec:A,styleSpec:g});case"canvas":return[new Ke(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return fs({key:`${d}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,validateSpec:A,styleSpec:g})}}function dy(h){const l=h.value,d=h.styleSpec,g=d.light,x=h.style;let A=[];const M=Ir(l);if(l===void 0)return A;if(M!=="object")return A=A.concat([new Ke("light",l,`object expected, ${M} found`)]),A;for(const k in l){const O=k.match(/^(.*)-transition$/);A=A.concat(O&&g[O[1]]&&g[O[1]].transition?h.validateSpec({key:k,value:l[k],valueSpec:d.transition,validateSpec:h.validateSpec,style:x,styleSpec:d}):g[k]?h.validateSpec({key:k,value:l[k],valueSpec:g[k],validateSpec:h.validateSpec,style:x,styleSpec:d}):[new Ke(k,l[k],`unknown property "${k}"`)])}return A}function ac(h){const l=h.value,d=h.styleSpec,g=d.sky,x=h.style,A=Ir(l);if(l===void 0)return[];if(A!=="object")return[new Ke("sky",l,`object expected, ${A} found`)];let M=[];for(const k in l)M=M.concat(g[k]?Ys({key:k,value:l[k],valueSpec:g[k],style:x,styleSpec:d}):[new Ke(k,l[k],`unknown property "${k}"`)]);return M}function oc(h){const l=h.value,d=h.styleSpec,g=d.terrain,x=h.style;let A=[];const M=Ir(l);if(l===void 0)return A;if(M!=="object")return A=A.concat([new Ke("terrain",l,`object expected, ${M} found`)]),A;for(const k in l)A=A.concat(g[k]?h.validateSpec({key:k,value:l[k],valueSpec:g[k],validateSpec:h.validateSpec,style:x,styleSpec:d}):[new Ke(k,l[k],`unknown property "${k}"`)]);return A}function Wi(h){let l=[];const d=h.value,g=h.key;if(Array.isArray(d)){const x=[],A=[];for(const M in d)d[M].id&&x.includes(d[M].id)&&l.push(new Ke(g,d,`all the sprites' ids must be unique, but ${d[M].id} is duplicated`)),x.push(d[M].id),d[M].url&&A.includes(d[M].url)&&l.push(new Ke(g,d,`all the sprites' URLs must be unique, but ${d[M].url} is duplicated`)),A.push(d[M].url),l=l.concat(Pi({key:`${g}[${M}]`,value:d[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return l}return Xs({key:g,value:d})}const Wl={"*":()=>[],array:Sp,boolean:function(h){const l=h.value,d=h.key,g=Ir(l);return g!=="boolean"?[new Ke(d,l,`boolean expected, ${g} found`)]:[]},number:cf,color:function(h){const l=h.key,d=h.value,g=Ir(d);return g!=="string"?[new Ke(l,d,`color expected, ${g} found`)]:jr.parse(String(d))?[]:[new Ke(l,d,`color expected, "${d}" found`)]},constants:ly,enum:fs,filter:Gl,function:uy,layer:cy,object:Pi,source:fy,light:dy,sky:ac,terrain:oc,string:Xs,formatted:function(h){return Xs(h).length===0?[]:hs(h)},resolvedImage:function(h){return Xs(h).length===0?[]:hs(h)},padding:function(h){const l=h.key,d=h.value;if(Ir(d)==="array"){if(d.length<1||d.length>4)return[new Ke(l,d,`padding requires 1 to 4 values; ${d.length} values found`)];const g={type:"number"};let x=[];for(let A=0;A<d.length;A++)x=x.concat(h.validateSpec({key:`${l}[${A}]`,value:d[A],validateSpec:h.validateSpec,valueSpec:g}));return x}return cf({key:l,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const l=h.key,d=h.value,g=Ir(d),x=h.styleSpec;if(g!=="array"||d.length<1||d.length%2!=0)return[new Ke(l,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let A=[];for(let M=0;M<d.length;M+=2)A=A.concat(fs({key:`${l}[${M}]`,value:d[M],valueSpec:x.layout_symbol["text-anchor"]})),A=A.concat(Sp({key:`${l}[${M+1}]`,value:d[M+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:x}));return A},sprite:Wi};function Ys(h){const l=h.value,d=h.valueSpec,g=h.styleSpec;return h.validateSpec=Ys,d.expression&&ef(An(l))?uy(h):d.expression&&en(cs(l))?hs(h):d.type&&Wl[d.type]?Wl[d.type](h):Pi(Zr({},h,{valueSpec:d.type?g[d.type]:d}))}function py(h){const l=h.value,d=h.key,g=Xs(h);return g.length||(l.indexOf("{fontstack}")===-1&&g.push(new Ke(d,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&g.push(new Ke(d,l,'"glyphs" url must include a "{range}" token'))),g}function ja(h,l=ye){let d=[];return d=d.concat(Ys({key:"",value:h,valueSpec:l.$root,styleSpec:l,style:h,validateSpec:Ys,objectElementValidators:{glyphs:py,"*":()=>[]}})),h.constants&&(d=d.concat(ly({key:"constants",value:h.constants,style:h,styleSpec:l,validateSpec:Ys}))),Ap(d)}function qi(h){return function(l){return h({...l,validateSpec:Ys})}}function Ap(h){return[].concat(h).sort((l,d)=>l.line-d.line)}function Ia(h){return function(...l){return Ap(h.apply(this,l))}}ja.source=Ia(qi(fy)),ja.sprite=Ia(qi(Wi)),ja.glyphs=Ia(qi(py)),ja.light=Ia(qi(dy)),ja.sky=Ia(qi(ac)),ja.terrain=Ia(qi(oc)),ja.layer=Ia(qi(cy)),ja.filter=Ia(qi(Gl)),ja.paintProperty=Ia(qi(Cp)),ja.layoutProperty=Ia(qi(ic));const sc=ja,Mp=sc.light,ox=sc.paintProperty,lc=sc.layoutProperty;function my(h,l){let d=!1;if(l&&l.length)for(const g of l)h.fire(new Be(new Error(g.message))),d=!0;return d}class Ks{constructor(l,d,g){const x=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const M=new Int32Array(this.arrayBuffer);l=M[0],this.d=(d=M[1])+2*(g=M[2]);for(let O=0;O<this.d*this.d;O++){const $=M[3+O],j=M[3+O+1];x.push($===j?null:M.subarray($,j))}const k=M[3+x.length+1];this.keys=M.subarray(M[3+x.length],k),this.bboxes=M.subarray(k),this.insert=this._insertReadonly}else{this.d=d+2*g;for(let M=0;M<this.d*this.d;M++)x.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=l,this.padding=g,this.scale=d/l,this.uid=0;const A=g/d*l;this.min=-A,this.max=l+A}insert(l,d,g,x,A){this._forEachCell(d,g,x,A,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(A)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,d,g,x,A,M){this.cells[A].push(M)}query(l,d,g,x,A){const M=this.min,k=this.max;if(l<=M&&d<=M&&k<=g&&k<=x&&!A)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(l,d,g,x,this._queryCell,O,{},A),O}}_queryCell(l,d,g,x,A,M,k,O){const $=this.cells[A];if($!==null){const j=this.keys,W=this.bboxes;for(let Q=0;Q<$.length;Q++){const re=$[Q];if(k[re]===void 0){const ae=4*re;(O?O(W[ae+0],W[ae+1],W[ae+2],W[ae+3]):l<=W[ae+2]&&d<=W[ae+3]&&g>=W[ae+0]&&x>=W[ae+1])?(k[re]=!0,M.push(j[re])):k[re]=!1}}}}_forEachCell(l,d,g,x,A,M,k,O){const $=this._convertToCellCoord(l),j=this._convertToCellCoord(d),W=this._convertToCellCoord(g),Q=this._convertToCellCoord(x);for(let re=$;re<=W;re++)for(let ae=j;ae<=Q;ae++){const se=this.d*ae+re;if((!O||O(this._convertFromCellCoord(re),this._convertFromCellCoord(ae),this._convertFromCellCoord(re+1),this._convertFromCellCoord(ae+1)))&&A.call(this,l,d,g,x,se,M,k,O))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,d=3+this.cells.length+1+1;let g=0;for(let M=0;M<this.cells.length;M++)g+=this.cells[M].length;const x=new Int32Array(d+g+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let A=d;for(let M=0;M<l.length;M++){const k=l[M];x[3+M]=A,x.set(k,A),A+=k.length}return x[3+l.length]=A,x.set(this.keys,A),A+=this.keys.length,x[3+l.length+1]=A,x.set(this.bboxes,A),A+=this.bboxes.length,x.buffer}static serialize(l,d){const g=l.toArrayBuffer();return d&&d.push(g),{buffer:g}}static deserialize(l){return new Ks(l.buffer)}}const Fo={};function Et(h,l,d={}){if(Fo[h])throw new Error(`${h} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:h,writeable:!1}),Fo[h]={klass:l,omit:d.omit||[],shallow:d.shallow||[]}}Et("Object",Object),Et("TransferableGridIndex",Ks),Et("Color",jr),Et("Error",Error),Et("AJAXError",st),Et("ResolvedImage",Pa),Et("StylePropertyFunction",rf),Et("StyleExpression",sn,{omit:["_evaluator"]}),Et("ZoomDependentExpression",bp),Et("ZoomConstantExpression",tf),Et("CompoundExpression",pa,{omit:["_evaluate"]});for(const h in Hl)Hl[h]._classRegistryKey||Et(`Expression_${h}`,Hl[h]);function Ep(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function ql(h,l){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error)return h;if(Ep(h)||Oe(h))return l&&l.push(h),h;if(ArrayBuffer.isView(h)){const d=h;return l&&l.push(d.buffer),d}if(h instanceof ImageData)return l&&l.push(h.data.buffer),h;if(Array.isArray(h)){const d=[];for(const g of h)d.push(ql(g,l));return d}if(typeof h=="object"){const d=h.constructor,g=d._classRegistryKey;if(!g)throw new Error(`can't serialize object of unregistered class ${d.name}`);if(!Fo[g])throw new Error(`${g} is not registered.`);const x=d.serialize?d.serialize(h,l):{};if(d.serialize){if(l&&x===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const A in h){if(!h.hasOwnProperty(A)||Fo[g].omit.indexOf(A)>=0)continue;const M=h[A];x[A]=Fo[g].shallow.indexOf(A)>=0?M:ql(M,l)}h instanceof Error&&(x.message=h.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(x.$name=g),x}throw new Error("can't serialize object of type "+typeof h)}function uc(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Ep(h)||Oe(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(uc);if(typeof h=="object"){const l=h.$name||"Object";if(!Fo[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:d}=Fo[l];if(!d)throw new Error(`can't deserialize unregistered class ${l}`);if(d.deserialize)return d.deserialize(h);const g=Object.create(d.prototype);for(const x of Object.keys(h)){if(x==="$name")continue;const A=h[x];g[x]=Fo[l].shallow.indexOf(x)>=0?A:uc(A)}return g}throw new Error("can't deserialize object of type "+typeof h)}class ff{constructor(){this.first=!0}update(l,d){const g=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=d),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=g,!0))}}const bt={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function df(h){for(const l of h)if(pf(l.charCodeAt(0)))return!0;return!1}function vy(h){for(const l of h)if(!gy(l.charCodeAt(0)))return!1;return!0}function gy(h){return!(bt.Arabic(h)||bt["Arabic Supplement"](h)||bt["Arabic Extended-A"](h)||bt["Arabic Presentation Forms-A"](h)||bt["Arabic Presentation Forms-B"](h))}function pf(h){return!(h!==746&&h!==747&&(h<4352||!(bt["Bopomofo Extended"](h)||bt.Bopomofo(h)||bt["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||bt["CJK Compatibility Ideographs"](h)||bt["CJK Compatibility"](h)||bt["CJK Radicals Supplement"](h)||bt["CJK Strokes"](h)||!(!bt["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||bt["CJK Unified Ideographs Extension A"](h)||bt["CJK Unified Ideographs"](h)||bt["Enclosed CJK Letters and Months"](h)||bt["Hangul Compatibility Jamo"](h)||bt["Hangul Jamo Extended-A"](h)||bt["Hangul Jamo Extended-B"](h)||bt["Hangul Jamo"](h)||bt["Hangul Syllables"](h)||bt.Hiragana(h)||bt["Ideographic Description Characters"](h)||bt.Kanbun(h)||bt["Kangxi Radicals"](h)||bt["Katakana Phonetic Extensions"](h)||bt.Katakana(h)&&h!==12540||!(!bt["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!bt["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||bt["Unified Canadian Aboriginal Syllabics"](h)||bt["Unified Canadian Aboriginal Syllabics Extended"](h)||bt["Vertical Forms"](h)||bt["Yijing Hexagram Symbols"](h)||bt["Yi Syllables"](h)||bt["Yi Radicals"](h))))}function mf(h){return!(pf(h)||function(l){return!!(bt["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||bt["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||bt["Letterlike Symbols"](l)||bt["Number Forms"](l)||bt["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||bt["Control Pictures"](l)&&l!==9251||bt["Optical Character Recognition"](l)||bt["Enclosed Alphanumerics"](l)||bt["Geometric Shapes"](l)||bt["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||bt["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||bt["CJK Symbols and Punctuation"](l)||bt.Katakana(l)||bt["Private Use Area"](l)||bt["CJK Compatibility Forms"](l)||bt["Small Form Variants"](l)||bt["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(h))}function Pp(h){return h>=1424&&h<=2303||bt["Arabic Presentation Forms-A"](h)||bt["Arabic Presentation Forms-B"](h)}function sx(h,l){return!(!l&&Pp(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||bt.Khmer(h))}function yy(h){for(const l of h)if(Pp(l.charCodeAt(0)))return!0;return!1}const Js=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}setMethods(h){this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ln{constructor(l,d){this.zoom=l,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ff,this.transition={})}isSupportedScript(l){return function(d,g){for(const x of d)if(!sx(x.charCodeAt(0),g))return!1;return!0}(l,Js.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,d=l-Math.floor(l),g=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*d}}}class cc{constructor(l,d){this.property=l,this.value=d,this.expression=function(g,x){if(ef(g))return new rf(g,x);if(en(g)){const A=ny(g,x);if(A.result==="error")throw new Error(A.value.map(M=>`${M.key}: ${M.message}`).join(", "));return A.value}{let A=g;return x.type==="color"&&typeof g=="string"?A=jr.parse(g):x.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(A=Ea.parse(g)):A=Gi.parse(g),{kind:"constant",evaluate:()=>A}}}(d===void 0?l.specification.default:d,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,d,g){return this.property.possiblyEvaluate(this,l,d,g)}}class vf{constructor(l){this.property=l,this.value=new cc(l,void 0)}transitioned(l,d){return new by(this.property,this.value,d,N({},l.transition,this.transition),l.now)}untransitioned(){return new by(this.property,this.value,null,{},0)}}class _y{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return J(this._values[l].value.value)}setValue(l,d){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new vf(this._values[l].property)),this._values[l].value=new cc(this._values[l].property,d===null?void 0:J(d))}getTransition(l){return J(this._values[l].transition)}setTransition(l,d){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new vf(this._values[l].property)),this._values[l].transition=J(d)||void 0}serialize(){const l={};for(const d of Object.keys(this._values)){const g=this.getValue(d);g!==void 0&&(l[d]=g);const x=this.getTransition(d);x!==void 0&&(l[`${d}-transition`]=x)}return l}transitioned(l,d){const g=new Ip(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].transitioned(l,d._values[x]);return g}untransitioned(){const l=new Ip(this._properties);for(const d of Object.keys(this._values))l._values[d]=this._values[d].untransitioned();return l}}class by{constructor(l,d,g,x,A){this.property=l,this.value=d,this.begin=A+x.delay||0,this.end=this.begin+x.duration||0,l.specification.transition&&(x.delay||x.duration)&&(this.prior=g)}possiblyEvaluate(l,d,g){const x=l.now||0,A=this.value.possiblyEvaluate(l,d,g),M=this.prior;if(M){if(x>this.end)return this.prior=null,A;if(this.value.isDataDriven())return this.prior=null,A;if(x<this.begin)return M.possiblyEvaluate(l,d,g);{const k=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(l,d,g),A,function(O){if(O<=0)return 0;if(O>=1)return 1;const $=O*O,j=$*O;return 4*(O<.5?j:3*(O-$)+j-.75)}(k))}}return A}}class Ip{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,d,g){const x=new hc(this._properties);for(const A of Object.keys(this._values))x._values[A]=this._values[A].possiblyEvaluate(l,d,g);return x}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class xy{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return J(this._values[l].value)}setValue(l,d){this._values[l]=new cc(this._values[l].property,d===null?void 0:J(d))}serialize(){const l={};for(const d of Object.keys(this._values)){const g=this.getValue(d);g!==void 0&&(l[d]=g)}return l}possiblyEvaluate(l,d,g){const x=new hc(this._properties);for(const A of Object.keys(this._values))x._values[A]=this._values[A].possiblyEvaluate(l,d,g);return x}}class Ga{constructor(l,d,g){this.property=l,this.value=d,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,d,g,x){return this.property.evaluate(this.value,this.parameters,l,d,g,x)}}class hc{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Ot{constructor(l){this.specification=l}possiblyEvaluate(l,d){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(d)}interpolate(l,d,g){const x=Ei[this.specification.type];return x?x(l,d,g):l}}class Yt{constructor(l,d){this.specification=l,this.overrides=d}possiblyEvaluate(l,d,g,x){return new Ga(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(d,null,{},g,x)}:l.expression,d)}interpolate(l,d,g){if(l.value.kind!=="constant"||d.value.kind!=="constant")return l;if(l.value.value===void 0||d.value.value===void 0)return new Ga(this,{kind:"constant",value:void 0},l.parameters);const x=Ei[this.specification.type];if(x){const A=x(l.value.value,d.value.value,g);return new Ga(this,{kind:"constant",value:A},l.parameters)}return l}evaluate(l,d,g,x,A,M){return l.kind==="constant"?l.value:l.evaluate(d,g,x,A,M)}}class Zl extends Yt{possiblyEvaluate(l,d,g,x){if(l.value===void 0)return new Ga(this,{kind:"constant",value:void 0},d);if(l.expression.kind==="constant"){const A=l.expression.evaluate(d,null,{},g,x),M=l.property.specification.type==="resolvedImage"&&typeof A!="string"?A.name:A,k=this._calculate(M,M,M,d);return new Ga(this,{kind:"constant",value:k},d)}if(l.expression.kind==="camera"){const A=this._calculate(l.expression.evaluate({zoom:d.zoom-1}),l.expression.evaluate({zoom:d.zoom}),l.expression.evaluate({zoom:d.zoom+1}),d);return new Ga(this,{kind:"constant",value:A},d)}return new Ga(this,l.expression,d)}evaluate(l,d,g,x,A,M){if(l.kind==="source"){const k=l.evaluate(d,g,x,A,M);return this._calculate(k,k,k,d)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(d.zoom)-1},g,x),l.evaluate({zoom:Math.floor(d.zoom)},g,x),l.evaluate({zoom:Math.floor(d.zoom)+1},g,x),d):l.value}_calculate(l,d,g,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:d}:{from:g,to:d}}interpolate(l){return l}}class Dp{constructor(l){this.specification=l}possiblyEvaluate(l,d,g,x){if(l.value!==void 0){if(l.expression.kind==="constant"){const A=l.expression.evaluate(d,null,{},g,x);return this._calculate(A,A,A,d)}return this._calculate(l.expression.evaluate(new ln(Math.floor(d.zoom-1),d)),l.expression.evaluate(new ln(Math.floor(d.zoom),d)),l.expression.evaluate(new ln(Math.floor(d.zoom+1),d)),d)}}_calculate(l,d,g,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:d}:{from:g,to:d}}interpolate(l){return l}}class Lp{constructor(l){this.specification=l}possiblyEvaluate(l,d,g,x){return!!l.expression.evaluate(d,null,{},g,x)}interpolate(){return!1}}class Ii{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in l){const g=l[d];g.specification.overridable&&this.overridableProperties.push(d);const x=this.defaultPropertyValues[d]=new cc(g,void 0),A=this.defaultTransitionablePropertyValues[d]=new vf(g);this.defaultTransitioningPropertyValues[d]=A.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=x.possiblyEvaluate({})}}}Et("DataDrivenProperty",Yt),Et("DataConstantProperty",Ot),Et("CrossFadedDataDrivenProperty",Zl),Et("CrossFadedProperty",Dp),Et("ColorRampProperty",Lp);const kp="-transition";class Wa extends Xe{constructor(l,d){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),d.layout&&(this._unevaluatedLayout=new xy(d.layout)),d.paint)){this._transitionablePaint=new _y(d.paint);for(const g in l.paint)this.setPaintProperty(g,l.paint[g],{validate:!1});for(const g in l.layout)this.setLayoutProperty(g,l.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hc(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,d,g={}){d!=null&&this._validate(lc,`layers.${this.id}.layout.${l}`,l,d,g)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,d):this.visibility=d)}getPaintProperty(l){return l.endsWith(kp)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,d,g={}){if(d!=null&&this._validate(ox,`layers.${this.id}.paint.${l}`,l,d,g))return!1;if(l.endsWith(kp))return this._transitionablePaint.setTransition(l.slice(0,-11),d||void 0),!1;{const x=this._transitionablePaint._values[l],A=x.property.specification["property-type"]==="cross-faded-data-driven",M=x.value.isDataDriven(),k=x.value;this._transitionablePaint.setValue(l,d),this._handleSpecialPaintPropertyUpdate(l);const O=this._transitionablePaint._values[l].value;return O.isDataDriven()||M||A||this._handleOverridablePaintPropertyUpdate(l,k,O)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,d,g){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,d){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,d)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ee(l,(d,g)=>!(d===void 0||g==="layout"&&!Object.keys(d).length||g==="paint"&&!Object.keys(d).length))}_validate(l,d,g,x,A={}){return(!A||A.validate!==!1)&&my(this,l.call(sc,{key:d,layerType:this.type,objectKey:g,value:x,styleSpec:ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const d=this.paint.get(l);if(d instanceof Ga&&jl(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const lx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class fc{constructor(l,d){this._structArray=l,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,d){return l._trim(),d&&(l.isTransferred=!0,d.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const d=Object.create(this.prototype);return d.arrayBuffer=l.arrayBuffer,d.length=l.length,d.capacity=l.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Bn(h,l=1){let d=0,g=0;return{members:h.map(x=>{const A=lx[x.type].BYTES_PER_ELEMENT,M=d=wy(d,Math.max(l,A)),k=x.components||1;return g=Math.max(g,A),d+=A*k,{name:x.name,type:x.type,components:k,offset:M}}),size:wy(d,Math.max(g,l)),alignment:l}}function wy(h,l){return Math.ceil(h/l)*l}class uo extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,d){const g=this.length;return this.resize(g+1),this.emplace(g,l,d)}emplace(l,d,g){const x=2*l;return this.int16[x+0]=d,this.int16[x+1]=g,l}}uo.prototype.bytesPerElement=4,Et("StructArrayLayout2i4",uo);class gf extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,l,d,g)}emplace(l,d,g,x){const A=3*l;return this.int16[A+0]=d,this.int16[A+1]=g,this.int16[A+2]=x,l}}gf.prototype.bytesPerElement=6,Et("StructArrayLayout3i6",gf);class Rp extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,d,g,x){const A=this.length;return this.resize(A+1),this.emplace(A,l,d,g,x)}emplace(l,d,g,x,A){const M=4*l;return this.int16[M+0]=d,this.int16[M+1]=g,this.int16[M+2]=x,this.int16[M+3]=A,l}}Rp.prototype.bytesPerElement=8,Et("StructArrayLayout4i8",Rp);class Op extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M){const k=this.length;return this.resize(k+1),this.emplace(k,l,d,g,x,A,M)}emplace(l,d,g,x,A,M,k){const O=6*l;return this.int16[O+0]=d,this.int16[O+1]=g,this.int16[O+2]=x,this.int16[O+3]=A,this.int16[O+4]=M,this.int16[O+5]=k,l}}Op.prototype.bytesPerElement=12,Et("StructArrayLayout2i4i12",Op);class zp extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M){const k=this.length;return this.resize(k+1),this.emplace(k,l,d,g,x,A,M)}emplace(l,d,g,x,A,M,k){const O=4*l,$=8*l;return this.int16[O+0]=d,this.int16[O+1]=g,this.uint8[$+4]=x,this.uint8[$+5]=A,this.uint8[$+6]=M,this.uint8[$+7]=k,l}}zp.prototype.bytesPerElement=8,Et("StructArrayLayout2i4ub8",zp);class Xl extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,d){const g=this.length;return this.resize(g+1),this.emplace(g,l,d)}emplace(l,d,g){const x=2*l;return this.float32[x+0]=d,this.float32[x+1]=g,l}}Xl.prototype.bytesPerElement=8,Et("StructArrayLayout2f8",Xl);class Bp extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M,k,O,$,j){const W=this.length;return this.resize(W+1),this.emplace(W,l,d,g,x,A,M,k,O,$,j)}emplace(l,d,g,x,A,M,k,O,$,j,W){const Q=10*l;return this.uint16[Q+0]=d,this.uint16[Q+1]=g,this.uint16[Q+2]=x,this.uint16[Q+3]=A,this.uint16[Q+4]=M,this.uint16[Q+5]=k,this.uint16[Q+6]=O,this.uint16[Q+7]=$,this.uint16[Q+8]=j,this.uint16[Q+9]=W,l}}Bp.prototype.bytesPerElement=20,Et("StructArrayLayout10ui20",Bp);class Fp extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M,k,O,$,j,W,Q){const re=this.length;return this.resize(re+1),this.emplace(re,l,d,g,x,A,M,k,O,$,j,W,Q)}emplace(l,d,g,x,A,M,k,O,$,j,W,Q,re){const ae=12*l;return this.int16[ae+0]=d,this.int16[ae+1]=g,this.int16[ae+2]=x,this.int16[ae+3]=A,this.uint16[ae+4]=M,this.uint16[ae+5]=k,this.uint16[ae+6]=O,this.uint16[ae+7]=$,this.int16[ae+8]=j,this.int16[ae+9]=W,this.int16[ae+10]=Q,this.int16[ae+11]=re,l}}Fp.prototype.bytesPerElement=24,Et("StructArrayLayout4i4ui4i24",Fp);class $o extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,l,d,g)}emplace(l,d,g,x){const A=3*l;return this.float32[A+0]=d,this.float32[A+1]=g,this.float32[A+2]=x,l}}$o.prototype.bytesPerElement=12,Et("StructArrayLayout3f12",$o);class yf extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const d=this.length;return this.resize(d+1),this.emplace(d,l)}emplace(l,d){return this.uint32[1*l+0]=d,l}}yf.prototype.bytesPerElement=4,Et("StructArrayLayout1ul4",yf);class dc extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M,k,O,$){const j=this.length;return this.resize(j+1),this.emplace(j,l,d,g,x,A,M,k,O,$)}emplace(l,d,g,x,A,M,k,O,$,j){const W=10*l,Q=5*l;return this.int16[W+0]=d,this.int16[W+1]=g,this.int16[W+2]=x,this.int16[W+3]=A,this.int16[W+4]=M,this.int16[W+5]=k,this.uint32[Q+3]=O,this.uint16[W+8]=$,this.uint16[W+9]=j,l}}dc.prototype.bytesPerElement=20,Et("StructArrayLayout6i1ul2ui20",dc);class _f extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M){const k=this.length;return this.resize(k+1),this.emplace(k,l,d,g,x,A,M)}emplace(l,d,g,x,A,M,k){const O=6*l;return this.int16[O+0]=d,this.int16[O+1]=g,this.int16[O+2]=x,this.int16[O+3]=A,this.int16[O+4]=M,this.int16[O+5]=k,l}}_f.prototype.bytesPerElement=12,Et("StructArrayLayout2i2i2i12",_f);class pc extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A){const M=this.length;return this.resize(M+1),this.emplace(M,l,d,g,x,A)}emplace(l,d,g,x,A,M){const k=4*l,O=8*l;return this.float32[k+0]=d,this.float32[k+1]=g,this.float32[k+2]=x,this.int16[O+6]=A,this.int16[O+7]=M,l}}pc.prototype.bytesPerElement=16,Et("StructArrayLayout2f1f2i16",pc);class $p extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,d,g,x){const A=this.length;return this.resize(A+1),this.emplace(A,l,d,g,x)}emplace(l,d,g,x,A){const M=12*l,k=3*l;return this.uint8[M+0]=d,this.uint8[M+1]=g,this.float32[k+1]=x,this.float32[k+2]=A,l}}$p.prototype.bytesPerElement=12,Et("StructArrayLayout2ub2f12",$p);class Qs extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,l,d,g)}emplace(l,d,g,x){const A=3*l;return this.uint16[A+0]=d,this.uint16[A+1]=g,this.uint16[A+2]=x,l}}Qs.prototype.bytesPerElement=6,Et("StructArrayLayout3ui6",Qs);class el extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M,k,O,$,j,W,Q,re,ae,se,pe,xe){const Re=this.length;return this.resize(Re+1),this.emplace(Re,l,d,g,x,A,M,k,O,$,j,W,Q,re,ae,se,pe,xe)}emplace(l,d,g,x,A,M,k,O,$,j,W,Q,re,ae,se,pe,xe,Re){const Se=24*l,Pe=12*l,je=48*l;return this.int16[Se+0]=d,this.int16[Se+1]=g,this.uint16[Se+2]=x,this.uint16[Se+3]=A,this.uint32[Pe+2]=M,this.uint32[Pe+3]=k,this.uint32[Pe+4]=O,this.uint16[Se+10]=$,this.uint16[Se+11]=j,this.uint16[Se+12]=W,this.float32[Pe+7]=Q,this.float32[Pe+8]=re,this.uint8[je+36]=ae,this.uint8[je+37]=se,this.uint8[je+38]=pe,this.uint32[Pe+10]=xe,this.int16[Se+22]=Re,l}}el.prototype.bytesPerElement=48,Et("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",el);class Np extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,d,g,x,A,M,k,O,$,j,W,Q,re,ae,se,pe,xe,Re,Se,Pe,je,Ye,Tt,Rt,wt,gt,ft,Dt){const pt=this.length;return this.resize(pt+1),this.emplace(pt,l,d,g,x,A,M,k,O,$,j,W,Q,re,ae,se,pe,xe,Re,Se,Pe,je,Ye,Tt,Rt,wt,gt,ft,Dt)}emplace(l,d,g,x,A,M,k,O,$,j,W,Q,re,ae,se,pe,xe,Re,Se,Pe,je,Ye,Tt,Rt,wt,gt,ft,Dt,pt){const it=32*l,Ht=16*l;return this.int16[it+0]=d,this.int16[it+1]=g,this.int16[it+2]=x,this.int16[it+3]=A,this.int16[it+4]=M,this.int16[it+5]=k,this.int16[it+6]=O,this.int16[it+7]=$,this.uint16[it+8]=j,this.uint16[it+9]=W,this.uint16[it+10]=Q,this.uint16[it+11]=re,this.uint16[it+12]=ae,this.uint16[it+13]=se,this.uint16[it+14]=pe,this.uint16[it+15]=xe,this.uint16[it+16]=Re,this.uint16[it+17]=Se,this.uint16[it+18]=Pe,this.uint16[it+19]=je,this.uint16[it+20]=Ye,this.uint16[it+21]=Tt,this.uint16[it+22]=Rt,this.uint32[Ht+12]=wt,this.float32[Ht+13]=gt,this.float32[Ht+14]=ft,this.uint16[it+30]=Dt,this.uint16[it+31]=pt,l}}Np.prototype.bytesPerElement=64,Et("StructArrayLayout8i15ui1ul2f2ui64",Np);class mc extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const d=this.length;return this.resize(d+1),this.emplace(d,l)}emplace(l,d){return this.float32[1*l+0]=d,l}}mc.prototype.bytesPerElement=4,Et("StructArrayLayout1f4",mc);class tl extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,l,d,g)}emplace(l,d,g,x){const A=3*l;return this.uint16[6*l+0]=d,this.float32[A+1]=g,this.float32[A+2]=x,l}}tl.prototype.bytesPerElement=12,Et("StructArrayLayout1ui2f12",tl);class Vp extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,l,d,g)}emplace(l,d,g,x){const A=4*l;return this.uint32[2*l+0]=d,this.uint16[A+2]=g,this.uint16[A+3]=x,l}}Vp.prototype.bytesPerElement=8,Et("StructArrayLayout1ul2ui8",Vp);class Hp extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,d){const g=this.length;return this.resize(g+1),this.emplace(g,l,d)}emplace(l,d,g){const x=2*l;return this.uint16[x+0]=d,this.uint16[x+1]=g,l}}Hp.prototype.bytesPerElement=4,Et("StructArrayLayout2ui4",Hp);class bf extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const d=this.length;return this.resize(d+1),this.emplace(d,l)}emplace(l,d){return this.uint16[1*l+0]=d,l}}bf.prototype.bytesPerElement=2,Et("StructArrayLayout1ui2",bf);class Up extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,d,g,x){const A=this.length;return this.resize(A+1),this.emplace(A,l,d,g,x)}emplace(l,d,g,x,A){const M=4*l;return this.float32[M+0]=d,this.float32[M+1]=g,this.float32[M+2]=x,this.float32[M+3]=A,l}}Up.prototype.bytesPerElement=16,Et("StructArrayLayout4f16",Up);class T extends fc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new v(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class u extends dc{get(l){return new T(this,l)}}Et("CollisionBoxArray",u);class m extends fc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}m.prototype.size=48;class b extends el{get(l){return new m(this,l)}}Et("PlacedSymbolArray",b);class w extends fc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}w.prototype.size=64;class C extends Np{get(l){return new w(this,l)}}Et("SymbolInstanceArray",C);class R extends mc{getoffsetX(l){return this.float32[1*l+0]}}Et("GlyphOffsetArray",R);class z extends gf{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Et("SymbolLineVertexArray",z);class F extends fc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}F.prototype.size=12;class H extends tl{get(l){return new F(this,l)}}Et("TextAnchorOffsetArray",H);class q extends fc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}q.prototype.size=8;class Z extends Vp{get(l){return new q(this,l)}}Et("FeatureIndexArray",Z);class ie extends uo{}class ce extends uo{}class he extends uo{}class ge extends Op{}class le extends zp{}class Ae extends Xl{}class Fe extends Bp{}class _e extends Fp{}class Ie extends $o{}class He extends yf{}class Ne extends _f{}class qe extends $p{}class et extends Qs{}class Qe extends Hp{}const ot=Bn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pt}=ot;class Zt{constructor(l=[]){this.segments=l}prepareSegment(l,d,g,x){let A=this.segments[this.segments.length-1];return l>Zt.MAX_VERTEX_ARRAY_LENGTH&&ne(`Max vertices per segment is ${Zt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!A||A.vertexLength+l>Zt.MAX_VERTEX_ARRAY_LENGTH||A.sortKey!==x)&&(A={vertexOffset:d.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},x!==void 0&&(A.sortKey=x),this.segments.push(A)),A}get(){return this.segments}destroy(){for(const l of this.segments)for(const d in l.vaos)l.vaos[d].destroy()}static simpleSegment(l,d,g,x){return new Zt([{vertexOffset:l,primitiveOffset:d,vertexLength:g,primitiveLength:x,vaos:{},sortKey:0}])}}function mt(h,l){return 256*(h=U(Math.floor(h),0,255))+U(Math.floor(l),0,255)}Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Et("SegmentVector",Zt);const Gt=Bn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var kt={exports:{}},un={exports:{}};un.exports=function(h,l){var d,g,x,A,M,k,O,$;for(g=h.length-(d=3&h.length),x=l,M=3432918353,k=461845907,$=0;$<g;)O=255&h.charCodeAt($)|(255&h.charCodeAt(++$))<<8|(255&h.charCodeAt(++$))<<16|(255&h.charCodeAt(++$))<<24,++$,x=27492+(65535&(A=5*(65535&(x=(x^=O=(65535&(O=(O=(65535&O)*M+(((O>>>16)*M&65535)<<16)&4294967295)<<15|O>>>17))*k+(((O>>>16)*k&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(O=0,d){case 3:O^=(255&h.charCodeAt($+2))<<16;case 2:O^=(255&h.charCodeAt($+1))<<8;case 1:x^=O=(65535&(O=(O=(65535&(O^=255&h.charCodeAt($)))*M+(((O>>>16)*M&65535)<<16)&4294967295)<<15|O>>>17))*k+(((O>>>16)*k&65535)<<16)&4294967295}return x^=h.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0};var yr=un.exports,hr={exports:{}};hr.exports=function(h,l){for(var d,g=h.length,x=l^g,A=0;g>=4;)d=1540483477*(65535&(d=255&h.charCodeAt(A)|(255&h.charCodeAt(++A))<<8|(255&h.charCodeAt(++A))<<16|(255&h.charCodeAt(++A))<<24))+((1540483477*(d>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),g-=4,++A;switch(g){case 3:x^=(255&h.charCodeAt(A+2))<<16;case 2:x^=(255&h.charCodeAt(A+1))<<8;case 1:x=1540483477*(65535&(x^=255&h.charCodeAt(A)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0};var _r=yr,Fn=hr.exports;kt.exports=_r,kt.exports.murmur3=_r,kt.exports.murmur2=Fn;var Yr=c(kt.exports);class Di{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,d,g,x){this.ids.push(li(l)),this.positions.push(d,g,x)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=li(l);let g=0,x=this.ids.length-1;for(;g<x;){const M=g+x>>1;this.ids[M]>=d?x=M:g=M+1}const A=[];for(;this.ids[g]===d;)A.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return A}static serialize(l,d){const g=new Float64Array(l.ids),x=new Uint32Array(l.positions);return En(g,x,0,g.length-1),d&&d.push(g.buffer,x.buffer),{ids:g,positions:x}}static deserialize(l){const d=new Di;return d.ids=l.ids,d.positions=l.positions,d.indexed=!0,d}}function li(h){const l=+h;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Yr(String(h))}function En(h,l,d,g){for(;d<g;){const x=h[d+g>>1];let A=d-1,M=g+1;for(;;){do A++;while(h[A]<x);do M--;while(h[M]>x);if(A>=M)break;bi(h,A,M),bi(l,3*A,3*M),bi(l,3*A+1,3*M+1),bi(l,3*A+2,3*M+2)}M-d<g-M?(En(h,l,d,M),d=M+1):(En(h,l,M+1,g),g=M)}}function bi(h,l,d){const g=h[l];h[l]=h[d],h[d]=g}Et("FeaturePositionMap",Di);class xi{constructor(l,d){this.gl=l.gl,this.location=d}}class Da extends xi{constructor(l,d){super(l,d),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class ds extends xi{constructor(l,d){super(l,d),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Yl extends xi{constructor(l,d){super(l,d),this.current=jr.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Kl=new Float32Array(16);function ps(h){return[mt(255*h.r,255*h.g),mt(255*h.b,255*h.a)]}class Xn{constructor(l,d,g){this.value=l,this.uniformNames=d.map(x=>`u_${x}`),this.type=g}setUniform(l,d,g){l.set(g.constantOr(this.value))}getBinding(l,d,g){return this.type==="color"?new Yl(l,d):new Da(l,d)}}class $n{constructor(l,d){this.uniformNames=d.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=l.tlbr}setUniform(l,d,g,x){const A=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;A&&l.set(A)}getBinding(l,d,g){return g.substr(0,9)==="u_pattern"?new ds(l,d):new Da(l,d)}}class Pn{constructor(l,d,g,x){this.expression=l,this.type=g,this.maxValue=0,this.paintVertexAttributes=d.map(A=>({name:`a_${A}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new x}populatePaintArray(l,d,g,x,A){const M=this.paintVertexArray.length,k=this.expression.evaluate(new ln(0),d,{},x,[],A);this.paintVertexArray.resize(l),this._setPaintValue(M,l,k)}updatePaintArray(l,d,g,x){const A=this.expression.evaluate({zoom:0},g,x);this._setPaintValue(l,d,A)}_setPaintValue(l,d,g){if(this.type==="color"){const x=ps(g);for(let A=l;A<d;A++)this.paintVertexArray.emplace(A,x[0],x[1])}else{for(let x=l;x<d;x++)this.paintVertexArray.emplace(x,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Li{constructor(l,d,g,x,A,M){this.expression=l,this.uniformNames=d.map(k=>`u_${k}_t`),this.type=g,this.useIntegerZoom=x,this.zoom=A,this.maxValue=0,this.paintVertexAttributes=d.map(k=>({name:`a_${k}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(l,d,g,x,A){const M=this.expression.evaluate(new ln(this.zoom),d,{},x,[],A),k=this.expression.evaluate(new ln(this.zoom+1),d,{},x,[],A),O=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(O,l,M,k)}updatePaintArray(l,d,g,x){const A=this.expression.evaluate({zoom:this.zoom},g,x),M=this.expression.evaluate({zoom:this.zoom+1},g,x);this._setPaintValue(l,d,A,M)}_setPaintValue(l,d,g,x){if(this.type==="color"){const A=ps(g),M=ps(x);for(let k=l;k<d;k++)this.paintVertexArray.emplace(k,A[0],A[1],M[0],M[1])}else{for(let A=l;A<d;A++)this.paintVertexArray.emplace(A,g,x);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,d){const g=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,x=U(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);l.set(x)}getBinding(l,d,g){return new Da(l,d)}}class cn{constructor(l,d,g,x,A,M){this.expression=l,this.type=d,this.useIntegerZoom=g,this.zoom=x,this.layerId=M,this.zoomInPaintVertexArray=new A,this.zoomOutPaintVertexArray=new A}populatePaintArray(l,d,g){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(x,l,d.patterns&&d.patterns[this.layerId],g)}updatePaintArray(l,d,g,x,A){this._setPaintValues(l,d,g.patterns&&g.patterns[this.layerId],A)}_setPaintValues(l,d,g,x){if(!x||!g)return;const{min:A,mid:M,max:k}=g,O=x[A],$=x[M],j=x[k];if(O&&$&&j)for(let W=l;W<d;W++)this.zoomInPaintVertexArray.emplace(W,$.tl[0],$.tl[1],$.br[0],$.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],$.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(W,$.tl[0],$.tl[1],$.br[0],$.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],$.pixelRatio,j.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Gt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Gt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Yn{constructor(l,d,g){this.binders={},this._buffers=[];const x=[];for(const A in l.paint._values){if(!g(A))continue;const M=l.paint.get(A);if(!(M instanceof Ga&&jl(M.property.specification)))continue;const k=Kn(A,l.type),O=M.value,$=M.property.specification.type,j=M.property.useIntegerZoom,W=M.property.specification["property-type"],Q=W==="cross-faded"||W==="cross-faded-data-driven";if(O.kind==="constant")this.binders[A]=Q?new $n(O.value,k):new Xn(O.value,k,$),x.push(`/u_${A}`);else if(O.kind==="source"||Q){const re=Sy(A,$,"source");this.binders[A]=Q?new cn(O,$,j,d,re,l.id):new Pn(O,k,$,re),x.push(`/a_${A}`)}else{const re=Sy(A,$,"composite");this.binders[A]=new Li(O,k,$,j,d,re),x.push(`/z_${A}`)}}this.cacheKey=x.sort().join("")}getMaxValue(l){const d=this.binders[l];return d instanceof Pn||d instanceof Li?d.maxValue:0}populatePaintArrays(l,d,g,x,A){for(const M in this.binders){const k=this.binders[M];(k instanceof Pn||k instanceof Li||k instanceof cn)&&k.populatePaintArray(l,d,g,x,A)}}setConstantPatternPositions(l,d){for(const g in this.binders){const x=this.binders[g];x instanceof $n&&x.setConstantPatternPositions(l,d)}}updatePaintArrays(l,d,g,x,A){let M=!1;for(const k in l){const O=d.getPositions(k);for(const $ of O){const j=g.feature($.index);for(const W in this.binders){const Q=this.binders[W];if((Q instanceof Pn||Q instanceof Li||Q instanceof cn)&&Q.expression.isStateDependent===!0){const re=x.paint.get(W);Q.expression=re.value,Q.updatePaintArray($.start,$.end,j,l[k],A),M=!0}}}}return M}defines(){const l=[];for(const d in this.binders){const g=this.binders[d];(g instanceof Xn||g instanceof $n)&&l.push(...g.uniformNames.map(x=>`#define HAS_UNIFORM_${x}`))}return l}getBinderAttributes(){const l=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof Pn||g instanceof Li)for(let x=0;x<g.paintVertexAttributes.length;x++)l.push(g.paintVertexAttributes[x].name);else if(g instanceof cn)for(let x=0;x<Gt.members.length;x++)l.push(Gt.members[x].name)}return l}getBinderUniforms(){const l=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof Xn||g instanceof $n||g instanceof Li)for(const x of g.uniformNames)l.push(x)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,d){const g=[];for(const x in this.binders){const A=this.binders[x];if(A instanceof Xn||A instanceof $n||A instanceof Li){for(const M of A.uniformNames)if(d[M]){const k=A.getBinding(l,d[M],M);g.push({name:M,property:x,binding:k})}}}return g}setUniforms(l,d,g,x){for(const{name:A,property:M,binding:k}of d)this.binders[M].setUniform(k,x,g.get(M),A)}updatePaintBuffers(l){this._buffers=[];for(const d in this.binders){const g=this.binders[d];if(l&&g instanceof cn){const x=l.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(g instanceof Pn||g instanceof Li)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(l){for(const d in this.binders){const g=this.binders[d];(g instanceof Pn||g instanceof Li||g instanceof cn)&&g.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const d=this.binders[l];(d instanceof Pn||d instanceof Li||d instanceof cn)&&d.destroy()}}}class ui{constructor(l,d,g=()=>!0){this.programConfigurations={};for(const x of l)this.programConfigurations[x.id]=new Yn(x,d,g);this.needsUpload=!1,this._featureMap=new Di,this._bufferOffset=0}populatePaintArrays(l,d,g,x,A,M){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(l,d,x,A,M);d.id!==void 0&&this._featureMap.add(d.id,g,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,d,g,x){for(const A of g)this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(l,this._featureMap,d,A,x)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function Kn(h,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${l}-`,"").replace(/-/g,"_")]}function Sy(h,l,d){const g={color:{source:Xl,composite:Up},number:{source:mc,composite:Xl}},x=function(A){return{"line-pattern":{source:Fe,composite:Fe},"fill-pattern":{source:Fe,composite:Fe},"fill-extrusion-pattern":{source:Fe,composite:Fe}}[A]}(h);return x&&x[d]||g[l][d]}Et("ConstantBinder",Xn),Et("CrossFadedConstantBinder",$n),Et("SourceExpressionBinder",Pn),Et("CrossFadedCompositeBinder",cn),Et("CompositeExpressionBinder",Li),Et("ProgramConfiguration",Yn,{omit:["_buffers"]}),Et("ProgramConfigurationSet",ui);const kn=8192,jp=Math.pow(2,14)-1,Ty=-jp-1;function rl(h){const l=kn/h.extent,d=h.loadGeometry();for(let g=0;g<d.length;g++){const x=d[g];for(let A=0;A<x.length;A++){const M=x[A],k=Math.round(M.x*l),O=Math.round(M.y*l);M.x=U(k,Ty,jp),M.y=U(O,Ty,jp),(k<M.x||k>M.x+1||O<M.y||O>M.y+1)&&ne("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function nl(h,l){return{type:h.type,id:h.id,properties:h.properties,geometry:l?rl(h):[]}}function No(h,l,d,g,x){h.emplaceBack(2*l+(g+1)/2,2*d+(x+1)/2)}class xf{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(d=>d.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new ce,this.indexArray=new et,this.segments=new Zt,this.programConfigurations=new ui(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(l,d,g){const x=this.layers[0],A=[];let M=null,k=!1;x.type==="circle"&&(M=x.layout.get("circle-sort-key"),k=!M.isConstant());for(const{feature:O,id:$,index:j,sourceLayerIndex:W}of l){const Q=this.layers[0]._featureFilter.needGeometry,re=nl(O,Q);if(!this.layers[0]._featureFilter.filter(new ln(this.zoom),re,g))continue;const ae=k?M.evaluate(re,{},g):void 0,se={id:$,properties:O.properties,type:O.type,sourceLayerIndex:W,index:j,geometry:Q?re.geometry:rl(O),patterns:{},sortKey:ae};A.push(se)}k&&A.sort((O,$)=>O.sortKey-$.sortKey);for(const O of A){const{geometry:$,index:j,sourceLayerIndex:W}=O,Q=l[j].feature;this.addFeature(O,$,j,g),d.featureIndex.insert(Q,$,j,W,this.index)}}update(l,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,d,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Pt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,d,g,x){for(const A of d)for(const M of A){const k=M.x,O=M.y;if(k<0||k>=kn||O<0||O>=kn)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),j=$.vertexLength;No(this.layoutVertexArray,k,O,-1,-1),No(this.layoutVertexArray,k,O,1,-1),No(this.layoutVertexArray,k,O,1,1),No(this.layoutVertexArray,k,O,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+3,j+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{},x)}}function Gp(h,l){for(let d=0;d<h.length;d++)if(Sf(l,h[d]))return!0;for(let d=0;d<l.length;d++)if(Sf(h,l[d]))return!0;return!!vc(h,l)}function Cy(h,l,d){return!!Sf(h,l)||!!ux(l,h,d)}function wf(h,l){if(h.length===1)return dE(l,h[0]);for(let d=0;d<l.length;d++){const g=l[d];for(let x=0;x<g.length;x++)if(Sf(h,g[x]))return!0}for(let d=0;d<h.length;d++)if(dE(l,h[d]))return!0;for(let d=0;d<l.length;d++)if(vc(h,l[d]))return!0;return!1}function Ay(h,l,d){if(h.length>1){if(vc(h,l))return!0;for(let g=0;g<l.length;g++)if(ux(l[g],h,d))return!0}for(let g=0;g<h.length;g++)if(ux(h[g],l,d))return!0;return!1}function vc(h,l){if(h.length===0||l.length===0)return!1;for(let d=0;d<h.length-1;d++){const g=h[d],x=h[d+1];for(let A=0;A<l.length-1;A++)if(c9(g,x,l[A],l[A+1]))return!0}return!1}function c9(h,l,d,g){return we(h,d,g)!==we(l,d,g)&&we(h,l,d)!==we(h,l,g)}function ux(h,l,d){const g=d*d;if(l.length===1)return h.distSqr(l[0])<g;for(let x=1;x<l.length;x++)if(fE(h,l[x-1],l[x])<g)return!0;return!1}function fE(h,l,d){const g=l.distSqr(d);if(g===0)return h.distSqr(l);const x=((h.x-l.x)*(d.x-l.x)+(h.y-l.y)*(d.y-l.y))/g;return h.distSqr(x<0?l:x>1?d:d.sub(l)._mult(x)._add(l))}function dE(h,l){let d,g,x,A=!1;for(let M=0;M<h.length;M++){d=h[M];for(let k=0,O=d.length-1;k<d.length;O=k++)g=d[k],x=d[O],g.y>l.y!=x.y>l.y&&l.x<(x.x-g.x)*(l.y-g.y)/(x.y-g.y)+g.x&&(A=!A)}return A}function Sf(h,l){let d=!1;for(let g=0,x=h.length-1;g<h.length;x=g++){const A=h[g],M=h[x];A.y>l.y!=M.y>l.y&&l.x<(M.x-A.x)*(l.y-A.y)/(M.y-A.y)+A.x&&(d=!d)}return d}function h9(h,l,d){const g=d[0],x=d[2];if(h.x<g.x&&l.x<g.x||h.x>x.x&&l.x>x.x||h.y<g.y&&l.y<g.y||h.y>x.y&&l.y>x.y)return!1;const A=we(h,l,d[0]);return A!==we(h,l,d[1])||A!==we(h,l,d[2])||A!==we(h,l,d[3])}function Wp(h,l,d){const g=l.paint.get(h).value;return g.kind==="constant"?g.value:d.programConfigurations.get(l.id).getMaxValue(h)}function My(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Ey(h,l,d,g,x){if(!l[0]&&!l[1])return h;const A=v.convert(l)._mult(x);d==="viewport"&&A._rotate(-g);const M=[];for(let k=0;k<h.length;k++)M.push(h[k].sub(A));return M}let pE,mE;Et("CircleBucket",xf,{omit:["layers"]});var f9={get paint(){return mE=mE||new Ii({"circle-radius":new Yt(ye.paint_circle["circle-radius"]),"circle-color":new Yt(ye.paint_circle["circle-color"]),"circle-blur":new Yt(ye.paint_circle["circle-blur"]),"circle-opacity":new Yt(ye.paint_circle["circle-opacity"]),"circle-translate":new Ot(ye.paint_circle["circle-translate"]),"circle-translate-anchor":new Ot(ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ot(ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ot(ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yt(ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yt(ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yt(ye.paint_circle["circle-stroke-opacity"])})},get layout(){return pE=pE||new Ii({"circle-sort-key":new Yt(ye.layout_circle["circle-sort-key"])})}},Zi=1e-6,Tf=typeof Float32Array<"u"?Float32Array:Array;function cx(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function vE(h,l,d){var g=l[0],x=l[1],A=l[2],M=l[3],k=l[4],O=l[5],$=l[6],j=l[7],W=l[8],Q=l[9],re=l[10],ae=l[11],se=l[12],pe=l[13],xe=l[14],Re=l[15],Se=d[0],Pe=d[1],je=d[2],Ye=d[3];return h[0]=Se*g+Pe*k+je*W+Ye*se,h[1]=Se*x+Pe*O+je*Q+Ye*pe,h[2]=Se*A+Pe*$+je*re+Ye*xe,h[3]=Se*M+Pe*j+je*ae+Ye*Re,h[4]=(Se=d[4])*g+(Pe=d[5])*k+(je=d[6])*W+(Ye=d[7])*se,h[5]=Se*x+Pe*O+je*Q+Ye*pe,h[6]=Se*A+Pe*$+je*re+Ye*xe,h[7]=Se*M+Pe*j+je*ae+Ye*Re,h[8]=(Se=d[8])*g+(Pe=d[9])*k+(je=d[10])*W+(Ye=d[11])*se,h[9]=Se*x+Pe*O+je*Q+Ye*pe,h[10]=Se*A+Pe*$+je*re+Ye*xe,h[11]=Se*M+Pe*j+je*ae+Ye*Re,h[12]=(Se=d[12])*g+(Pe=d[13])*k+(je=d[14])*W+(Ye=d[15])*se,h[13]=Se*x+Pe*O+je*Q+Ye*pe,h[14]=Se*A+Pe*$+je*re+Ye*xe,h[15]=Se*M+Pe*j+je*ae+Ye*Re,h}Math.hypot||(Math.hypot=function(){for(var h=0,l=arguments.length;l--;)h+=arguments[l]*arguments[l];return Math.sqrt(h)});var qp,d9=vE;function Py(h,l,d){var g=l[0],x=l[1],A=l[2],M=l[3];return h[0]=d[0]*g+d[4]*x+d[8]*A+d[12]*M,h[1]=d[1]*g+d[5]*x+d[9]*A+d[13]*M,h[2]=d[2]*g+d[6]*x+d[10]*A+d[14]*M,h[3]=d[3]*g+d[7]*x+d[11]*A+d[15]*M,h}qp=new Tf(4),Tf!=Float32Array&&(qp[0]=0,qp[1]=0,qp[2]=0,qp[3]=0);class p9 extends Wa{constructor(l){super(l,f9)}createBucket(l){return new xf(l)}queryRadius(l){const d=l;return Wp("circle-radius",this,d)+Wp("circle-stroke-width",this,d)+My(this.paint.get("circle-translate"))}queryIntersectsFeature(l,d,g,x,A,M,k,O){const $=Ey(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),M.angle,k),j=this.paint.get("circle-radius").evaluate(d,g)+this.paint.get("circle-stroke-width").evaluate(d,g),W=this.paint.get("circle-pitch-alignment")==="map",Q=W?$:function(ae,se){return ae.map(pe=>gE(pe,se))}($,O),re=W?j*k:j;for(const ae of x)for(const se of ae){const pe=W?se:gE(se,O);let xe=re;const Re=Py([],[se.x,se.y,0,1],O);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xe*=Re[3]/M.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xe*=M.cameraToCenterDistance/Re[3]),Cy(Q,pe,xe))return!0}return!1}}function gE(h,l){const d=Py([],[h.x,h.y,0,1],l);return new v(d[0]/d[3],d[1]/d[3])}class yE extends xf{}let _E;Et("HeatmapBucket",yE,{omit:["layers"]});var m9={get paint(){return _E=_E||new Ii({"heatmap-radius":new Yt(ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yt(ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ot(ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lp(ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ot(ye.paint_heatmap["heatmap-opacity"])})}};function hx(h,{width:l,height:d},g,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==l*d*g)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${l*d*g}`)}else x=new Uint8Array(l*d*g);return h.width=l,h.height=d,h.data=x,h}function bE(h,{width:l,height:d},g){if(l===h.width&&d===h.height)return;const x=hx({},{width:l,height:d},g);fx(h,x,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,l),height:Math.min(h.height,d)},g),h.width=l,h.height=d,h.data=x.data}function fx(h,l,d,g,x,A){if(x.width===0||x.height===0)return l;if(x.width>h.width||x.height>h.height||d.x>h.width-x.width||d.y>h.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>l.width||x.height>l.height||g.x>l.width-x.width||g.y>l.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const M=h.data,k=l.data;if(M===k)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<x.height;O++){const $=((d.y+O)*h.width+d.x)*A,j=((g.y+O)*l.width+g.x)*A;for(let W=0;W<x.width*A;W++)k[j+W]=M[$+W]}return l}class Zp{constructor(l,d){hx(this,l,1,d)}resize(l){bE(this,l,1)}clone(){return new Zp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,d,g,x,A){fx(l,d,g,x,A,1)}}class qa{constructor(l,d){hx(this,l,4,d)}resize(l){bE(this,l,4)}replace(l,d){d?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new qa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,d,g,x,A){fx(l,d,g,x,A,4)}}function xE(h){const l={},d=h.resolution||256,g=h.clips?h.clips.length:1,x=h.image||new qa({width:d,height:g});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const A=(M,k,O)=>{l[h.evaluationKey]=O;const $=h.expression.evaluate(l);x.data[M+k+0]=Math.floor(255*$.r/$.a),x.data[M+k+1]=Math.floor(255*$.g/$.a),x.data[M+k+2]=Math.floor(255*$.b/$.a),x.data[M+k+3]=Math.floor(255*$.a)};if(h.clips)for(let M=0,k=0;M<g;++M,k+=4*d)for(let O=0,$=0;O<d;O++,$+=4){const j=O/(d-1),{start:W,end:Q}=h.clips[M];A(k,$,W*(1-j)+Q*j)}else for(let M=0,k=0;M<d;M++,k+=4)A(0,k,M/(d-1));return x}Et("AlphaImage",Zp),Et("RGBAImage",qa);class v9 extends Wa{createBucket(l){return new yE(l)}constructor(l){super(l,m9),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=xE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let wE;var g9={get paint(){return wE=wE||new Ii({"hillshade-illumination-direction":new Ot(ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ot(ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ot(ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ot(ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ot(ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ot(ye.paint_hillshade["hillshade-accent-color"])})}};class y9 extends Wa{constructor(l){super(l,g9)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const _9=Bn([{name:"a_pos",components:2,type:"Int16"}],4),{members:b9}=_9;var dx={exports:{}};function Iy(h,l,d){d=d||2;var g,x,A,M,k,O,$,j=l&&l.length,W=j?l[0]*d:h.length,Q=SE(h,0,W,d,!0),re=[];if(!Q||Q.next===Q.prev)return re;if(j&&(Q=function(se,pe,xe,Re){var Se,Pe,je,Ye=[];for(Se=0,Pe=pe.length;Se<Pe;Se++)(je=SE(se,pe[Se]*Re,Se<Pe-1?pe[Se+1]*Re:se.length,Re,!1))===je.next&&(je.steiner=!0),Ye.push(E9(je));for(Ye.sort(C9),Se=0;Se<Ye.length;Se++)xe=A9(Ye[Se],xe);return xe}(h,l,Q,d)),h.length>80*d){g=A=h[0],x=M=h[1];for(var ae=d;ae<W;ae+=d)(k=h[ae])<g&&(g=k),(O=h[ae+1])<x&&(x=O),k>A&&(A=k),O>M&&(M=O);$=($=Math.max(A-g,M-x))!==0?32767/$:0}return Xp(Q,re,d,g,x,$,0),re}function SE(h,l,d,g,x){var A,M;if(x===vx(h,l,d,g)>0)for(A=l;A<d;A+=g)M=AE(A,h[A],h[A+1],M);else for(A=d-g;A>=l;A-=g)M=AE(A,h[A],h[A+1],M);return M&&Dy(M,M.next)&&(Kp(M),M=M.next),M}function gc(h,l){if(!h)return h;l||(l=h);var d,g=h;do if(d=!1,g.steiner||!Dy(g,g.next)&&Nn(g.prev,g,g.next)!==0)g=g.next;else{if(Kp(g),(g=l=g.prev)===g.next)break;d=!0}while(d||g!==l);return l}function Xp(h,l,d,g,x,A,M){if(h){!M&&A&&function(j,W,Q,re){var ae=j;do ae.z===0&&(ae.z=px(ae.x,ae.y,W,Q,re)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==j);ae.prevZ.nextZ=null,ae.prevZ=null,function(se){var pe,xe,Re,Se,Pe,je,Ye,Tt,Rt=1;do{for(xe=se,se=null,Pe=null,je=0;xe;){for(je++,Re=xe,Ye=0,pe=0;pe<Rt&&(Ye++,Re=Re.nextZ);pe++);for(Tt=Rt;Ye>0||Tt>0&&Re;)Ye!==0&&(Tt===0||!Re||xe.z<=Re.z)?(Se=xe,xe=xe.nextZ,Ye--):(Se=Re,Re=Re.nextZ,Tt--),Pe?Pe.nextZ=Se:se=Se,Se.prevZ=Pe,Pe=Se;xe=Re}Pe.nextZ=null,Rt*=2}while(je>1)}(ae)}(h,g,x,A);for(var k,O,$=h;h.prev!==h.next;)if(k=h.prev,O=h.next,A?w9(h,g,x,A):x9(h))l.push(k.i/d|0),l.push(h.i/d|0),l.push(O.i/d|0),Kp(h),h=O.next,$=O.next;else if((h=O)===$){M?M===1?Xp(h=S9(gc(h),l,d),l,d,g,x,A,2):M===2&&T9(h,l,d,g,x,A):Xp(gc(h),l,d,g,x,A,1);break}}}function x9(h){var l=h.prev,d=h,g=h.next;if(Nn(l,d,g)>=0)return!1;for(var x=l.x,A=d.x,M=g.x,k=l.y,O=d.y,$=g.y,j=x<A?x<M?x:M:A<M?A:M,W=k<O?k<$?k:$:O<$?O:$,Q=x>A?x>M?x:M:A>M?A:M,re=k>O?k>$?k:$:O>$?O:$,ae=g.next;ae!==l;){if(ae.x>=j&&ae.x<=Q&&ae.y>=W&&ae.y<=re&&Cf(x,k,A,O,M,$,ae.x,ae.y)&&Nn(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function w9(h,l,d,g){var x=h.prev,A=h,M=h.next;if(Nn(x,A,M)>=0)return!1;for(var k=x.x,O=A.x,$=M.x,j=x.y,W=A.y,Q=M.y,re=k<O?k<$?k:$:O<$?O:$,ae=j<W?j<Q?j:Q:W<Q?W:Q,se=k>O?k>$?k:$:O>$?O:$,pe=j>W?j>Q?j:Q:W>Q?W:Q,xe=px(re,ae,l,d,g),Re=px(se,pe,l,d,g),Se=h.prevZ,Pe=h.nextZ;Se&&Se.z>=xe&&Pe&&Pe.z<=Re;){if(Se.x>=re&&Se.x<=se&&Se.y>=ae&&Se.y<=pe&&Se!==x&&Se!==M&&Cf(k,j,O,W,$,Q,Se.x,Se.y)&&Nn(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,Pe.x>=re&&Pe.x<=se&&Pe.y>=ae&&Pe.y<=pe&&Pe!==x&&Pe!==M&&Cf(k,j,O,W,$,Q,Pe.x,Pe.y)&&Nn(Pe.prev,Pe,Pe.next)>=0))return!1;Pe=Pe.nextZ}for(;Se&&Se.z>=xe;){if(Se.x>=re&&Se.x<=se&&Se.y>=ae&&Se.y<=pe&&Se!==x&&Se!==M&&Cf(k,j,O,W,$,Q,Se.x,Se.y)&&Nn(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;Pe&&Pe.z<=Re;){if(Pe.x>=re&&Pe.x<=se&&Pe.y>=ae&&Pe.y<=pe&&Pe!==x&&Pe!==M&&Cf(k,j,O,W,$,Q,Pe.x,Pe.y)&&Nn(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.nextZ}return!0}function S9(h,l,d){var g=h;do{var x=g.prev,A=g.next.next;!Dy(x,A)&&TE(x,g,g.next,A)&&Yp(x,A)&&Yp(A,x)&&(l.push(x.i/d|0),l.push(g.i/d|0),l.push(A.i/d|0),Kp(g),Kp(g.next),g=h=A),g=g.next}while(g!==h);return gc(g)}function T9(h,l,d,g,x,A){var M=h;do{for(var k=M.next.next;k!==M.prev;){if(M.i!==k.i&&P9(M,k)){var O=CE(M,k);return M=gc(M,M.next),O=gc(O,O.next),Xp(M,l,d,g,x,A,0),void Xp(O,l,d,g,x,A,0)}k=k.next}M=M.next}while(M!==h)}function C9(h,l){return h.x-l.x}function A9(h,l){var d=function(x,A){var M,k=A,O=x.x,$=x.y,j=-1/0;do{if($<=k.y&&$>=k.next.y&&k.next.y!==k.y){var W=k.x+($-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(W<=O&&W>j&&(j=W,M=k.x<k.next.x?k:k.next,W===O))return M}k=k.next}while(k!==A);if(!M)return null;var Q,re=M,ae=M.x,se=M.y,pe=1/0;k=M;do O>=k.x&&k.x>=ae&&O!==k.x&&Cf($<se?O:j,$,ae,se,$<se?j:O,$,k.x,k.y)&&(Q=Math.abs($-k.y)/(O-k.x),Yp(k,x)&&(Q<pe||Q===pe&&(k.x>M.x||k.x===M.x&&M9(M,k)))&&(M=k,pe=Q)),k=k.next;while(k!==re);return M}(h,l);if(!d)return l;var g=CE(d,h);return gc(g,g.next),gc(d,d.next)}function M9(h,l){return Nn(h.prev,h,l.prev)<0&&Nn(l.next,h,h.next)<0}function px(h,l,d,g,x){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-d)*x|0)|h<<8))|h<<4))|h<<2))|h<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-g)*x|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function E9(h){var l=h,d=h;do(l.x<d.x||l.x===d.x&&l.y<d.y)&&(d=l),l=l.next;while(l!==h);return d}function Cf(h,l,d,g,x,A,M,k){return(x-M)*(l-k)>=(h-M)*(A-k)&&(h-M)*(g-k)>=(d-M)*(l-k)&&(d-M)*(A-k)>=(x-M)*(g-k)}function P9(h,l){return h.next.i!==l.i&&h.prev.i!==l.i&&!function(d,g){var x=d;do{if(x.i!==d.i&&x.next.i!==d.i&&x.i!==g.i&&x.next.i!==g.i&&TE(x,x.next,d,g))return!0;x=x.next}while(x!==d);return!1}(h,l)&&(Yp(h,l)&&Yp(l,h)&&function(d,g){var x=d,A=!1,M=(d.x+g.x)/2,k=(d.y+g.y)/2;do x.y>k!=x.next.y>k&&x.next.y!==x.y&&M<(x.next.x-x.x)*(k-x.y)/(x.next.y-x.y)+x.x&&(A=!A),x=x.next;while(x!==d);return A}(h,l)&&(Nn(h.prev,h,l.prev)||Nn(h,l.prev,l))||Dy(h,l)&&Nn(h.prev,h,h.next)>0&&Nn(l.prev,l,l.next)>0)}function Nn(h,l,d){return(l.y-h.y)*(d.x-l.x)-(l.x-h.x)*(d.y-l.y)}function Dy(h,l){return h.x===l.x&&h.y===l.y}function TE(h,l,d,g){var x=ky(Nn(h,l,d)),A=ky(Nn(h,l,g)),M=ky(Nn(d,g,h)),k=ky(Nn(d,g,l));return x!==A&&M!==k||!(x!==0||!Ly(h,d,l))||!(A!==0||!Ly(h,g,l))||!(M!==0||!Ly(d,h,g))||!(k!==0||!Ly(d,l,g))}function Ly(h,l,d){return l.x<=Math.max(h.x,d.x)&&l.x>=Math.min(h.x,d.x)&&l.y<=Math.max(h.y,d.y)&&l.y>=Math.min(h.y,d.y)}function ky(h){return h>0?1:h<0?-1:0}function Yp(h,l){return Nn(h.prev,h,h.next)<0?Nn(h,l,h.next)>=0&&Nn(h,h.prev,l)>=0:Nn(h,l,h.prev)<0||Nn(h,h.next,l)<0}function CE(h,l){var d=new mx(h.i,h.x,h.y),g=new mx(l.i,l.x,l.y),x=h.next,A=l.prev;return h.next=l,l.prev=h,d.next=x,x.prev=d,g.next=d,d.prev=g,A.next=g,g.prev=A,g}function AE(h,l,d,g){var x=new mx(h,l,d);return g?(x.next=g.next,x.prev=g,g.next.prev=x,g.next=x):(x.prev=x,x.next=x),x}function Kp(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function mx(h,l,d){this.i=h,this.x=l,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vx(h,l,d,g){for(var x=0,A=l,M=d-g;A<d;A+=g)x+=(h[M]-h[A])*(h[A+1]+h[M+1]),M=A;return x}dx.exports=Iy,dx.exports.default=Iy,Iy.deviation=function(h,l,d,g){var x=l&&l.length,A=Math.abs(vx(h,0,x?l[0]*d:h.length,d));if(x)for(var M=0,k=l.length;M<k;M++)A-=Math.abs(vx(h,l[M]*d,M<k-1?l[M+1]*d:h.length,d));var O=0;for(M=0;M<g.length;M+=3){var $=g[M]*d,j=g[M+1]*d,W=g[M+2]*d;O+=Math.abs((h[$]-h[W])*(h[j+1]-h[$+1])-(h[$]-h[j])*(h[W+1]-h[$+1]))}return A===0&&O===0?0:Math.abs((O-A)/A)},Iy.flatten=function(h){for(var l=h[0][0].length,d={vertices:[],holes:[],dimensions:l},g=0,x=0;x<h.length;x++){for(var A=0;A<h[x].length;A++)for(var M=0;M<l;M++)d.vertices.push(h[x][A][M]);x>0&&d.holes.push(g+=h[x-1].length)}return d};var ME=c(dx.exports);function I9(h,l,d,g,x){EE(h,l,d||0,g||h.length-1,x||D9)}function EE(h,l,d,g,x){for(;g>d;){if(g-d>600){var A=g-d+1,M=l-d+1,k=Math.log(A),O=.5*Math.exp(2*k/3),$=.5*Math.sqrt(k*O*(A-O)/A)*(M-A/2<0?-1:1);EE(h,l,Math.max(d,Math.floor(l-M*O/A+$)),Math.min(g,Math.floor(l+(A-M)*O/A+$)),x)}var j=h[l],W=d,Q=g;for(Jp(h,d,l),x(h[g],j)>0&&Jp(h,d,g);W<Q;){for(Jp(h,W,Q),W++,Q--;x(h[W],j)<0;)W++;for(;x(h[Q],j)>0;)Q--}x(h[d],j)===0?Jp(h,d,Q):Jp(h,++Q,g),Q<=l&&(d=Q+1),l<=Q&&(g=Q-1)}}function Jp(h,l,d){var g=h[l];h[l]=h[d],h[d]=g}function D9(h,l){return h<l?-1:h>l?1:0}function gx(h,l){const d=h.length;if(d<=1)return[h];const g=[];let x,A;for(let M=0;M<d;M++){const k=fe(h[M]);k!==0&&(h[M].area=Math.abs(k),A===void 0&&(A=k<0),A===k<0?(x&&g.push(x),x=[h[M]]):x.push(h[M]))}if(x&&g.push(x),l>1)for(let M=0;M<g.length;M++)g[M].length<=l||(I9(g[M],l,1,g[M].length-1,L9),g[M]=g[M].slice(0,l));return g}function L9(h,l){return l.area-h.area}function yx(h,l,d){const g=d.patternDependencies;let x=!1;for(const A of l){const M=A.paint.get(`${h}-pattern`);M.isConstant()||(x=!0);const k=M.constantOr(null);k&&(x=!0,g[k.to]=!0,g[k.from]=!0)}return x}function _x(h,l,d,g,x){const A=x.patternDependencies;for(const M of l){const k=M.paint.get(`${h}-pattern`).value;if(k.kind!=="constant"){let O=k.evaluate({zoom:g-1},d,{},x.availableImages),$=k.evaluate({zoom:g},d,{},x.availableImages),j=k.evaluate({zoom:g+1},d,{},x.availableImages);O=O&&O.name?O.name:O,$=$&&$.name?$.name:$,j=j&&j.name?j.name:j,A[O]=!0,A[$]=!0,A[j]=!0,d.patterns[M.id]={min:O,mid:$,max:j}}}return d}class bx{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(d=>d.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new he,this.indexArray=new et,this.indexArray2=new Qe,this.programConfigurations=new ui(l.layers,l.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(l,d,g){this.hasPattern=yx("fill",this.layers,d);const x=this.layers[0].layout.get("fill-sort-key"),A=!x.isConstant(),M=[];for(const{feature:k,id:O,index:$,sourceLayerIndex:j}of l){const W=this.layers[0]._featureFilter.needGeometry,Q=nl(k,W);if(!this.layers[0]._featureFilter.filter(new ln(this.zoom),Q,g))continue;const re=A?x.evaluate(Q,{},g,d.availableImages):void 0,ae={id:O,properties:k.properties,type:k.type,sourceLayerIndex:j,index:$,geometry:W?Q.geometry:rl(k),patterns:{},sortKey:re};M.push(ae)}A&&M.sort((k,O)=>k.sortKey-O.sortKey);for(const k of M){const{geometry:O,index:$,sourceLayerIndex:j}=k;if(this.hasPattern){const W=_x("fill",this.layers,k,this.zoom,d);this.patternFeatures.push(W)}else this.addFeature(k,O,$,g,{});d.featureIndex.insert(l[$].feature,O,$,j,this.index)}}update(l,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,d,this.stateDependentLayers,g)}addFeatures(l,d,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,d,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,b9),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,d,g,x,A){for(const M of gx(d,500)){let k=0;for(const re of M)k+=re.length;const O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),$=O.vertexLength,j=[],W=[];for(const re of M){if(re.length===0)continue;re!==M[0]&&W.push(j.length/2);const ae=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),se=ae.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(se+re.length-1,se),j.push(re[0].x),j.push(re[0].y);for(let pe=1;pe<re.length;pe++)this.layoutVertexArray.emplaceBack(re[pe].x,re[pe].y),this.indexArray2.emplaceBack(se+pe-1,se+pe),j.push(re[pe].x),j.push(re[pe].y);ae.vertexLength+=re.length,ae.primitiveLength+=re.length}const Q=ME(j,W);for(let re=0;re<Q.length;re+=3)this.indexArray.emplaceBack($+Q[re],$+Q[re+1],$+Q[re+2]);O.vertexLength+=k,O.primitiveLength+=Q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,A,x)}}let PE,IE;Et("FillBucket",bx,{omit:["layers","patternFeatures"]});var k9={get paint(){return IE=IE||new Ii({"fill-antialias":new Ot(ye.paint_fill["fill-antialias"]),"fill-opacity":new Yt(ye.paint_fill["fill-opacity"]),"fill-color":new Yt(ye.paint_fill["fill-color"]),"fill-outline-color":new Yt(ye.paint_fill["fill-outline-color"]),"fill-translate":new Ot(ye.paint_fill["fill-translate"]),"fill-translate-anchor":new Ot(ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zl(ye.paint_fill["fill-pattern"])})},get layout(){return PE=PE||new Ii({"fill-sort-key":new Yt(ye.layout_fill["fill-sort-key"])})}};class R9 extends Wa{constructor(l){super(l,k9)}recalculate(l,d){super.recalculate(l,d);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new bx(l)}queryRadius(){return My(this.paint.get("fill-translate"))}queryIntersectsFeature(l,d,g,x,A,M,k){return wf(Ey(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),M.angle,k),x)}isTileClipped(){return!0}}const O9=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),z9=Bn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:B9}=O9;var Jl={},F9=f,DE=Af;function Af(h,l,d,g,x){this.properties={},this.extent=d,this.type=0,this._pbf=h,this._geometry=-1,this._keys=g,this._values=x,h.readFields($9,this,l)}function $9(h,l,d){h==1?l.id=d.readVarint():h==2?function(g,x){for(var A=g.readVarint()+g.pos;g.pos<A;){var M=x._keys[g.readVarint()],k=x._values[g.readVarint()];x.properties[M]=k}}(d,l):h==3?l.type=d.readVarint():h==4&&(l._geometry=d.pos)}function N9(h){for(var l,d,g=0,x=0,A=h.length,M=A-1;x<A;M=x++)g+=((d=h[M]).x-(l=h[x]).x)*(l.y+d.y);return g}Af.types=["Unknown","Point","LineString","Polygon"],Af.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var l,d=h.readVarint()+h.pos,g=1,x=0,A=0,M=0,k=[];h.pos<d;){if(x<=0){var O=h.readVarint();g=7&O,x=O>>3}if(x--,g===1||g===2)A+=h.readSVarint(),M+=h.readSVarint(),g===1&&(l&&k.push(l),l=[]),l.push(new F9(A,M));else{if(g!==7)throw new Error("unknown command "+g);l&&l.push(l[0].clone())}}return l&&k.push(l),k},Af.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var l=h.readVarint()+h.pos,d=1,g=0,x=0,A=0,M=1/0,k=-1/0,O=1/0,$=-1/0;h.pos<l;){if(g<=0){var j=h.readVarint();d=7&j,g=j>>3}if(g--,d===1||d===2)(x+=h.readSVarint())<M&&(M=x),x>k&&(k=x),(A+=h.readSVarint())<O&&(O=A),A>$&&($=A);else if(d!==7)throw new Error("unknown command "+d)}return[M,O,k,$]},Af.prototype.toGeoJSON=function(h,l,d){var g,x,A=this.extent*Math.pow(2,d),M=this.extent*h,k=this.extent*l,O=this.loadGeometry(),$=Af.types[this.type];function j(re){for(var ae=0;ae<re.length;ae++){var se=re[ae];re[ae]=[360*(se.x+M)/A-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+k)/A)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(g=0;g<O.length;g++)W[g]=O[g][0];j(O=W);break;case 2:for(g=0;g<O.length;g++)j(O[g]);break;case 3:for(O=function(re){var ae=re.length;if(ae<=1)return[re];for(var se,pe,xe=[],Re=0;Re<ae;Re++){var Se=N9(re[Re]);Se!==0&&(pe===void 0&&(pe=Se<0),pe===Se<0?(se&&xe.push(se),se=[re[Re]]):se.push(re[Re]))}return se&&xe.push(se),xe}(O),g=0;g<O.length;g++)for(x=0;x<O[g].length;x++)j(O[g][x])}O.length===1?O=O[0]:$="Multi"+$;var Q={type:"Feature",geometry:{type:$,coordinates:O},properties:this.properties};return"id"in this&&(Q.id=this.id),Q};var V9=DE,LE=kE;function kE(h,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(H9,this,l),this.length=this._features.length}function H9(h,l,d){h===15?l.version=d.readVarint():h===1?l.name=d.readString():h===5?l.extent=d.readVarint():h===2?l._features.push(d.pos):h===3?l._keys.push(d.readString()):h===4&&l._values.push(function(g){for(var x=null,A=g.readVarint()+g.pos;g.pos<A;){var M=g.readVarint()>>3;x=M===1?g.readString():M===2?g.readFloat():M===3?g.readDouble():M===4?g.readVarint64():M===5?g.readVarint():M===6?g.readSVarint():M===7?g.readBoolean():null}return x}(d))}kE.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var l=this._pbf.readVarint()+this._pbf.pos;return new V9(this._pbf,l,this.extent,this._keys,this._values)};var U9=LE;function j9(h,l,d){if(h===3){var g=new U9(d,d.readVarint()+d.pos);g.length&&(l[g.name]=g)}}Jl.VectorTile=function(h,l){this.layers=h.readFields(j9,{},l)},Jl.VectorTileFeature=DE,Jl.VectorTileLayer=LE;const G9=Jl.VectorTileFeature.types,xx=Math.pow(2,13);function Qp(h,l,d,g,x,A,M,k){h.emplaceBack(l,d,2*Math.floor(g*xx)+M,x*xx*2,A*xx*2,Math.round(k))}class Sx{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(d=>d.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new ge,this.centroidVertexArray=new ie,this.indexArray=new et,this.programConfigurations=new ui(l.layers,l.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(l,d,g){this.features=[],this.hasPattern=yx("fill-extrusion",this.layers,d);for(const{feature:x,id:A,index:M,sourceLayerIndex:k}of l){const O=this.layers[0]._featureFilter.needGeometry,$=nl(x,O);if(!this.layers[0]._featureFilter.filter(new ln(this.zoom),$,g))continue;const j={id:A,sourceLayerIndex:k,index:M,geometry:O?$.geometry:rl(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(_x("fill-extrusion",this.layers,j,this.zoom,d)):this.addFeature(j,j.geometry,M,g,{}),d.featureIndex.insert(x,j.geometry,M,k,this.index,!0)}}addFeatures(l,d,g){for(const x of this.features){const{geometry:A}=x;this.addFeature(x,A,x.index,d,g)}}update(l,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,d,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,B9),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,z9.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,d,g,x,A){const M={x:0,y:0,vertexCount:0};for(const k of gx(d,500)){let O=0;for(const ae of k)O+=ae.length;let $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ae of k){if(ae.length===0||q9(ae))continue;let se=0;for(let pe=0;pe<ae.length;pe++){const xe=ae[pe];if(pe>=1){const Re=ae[pe-1];if(!W9(xe,Re)){$.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Se=xe.sub(Re)._perp()._unit(),Pe=Re.dist(xe);se+Pe>32768&&(se=0),Qp(this.layoutVertexArray,xe.x,xe.y,Se.x,Se.y,0,0,se),Qp(this.layoutVertexArray,xe.x,xe.y,Se.x,Se.y,0,1,se),M.x+=2*xe.x,M.y+=2*xe.y,M.vertexCount+=2,se+=Pe,Qp(this.layoutVertexArray,Re.x,Re.y,Se.x,Se.y,0,0,se),Qp(this.layoutVertexArray,Re.x,Re.y,Se.x,Se.y,0,1,se),M.x+=2*Re.x,M.y+=2*Re.y,M.vertexCount+=2;const je=$.vertexLength;this.indexArray.emplaceBack(je,je+2,je+1),this.indexArray.emplaceBack(je+1,je+2,je+3),$.vertexLength+=4,$.primitiveLength+=2}}}}if($.vertexLength+O>Zt.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray)),G9[l.type]!=="Polygon")continue;const j=[],W=[],Q=$.vertexLength;for(const ae of k)if(ae.length!==0){ae!==k[0]&&W.push(j.length/2);for(let se=0;se<ae.length;se++){const pe=ae[se];Qp(this.layoutVertexArray,pe.x,pe.y,0,0,1,1,0),M.x+=pe.x,M.y+=pe.y,M.vertexCount+=1,j.push(pe.x),j.push(pe.y)}}const re=ME(j,W);for(let ae=0;ae<re.length;ae+=3)this.indexArray.emplaceBack(Q+re[ae],Q+re[ae+2],Q+re[ae+1]);$.primitiveLength+=re.length/3,$.vertexLength+=O}for(let k=0;k<M.vertexCount;k++)this.centroidVertexArray.emplaceBack(Math.floor(M.x/M.vertexCount),Math.floor(M.y/M.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,A,x)}}function W9(h,l){return h.x===l.x&&(h.x<0||h.x>kn)||h.y===l.y&&(h.y<0||h.y>kn)}function q9(h){return h.every(l=>l.x<0)||h.every(l=>l.x>kn)||h.every(l=>l.y<0)||h.every(l=>l.y>kn)}let RE;Et("FillExtrusionBucket",Sx,{omit:["layers","features"]});var Z9={get paint(){return RE=RE||new Ii({"fill-extrusion-opacity":new Ot(ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yt(ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ot(ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ot(ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zl(ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yt(ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yt(ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ot(ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class X9 extends Wa{constructor(l){super(l,Z9)}createBucket(l){return new Sx(l)}queryRadius(){return My(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,d,g,x,A,M,k,O){const $=Ey(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),M.angle,k),j=this.paint.get("fill-extrusion-height").evaluate(d,g),W=this.paint.get("fill-extrusion-base").evaluate(d,g),Q=function(ae,se,pe,xe){const Re=[];for(const Se of ae){const Pe=[Se.x,Se.y,0,1];Py(Pe,Pe,se),Re.push(new v(Pe[0]/Pe[3],Pe[1]/Pe[3]))}return Re}($,O),re=function(ae,se,pe,xe){const Re=[],Se=[],Pe=xe[8]*se,je=xe[9]*se,Ye=xe[10]*se,Tt=xe[11]*se,Rt=xe[8]*pe,wt=xe[9]*pe,gt=xe[10]*pe,ft=xe[11]*pe;for(const Dt of ae){const pt=[],it=[];for(const Ht of Dt){const Bt=Ht.x,mr=Ht.y,hn=xe[0]*Bt+xe[4]*mr+xe[12],vn=xe[1]*Bt+xe[5]*mr+xe[13],Qn=xe[2]*Bt+xe[6]*mr+xe[14],La=xe[3]*Bt+xe[7]*mr+xe[15],Xi=Qn+Ye,Un=La+Tt,fi=hn+Rt,Si=vn+wt,Yi=Qn+gt,Ki=La+ft,ei=new v((hn+Pe)/Un,(vn+je)/Un);ei.z=Xi/Un,pt.push(ei);const ti=new v(fi/Ki,Si/Ki);ti.z=Yi/Ki,it.push(ti)}Re.push(pt),Se.push(it)}return[Re,Se]}(x,W,j,O);return function(ae,se,pe){let xe=1/0;wf(pe,se)&&(xe=OE(pe,se[0]));for(let Re=0;Re<se.length;Re++){const Se=se[Re],Pe=ae[Re];for(let je=0;je<Se.length-1;je++){const Ye=Se[je],Tt=[Ye,Se[je+1],Pe[je+1],Pe[je],Ye];Gp(pe,Tt)&&(xe=Math.min(xe,OE(pe,Tt)))}}return xe!==1/0&&xe}(re[0],re[1],Q)}}function em(h,l){return h.x*l.x+h.y*l.y}function OE(h,l){if(h.length===1){let d=0;const g=l[d++];let x;for(;!x||g.equals(x);)if(x=l[d++],!x)return 1/0;for(;d<l.length;d++){const A=l[d],M=h[0],k=x.sub(g),O=A.sub(g),$=M.sub(g),j=em(k,k),W=em(k,O),Q=em(O,O),re=em($,k),ae=em($,O),se=j*Q-W*W,pe=(Q*re-W*ae)/se,xe=(j*ae-W*re)/se,Re=g.z*(1-pe-xe)+x.z*pe+A.z*xe;if(isFinite(Re))return Re}return 1/0}{let d=1/0;for(const g of l)d=Math.min(d,g.z);return d}}const Y9=Bn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:K9}=Y9,J9=Bn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Q9}=J9,eV=Jl.VectorTileFeature.types,tV=Math.cos(Math.PI/180*37.5),zE=Math.pow(2,14)/.5;class Tx{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(d=>d.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new le,this.layoutVertexArray2=new Ae,this.indexArray=new et,this.programConfigurations=new ui(l.layers,l.zoom),this.segments=new Zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(l,d,g){this.hasPattern=yx("line",this.layers,d);const x=this.layers[0].layout.get("line-sort-key"),A=!x.isConstant(),M=[];for(const{feature:k,id:O,index:$,sourceLayerIndex:j}of l){const W=this.layers[0]._featureFilter.needGeometry,Q=nl(k,W);if(!this.layers[0]._featureFilter.filter(new ln(this.zoom),Q,g))continue;const re=A?x.evaluate(Q,{},g):void 0,ae={id:O,properties:k.properties,type:k.type,sourceLayerIndex:j,index:$,geometry:W?Q.geometry:rl(k),patterns:{},sortKey:re};M.push(ae)}A&&M.sort((k,O)=>k.sortKey-O.sortKey);for(const k of M){const{geometry:O,index:$,sourceLayerIndex:j}=k;if(this.hasPattern){const W=_x("line",this.layers,k,this.zoom,d);this.patternFeatures.push(W)}else this.addFeature(k,O,$,g,{});d.featureIndex.insert(l[$].feature,O,$,j,this.index)}}update(l,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,d,this.stateDependentLayers,g)}addFeatures(l,d,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,d,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Q9)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,K9),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,d,g,x,A){const M=this.layers[0].layout,k=M.get("line-join").evaluate(l,{}),O=M.get("line-cap"),$=M.get("line-miter-limit"),j=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const W of d)this.addLine(W,l,k,O,$,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,A,x)}addLine(l,d,g,x,A,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<l.length-1;xe++)this.totalDistance+=l[xe].dist(l[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=eV[d.type]==="Polygon";let O=l.length;for(;O>=2&&l[O-1].equals(l[O-2]);)O--;let $=0;for(;$<O-1&&l[$].equals(l[$+1]);)$++;if(O<(k?3:2))return;g==="bevel"&&(A=1.05);const j=this.overscaling<=16?15*kn/(512*this.overscaling):0,W=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let Q,re,ae,se,pe;this.e1=this.e2=-1,k&&(Q=l[O-2],pe=l[$].sub(Q)._unit()._perp());for(let xe=$;xe<O;xe++){if(ae=xe===O-1?k?l[$+1]:void 0:l[xe+1],ae&&l[xe].equals(ae))continue;pe&&(se=pe),Q&&(re=Q),Q=l[xe],pe=ae?ae.sub(Q)._unit()._perp():se,se=se||pe;let Re=se.add(pe);Re.x===0&&Re.y===0||Re._unit();const Se=se.x*pe.x+se.y*pe.y,Pe=Re.x*pe.x+Re.y*pe.y,je=Pe!==0?1/Pe:1/0,Ye=2*Math.sqrt(2-2*Pe),Tt=Pe<tV&&re&&ae,Rt=se.x*pe.y-se.y*pe.x>0;if(Tt&&xe>$){const ft=Q.dist(re);if(ft>2*j){const Dt=Q.sub(Q.sub(re)._mult(j/ft)._round());this.updateDistance(re,Dt),this.addCurrentVertex(Dt,se,0,0,W),re=Dt}}const wt=re&&ae;let gt=wt?g:k?"butt":x;if(wt&&gt==="round"&&(je<M?gt="miter":je<=2&&(gt="fakeround")),gt==="miter"&&je>A&&(gt="bevel"),gt==="bevel"&&(je>2&&(gt="flipbevel"),je<A&&(gt="miter")),re&&this.updateDistance(re,Q),gt==="miter")Re._mult(je),this.addCurrentVertex(Q,Re,0,0,W);else if(gt==="flipbevel"){if(je>100)Re=pe.mult(-1);else{const ft=je*se.add(pe).mag()/se.sub(pe).mag();Re._perp()._mult(ft*(Rt?-1:1))}this.addCurrentVertex(Q,Re,0,0,W),this.addCurrentVertex(Q,Re.mult(-1),0,0,W)}else if(gt==="bevel"||gt==="fakeround"){const ft=-Math.sqrt(je*je-1),Dt=Rt?ft:0,pt=Rt?0:ft;if(re&&this.addCurrentVertex(Q,se,Dt,pt,W),gt==="fakeround"){const it=Math.round(180*Ye/Math.PI/20);for(let Ht=1;Ht<it;Ht++){let Bt=Ht/it;if(Bt!==.5){const hn=Bt-.5;Bt+=Bt*hn*(Bt-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*hn*hn+(.848013+Se*(.215638*Se-1.06021)))}const mr=pe.sub(se)._mult(Bt)._add(se)._unit()._mult(Rt?-1:1);this.addHalfVertex(Q,mr.x,mr.y,!1,Rt,0,W)}}ae&&this.addCurrentVertex(Q,pe,-Dt,-pt,W)}else if(gt==="butt")this.addCurrentVertex(Q,Re,0,0,W);else if(gt==="square"){const ft=re?1:-1;this.addCurrentVertex(Q,Re,ft,ft,W)}else gt==="round"&&(re&&(this.addCurrentVertex(Q,se,0,0,W),this.addCurrentVertex(Q,se,1,1,W,!0)),ae&&(this.addCurrentVertex(Q,pe,-1,-1,W,!0),this.addCurrentVertex(Q,pe,0,0,W)));if(Tt&&xe<O-1){const ft=Q.dist(ae);if(ft>2*j){const Dt=Q.add(ae.sub(Q)._mult(j/ft)._round());this.updateDistance(Q,Dt),this.addCurrentVertex(Dt,pe,0,0,W),Q=Dt}}}}addCurrentVertex(l,d,g,x,A,M=!1){const k=d.y*x-d.x,O=-d.y-d.x*x;this.addHalfVertex(l,d.x+d.y*g,d.y-d.x*g,M,!1,g,A),this.addHalfVertex(l,k,O,M,!0,-x,A),this.distance>zE/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,d,g,x,A,M))}addHalfVertex({x:l,y:d},g,x,A,M,k,O){const $=.5*(this.lineClips?this.scaledDistance*(zE-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(A?1:0),(d<<1)+(M?1:0),Math.round(63*g)+128,Math.round(63*x)+128,1+(k===0?0:k<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,j),O.primitiveLength++),M?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,d){this.distance+=l.dist(d),this.updateScaledDistance()}}let BE,FE;Et("LineBucket",Tx,{omit:["layers","patternFeatures"]});var $E={get paint(){return FE=FE||new Ii({"line-opacity":new Yt(ye.paint_line["line-opacity"]),"line-color":new Yt(ye.paint_line["line-color"]),"line-translate":new Ot(ye.paint_line["line-translate"]),"line-translate-anchor":new Ot(ye.paint_line["line-translate-anchor"]),"line-width":new Yt(ye.paint_line["line-width"]),"line-gap-width":new Yt(ye.paint_line["line-gap-width"]),"line-offset":new Yt(ye.paint_line["line-offset"]),"line-blur":new Yt(ye.paint_line["line-blur"]),"line-dasharray":new Dp(ye.paint_line["line-dasharray"]),"line-pattern":new Zl(ye.paint_line["line-pattern"]),"line-gradient":new Lp(ye.paint_line["line-gradient"])})},get layout(){return BE=BE||new Ii({"line-cap":new Ot(ye.layout_line["line-cap"]),"line-join":new Yt(ye.layout_line["line-join"]),"line-miter-limit":new Ot(ye.layout_line["line-miter-limit"]),"line-round-limit":new Ot(ye.layout_line["line-round-limit"]),"line-sort-key":new Yt(ye.layout_line["line-sort-key"])})}};class rV extends Yt{possiblyEvaluate(l,d){return d=new ln(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(l,d)}evaluate(l,d,g,x){return d=N({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(l,d,g,x)}}let Ry;class nV extends Wa{constructor(l){super(l,$E),this.gradientVersion=0,Ry||(Ry=new rV($E.paint.properties["line-width"].specification),Ry.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof rc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,d){super.recalculate(l,d),this.paint._values["line-floorwidth"]=Ry.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Tx(l)}queryRadius(l){const d=l,g=NE(Wp("line-width",this,d),Wp("line-gap-width",this,d)),x=Wp("line-offset",this,d);return g/2+Math.abs(x)+My(this.paint.get("line-translate"))}queryIntersectsFeature(l,d,g,x,A,M,k){const O=Ey(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),M.angle,k),$=k/2*NE(this.paint.get("line-width").evaluate(d,g),this.paint.get("line-gap-width").evaluate(d,g)),j=this.paint.get("line-offset").evaluate(d,g);return j&&(x=function(W,Q){const re=[];for(let ae=0;ae<W.length;ae++){const se=W[ae],pe=[];for(let xe=0;xe<se.length;xe++){const Re=se[xe-1],Se=se[xe],Pe=se[xe+1],je=xe===0?new v(0,0):Se.sub(Re)._unit()._perp(),Ye=xe===se.length-1?new v(0,0):Pe.sub(Se)._unit()._perp(),Tt=je._add(Ye)._unit(),Rt=Tt.x*Ye.x+Tt.y*Ye.y;Rt!==0&&Tt._mult(1/Rt),pe.push(Tt._mult(Q)._add(Se))}re.push(pe)}return re}(x,j*k)),function(W,Q,re){for(let ae=0;ae<Q.length;ae++){const se=Q[ae];if(W.length>=3){for(let pe=0;pe<se.length;pe++)if(Sf(W,se[pe]))return!0}if(Ay(W,se,re))return!0}return!1}(O,x,$)}isTileClipped(){return!0}}function NE(h,l){return l>0?l+2*h:h}const iV=Bn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),aV=Bn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Bn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const oV=Bn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Bn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const VE=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),sV=Bn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function lV(h,l,d){return h.sections.forEach(g=>{g.text=function(x,A,M){const k=A.layout.get("text-transform").evaluate(M,{});return k==="uppercase"?x=x.toLocaleUpperCase():k==="lowercase"&&(x=x.toLocaleLowerCase()),Js.applyArabicShaping&&(x=Js.applyArabicShaping(x)),x}(g.text,l,d)}),h}Bn([{name:"triangle",components:3,type:"Uint16"}]),Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Bn([{type:"Float32",name:"offsetX"}]),Bn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Bn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const tm={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Jn=24,HE=Kr,UE=function(h,l,d,g,x){var A,M,k=8*x-g-1,O=(1<<k)-1,$=O>>1,j=-7,W=d?x-1:0,Q=d?-1:1,re=h[l+W];for(W+=Q,A=re&(1<<-j)-1,re>>=-j,j+=k;j>0;A=256*A+h[l+W],W+=Q,j-=8);for(M=A&(1<<-j)-1,A>>=-j,j+=g;j>0;M=256*M+h[l+W],W+=Q,j-=8);if(A===0)A=1-$;else{if(A===O)return M?NaN:1/0*(re?-1:1);M+=Math.pow(2,g),A-=$}return(re?-1:1)*M*Math.pow(2,A-g)},jE=function(h,l,d,g,x,A){var M,k,O,$=8*A-x-1,j=(1<<$)-1,W=j>>1,Q=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=g?0:A-1,ae=g?1:-1,se=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(k=isNaN(l)?1:0,M=j):(M=Math.floor(Math.log(l)/Math.LN2),l*(O=Math.pow(2,-M))<1&&(M--,O*=2),(l+=M+W>=1?Q/O:Q*Math.pow(2,1-W))*O>=2&&(M++,O/=2),M+W>=j?(k=0,M=j):M+W>=1?(k=(l*O-1)*Math.pow(2,x),M+=W):(k=l*Math.pow(2,W-1)*Math.pow(2,x),M=0));x>=8;h[d+re]=255&k,re+=ae,k/=256,x-=8);for(M=M<<x|k,$+=x;$>0;h[d+re]=255&M,re+=ae,M/=256,$-=8);h[d+re-ae]|=128*se};function Kr(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}Kr.Varint=0,Kr.Fixed64=1,Kr.Bytes=2,Kr.Fixed32=5;var Cx=4294967296,GE=1/Cx,WE=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function il(h){return h.type===Kr.Bytes?h.readVarint()+h.pos:h.pos+1}function Mf(h,l,d){return d?4294967296*l+(h>>>0):4294967296*(l>>>0)+(h>>>0)}function qE(h,l,d){var g=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));d.realloc(g);for(var x=d.pos-1;x>=h;x--)d.buf[x+g]=d.buf[x]}function uV(h,l){for(var d=0;d<h.length;d++)l.writeVarint(h[d])}function cV(h,l){for(var d=0;d<h.length;d++)l.writeSVarint(h[d])}function hV(h,l){for(var d=0;d<h.length;d++)l.writeFloat(h[d])}function fV(h,l){for(var d=0;d<h.length;d++)l.writeDouble(h[d])}function dV(h,l){for(var d=0;d<h.length;d++)l.writeBoolean(h[d])}function pV(h,l){for(var d=0;d<h.length;d++)l.writeFixed32(h[d])}function mV(h,l){for(var d=0;d<h.length;d++)l.writeSFixed32(h[d])}function vV(h,l){for(var d=0;d<h.length;d++)l.writeFixed64(h[d])}function gV(h,l){for(var d=0;d<h.length;d++)l.writeSFixed64(h[d])}function Oy(h,l){return(h[l]|h[l+1]<<8|h[l+2]<<16)+16777216*h[l+3]}function Ef(h,l,d){h[d]=l,h[d+1]=l>>>8,h[d+2]=l>>>16,h[d+3]=l>>>24}function ZE(h,l){return(h[l]|h[l+1]<<8|h[l+2]<<16)+(h[l+3]<<24)}Kr.prototype={destroy:function(){this.buf=null},readFields:function(h,l,d){for(d=d||this.length;this.pos<d;){var g=this.readVarint(),x=g>>3,A=this.pos;this.type=7&g,h(x,l,this),this.pos===A&&this.skip(g)}return l},readMessage:function(h,l){return this.readFields(h,l,this.readVarint()+this.pos)},readFixed32:function(){var h=Oy(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=ZE(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=Oy(this.buf,this.pos)+Oy(this.buf,this.pos+4)*Cx;return this.pos+=8,h},readSFixed64:function(){var h=Oy(this.buf,this.pos)+ZE(this.buf,this.pos+4)*Cx;return this.pos+=8,h},readFloat:function(){var h=UE(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=UE(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var l,d,g=this.buf;return l=127&(d=g[this.pos++]),d<128?l:(l|=(127&(d=g[this.pos++]))<<7,d<128?l:(l|=(127&(d=g[this.pos++]))<<14,d<128?l:(l|=(127&(d=g[this.pos++]))<<21,d<128?l:function(x,A,M){var k,O,$=M.buf;if(k=(112&(O=$[M.pos++]))>>4,O<128||(k|=(127&(O=$[M.pos++]))<<3,O<128)||(k|=(127&(O=$[M.pos++]))<<10,O<128)||(k|=(127&(O=$[M.pos++]))<<17,O<128)||(k|=(127&(O=$[M.pos++]))<<24,O<128)||(k|=(1&(O=$[M.pos++]))<<31,O<128))return Mf(x,k,A);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(d=g[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,l=this.pos;return this.pos=h,h-l>=12&&WE?function(d,g,x){return WE.decode(d.subarray(g,x))}(this.buf,l,h):function(d,g,x){for(var A="",M=g;M<x;){var k,O,$,j=d[M],W=null,Q=j>239?4:j>223?3:j>191?2:1;if(M+Q>x)break;Q===1?j<128&&(W=j):Q===2?(192&(k=d[M+1]))==128&&(W=(31&j)<<6|63&k)<=127&&(W=null):Q===3?(O=d[M+2],(192&(k=d[M+1]))==128&&(192&O)==128&&((W=(15&j)<<12|(63&k)<<6|63&O)<=2047||W>=55296&&W<=57343)&&(W=null)):Q===4&&(O=d[M+2],$=d[M+3],(192&(k=d[M+1]))==128&&(192&O)==128&&(192&$)==128&&((W=(15&j)<<18|(63&k)<<12|(63&O)<<6|63&$)<=65535||W>=1114112)&&(W=null)),W===null?(W=65533,Q=1):W>65535&&(W-=65536,A+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),A+=String.fromCharCode(W),M+=Q}return A}(this.buf,l,h)},readBytes:function(){var h=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,h);return this.pos=h,l},readPackedVarint:function(h,l){if(this.type!==Kr.Bytes)return h.push(this.readVarint(l));var d=il(this);for(h=h||[];this.pos<d;)h.push(this.readVarint(l));return h},readPackedSVarint:function(h){if(this.type!==Kr.Bytes)return h.push(this.readSVarint());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==Kr.Bytes)return h.push(this.readBoolean());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==Kr.Bytes)return h.push(this.readFloat());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==Kr.Bytes)return h.push(this.readDouble());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==Kr.Bytes)return h.push(this.readFixed32());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==Kr.Bytes)return h.push(this.readSFixed32());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==Kr.Bytes)return h.push(this.readFixed64());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==Kr.Bytes)return h.push(this.readSFixed64());var l=il(this);for(h=h||[];this.pos<l;)h.push(this.readSFixed64());return h},skip:function(h){var l=7&h;if(l===Kr.Varint)for(;this.buf[this.pos++]>127;);else if(l===Kr.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Kr.Fixed32)this.pos+=4;else{if(l!==Kr.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(h,l){this.writeVarint(h<<3|l)},realloc:function(h){for(var l=this.length||16;l<this.pos+h;)l*=2;if(l!==this.length){var d=new Uint8Array(l);d.set(this.buf),this.buf=d,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),Ef(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),Ef(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),Ef(this.buf,-1&h,this.pos),Ef(this.buf,Math.floor(h*GE),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),Ef(this.buf,-1&h,this.pos),Ef(this.buf,Math.floor(h*GE),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(l,d){var g,x;if(l>=0?(g=l%4294967296|0,x=l/4294967296|0):(x=~(-l/4294967296),4294967295^(g=~(-l%4294967296))?g=g+1|0:(g=0,x=x+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(A,M,k){k.buf[k.pos++]=127&A|128,A>>>=7,k.buf[k.pos++]=127&A|128,A>>>=7,k.buf[k.pos++]=127&A|128,A>>>=7,k.buf[k.pos++]=127&A|128,k.buf[k.pos]=127&(A>>>=7)}(g,0,d),function(A,M){var k=(7&A)<<4;M.buf[M.pos++]|=k|((A>>>=3)?128:0),A&&(M.buf[M.pos++]=127&A|((A>>>=7)?128:0),A&&(M.buf[M.pos++]=127&A|((A>>>=7)?128:0),A&&(M.buf[M.pos++]=127&A|((A>>>=7)?128:0),A&&(M.buf[M.pos++]=127&A|((A>>>=7)?128:0),A&&(M.buf[M.pos++]=127&A)))))}(x,d)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var l=this.pos;this.pos=function(g,x,A){for(var M,k,O=0;O<x.length;O++){if((M=x.charCodeAt(O))>55295&&M<57344){if(!k){M>56319||O+1===x.length?(g[A++]=239,g[A++]=191,g[A++]=189):k=M;continue}if(M<56320){g[A++]=239,g[A++]=191,g[A++]=189,k=M;continue}M=k-55296<<10|M-56320|65536,k=null}else k&&(g[A++]=239,g[A++]=191,g[A++]=189,k=null);M<128?g[A++]=M:(M<2048?g[A++]=M>>6|192:(M<65536?g[A++]=M>>12|224:(g[A++]=M>>18|240,g[A++]=M>>12&63|128),g[A++]=M>>6&63|128),g[A++]=63&M|128)}return A}(this.buf,h,this.pos);var d=this.pos-l;d>=128&&qE(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeFloat:function(h){this.realloc(4),jE(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),jE(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var l=h.length;this.writeVarint(l),this.realloc(l);for(var d=0;d<l;d++)this.buf[this.pos++]=h[d]},writeRawMessage:function(h,l){this.pos++;var d=this.pos;h(l,this);var g=this.pos-d;g>=128&&qE(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g},writeMessage:function(h,l,d){this.writeTag(h,Kr.Bytes),this.writeRawMessage(l,d)},writePackedVarint:function(h,l){l.length&&this.writeMessage(h,uV,l)},writePackedSVarint:function(h,l){l.length&&this.writeMessage(h,cV,l)},writePackedBoolean:function(h,l){l.length&&this.writeMessage(h,dV,l)},writePackedFloat:function(h,l){l.length&&this.writeMessage(h,hV,l)},writePackedDouble:function(h,l){l.length&&this.writeMessage(h,fV,l)},writePackedFixed32:function(h,l){l.length&&this.writeMessage(h,pV,l)},writePackedSFixed32:function(h,l){l.length&&this.writeMessage(h,mV,l)},writePackedFixed64:function(h,l){l.length&&this.writeMessage(h,vV,l)},writePackedSFixed64:function(h,l){l.length&&this.writeMessage(h,gV,l)},writeBytesField:function(h,l){this.writeTag(h,Kr.Bytes),this.writeBytes(l)},writeFixed32Field:function(h,l){this.writeTag(h,Kr.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(h,l){this.writeTag(h,Kr.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(h,l){this.writeTag(h,Kr.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(h,l){this.writeTag(h,Kr.Fixed64),this.writeSFixed64(l)},writeVarintField:function(h,l){this.writeTag(h,Kr.Varint),this.writeVarint(l)},writeSVarintField:function(h,l){this.writeTag(h,Kr.Varint),this.writeSVarint(l)},writeStringField:function(h,l){this.writeTag(h,Kr.Bytes),this.writeString(l)},writeFloatField:function(h,l){this.writeTag(h,Kr.Fixed32),this.writeFloat(l)},writeDoubleField:function(h,l){this.writeTag(h,Kr.Fixed64),this.writeDouble(l)},writeBooleanField:function(h,l){this.writeVarintField(h,!!l)}};var Ax=c(HE);const Mx=3;function yV(h,l,d){h===1&&d.readMessage(_V,l)}function _V(h,l,d){if(h===3){const{id:g,bitmap:x,width:A,height:M,left:k,top:O,advance:$}=d.readMessage(bV,{});l.push({id:g,bitmap:new Zp({width:A+2*Mx,height:M+2*Mx},x),metrics:{width:A,height:M,left:k,top:O,advance:$}})}}function bV(h,l,d){h===1?l.id=d.readVarint():h===2?l.bitmap=d.readBytes():h===3?l.width=d.readVarint():h===4?l.height=d.readVarint():h===5?l.left=d.readSVarint():h===6?l.top=d.readSVarint():h===7&&(l.advance=d.readVarint())}const XE=Mx;function YE(h){let l=0,d=0;for(const M of h)l+=M.w*M.h,d=Math.max(d,M.w);h.sort((M,k)=>k.h-M.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),d),h:1/0}];let x=0,A=0;for(const M of h)for(let k=g.length-1;k>=0;k--){const O=g[k];if(!(M.w>O.w||M.h>O.h)){if(M.x=O.x,M.y=O.y,A=Math.max(A,M.y+M.h),x=Math.max(x,M.x+M.w),M.w===O.w&&M.h===O.h){const $=g.pop();k<g.length&&(g[k]=$)}else M.h===O.h?(O.x+=M.w,O.w-=M.w):M.w===O.w?(O.y+=M.h,O.h-=M.h):(g.push({x:O.x+M.w,y:O.y,w:O.w-M.w,h:M.h}),O.y+=M.h,O.h-=M.h);break}}return{w:x,h:A,fill:l/(x*A)||0}}const ma=1;class Ex{constructor(l,{pixelRatio:d,version:g,stretchX:x,stretchY:A,content:M}){this.paddedRect=l,this.pixelRatio=d,this.stretchX=x,this.stretchY=A,this.content=M,this.version=g}get tl(){return[this.paddedRect.x+ma,this.paddedRect.y+ma]}get br(){return[this.paddedRect.x+this.paddedRect.w-ma,this.paddedRect.y+this.paddedRect.h-ma]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ma)/this.pixelRatio,(this.paddedRect.h-2*ma)/this.pixelRatio]}}class KE{constructor(l,d){const g={},x={};this.haveRenderCallbacks=[];const A=[];this.addImages(l,g,A),this.addImages(d,x,A);const{w:M,h:k}=YE(A),O=new qa({width:M||1,height:k||1});for(const $ in l){const j=l[$],W=g[$].paddedRect;qa.copy(j.data,O,{x:0,y:0},{x:W.x+ma,y:W.y+ma},j.data)}for(const $ in d){const j=d[$],W=x[$].paddedRect,Q=W.x+ma,re=W.y+ma,ae=j.data.width,se=j.data.height;qa.copy(j.data,O,{x:0,y:0},{x:Q,y:re},j.data),qa.copy(j.data,O,{x:0,y:se-1},{x:Q,y:re-1},{width:ae,height:1}),qa.copy(j.data,O,{x:0,y:0},{x:Q,y:re+se},{width:ae,height:1}),qa.copy(j.data,O,{x:ae-1,y:0},{x:Q-1,y:re},{width:1,height:se}),qa.copy(j.data,O,{x:0,y:0},{x:Q+ae,y:re},{width:1,height:se})}this.image=O,this.iconPositions=g,this.patternPositions=x}addImages(l,d,g){for(const x in l){const A=l[x],M={x:0,y:0,w:A.data.width+2*ma,h:A.data.height+2*ma};g.push(M),d[x]=new Ex(M,A),A.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(l,d){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in l.updatedImages)this.patchUpdatedImage(this.iconPositions[g],l.getImage(g),d),this.patchUpdatedImage(this.patternPositions[g],l.getImage(g),d)}patchUpdatedImage(l,d,g){if(!l||!d||l.version===d.version)return;l.version=d.version;const[x,A]=l.tl;g.update(d.data,void 0,{x,y:A})}}var Ql;Et("ImagePosition",Ex),Et("ImageAtlas",KE),o.ah=void 0,(Ql=o.ah||(o.ah={}))[Ql.none=0]="none",Ql[Ql.horizontal=1]="horizontal",Ql[Ql.vertical=2]="vertical",Ql[Ql.horizontalOnly=3]="horizontalOnly";const rm=-17;class nm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,d){const g=new nm;return g.scale=l||1,g.fontStack=d,g}static forImage(l){const d=new nm;return d.imageName=l,d}}class Pf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,d){const g=new Pf;for(let x=0;x<l.sections.length;x++){const A=l.sections[x];A.image?g.addImageSection(A):g.addTextSection(A,d)}return g}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let d="";for(let g=0;g<l.length;g++){const x=l.charCodeAt(g+1)||null,A=l.charCodeAt(g-1)||null;d+=x&&mf(x)&&!tm[l[g+1]]||A&&mf(A)&&!tm[l[g-1]]||!tm[l[g]]?l[g]:tm[l[g]]}return d}(this.text)}trim(){let l=0;for(let g=0;g<this.text.length&&By[this.text.charCodeAt(g)];g++)l++;let d=this.text.length;for(let g=this.text.length-1;g>=0&&g>=l&&By[this.text.charCodeAt(g)];g--)d--;this.text=this.text.substring(l,d),this.sectionIndex=this.sectionIndex.slice(l,d)}substring(l,d){const g=new Pf;return g.text=this.text.substring(l,d),g.sectionIndex=this.sectionIndex.slice(l,d),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,d)=>Math.max(l,this.sections[d].scale),0)}addTextSection(l,d){this.text+=l.text,this.sections.push(nm.forText(l.scale,l.fontStack||d));const g=this.sections.length-1;for(let x=0;x<l.text.length;++x)this.sectionIndex.push(g)}addImageSection(l){const d=l.image?l.image.name:"";if(d.length===0)return void ne("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(nm.forImage(d)),this.sectionIndex.push(this.sections.length-1)):ne("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function zy(h,l,d,g,x,A,M,k,O,$,j,W,Q,re,ae,se){const pe=Pf.fromFeature(h,x);let xe;W===o.ah.vertical&&pe.verticalizePunctuation();const{processBidirectionalText:Re,processStyledBidirectionalText:Se}=Js;if(Re&&pe.sections.length===1){xe=[];const Ye=Re(pe.toString(),Px(pe,$,A,l,g,re,ae));for(const Tt of Ye){const Rt=new Pf;Rt.text=Tt,Rt.sections=pe.sections;for(let wt=0;wt<Tt.length;wt++)Rt.sectionIndex.push(0);xe.push(Rt)}}else if(Se){xe=[];const Ye=Se(pe.text,pe.sectionIndex,Px(pe,$,A,l,g,re,ae));for(const Tt of Ye){const Rt=new Pf;Rt.text=Tt[0],Rt.sectionIndex=Tt[1],Rt.sections=pe.sections,xe.push(Rt)}}else xe=function(Ye,Tt){const Rt=[],wt=Ye.text;let gt=0;for(const ft of Tt)Rt.push(Ye.substring(gt,ft)),gt=ft;return gt<wt.length&&Rt.push(Ye.substring(gt,wt.length)),Rt}(pe,Px(pe,$,A,l,g,re,ae));const Pe=[],je={positionedLines:Pe,text:pe.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:W,iconsInText:!1,verticalizable:!1};return function(Ye,Tt,Rt,wt,gt,ft,Dt,pt,it,Ht,Bt,mr){let hn=0,vn=rm,Qn=0,La=0;const Xi=pt==="right"?1:pt==="left"?0:.5;let Un=0;for(const ei of gt){ei.trim();const ti=ei.getMaxScale(),ki=(ti-1)*Jn,Ji={positionedGlyphs:[],lineOffset:0};Ye.positionedLines[Un]=Ji;const Ri=Ji.positionedGlyphs;let va=0;if(!ei.length()){vn+=ft,++Un;continue}for(let ri=0;ri<ei.length();ri++){const Sr=ei.getSection(ri),Oi=ei.getSectionIndex(ri),Ti=ei.getCharCode(ri);let ni=0,co=null,Vo=null,Ho=null,al=Jn;const ho=!(it===o.ah.horizontal||!Bt&&!pf(Ti)||Bt&&(By[Ti]||(fi=Ti,bt.Arabic(fi)||bt["Arabic Supplement"](fi)||bt["Arabic Extended-A"](fi)||bt["Arabic Presentation Forms-A"](fi)||bt["Arabic Presentation Forms-B"](fi))));if(Sr.imageName){const Xa=wt[Sr.imageName];if(!Xa)continue;Ho=Sr.imageName,Ye.iconsInText=Ye.iconsInText||!0,Vo=Xa.paddedRect;const ya=Xa.displaySize;Sr.scale=Sr.scale*Jn/mr,co={width:ya[0],height:ya[1],left:ma,top:-XE,advance:ho?ya[1]:ya[0]},ni=ki+(Jn-ya[1]*Sr.scale),al=co.advance;const ol=ho?ya[0]*Sr.scale-Jn*ti:ya[1]*Sr.scale-Jn*ti;ol>0&&ol>va&&(va=ol)}else{const Xa=Rt[Sr.fontStack],ya=Xa&&Xa[Ti];if(ya&&ya.rect)Vo=ya.rect,co=ya.metrics;else{const ol=Tt[Sr.fontStack],lm=ol&&ol[Ti];if(!lm)continue;co=lm.metrics}ni=(ti-Sr.scale)*Jn}ho?(Ye.verticalizable=!0,Ri.push({glyph:Ti,imageName:Ho,x:hn,y:vn+ni,vertical:ho,scale:Sr.scale,fontStack:Sr.fontStack,sectionIndex:Oi,metrics:co,rect:Vo}),hn+=al*Sr.scale+Ht):(Ri.push({glyph:Ti,imageName:Ho,x:hn,y:vn+ni,vertical:ho,scale:Sr.scale,fontStack:Sr.fontStack,sectionIndex:Oi,metrics:co,rect:Vo}),hn+=co.advance*Sr.scale+Ht)}Ri.length!==0&&(Qn=Math.max(hn-Ht,Qn),SV(Ri,0,Ri.length-1,Xi,va)),hn=0;const ga=ft*ti+va;Ji.lineOffset=Math.max(va,ki),vn+=ga,La=Math.max(ga,La),++Un}var fi;const Si=vn-rm,{horizontalAlign:Yi,verticalAlign:Ki}=Ix(Dt);(function(ei,ti,ki,Ji,Ri,va,ga,ri,Sr){const Oi=(ti-ki)*Ri;let Ti=0;Ti=va!==ga?-ri*Ji-rm:(-Ji*Sr+.5)*ga;for(const ni of ei)for(const co of ni.positionedGlyphs)co.x+=Oi,co.y+=Ti})(Ye.positionedLines,Xi,Yi,Ki,Qn,La,ft,Si,gt.length),Ye.top+=-Ki*Si,Ye.bottom=Ye.top+Si,Ye.left+=-Yi*Qn,Ye.right=Ye.left+Qn}(je,l,d,g,xe,M,k,O,W,$,Q,se),!function(Ye){for(const Tt of Ye)if(Tt.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&je}const By={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xV={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function JE(h,l,d,g,x,A){if(l.imageName){const M=g[l.imageName];return M?M.displaySize[0]*l.scale*Jn/A+x:0}{const M=d[l.fontStack],k=M&&M[h];return k?k.metrics.advance*l.scale+x:0}}function QE(h,l,d,g){const x=Math.pow(h-l,2);return g?h<l?x/2:2*x:x+Math.abs(d)*d}function wV(h,l,d){let g=0;return h===10&&(g-=1e4),d&&(g+=150),h!==40&&h!==65288||(g+=50),l!==41&&l!==65289||(g+=50),g}function eP(h,l,d,g,x,A){let M=null,k=QE(l,d,x,A);for(const O of g){const $=QE(l-O.x,d,x,A)+O.badness;$<=k&&(M=O,k=$)}return{index:h,x:l,priorBreak:M,badness:k}}function tP(h){return h?tP(h.priorBreak).concat(h.index):[]}function Px(h,l,d,g,x,A,M){if(A!=="point")return[];if(!h)return[];const k=[],O=function(Q,re,ae,se,pe,xe){let Re=0;for(let Se=0;Se<Q.length();Se++){const Pe=Q.getSection(Se);Re+=JE(Q.getCharCode(Se),Pe,se,pe,re,xe)}return Re/Math.max(1,Math.ceil(Re/ae))}(h,l,d,g,x,M),$=h.text.indexOf("​")>=0;let j=0;for(let Q=0;Q<h.length();Q++){const re=h.getSection(Q),ae=h.getCharCode(Q);if(By[ae]||(j+=JE(ae,re,g,x,l,M)),Q<h.length()-1){const se=!((W=ae)<11904||!(bt["Bopomofo Extended"](W)||bt.Bopomofo(W)||bt["CJK Compatibility Forms"](W)||bt["CJK Compatibility Ideographs"](W)||bt["CJK Compatibility"](W)||bt["CJK Radicals Supplement"](W)||bt["CJK Strokes"](W)||bt["CJK Symbols and Punctuation"](W)||bt["CJK Unified Ideographs Extension A"](W)||bt["CJK Unified Ideographs"](W)||bt["Enclosed CJK Letters and Months"](W)||bt["Halfwidth and Fullwidth Forms"](W)||bt.Hiragana(W)||bt["Ideographic Description Characters"](W)||bt["Kangxi Radicals"](W)||bt["Katakana Phonetic Extensions"](W)||bt.Katakana(W)||bt["Vertical Forms"](W)||bt["Yi Radicals"](W)||bt["Yi Syllables"](W)));(xV[ae]||se||re.imageName)&&k.push(eP(Q+1,j,O,k,wV(ae,h.getCharCode(Q+1),se&&$),!1))}}var W;return tP(eP(h.length(),j,O,k,0,!0))}function Ix(h){let l=.5,d=.5;switch(h){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:l,verticalAlign:d}}function SV(h,l,d,g,x){if(!g&&!x)return;const A=h[d],M=(h[d].x+A.metrics.advance*A.scale)*g;for(let k=l;k<=d;k++)h[k].x-=M,h[k].y+=x}function TV(h,l,d){const{horizontalAlign:g,verticalAlign:x}=Ix(d),A=l[0]-h.displaySize[0]*g,M=l[1]-h.displaySize[1]*x;return{image:h,top:M,bottom:M+h.displaySize[1],left:A,right:A+h.displaySize[0]}}function rP(h,l,d,g,x,A){const M=h.image;let k;if(M.content){const pe=M.content,xe=M.pixelRatio||1;k=[pe[0]/xe,pe[1]/xe,M.displaySize[0]-pe[2]/xe,M.displaySize[1]-pe[3]/xe]}const O=l.left*A,$=l.right*A;let j,W,Q,re;d==="width"||d==="both"?(re=x[0]+O-g[3],W=x[0]+$+g[1]):(re=x[0]+(O+$-M.displaySize[0])/2,W=re+M.displaySize[0]);const ae=l.top*A,se=l.bottom*A;return d==="height"||d==="both"?(j=x[1]+ae-g[0],Q=x[1]+se+g[2]):(j=x[1]+(ae+se-M.displaySize[1])/2,Q=j+M.displaySize[1]),{image:M,top:j,right:W,bottom:Q,left:re,collisionPadding:k}}const im=255,ms=128,eu=im*ms;function nP(h,l){const{expression:d}=l;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new ln(h+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:x}=d;let A=0;for(;A<g.length&&g[A]<=h;)A++;A=Math.max(0,A-1);let M=A;for(;M<g.length&&g[M]<h+1;)M++;M=Math.min(g.length-1,M);const k=g[A],O=g[M];return d.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:O,interpolationType:x}:{kind:"camera",minZoom:k,maxZoom:O,minSize:d.evaluate(new ln(k)),maxSize:d.evaluate(new ln(O)),interpolationType:x}}}function Dx(h,l,d){let g="never";const x=h.get(l);return x?g=x:h.get(d)&&(g="always"),g}const CV=Jl.VectorTileFeature.types,AV=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fy(h,l,d,g,x,A,M,k,O,$,j,W,Q){const re=k?Math.min(eu,Math.round(k[0])):0,ae=k?Math.min(eu,Math.round(k[1])):0;h.emplaceBack(l,d,Math.round(32*g),Math.round(32*x),A,M,(re<<1)+(O?1:0),ae,16*$,16*j,256*W,256*Q)}function Lx(h,l,d){h.emplaceBack(l.x,l.y,d),h.emplaceBack(l.x,l.y,d),h.emplaceBack(l.x,l.y,d),h.emplaceBack(l.x,l.y,d)}function MV(h){for(const l of h.sections)if(yy(l.text))return!0;return!1}class kx{constructor(l){this.layoutVertexArray=new _e,this.indexArray=new et,this.programConfigurations=l,this.segments=new Zt,this.dynamicLayoutVertexArray=new Ie,this.opacityVertexArray=new He,this.hasVisibleVertices=!1,this.placedSymbolArray=new b}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,d,g,x){this.isEmpty()||(g&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,iV.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,aV.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,AV,!0),this.opacityVertexBuffer.itemSize=1),(g||x)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Et("SymbolBuffers",kx);class Rx{constructor(l,d,g){this.layoutVertexArray=new l,this.layoutAttributes=d,this.indexArray=new g,this.segments=new Zt,this.collisionVertexArray=new qe}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,oV.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Et("CollisionBuffers",Rx);class If{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(M=>M.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cx([]),this.placementViewportMatrix=cx([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nP(this.zoom,d["text-size"]),this.iconSizeData=nP(this.zoom,d["icon-size"]);const g=this.layers[0].layout,x=g.get("symbol-sort-key"),A=g.get("symbol-z-order");this.canOverlap=Dx(g,"text-overlap","text-allow-overlap")!=="never"||Dx(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=A!=="viewport-y"&&!x.isConstant(),this.sortFeaturesByY=(A==="viewport-y"||A==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(M=>o.ah[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=l.sourceID}createArrays(){this.text=new kx(new ui(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new kx(new ui(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new R,this.lineVertexArray=new z,this.symbolInstances=new C,this.textAnchorOffsets=new H}calculateGlyphDependencies(l,d,g,x,A){for(let M=0;M<l.length;M++)if(d[l.charCodeAt(M)]=!0,(g||x)&&A){const k=tm[l.charAt(M)];k&&(d[k.charCodeAt(0)]=!0)}}populate(l,d,g){const x=this.layers[0],A=x.layout,M=A.get("text-font"),k=A.get("text-field"),O=A.get("icon-image"),$=(k.value.kind!=="constant"||k.value.value instanceof fa&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),j=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,W=A.get("symbol-sort-key");if(this.features=[],!$&&!j)return;const Q=d.iconDependencies,re=d.glyphDependencies,ae=d.availableImages,se=new ln(this.zoom);for(const{feature:pe,id:xe,index:Re,sourceLayerIndex:Se}of l){const Pe=x._featureFilter.needGeometry,je=nl(pe,Pe);if(!x._featureFilter.filter(se,je,g))continue;let Ye,Tt;if(Pe||(je.geometry=rl(pe)),$){const wt=x.getValueAndResolveTokens("text-field",je,g,ae),gt=fa.factory(wt);MV(gt)&&(this.hasRTLText=!0),(!this.hasRTLText||Js.getRTLTextPluginStatus()==="unavailable"||this.hasRTLText&&Js.isParsed())&&(Ye=lV(gt,x,je))}if(j){const wt=x.getValueAndResolveTokens("icon-image",je,g,ae);Tt=wt instanceof Pa?wt:Pa.fromString(wt)}if(!Ye&&!Tt)continue;const Rt=this.sortFeaturesByKey?W.evaluate(je,{},g):void 0;if(this.features.push({id:xe,text:Ye,icon:Tt,index:Re,sourceLayerIndex:Se,geometry:je.geometry,properties:pe.properties,type:CV[pe.type],sortKey:Rt}),Tt&&(Q[Tt.name]=!0),Ye){const wt=M.evaluate(je,{},g).join(","),gt=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ah.vertical)>=0;for(const ft of Ye.sections)if(ft.image)Q[ft.image.name]=!0;else{const Dt=df(Ye.toString()),pt=ft.fontStack||wt,it=re[pt]=re[pt]||{};this.calculateGlyphDependencies(ft.text,it,gt,this.allowVerticalPlacement,Dt)}}}A.get("symbol-placement")==="line"&&(this.features=function(pe){const xe={},Re={},Se=[];let Pe=0;function je(wt){Se.push(pe[wt]),Pe++}function Ye(wt,gt,ft){const Dt=Re[wt];return delete Re[wt],Re[gt]=Dt,Se[Dt].geometry[0].pop(),Se[Dt].geometry[0]=Se[Dt].geometry[0].concat(ft[0]),Dt}function Tt(wt,gt,ft){const Dt=xe[gt];return delete xe[gt],xe[wt]=Dt,Se[Dt].geometry[0].shift(),Se[Dt].geometry[0]=ft[0].concat(Se[Dt].geometry[0]),Dt}function Rt(wt,gt,ft){const Dt=ft?gt[0][gt[0].length-1]:gt[0][0];return`${wt}:${Dt.x}:${Dt.y}`}for(let wt=0;wt<pe.length;wt++){const gt=pe[wt],ft=gt.geometry,Dt=gt.text?gt.text.toString():null;if(!Dt){je(wt);continue}const pt=Rt(Dt,ft),it=Rt(Dt,ft,!0);if(pt in Re&&it in xe&&Re[pt]!==xe[it]){const Ht=Tt(pt,it,ft),Bt=Ye(pt,it,Se[Ht].geometry);delete xe[pt],delete Re[it],Re[Rt(Dt,Se[Bt].geometry,!0)]=Bt,Se[Ht].geometry=null}else pt in Re?Ye(pt,it,ft):it in xe?Tt(pt,it,ft):(je(wt),xe[pt]=Pe-1,Re[it]=Pe-1)}return Se.filter(wt=>wt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,xe)=>pe.sortKey-xe.sortKey)}update(l,d,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,d,this.layers,g),this.icon.programConfigurations.updatePaintArrays(l,d,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,d){const g=this.lineVertexArray.length;if(l.segment!==void 0){let x=l.dist(d[l.segment+1]),A=l.dist(d[l.segment]);const M={};for(let k=l.segment+1;k<d.length;k++)M[k]={x:d[k].x,y:d[k].y,tileUnitDistanceFromAnchor:x},k<d.length-1&&(x+=d[k+1].dist(d[k]));for(let k=l.segment||0;k>=0;k--)M[k]={x:d[k].x,y:d[k].y,tileUnitDistanceFromAnchor:A},k>0&&(A+=d[k-1].dist(d[k]));for(let k=0;k<d.length;k++){const O=M[k];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(l,d,g,x,A,M,k,O,$,j,W,Q){const re=l.indexArray,ae=l.layoutVertexArray,se=l.segments.prepareSegment(4*d.length,ae,re,this.canOverlap?M.sortKey:void 0),pe=this.glyphOffsetArray.length,xe=se.vertexLength,Re=this.allowVerticalPlacement&&k===o.ah.vertical?Math.PI/2:0,Se=M.text&&M.text.sections;for(let Pe=0;Pe<d.length;Pe++){const{tl:je,tr:Ye,bl:Tt,br:Rt,tex:wt,pixelOffsetTL:gt,pixelOffsetBR:ft,minFontScaleX:Dt,minFontScaleY:pt,glyphOffset:it,isSDF:Ht,sectionIndex:Bt}=d[Pe],mr=se.vertexLength,hn=it[1];Fy(ae,O.x,O.y,je.x,hn+je.y,wt.x,wt.y,g,Ht,gt.x,gt.y,Dt,pt),Fy(ae,O.x,O.y,Ye.x,hn+Ye.y,wt.x+wt.w,wt.y,g,Ht,ft.x,gt.y,Dt,pt),Fy(ae,O.x,O.y,Tt.x,hn+Tt.y,wt.x,wt.y+wt.h,g,Ht,gt.x,ft.y,Dt,pt),Fy(ae,O.x,O.y,Rt.x,hn+Rt.y,wt.x+wt.w,wt.y+wt.h,g,Ht,ft.x,ft.y,Dt,pt),Lx(l.dynamicLayoutVertexArray,O,Re),re.emplaceBack(mr,mr+1,mr+2),re.emplaceBack(mr+1,mr+2,mr+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(it[0]),Pe!==d.length-1&&Bt===d[Pe+1].sectionIndex||l.programConfigurations.populatePaintArrays(ae.length,M,M.index,{},Q,Se&&Se[Bt])}l.placedSymbolArray.emplaceBack(O.x,O.y,pe,this.glyphOffsetArray.length-pe,xe,$,j,O.segment,g?g[0]:0,g?g[1]:0,x[0],x[1],k,0,!1,0,W)}_addCollisionDebugVertex(l,d,g,x,A,M){return d.emplaceBack(0,0),l.emplaceBack(g.x,g.y,x,A,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(l,d,g,x,A,M,k){const O=A.segments.prepareSegment(4,A.layoutVertexArray,A.indexArray),$=O.vertexLength,j=A.layoutVertexArray,W=A.collisionVertexArray,Q=k.anchorX,re=k.anchorY;this._addCollisionDebugVertex(j,W,M,Q,re,new v(l,d)),this._addCollisionDebugVertex(j,W,M,Q,re,new v(g,d)),this._addCollisionDebugVertex(j,W,M,Q,re,new v(g,x)),this._addCollisionDebugVertex(j,W,M,Q,re,new v(l,x)),O.vertexLength+=4;const ae=A.indexArray;ae.emplaceBack($,$+1),ae.emplaceBack($+1,$+2),ae.emplaceBack($+2,$+3),ae.emplaceBack($+3,$),O.primitiveLength+=4}addDebugCollisionBoxes(l,d,g,x){for(let A=l;A<d;A++){const M=this.collisionBoxArray.get(A);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,x?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Rx(Ne,VE.members,Qe),this.iconCollisionBox=new Rx(Ne,VE.members,Qe);for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(l,d,g,x,A,M,k,O,$){const j={};for(let W=d;W<g;W++){const Q=l.get(W);j.textBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},j.textFeatureIndex=Q.featureIndex;break}for(let W=x;W<A;W++){const Q=l.get(W);j.verticalTextBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},j.verticalTextFeatureIndex=Q.featureIndex;break}for(let W=M;W<k;W++){const Q=l.get(W);j.iconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},j.iconFeatureIndex=Q.featureIndex;break}for(let W=O;W<$;W++){const Q=l.get(W);j.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},j.verticalIconFeatureIndex=Q.featureIndex;break}return j}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const g=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,d){const g=l.placedSymbolArray.get(d),x=g.vertexStartIndex+4*g.numGlyphs;for(let A=g.vertexStartIndex;A<x;A+=4)l.indexArray.emplaceBack(A,A+1,A+2),l.indexArray.emplaceBack(A+1,A+2,A+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(l),g=Math.cos(l),x=[],A=[],M=[];for(let k=0;k<this.symbolInstances.length;++k){M.push(k);const O=this.symbolInstances.get(k);x.push(0|Math.round(d*O.anchorX+g*O.anchorY)),A.push(O.featureIndex)}return M.sort((k,O)=>x[k]-x[O]||A[O]-A[k]),M}addToSortKeyRanges(l,d){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===d?g.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const g=this.symbolInstances.get(d);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((x,A,M)=>{x>=0&&M.indexOf(x)===A&&this.addIndicesForPlacedSymbol(this.text,x)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let iP,aP;Et("SymbolBucket",If,{omit:["layers","collisionBoxArray","features","compareText"]}),If.MAX_GLYPHS=65535,If.addDynamicAttributes=Lx;var Ox={get paint(){return aP=aP||new Ii({"icon-opacity":new Yt(ye.paint_symbol["icon-opacity"]),"icon-color":new Yt(ye.paint_symbol["icon-color"]),"icon-halo-color":new Yt(ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yt(ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yt(ye.paint_symbol["icon-halo-blur"]),"icon-translate":new Ot(ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ot(ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yt(ye.paint_symbol["text-opacity"]),"text-color":new Yt(ye.paint_symbol["text-color"],{runtimeType:Fr,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Yt(ye.paint_symbol["text-halo-color"]),"text-halo-width":new Yt(ye.paint_symbol["text-halo-width"]),"text-halo-blur":new Yt(ye.paint_symbol["text-halo-blur"]),"text-translate":new Ot(ye.paint_symbol["text-translate"]),"text-translate-anchor":new Ot(ye.paint_symbol["text-translate-anchor"])})},get layout(){return iP=iP||new Ii({"symbol-placement":new Ot(ye.layout_symbol["symbol-placement"]),"symbol-spacing":new Ot(ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ot(ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yt(ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ot(ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ot(ye.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ot(ye.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ot(ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ot(ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ot(ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yt(ye.layout_symbol["icon-size"]),"icon-text-fit":new Ot(ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ot(ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yt(ye.layout_symbol["icon-image"]),"icon-rotate":new Yt(ye.layout_symbol["icon-rotate"]),"icon-padding":new Yt(ye.layout_symbol["icon-padding"]),"icon-keep-upright":new Ot(ye.layout_symbol["icon-keep-upright"]),"icon-offset":new Yt(ye.layout_symbol["icon-offset"]),"icon-anchor":new Yt(ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ot(ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ot(ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ot(ye.layout_symbol["text-rotation-alignment"]),"text-field":new Yt(ye.layout_symbol["text-field"]),"text-font":new Yt(ye.layout_symbol["text-font"]),"text-size":new Yt(ye.layout_symbol["text-size"]),"text-max-width":new Yt(ye.layout_symbol["text-max-width"]),"text-line-height":new Ot(ye.layout_symbol["text-line-height"]),"text-letter-spacing":new Yt(ye.layout_symbol["text-letter-spacing"]),"text-justify":new Yt(ye.layout_symbol["text-justify"]),"text-radial-offset":new Yt(ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ot(ye.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Yt(ye.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Yt(ye.layout_symbol["text-anchor"]),"text-max-angle":new Ot(ye.layout_symbol["text-max-angle"]),"text-writing-mode":new Ot(ye.layout_symbol["text-writing-mode"]),"text-rotate":new Yt(ye.layout_symbol["text-rotate"]),"text-padding":new Ot(ye.layout_symbol["text-padding"]),"text-keep-upright":new Ot(ye.layout_symbol["text-keep-upright"]),"text-transform":new Yt(ye.layout_symbol["text-transform"]),"text-offset":new Yt(ye.layout_symbol["text-offset"]),"text-allow-overlap":new Ot(ye.layout_symbol["text-allow-overlap"]),"text-overlap":new Ot(ye.layout_symbol["text-overlap"]),"text-ignore-placement":new Ot(ye.layout_symbol["text-ignore-placement"]),"text-optional":new Ot(ye.layout_symbol["text-optional"])})}};class oP{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Wn,this.defaultValue=l}evaluate(l){if(l.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(l.formattedSection))return d.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Et("FormatSectionOverride",oP,{omit:["defaultValue"]});class $y extends Wa{constructor(l){super(l,Ox)}recalculate(l,d){if(super.recalculate(l,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const x=[];for(const A of g)x.indexOf(A)<0&&x.push(A);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,d,g,x){const A=this.layout.get(l).evaluate(d,{},g,x),M=this._unevaluatedLayout._values[l];return M.isDataDriven()||en(M.value)||!A?A:function(k,O){return O.replace(/{([^{}]+)}/g,($,j)=>k&&j in k?String(k[j]):"")}(d.properties,A)}createBucket(l){return new If(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of Ox.paint.overridableProperties){if(!$y.hasPaintOverride(this.layout,l))continue;const d=this.paint.get(l),g=new oP(d),x=new sn(g,d.property.specification);let A=null;A=d.value.kind==="constant"||d.value.kind==="source"?new tf("source",x):new bp("composite",x,d.value.zoomStops),this.paint._values[l]=new Ga(d.property,A,d.parameters)}}_handleOverridablePaintPropertyUpdate(l,d,g){return!(!this.layout||d.isDataDriven()||g.isDataDriven())&&$y.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,d){const g=l.get("text-field"),x=Ox.paint.properties[d];let A=!1;const M=k=>{for(const O of k)if(x.overrides&&x.overrides.hasOverride(O))return void(A=!0)};if(g.value.kind==="constant"&&g.value.value instanceof fa)M(g.value.value.sections);else if(g.value.kind==="source"){const k=$=>{A||($ instanceof ls&&Hn($.value)===qn?M($.value.sections):$ instanceof Qh?M($.sections):$.eachChild(k))},O=g.value;O._styleExpression&&k(O._styleExpression.expression)}return A}}let sP;var EV={get paint(){return sP=sP||new Ii({"background-color":new Ot(ye.paint_background["background-color"]),"background-pattern":new Dp(ye.paint_background["background-pattern"]),"background-opacity":new Ot(ye.paint_background["background-opacity"])})}};class PV extends Wa{constructor(l){super(l,EV)}}let lP;var IV={get paint(){return lP=lP||new Ii({"raster-opacity":new Ot(ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ot(ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ot(ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ot(ye.paint_raster["raster-brightness-max"]),"raster-saturation":new Ot(ye.paint_raster["raster-saturation"]),"raster-contrast":new Ot(ye.paint_raster["raster-contrast"]),"raster-resampling":new Ot(ye.paint_raster["raster-resampling"]),"raster-fade-duration":new Ot(ye.paint_raster["raster-fade-duration"])})}};class DV extends Wa{constructor(l){super(l,IV)}}class LV extends Wa{constructor(l){super(l,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class kV{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const zx=63710088e-1;class tu{constructor(l,d){if(isNaN(l)||isNaN(d))throw new Error(`Invalid LngLat object: (${l}, ${d})`);if(this.lng=+l,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new tu(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const d=Math.PI/180,g=this.lat*d,x=l.lat*d,A=Math.sin(g)*Math.sin(x)+Math.cos(g)*Math.cos(x)*Math.cos((l.lng-this.lng)*d);return zx*Math.acos(Math.min(A,1))}static convert(l){if(l instanceof tu)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new tu(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new tu(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const uP=2*Math.PI*zx;function cP(h){return uP*Math.cos(h*Math.PI/180)}function hP(h){return(180+h)/360}function fP(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function dP(h,l){return h/cP(l)}function Bx(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}class Ny{constructor(l,d,g=0){this.x=+l,this.y=+d,this.z=+g}static fromLngLat(l,d=0){const g=tu.convert(l);return new Ny(hP(g.lng),fP(g.lat),dP(d,g.lat))}toLngLat(){return new tu(360*this.x-180,Bx(this.y))}toAltitude(){return this.z*cP(Bx(this.y))}meterInMercatorCoordinateUnits(){return 1/uP*(l=Bx(this.y),1/Math.cos(l*Math.PI/180));var l}}function pP(h,l,d){var g=2*Math.PI*6378137/256/Math.pow(2,d);return[h*g-2*Math.PI*6378137/2,l*g-2*Math.PI*6378137/2]}class Fx{constructor(l,d,g){if(l<0||l>25||g<0||g>=Math.pow(2,l)||d<0||d>=Math.pow(2,l))throw new Error(`x=${d}, y=${g}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=d,this.y=g,this.key=am(0,l,l,d,g)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,d,g){const x=(M=this.y,k=this.z,O=pP(256*(A=this.x),256*(M=Math.pow(2,k)-M-1),k),$=pP(256*(A+1),256*(M+1),k),O[0]+","+O[1]+","+$[0]+","+$[1]);var A,M,k,O,$;const j=function(W,Q,re){let ae,se="";for(let pe=W;pe>0;pe--)ae=1<<pe-1,se+=(Q&ae?1:0)+(re&ae?2:0);return se}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,j).replace(/{bbox-epsg-3857}/g,x)}isChildOf(l){const d=this.z-l.z;return d>0&&l.x===this.x>>d&&l.y===this.y>>d}getTilePoint(l){const d=Math.pow(2,this.z);return new v((l.x*d-this.x)*kn,(l.y*d-this.y)*kn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class mP{constructor(l,d){this.wrap=l,this.canonical=d,this.key=am(l,d.z,d.z,d.x,d.y)}}class Za{constructor(l,d,g,x,A){if(l<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${g}`);this.overscaledZ=l,this.wrap=d,this.canonical=new Fx(g,+x,+A),this.key=am(d,l,g,x,A)}clone(){return new Za(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-l;return l>this.canonical.z?new Za(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Za(l,this.wrap,l,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(l,d){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-l;return l>this.canonical.z?am(this.wrap*+d,l,this.canonical.z,this.canonical.x,this.canonical.y):am(this.wrap*+d,l,l,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const d=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>d&&l.canonical.y===this.canonical.y>>d}children(l){if(this.overscaledZ>=l)return[new Za(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,g=2*this.canonical.x,x=2*this.canonical.y;return[new Za(d,this.wrap,d,g,x),new Za(d,this.wrap,d,g+1,x),new Za(d,this.wrap,d,g,x+1),new Za(d,this.wrap,d,g+1,x+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Za(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Za(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mP(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Ny(l.x-this.wrap,l.y))}}function am(h,l,d,g,x){(h*=2)<0&&(h=-1*h-1);const A=1<<d;return(A*A*h+A*x+g).toString(36)+d.toString(36)+l.toString(36)}Et("CanonicalTileID",Fx),Et("OverscaledTileID",Za,{omit:["posMatrix"]});class vP{constructor(l,d,g,x=1,A=1,M=1,k=0){if(this.uid=l,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void ne(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const O=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=x,this.greenFactor=A,this.blueFactor=M,this.baseShift=k;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let $=0;$<O;$++)this.data[this._idx(-1,$)]=this.data[this._idx(0,$)],this.data[this._idx(O,$)]=this.data[this._idx(O-1,$)],this.data[this._idx($,-1)]=this.data[this._idx($,0)],this.data[this._idx($,O)]=this.data[this._idx($,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let $=0;$<O;$++)for(let j=0;j<O;j++){const W=this.get($,j);W>this.max&&(this.max=W),W<this.min&&(this.min=W)}}get(l,d){const g=new Uint8Array(this.data.buffer),x=4*this._idx(l,d);return this.unpack(g[x],g[x+1],g[x+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,d){if(l<-1||l>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(l+1)}unpack(l,d,g){return l*this.redFactor+d*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new qa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,d,g){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let x=d*this.dim,A=d*this.dim+this.dim,M=g*this.dim,k=g*this.dim+this.dim;switch(d){case-1:x=A-1;break;case 1:A=x+1}switch(g){case-1:M=k-1;break;case 1:k=M+1}const O=-d*this.dim,$=-g*this.dim;for(let j=M;j<k;j++)for(let W=x;W<A;W++)this.data[this._idx(W,j)]=l.data[this._idx(W+O,j+$)]}}Et("DEMData",vP);class gP{constructor(l){this._stringToNumber={},this._numberToString=[];for(let d=0;d<l.length;d++){const g=l[d];this._stringToNumber[g]=d,this._numberToString[d]=g}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class yP{constructor(l,d,g,x,A){this.type="Feature",this._vectorTileFeature=l,l._z=d,l._x=g,l._y=x,this.properties=l.properties,this.id=A}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(l[d]=this[d]);return l}}class _P{constructor(l,d){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Ks(kn,16,0),this.grid3D=new Ks(kn,16,0),this.featureIndexArray=new Z,this.promoteId=d}insert(l,d,g,x,A,M){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,x,A);const O=M?this.grid3D:this.grid;for(let $=0;$<d.length;$++){const j=d[$],W=[1/0,1/0,-1/0,-1/0];for(let Q=0;Q<j.length;Q++){const re=j[Q];W[0]=Math.min(W[0],re.x),W[1]=Math.min(W[1],re.y),W[2]=Math.max(W[2],re.x),W[3]=Math.max(W[3],re.y)}W[0]<kn&&W[1]<kn&&W[2]>=0&&W[3]>=0&&O.insert(k,W[0],W[1],W[2],W[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Jl.VectorTile(new Ax(this.rawTileData)).layers,this.sourceLayerCoder=new gP(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,d,g,x){this.loadVTLayers();const A=l.params||{},M=kn/l.tileSize/l.scale,k=of(A.filter),O=l.queryGeometry,$=l.queryPadding*M,j=xP(O),W=this.grid.query(j.minX-$,j.minY-$,j.maxX+$,j.maxY+$),Q=xP(l.cameraQueryGeometry),re=this.grid3D.query(Q.minX-$,Q.minY-$,Q.maxX+$,Q.maxY+$,(pe,xe,Re,Se)=>function(Pe,je,Ye,Tt,Rt){for(const gt of Pe)if(je<=gt.x&&Ye<=gt.y&&Tt>=gt.x&&Rt>=gt.y)return!0;const wt=[new v(je,Ye),new v(je,Rt),new v(Tt,Rt),new v(Tt,Ye)];if(Pe.length>2){for(const gt of wt)if(Sf(Pe,gt))return!0}for(let gt=0;gt<Pe.length-1;gt++)if(h9(Pe[gt],Pe[gt+1],wt))return!0;return!1}(l.cameraQueryGeometry,pe-$,xe-$,Re+$,Se+$));for(const pe of re)W.push(pe);W.sort(RV);const ae={};let se;for(let pe=0;pe<W.length;pe++){const xe=W[pe];if(xe===se)continue;se=xe;const Re=this.featureIndexArray.get(xe);let Se=null;this.loadMatchingFeature(ae,Re.bucketIndex,Re.sourceLayerIndex,Re.featureIndex,k,A.layers,A.availableImages,d,g,x,(Pe,je,Ye)=>(Se||(Se=rl(Pe)),je.queryIntersectsFeature(O,Pe,Ye,Se,this.z,l.transform,M,l.pixelPosMatrix)))}return ae}loadMatchingFeature(l,d,g,x,A,M,k,O,$,j,W){const Q=this.bucketLayerIDs[d];if(M&&!function(pe,xe){for(let Re=0;Re<pe.length;Re++)if(xe.indexOf(pe[Re])>=0)return!0;return!1}(M,Q))return;const re=this.sourceLayerCoder.decode(g),ae=this.vtLayers[re].feature(x);if(A.needGeometry){const pe=nl(ae,!0);if(!A.filter(new ln(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!A.filter(new ln(this.tileID.overscaledZ),ae))return;const se=this.getId(ae,re);for(let pe=0;pe<Q.length;pe++){const xe=Q[pe];if(M&&M.indexOf(xe)<0)continue;const Re=O[xe];if(!Re)continue;let Se={};se&&j&&(Se=j.getState(Re.sourceLayer||"_geojsonTileLayer",se));const Pe=N({},$[xe]);Pe.paint=bP(Pe.paint,Re.paint,ae,Se,k),Pe.layout=bP(Pe.layout,Re.layout,ae,Se,k);const je=!W||W(ae,Re,Se);if(!je)continue;const Ye=new yP(ae,this.z,this.x,this.y,se);Ye.layer=Pe;let Tt=l[xe];Tt===void 0&&(Tt=l[xe]=[]),Tt.push({featureIndex:x,feature:Ye,intersectionZ:je})}}lookupSymbolFeatures(l,d,g,x,A,M,k,O){const $={};this.loadVTLayers();const j=of(A);for(const W of l)this.loadMatchingFeature($,g,x,W,j,M,k,O,d);return $}hasLayer(l){for(const d of this.bucketLayerIDs)for(const g of d)if(l===g)return!0;return!1}getId(l,d){let g=l.id;return this.promoteId&&(g=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof g=="boolean"&&(g=Number(g))),g}}function bP(h,l,d,g,x){return Y(h,(A,M)=>{const k=l instanceof hc?l.get(M):null;return k&&k.evaluate?k.evaluate(d,g,x):k})}function xP(h){let l=1/0,d=1/0,g=-1/0,x=-1/0;for(const A of h)l=Math.min(l,A.x),d=Math.min(d,A.y),g=Math.max(g,A.x),x=Math.max(x,A.y);return{minX:l,minY:d,maxX:g,maxY:x}}function RV(h,l){return l-h}function wP(h,l,d,g,x){const A=[];for(let M=0;M<h.length;M++){const k=h[M];let O;for(let $=0;$<k.length-1;$++){let j=k[$],W=k[$+1];j.x<l&&W.x<l||(j.x<l?j=new v(l,j.y+(l-j.x)/(W.x-j.x)*(W.y-j.y))._round():W.x<l&&(W=new v(l,j.y+(l-j.x)/(W.x-j.x)*(W.y-j.y))._round()),j.y<d&&W.y<d||(j.y<d?j=new v(j.x+(d-j.y)/(W.y-j.y)*(W.x-j.x),d)._round():W.y<d&&(W=new v(j.x+(d-j.y)/(W.y-j.y)*(W.x-j.x),d)._round()),j.x>=g&&W.x>=g||(j.x>=g?j=new v(g,j.y+(g-j.x)/(W.x-j.x)*(W.y-j.y))._round():W.x>=g&&(W=new v(g,j.y+(g-j.x)/(W.x-j.x)*(W.y-j.y))._round()),j.y>=x&&W.y>=x||(j.y>=x?j=new v(j.x+(x-j.y)/(W.y-j.y)*(W.x-j.x),x)._round():W.y>=x&&(W=new v(j.x+(x-j.y)/(W.y-j.y)*(W.x-j.x),x)._round()),O&&j.equals(O[O.length-1])||(O=[j],A.push(O)),O.push(W)))))}}return A}Et("FeatureIndex",_P,{omit:["rawTileData","sourceLayerCoder"]});class ru extends v{constructor(l,d,g,x){super(l,d),this.angle=g,x!==void 0&&(this.segment=x)}clone(){return new ru(this.x,this.y,this.angle,this.segment)}}function SP(h,l,d,g,x){if(l.segment===void 0||d===0)return!0;let A=l,M=l.segment+1,k=0;for(;k>-d/2;){if(M--,M<0)return!1;k-=h[M].dist(A),A=h[M]}k+=h[M].dist(h[M+1]),M++;const O=[];let $=0;for(;k<d/2;){const j=h[M],W=h[M+1];if(!W)return!1;let Q=h[M-1].angleTo(j)-j.angleTo(W);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:k,angleDelta:Q}),$+=Q;k-O[0].distance>g;)$-=O.shift().angleDelta;if($>x)return!1;M++,k+=j.dist(W)}return!0}function TP(h){let l=0;for(let d=0;d<h.length-1;d++)l+=h[d].dist(h[d+1]);return l}function CP(h,l,d){return h?.6*l*d:0}function AP(h,l){return Math.max(h?h.right-h.left:0,l?l.right-l.left:0)}function OV(h,l,d,g,x,A){const M=CP(d,x,A),k=AP(d,g)*A;let O=0;const $=TP(h)/2;for(let j=0;j<h.length-1;j++){const W=h[j],Q=h[j+1],re=W.dist(Q);if(O+re>$){const ae=($-O)/re,se=Ei.number(W.x,Q.x,ae),pe=Ei.number(W.y,Q.y,ae),xe=new ru(se,pe,Q.angleTo(W),j);return xe._round(),!M||SP(h,xe,k,M,l)?xe:void 0}O+=re}}function zV(h,l,d,g,x,A,M,k,O){const $=CP(g,A,M),j=AP(g,x),W=j*M,Q=h[0].x===0||h[0].x===O||h[0].y===0||h[0].y===O;return l-W<l/4&&(l=W+l/4),MP(h,Q?l/2*k%l:(j/2+2*A)*M*k%l,l,$,d,W,Q,!1,O)}function MP(h,l,d,g,x,A,M,k,O){const $=A/2,j=TP(h);let W=0,Q=l-d,re=[];for(let ae=0;ae<h.length-1;ae++){const se=h[ae],pe=h[ae+1],xe=se.dist(pe),Re=pe.angleTo(se);for(;Q+d<W+xe;){Q+=d;const Se=(Q-W)/xe,Pe=Ei.number(se.x,pe.x,Se),je=Ei.number(se.y,pe.y,Se);if(Pe>=0&&Pe<O&&je>=0&&je<O&&Q-$>=0&&Q+$<=j){const Ye=new ru(Pe,je,Re,ae);Ye._round(),g&&!SP(h,Ye,A,g,x)||re.push(Ye)}}W+=xe}return k||re.length||M||(re=MP(h,W/2,d,g,x,A,M,!0,O)),re}Et("Anchor",ru);const Df=ma;function EP(h,l,d,g){const x=[],A=h.image,M=A.pixelRatio,k=A.paddedRect.w-2*Df,O=A.paddedRect.h-2*Df,$=h.right-h.left,j=h.bottom-h.top,W=A.stretchX||[[0,k]],Q=A.stretchY||[[0,O]],re=(ft,Dt)=>ft+Dt[1]-Dt[0],ae=W.reduce(re,0),se=Q.reduce(re,0),pe=k-ae,xe=O-se;let Re=0,Se=ae,Pe=0,je=se,Ye=0,Tt=pe,Rt=0,wt=xe;if(A.content&&g){const ft=A.content;Re=Vy(W,0,ft[0]),Pe=Vy(Q,0,ft[1]),Se=Vy(W,ft[0],ft[2]),je=Vy(Q,ft[1],ft[3]),Ye=ft[0]-Re,Rt=ft[1]-Pe,Tt=ft[2]-ft[0]-Se,wt=ft[3]-ft[1]-je}const gt=(ft,Dt,pt,it)=>{const Ht=Hy(ft.stretch-Re,Se,$,h.left),Bt=Uy(ft.fixed-Ye,Tt,ft.stretch,ae),mr=Hy(Dt.stretch-Pe,je,j,h.top),hn=Uy(Dt.fixed-Rt,wt,Dt.stretch,se),vn=Hy(pt.stretch-Re,Se,$,h.left),Qn=Uy(pt.fixed-Ye,Tt,pt.stretch,ae),La=Hy(it.stretch-Pe,je,j,h.top),Xi=Uy(it.fixed-Rt,wt,it.stretch,se),Un=new v(Ht,mr),fi=new v(vn,mr),Si=new v(vn,La),Yi=new v(Ht,La),Ki=new v(Bt/M,hn/M),ei=new v(Qn/M,Xi/M),ti=l*Math.PI/180;if(ti){const Ri=Math.sin(ti),va=Math.cos(ti),ga=[va,-Ri,Ri,va];Un._matMult(ga),fi._matMult(ga),Yi._matMult(ga),Si._matMult(ga)}const ki=ft.stretch+ft.fixed,Ji=Dt.stretch+Dt.fixed;return{tl:Un,tr:fi,bl:Yi,br:Si,tex:{x:A.paddedRect.x+Df+ki,y:A.paddedRect.y+Df+Ji,w:pt.stretch+pt.fixed-ki,h:it.stretch+it.fixed-Ji},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ki,pixelOffsetBR:ei,minFontScaleX:Tt/M/$,minFontScaleY:wt/M/j,isSDF:d}};if(g&&(A.stretchX||A.stretchY)){const ft=PP(W,pe,ae),Dt=PP(Q,xe,se);for(let pt=0;pt<ft.length-1;pt++){const it=ft[pt],Ht=ft[pt+1];for(let Bt=0;Bt<Dt.length-1;Bt++)x.push(gt(it,Dt[Bt],Ht,Dt[Bt+1]))}}else x.push(gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:O+1}));return x}function Vy(h,l,d){let g=0;for(const x of h)g+=Math.max(l,Math.min(d,x[1]))-Math.max(l,Math.min(d,x[0]));return g}function PP(h,l,d){const g=[{fixed:-Df,stretch:0}];for(const[x,A]of h){const M=g[g.length-1];g.push({fixed:x-M.stretch,stretch:M.stretch}),g.push({fixed:x-M.stretch,stretch:M.stretch+(A-x)})}return g.push({fixed:l+Df,stretch:d}),g}function Hy(h,l,d,g){return h/l*d+g}function Uy(h,l,d,g){return h-l*d/g}class jy{constructor(l,d,g,x,A,M,k,O,$,j){if(this.boxStartIndex=l.length,$){let W=M.top,Q=M.bottom;const re=M.collisionPadding;re&&(W-=re[1],Q+=re[3]);let ae=Q-W;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{let W=M.top*k-O[0],Q=M.bottom*k+O[2],re=M.left*k-O[3],ae=M.right*k+O[1];const se=M.collisionPadding;if(se&&(re-=se[0]*k,W-=se[1]*k,ae+=se[2]*k,Q+=se[3]*k),j){const pe=new v(re,W),xe=new v(ae,W),Re=new v(re,Q),Se=new v(ae,Q),Pe=j*Math.PI/180;pe._rotate(Pe),xe._rotate(Pe),Re._rotate(Pe),Se._rotate(Pe),re=Math.min(pe.x,xe.x,Re.x,Se.x),ae=Math.max(pe.x,xe.x,Re.x,Se.x),W=Math.min(pe.y,xe.y,Re.y,Se.y),Q=Math.max(pe.y,xe.y,Re.y,Se.y)}l.emplaceBack(d.x,d.y,re,W,ae,Q,g,x,A)}this.boxEndIndex=l.length}}class BV{constructor(l=[],d=FV){if(this.data=l,this.length=this.data.length,this.compare=d,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const l=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:d,compare:g}=this,x=d[l];for(;l>0;){const A=l-1>>1,M=d[A];if(g(x,M)>=0)break;d[l]=M,l=A}d[l]=x}_down(l){const{data:d,compare:g}=this,x=this.length>>1,A=d[l];for(;l<x;){let M=1+(l<<1),k=d[M];const O=M+1;if(O<this.length&&g(d[O],k)<0&&(M=O,k=d[O]),g(k,A)>=0)break;d[l]=k,l=M}d[l]=A}}function FV(h,l){return h<l?-1:h>l?1:0}function $V(h,l=1,d=!1){let g=1/0,x=1/0,A=-1/0,M=-1/0;const k=h[0];for(let re=0;re<k.length;re++){const ae=k[re];(!re||ae.x<g)&&(g=ae.x),(!re||ae.y<x)&&(x=ae.y),(!re||ae.x>A)&&(A=ae.x),(!re||ae.y>M)&&(M=ae.y)}const O=Math.min(A-g,M-x);let $=O/2;const j=new BV([],NV);if(O===0)return new v(g,x);for(let re=g;re<A;re+=O)for(let ae=x;ae<M;ae+=O)j.push(new Lf(re+$,ae+$,$,h));let W=function(re){let ae=0,se=0,pe=0;const xe=re[0];for(let Re=0,Se=xe.length,Pe=Se-1;Re<Se;Pe=Re++){const je=xe[Re],Ye=xe[Pe],Tt=je.x*Ye.y-Ye.x*je.y;se+=(je.x+Ye.x)*Tt,pe+=(je.y+Ye.y)*Tt,ae+=3*Tt}return new Lf(se/ae,pe/ae,0,re)}(h),Q=j.length;for(;j.length;){const re=j.pop();(re.d>W.d||!W.d)&&(W=re,d&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,Q)),re.max-W.d<=l||($=re.h/2,j.push(new Lf(re.p.x-$,re.p.y-$,$,h)),j.push(new Lf(re.p.x+$,re.p.y-$,$,h)),j.push(new Lf(re.p.x-$,re.p.y+$,$,h)),j.push(new Lf(re.p.x+$,re.p.y+$,$,h)),Q+=4)}return d&&(console.log(`num probes: ${Q}`),console.log(`best distance: ${W.d}`)),W.p}function NV(h,l){return l.max-h.max}function Lf(h,l,d,g){this.p=new v(h,l),this.h=d,this.d=function(x,A){let M=!1,k=1/0;for(let O=0;O<A.length;O++){const $=A[O];for(let j=0,W=$.length,Q=W-1;j<W;Q=j++){const re=$[j],ae=$[Q];re.y>x.y!=ae.y>x.y&&x.x<(ae.x-re.x)*(x.y-re.y)/(ae.y-re.y)+re.x&&(M=!M),k=Math.min(k,fE(x,re,ae))}}return(M?1:-1)*Math.sqrt(k)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var wi;o.ap=void 0,(wi=o.ap||(o.ap={}))[wi.center=1]="center",wi[wi.left=2]="left",wi[wi.right=3]="right",wi[wi.top=4]="top",wi[wi.bottom=5]="bottom",wi[wi["top-left"]=6]="top-left",wi[wi["top-right"]=7]="top-right",wi[wi["bottom-left"]=8]="bottom-left",wi[wi["bottom-right"]=9]="bottom-right";const nu=7,$x=Number.POSITIVE_INFINITY;function IP(h,l){return l[1]!==$x?function(d,g,x){let A=0,M=0;switch(g=Math.abs(g),x=Math.abs(x),d){case"top-right":case"top-left":case"top":M=x-nu;break;case"bottom-right":case"bottom-left":case"bottom":M=-x+nu}switch(d){case"top-right":case"bottom-right":case"right":A=-g;break;case"top-left":case"bottom-left":case"left":A=g}return[A,M]}(h,l[0],l[1]):function(d,g){let x=0,A=0;g<0&&(g=0);const M=g/Math.SQRT2;switch(d){case"top-right":case"top-left":A=M-nu;break;case"bottom-right":case"bottom-left":A=-M+nu;break;case"bottom":A=-g+nu;break;case"top":A=g-nu}switch(d){case"top-right":case"bottom-right":x=-M;break;case"top-left":case"bottom-left":x=M;break;case"left":x=g;break;case"right":x=-g}return[x,A]}(h,l[0])}function DP(h,l,d){var g;const x=h.layout,A=(g=x.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(l,{},d);if(A){const k=A.values,O=[];for(let $=0;$<k.length;$+=2){const j=O[$]=k[$],W=k[$+1].map(Q=>Q*Jn);j.startsWith("top")?W[1]-=nu:j.startsWith("bottom")&&(W[1]+=nu),O[$+1]=W}return new Ea(O)}const M=x.get("text-variable-anchor");if(M){let k;k=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[x.get("text-radial-offset").evaluate(l,{},d)*Jn,$x]:x.get("text-offset").evaluate(l,{},d).map($=>$*Jn);const O=[];for(const $ of M)O.push($,IP($,k));return new Ea(O)}return null}function Nx(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function VV(h,l,d,g,x,A,M,k,O,$,j){let W=A.textMaxSize.evaluate(l,{});W===void 0&&(W=M);const Q=h.layers[0].layout,re=Q.get("icon-offset").evaluate(l,{},j),ae=kP(d.horizontal),se=M/24,pe=h.tilePixelRatio*se,xe=h.tilePixelRatio*W/24,Re=h.tilePixelRatio*k,Se=h.tilePixelRatio*Q.get("symbol-spacing"),Pe=Q.get("text-padding")*h.tilePixelRatio,je=function(it,Ht,Bt,mr=1){const hn=it.get("icon-padding").evaluate(Ht,{},Bt),vn=hn&&hn.values;return[vn[0]*mr,vn[1]*mr,vn[2]*mr,vn[3]*mr]}(Q,l,j,h.tilePixelRatio),Ye=Q.get("text-max-angle")/180*Math.PI,Tt=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point",Rt=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",wt=Q.get("symbol-placement"),gt=Se/2,ft=Q.get("icon-text-fit");let Dt;g&&ft!=="none"&&(h.allowVerticalPlacement&&d.vertical&&(Dt=rP(g,d.vertical,ft,Q.get("icon-text-fit-padding"),re,se)),ae&&(g=rP(g,ae,ft,Q.get("icon-text-fit-padding"),re,se)));const pt=(it,Ht)=>{Ht.x<0||Ht.x>=kn||Ht.y<0||Ht.y>=kn||function(Bt,mr,hn,vn,Qn,La,Xi,Un,fi,Si,Yi,Ki,ei,ti,ki,Ji,Ri,va,ga,ri,Sr,Oi,Ti,ni,co){const Vo=Bt.addToLineVertexArray(mr,hn);let Ho,al,ho,Xa,ya=0,ol=0,lm=0,BP=0,Zx=-1,Xx=-1;const sl={};let FP=Yr("");if(Bt.allowVerticalPlacement&&vn.vertical){const zi=Un.layout.get("text-rotate").evaluate(Sr,{},ni)+90;ho=new jy(fi,mr,Si,Yi,Ki,vn.vertical,ei,ti,ki,zi),Xi&&(Xa=new jy(fi,mr,Si,Yi,Ki,Xi,Ri,va,ki,zi))}if(Qn){const zi=Un.layout.get("icon-rotate").evaluate(Sr,{}),Ya=Un.layout.get("icon-text-fit")!=="none",yc=EP(Qn,zi,Ti,Ya),jo=Xi?EP(Xi,zi,Ti,Ya):void 0;al=new jy(fi,mr,Si,Yi,Ki,Qn,Ri,va,!1,zi),ya=4*yc.length;const _c=Bt.iconSizeData;let vs=null;_c.kind==="source"?(vs=[ms*Un.layout.get("icon-size").evaluate(Sr,{})],vs[0]>eu&&ne(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${im}. Reduce your "icon-size".`)):_c.kind==="composite"&&(vs=[ms*Oi.compositeIconSizes[0].evaluate(Sr,{},ni),ms*Oi.compositeIconSizes[1].evaluate(Sr,{},ni)],(vs[0]>eu||vs[1]>eu)&&ne(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${im}. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,yc,vs,ri,ga,Sr,o.ah.none,mr,Vo.lineStartIndex,Vo.lineLength,-1,ni),Zx=Bt.icon.placedSymbolArray.length-1,jo&&(ol=4*jo.length,Bt.addSymbols(Bt.icon,jo,vs,ri,ga,Sr,o.ah.vertical,mr,Vo.lineStartIndex,Vo.lineLength,-1,ni),Xx=Bt.icon.placedSymbolArray.length-1)}const $P=Object.keys(vn.horizontal);for(const zi of $P){const Ya=vn.horizontal[zi];if(!Ho){FP=Yr(Ya.text);const jo=Un.layout.get("text-rotate").evaluate(Sr,{},ni);Ho=new jy(fi,mr,Si,Yi,Ki,Ya,ei,ti,ki,jo)}const yc=Ya.positionedLines.length===1;if(lm+=LP(Bt,mr,Ya,La,Un,ki,Sr,Ji,Vo,vn.vertical?o.ah.horizontal:o.ah.horizontalOnly,yc?$P:[zi],sl,Zx,Oi,ni),yc)break}vn.vertical&&(BP+=LP(Bt,mr,vn.vertical,La,Un,ki,Sr,Ji,Vo,o.ah.vertical,["vertical"],sl,Xx,Oi,ni));const jV=Ho?Ho.boxStartIndex:Bt.collisionBoxArray.length,GV=Ho?Ho.boxEndIndex:Bt.collisionBoxArray.length,WV=ho?ho.boxStartIndex:Bt.collisionBoxArray.length,qV=ho?ho.boxEndIndex:Bt.collisionBoxArray.length,ZV=al?al.boxStartIndex:Bt.collisionBoxArray.length,XV=al?al.boxEndIndex:Bt.collisionBoxArray.length,YV=Xa?Xa.boxStartIndex:Bt.collisionBoxArray.length,KV=Xa?Xa.boxEndIndex:Bt.collisionBoxArray.length;let Uo=-1;const Wy=(zi,Ya)=>zi&&zi.circleDiameter?Math.max(zi.circleDiameter,Ya):Ya;Uo=Wy(Ho,Uo),Uo=Wy(ho,Uo),Uo=Wy(al,Uo),Uo=Wy(Xa,Uo);const NP=Uo>-1?1:0;NP&&(Uo*=co/Jn),Bt.glyphOffsetArray.length>=If.MAX_GLYPHS&&ne("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Sr.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,Sr.sortKey);const JV=DP(Un,Sr,ni),[QV,eH]=function(zi,Ya){const yc=zi.length,jo=Ya==null?void 0:Ya.values;if((jo==null?void 0:jo.length)>0)for(let _c=0;_c<jo.length;_c+=2){const vs=jo[_c+1];zi.emplaceBack(o.ap[jo[_c]],vs[0],vs[1])}return[yc,zi.length]}(Bt.textAnchorOffsets,JV);Bt.symbolInstances.emplaceBack(mr.x,mr.y,sl.right>=0?sl.right:-1,sl.center>=0?sl.center:-1,sl.left>=0?sl.left:-1,sl.vertical||-1,Zx,Xx,FP,jV,GV,WV,qV,ZV,XV,YV,KV,Si,lm,BP,ya,ol,NP,0,ei,Uo,QV,eH)}(h,Ht,it,d,g,x,Dt,h.layers[0],h.collisionBoxArray,l.index,l.sourceLayerIndex,h.index,pe,[Pe,Pe,Pe,Pe],Tt,O,Re,je,Rt,re,l,A,$,j,M)};if(wt==="line")for(const it of wP(l.geometry,0,0,kn,kn)){const Ht=zV(it,Se,Ye,d.vertical||ae,g,24,xe,h.overscaling,kn);for(const Bt of Ht)ae&&HV(h,ae.text,gt,Bt)||pt(it,Bt)}else if(wt==="line-center"){for(const it of l.geometry)if(it.length>1){const Ht=OV(it,Ye,d.vertical||ae,g,24,xe);Ht&&pt(it,Ht)}}else if(l.type==="Polygon")for(const it of gx(l.geometry,0)){const Ht=$V(it,16);pt(it[0],new ru(Ht.x,Ht.y,0))}else if(l.type==="LineString")for(const it of l.geometry)pt(it,new ru(it[0].x,it[0].y,0));else if(l.type==="Point")for(const it of l.geometry)for(const Ht of it)pt([Ht],new ru(Ht.x,Ht.y,0))}function LP(h,l,d,g,x,A,M,k,O,$,j,W,Q,re,ae){const se=function(Re,Se,Pe,je,Ye,Tt,Rt,wt){const gt=je.layout.get("text-rotate").evaluate(Tt,{})*Math.PI/180,ft=[];for(const Dt of Se.positionedLines)for(const pt of Dt.positionedGlyphs){if(!pt.rect)continue;const it=pt.rect||{};let Ht=XE+1,Bt=!0,mr=1,hn=0;const vn=(Ye||wt)&&pt.vertical,Qn=pt.metrics.advance*pt.scale/2;if(wt&&Se.verticalizable&&(hn=Dt.lineOffset/2-(pt.imageName?-(Jn-pt.metrics.width*pt.scale)/2:(pt.scale-1)*Jn)),pt.imageName){const ri=Rt[pt.imageName];Bt=ri.sdf,mr=ri.pixelRatio,Ht=ma/mr}const La=Ye?[pt.x+Qn,pt.y]:[0,0];let Xi=Ye?[0,0]:[pt.x+Qn+Pe[0],pt.y+Pe[1]-hn],Un=[0,0];vn&&(Un=Xi,Xi=[0,0]);const fi=pt.metrics.isDoubleResolution?2:1,Si=(pt.metrics.left-Ht)*pt.scale-Qn+Xi[0],Yi=(-pt.metrics.top-Ht)*pt.scale+Xi[1],Ki=Si+it.w/fi*pt.scale/mr,ei=Yi+it.h/fi*pt.scale/mr,ti=new v(Si,Yi),ki=new v(Ki,Yi),Ji=new v(Si,ei),Ri=new v(Ki,ei);if(vn){const ri=new v(-Qn,Qn-rm),Sr=-Math.PI/2,Oi=Jn/2-Qn,Ti=new v(5-rm-Oi,-(pt.imageName?Oi:0)),ni=new v(...Un);ti._rotateAround(Sr,ri)._add(Ti)._add(ni),ki._rotateAround(Sr,ri)._add(Ti)._add(ni),Ji._rotateAround(Sr,ri)._add(Ti)._add(ni),Ri._rotateAround(Sr,ri)._add(Ti)._add(ni)}if(gt){const ri=Math.sin(gt),Sr=Math.cos(gt),Oi=[Sr,-ri,ri,Sr];ti._matMult(Oi),ki._matMult(Oi),Ji._matMult(Oi),Ri._matMult(Oi)}const va=new v(0,0),ga=new v(0,0);ft.push({tl:ti,tr:ki,bl:Ji,br:Ri,tex:it,writingMode:Se.writingMode,glyphOffset:La,sectionIndex:pt.sectionIndex,isSDF:Bt,pixelOffsetTL:va,pixelOffsetBR:ga,minFontScaleX:0,minFontScaleY:0})}return ft}(0,d,k,x,A,M,g,h.allowVerticalPlacement),pe=h.textSizeData;let xe=null;pe.kind==="source"?(xe=[ms*x.layout.get("text-size").evaluate(M,{})],xe[0]>eu&&ne(`${h.layerIds[0]}: Value for "text-size" is >= ${im}. Reduce your "text-size".`)):pe.kind==="composite"&&(xe=[ms*re.compositeTextSizes[0].evaluate(M,{},ae),ms*re.compositeTextSizes[1].evaluate(M,{},ae)],(xe[0]>eu||xe[1]>eu)&&ne(`${h.layerIds[0]}: Value for "text-size" is >= ${im}. Reduce your "text-size".`)),h.addSymbols(h.text,se,xe,k,A,M,$,l,O.lineStartIndex,O.lineLength,Q,ae);for(const Re of j)W[Re]=h.text.placedSymbolArray.length-1;return 4*se.length}function kP(h){for(const l in h)return h[l];return null}function HV(h,l,d,g){const x=h.compareText;if(l in x){const A=x[l];for(let M=A.length-1;M>=0;M--)if(g.dist(A[M])<d)return!0}else x[l]=[];return x[l].push(g),!1}const RP=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Vx{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,g]=new Uint8Array(l,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=g>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const A=RP[15&g];if(!A)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(l,2,1),[k]=new Uint32Array(l,4,1);return new Vx(k,M,A,l)}constructor(l,d=64,g=Float64Array,x){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=g,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const A=RP.indexOf(this.ArrayType),M=2*l*this.ArrayType.BYTES_PER_ELEMENT,k=l*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-k%8)%8;if(A<0)throw new Error(`Unexpected typed array class: ${g}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+k+O,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+M+k+O),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+k+O,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+A]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=l)}add(l,d){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=l,this.coords[this._pos++]=d,g}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return Hx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,d,g,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:A,coords:M,nodeSize:k}=this,O=[0,A.length-1,0],$=[];for(;O.length;){const j=O.pop()||0,W=O.pop()||0,Q=O.pop()||0;if(W-Q<=k){for(let pe=Q;pe<=W;pe++){const xe=M[2*pe],Re=M[2*pe+1];xe>=l&&xe<=g&&Re>=d&&Re<=x&&$.push(A[pe])}continue}const re=Q+W>>1,ae=M[2*re],se=M[2*re+1];ae>=l&&ae<=g&&se>=d&&se<=x&&$.push(A[re]),(j===0?l<=ae:d<=se)&&(O.push(Q),O.push(re-1),O.push(1-j)),(j===0?g>=ae:x>=se)&&(O.push(re+1),O.push(W),O.push(1-j))}return $}within(l,d,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:A,nodeSize:M}=this,k=[0,x.length-1,0],O=[],$=g*g;for(;k.length;){const j=k.pop()||0,W=k.pop()||0,Q=k.pop()||0;if(W-Q<=M){for(let pe=Q;pe<=W;pe++)zP(A[2*pe],A[2*pe+1],l,d)<=$&&O.push(x[pe]);continue}const re=Q+W>>1,ae=A[2*re],se=A[2*re+1];zP(ae,se,l,d)<=$&&O.push(x[re]),(j===0?l-g<=ae:d-g<=se)&&(k.push(Q),k.push(re-1),k.push(1-j)),(j===0?l+g>=ae:d+g>=se)&&(k.push(re+1),k.push(W),k.push(1-j))}return O}}function Hx(h,l,d,g,x,A){if(x-g<=d)return;const M=g+x>>1;OP(h,l,M,g,x,A),Hx(h,l,d,g,M-1,1-A),Hx(h,l,d,M+1,x,1-A)}function OP(h,l,d,g,x,A){for(;x>g;){if(x-g>600){const $=x-g+1,j=d-g+1,W=Math.log($),Q=.5*Math.exp(2*W/3),re=.5*Math.sqrt(W*Q*($-Q)/$)*(j-$/2<0?-1:1);OP(h,l,d,Math.max(g,Math.floor(d-j*Q/$+re)),Math.min(x,Math.floor(d+($-j)*Q/$+re)),A)}const M=l[2*d+A];let k=g,O=x;for(om(h,l,g,d),l[2*x+A]>M&&om(h,l,g,x);k<O;){for(om(h,l,k,O),k++,O--;l[2*k+A]<M;)k++;for(;l[2*O+A]>M;)O--}l[2*g+A]===M?om(h,l,g,O):(O++,om(h,l,O,x)),O<=d&&(g=O+1),d<=O&&(x=O-1)}}function om(h,l,d,g){Ux(h,d,g),Ux(l,2*d,2*g),Ux(l,2*d+1,2*g+1)}function Ux(h,l,d){const g=h[l];h[l]=h[d],h[d]=g}function zP(h,l,d,g){const x=h-d,A=l-g;return x*x+A*A}var jx;o.bc=void 0,(jx=o.bc||(o.bc={})).create="create",jx.load="load",jx.fullLoad="fullLoad";let Gy=null,sm=[];const Gx=1e3/60,Wx="loadTime",qx="fullLoadTime",UV={mark(h){performance.mark(h)},frame(h){const l=h;Gy!=null&&sm.push(l-Gy),Gy=l},clearMetrics(){Gy=null,sm=[],performance.clearMeasures(Wx),performance.clearMeasures(qx);for(const h in o.bc)performance.clearMarks(o.bc[h])},getPerformanceMetrics(){performance.measure(Wx,o.bc.create,o.bc.load),performance.measure(qx,o.bc.create,o.bc.fullLoad);const h=performance.getEntriesByName(Wx)[0].duration,l=performance.getEntriesByName(qx)[0].duration,d=sm.length,g=1/(sm.reduce((A,M)=>A+M,0)/d/1e3),x=sm.filter(A=>A>Gx).reduce((A,M)=>A+(M-Gx)/Gx,0);return{loadTime:h,fullLoadTime:l,fps:g,percentDroppedFrames:x/(d+x)*100,totalFrames:d}}};o.$=Zt,o.A=Tf,o.B=function(h){if(Ve==null){const l=h.navigator?h.navigator.userAgent:null;Ve=!!h.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ve},o.C=class{constructor(h,l){this.target=h,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new kV(()=>this.process()),this.subscription=function(d,g,x,A){return d.addEventListener(g,x,!1),{unsubscribe:()=>{d.removeEventListener(g,x,!1)}}}(this.target,"message",d=>this.receive(d)),this.globalScope=me(self)?h:window}registerMessageHandler(h,l){this.messageHandlers[h]=l}sendAsync(h,l){return new Promise((d,g)=>{const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[x]={resolve:d,reject:g},l&&l.signal.addEventListener("abort",()=>{delete this.resolveRejects[x];const k={id:x,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)},{once:!0});const A=[],M=Object.assign(Object.assign({},h),{id:x,sourceMapId:this.mapId,origin:location.origin,data:ql(h.data,A)});this.target.postMessage(M,{transfer:A})})}receive(h){const l=h.data,d=l.id;if(l.origin===location.origin&&(!l.targetMapId||this.mapId===l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[d];const g=this.abortControllers[d];return delete this.abortControllers[d],void(g&&g.abort())}if(me(self)||l.mustQueue)return this.tasks[d]=l,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,l)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),l=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(h,l)}processTask(h,l){return s(this,void 0,void 0,function*(){if(l.type==="<response>"){const x=this.resolveRejects[h];return delete this.resolveRejects[h],x?void(l.error?x.reject(uc(l.error)):x.resolve(uc(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=uc(l.data),g=new AbortController;this.abortControllers[h]=g;try{const x=yield this.messageHandlers[l.type](l.sourceMapId,d,g);this.completeTask(h,null,x)}catch(x){this.completeTask(h,x)}})}completeTask(h,l,d){const g=[];delete this.abortControllers[h];const x={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?ql(l):null,data:ql(d,g)};this.target.postMessage(x,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.D=Ot,o.E=Xe,o.F=function(){var h=new Tf(16);return Tf!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},o.G=Ue,o.H=function(h,l,d){var g,x,A,M,k,O,$,j,W,Q,re,ae,se=d[0],pe=d[1],xe=d[2];return l===h?(h[12]=l[0]*se+l[4]*pe+l[8]*xe+l[12],h[13]=l[1]*se+l[5]*pe+l[9]*xe+l[13],h[14]=l[2]*se+l[6]*pe+l[10]*xe+l[14],h[15]=l[3]*se+l[7]*pe+l[11]*xe+l[15]):(x=l[1],A=l[2],M=l[3],k=l[4],O=l[5],$=l[6],j=l[7],W=l[8],Q=l[9],re=l[10],ae=l[11],h[0]=g=l[0],h[1]=x,h[2]=A,h[3]=M,h[4]=k,h[5]=O,h[6]=$,h[7]=j,h[8]=W,h[9]=Q,h[10]=re,h[11]=ae,h[12]=g*se+k*pe+W*xe+l[12],h[13]=x*se+O*pe+Q*xe+l[13],h[14]=A*se+$*pe+re*xe+l[14],h[15]=M*se+j*pe+ae*xe+l[15]),h},o.I=Ex,o.J=function(h,l,d){var g=d[0],x=d[1],A=d[2];return h[0]=l[0]*g,h[1]=l[1]*g,h[2]=l[2]*g,h[3]=l[3]*g,h[4]=l[4]*x,h[5]=l[5]*x,h[6]=l[6]*x,h[7]=l[7]*x,h[8]=l[8]*A,h[9]=l[9]*A,h[10]=l[10]*A,h[11]=l[11]*A,h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},o.K=vE,o.L=function(h,l){const d={};for(let g=0;g<l.length;g++){const x=l[g];x in h&&(d[x]=h[x])}return d},o.M=tu,o.N=hP,o.O=fP,o.P=v,o.Q=Za,o.R=qa,o.S=I,o.T=_y,o.U=D,o.V=_t,o.W=kn,o.X=Bn,o.Y=Ny,o.Z=class extends Rp{},o._=s,o.a=wr,o.a$=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]+h[3]*l[3]},o.a0=Fx,o.a1=Ke,o.a2=h=>{const l=window.document.createElement("video");return l.muted=!0,new Promise(d=>{l.onloadstart=()=>{d(l)};for(const g of h){const x=window.document.createElement("source");vt(g)||(l.crossOrigin="Anonymous"),x.src=g,l.appendChild(x)}})},o.a3=function(){return G++},o.a4=u,o.a5=If,o.a6=of,o.a7=nl,o.a8=ln,o.a9=yP,o.aA=J,o.aB=function(h,l){if(!h)return[{command:"setStyle",args:[l]}];let d=[];try{if(!Ze(h.version,l.version))return[{command:"setStyle",args:[l]}];Ze(h.center,l.center)||d.push({command:"setCenter",args:[l.center]}),Ze(h.zoom,l.zoom)||d.push({command:"setZoom",args:[l.zoom]}),Ze(h.bearing,l.bearing)||d.push({command:"setBearing",args:[l.bearing]}),Ze(h.pitch,l.pitch)||d.push({command:"setPitch",args:[l.pitch]}),Ze(h.sprite,l.sprite)||d.push({command:"setSprite",args:[l.sprite]}),Ze(h.glyphs,l.glyphs)||d.push({command:"setGlyphs",args:[l.glyphs]}),Ze(h.transition,l.transition)||d.push({command:"setTransition",args:[l.transition]}),Ze(h.light,l.light)||d.push({command:"setLight",args:[l.light]}),Ze(h.terrain,l.terrain)||d.push({command:"setTerrain",args:[l.terrain]});const g={},x=[];(function(M,k,O,$){let j;for(j in k=k||{},M=M||{})Object.prototype.hasOwnProperty.call(M,j)&&(Object.prototype.hasOwnProperty.call(k,j)||Lt(j,O,$));for(j in k)Object.prototype.hasOwnProperty.call(k,j)&&(Object.prototype.hasOwnProperty.call(M,j)?Ze(M[j],k[j])||(M[j].type==="geojson"&&k[j].type==="geojson"&&Vt(M,k,j)?ut(O,{command:"setGeoJSONSourceData",args:[j,k[j].data]}):qt(j,k,O,$)):nt(j,k,O))})(h.sources,l.sources,x,g);const A=[];h.layers&&h.layers.forEach(M=>{"source"in M&&g[M.source]?d.push({command:"removeLayer",args:[M.id]}):A.push(M)}),d=d.concat(x),function(M,k,O){k=k||[];const $=(M=M||[]).map(gr),j=k.map(gr),W=M.reduce(Pr,{}),Q=k.reduce(Pr,{}),re=$.slice(),ae=Object.create(null);let se,pe,xe,Re,Se;for(let Pe=0,je=0;Pe<$.length;Pe++)se=$[Pe],Object.prototype.hasOwnProperty.call(Q,se)?je++:(ut(O,{command:"removeLayer",args:[se]}),re.splice(re.indexOf(se,je),1));for(let Pe=0,je=0;Pe<j.length;Pe++)se=j[j.length-1-Pe],re[re.length-1-Pe]!==se&&(Object.prototype.hasOwnProperty.call(W,se)?(ut(O,{command:"removeLayer",args:[se]}),re.splice(re.lastIndexOf(se,re.length-je),1)):je++,Re=re[re.length-Pe],ut(O,{command:"addLayer",args:[Q[se],Re]}),re.splice(re.length-Pe,0,se),ae[se]=!0);for(let Pe=0;Pe<j.length;Pe++)if(se=j[Pe],pe=W[se],xe=Q[se],!ae[se]&&!Ze(pe,xe))if(Ze(pe.source,xe.source)&&Ze(pe["source-layer"],xe["source-layer"])&&Ze(pe.type,xe.type)){for(Se in er(pe.layout,xe.layout,O,se,null,"setLayoutProperty"),er(pe.paint,xe.paint,O,se,null,"setPaintProperty"),Ze(pe.filter,xe.filter)||ut(O,{command:"setFilter",args:[se,xe.filter]}),Ze(pe.minzoom,xe.minzoom)&&Ze(pe.maxzoom,xe.maxzoom)||ut(O,{command:"setLayerZoomRange",args:[se,xe.minzoom,xe.maxzoom]}),pe)Object.prototype.hasOwnProperty.call(pe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?er(pe[Se],xe[Se],O,se,Se.slice(6),"setPaintProperty"):Ze(pe[Se],xe[Se])||ut(O,{command:"setLayerProperty",args:[se,Se,xe[Se]]}));for(Se in xe)Object.prototype.hasOwnProperty.call(xe,Se)&&!Object.prototype.hasOwnProperty.call(pe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?er(pe[Se],xe[Se],O,se,Se.slice(6),"setPaintProperty"):Ze(pe[Se],xe[Se])||ut(O,{command:"setLayerProperty",args:[se,Se,xe[Se]]}))}else ut(O,{command:"removeLayer",args:[se]}),Re=re[re.lastIndexOf(se)+1],ut(O,{command:"addLayer",args:[xe,Re]})}(A,l.layers,d)}catch(g){console.warn("Unable to compute style diff:",g),d=[{command:"setStyle",args:[l]}]}return d},o.aC=function(h){const l=[],d=h.id;return d===void 0&&l.push({message:`layers.${d}: missing required property "id"`}),h.render===void 0&&l.push({message:`layers.${d}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&l.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),l},o.aD=function h(l,d){if(Array.isArray(l)){if(!Array.isArray(d)||l.length!==d.length)return!1;for(let g=0;g<l.length;g++)if(!h(l[g],d[g]))return!1;return!0}if(typeof l=="object"&&l!==null&&d!==null){if(typeof d!="object"||Object.keys(l).length!==Object.keys(d).length)return!1;for(const g in l)if(!h(l[g],d[g]))return!1;return!0}return l===d},o.aE=Y,o.aF=ee,o.aG=class extends xi{constructor(h,l){super(h,l),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},o.aH=Da,o.aI=class extends xi{constructor(h,l){super(h,l),this.current=Kl}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let l=1;l<16;l++)if(h[l]!==this.current[l]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},o.aJ=ds,o.aK=class extends xi{constructor(h,l){super(h,l),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},o.aL=class extends xi{constructor(h,l){super(h,l),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},o.aM=Yl,o.aN=function(h,l,d,g,x,A,M){var k=1/(l-d),O=1/(g-x),$=1/(A-M);return h[0]=-2*k,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*O,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*$,h[11]=0,h[12]=(l+d)*k,h[13]=(x+g)*O,h[14]=(M+A)*$,h[15]=1,h},o.aO=jr,o.aP=d9,o.aQ=class extends pc{},o.aR=sV,o.aS=class extends Qs{},o.aT=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},o.aU=xE,o.aV=ie,o.aW=class extends bf{},o.aX=et,o.aY=function(h,l){var d=h[0],g=h[1],x=h[2],A=h[3],M=h[4],k=h[5],O=h[6],$=h[7],j=h[8],W=h[9],Q=h[10],re=h[11],ae=h[12],se=h[13],pe=h[14],xe=h[15],Re=l[0],Se=l[1],Pe=l[2],je=l[3],Ye=l[4],Tt=l[5],Rt=l[6],wt=l[7],gt=l[8],ft=l[9],Dt=l[10],pt=l[11],it=l[12],Ht=l[13],Bt=l[14],mr=l[15];return Math.abs(d-Re)<=Zi*Math.max(1,Math.abs(d),Math.abs(Re))&&Math.abs(g-Se)<=Zi*Math.max(1,Math.abs(g),Math.abs(Se))&&Math.abs(x-Pe)<=Zi*Math.max(1,Math.abs(x),Math.abs(Pe))&&Math.abs(A-je)<=Zi*Math.max(1,Math.abs(A),Math.abs(je))&&Math.abs(M-Ye)<=Zi*Math.max(1,Math.abs(M),Math.abs(Ye))&&Math.abs(k-Tt)<=Zi*Math.max(1,Math.abs(k),Math.abs(Tt))&&Math.abs(O-Rt)<=Zi*Math.max(1,Math.abs(O),Math.abs(Rt))&&Math.abs($-wt)<=Zi*Math.max(1,Math.abs($),Math.abs(wt))&&Math.abs(j-gt)<=Zi*Math.max(1,Math.abs(j),Math.abs(gt))&&Math.abs(W-ft)<=Zi*Math.max(1,Math.abs(W),Math.abs(ft))&&Math.abs(Q-Dt)<=Zi*Math.max(1,Math.abs(Q),Math.abs(Dt))&&Math.abs(re-pt)<=Zi*Math.max(1,Math.abs(re),Math.abs(pt))&&Math.abs(ae-it)<=Zi*Math.max(1,Math.abs(ae),Math.abs(it))&&Math.abs(se-Ht)<=Zi*Math.max(1,Math.abs(se),Math.abs(Ht))&&Math.abs(pe-Bt)<=Zi*Math.max(1,Math.abs(pe),Math.abs(Bt))&&Math.abs(xe-mr)<=Zi*Math.max(1,Math.abs(xe),Math.abs(mr))},o.aZ=function(h,l){return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},o.a_=function(h,l,d){return h[0]=l[0]*d[0],h[1]=l[1]*d[1],h[2]=l[2]*d[2],h[3]=l[3]*d[3],h},o.aa=function(h){const l={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,g,x,A)=>{const M=x||A;return l[g]=!M||M.toLowerCase(),""}),l["max-age"]){const d=parseInt(l["max-age"],10);isNaN(d)?delete l["max-age"]:l["max-age"]=d}return l},o.ab=function(h,l){const d=[];for(const g in h)g in l||d.push(g);return d},o.ac=U,o.ad=function(h,l,d){var g=Math.sin(d),x=Math.cos(d),A=l[0],M=l[1],k=l[2],O=l[3],$=l[4],j=l[5],W=l[6],Q=l[7];return l!==h&&(h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=A*x+$*g,h[1]=M*x+j*g,h[2]=k*x+W*g,h[3]=O*x+Q*g,h[4]=$*x-A*g,h[5]=j*x-M*g,h[6]=W*x-k*g,h[7]=Q*x-O*g,h},o.ae=function(h){var l=new Tf(16);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],l},o.af=Py,o.ag=function(h,l){let d=0,g=0;if(h.kind==="constant")g=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:x,minZoom:A,maxZoom:M}=h,k=x?U(_i.interpolationFactor(x,l,A,M),0,1):0;h.kind==="camera"?g=Ei.number(h.minSize,h.maxSize,k):d=k}return{uSizeT:d,uSize:g}},o.ai=function(h,{uSize:l,uSizeT:d},{lowerSize:g,upperSize:x}){return h.kind==="source"?g/ms:h.kind==="composite"?Ei.number(g/ms,x/ms,d):l},o.aj=Lx,o.ak=function(h,l,d,g){const x=l.y-h.y,A=l.x-h.x,M=g.y-d.y,k=g.x-d.x,O=M*A-k*x;if(O===0)return null;const $=(k*(h.y-d.y)-M*(h.x-d.x))/O;return new v(h.x+$*A,h.y+$*x)},o.al=wP,o.am=Gp,o.an=cx,o.ao=Jn,o.aq=Dx,o.ar=function(h,l){var d=l[0],g=l[1],x=l[2],A=l[3],M=l[4],k=l[5],O=l[6],$=l[7],j=l[8],W=l[9],Q=l[10],re=l[11],ae=l[12],se=l[13],pe=l[14],xe=l[15],Re=d*k-g*M,Se=d*O-x*M,Pe=d*$-A*M,je=g*O-x*k,Ye=g*$-A*k,Tt=x*$-A*O,Rt=j*se-W*ae,wt=j*pe-Q*ae,gt=j*xe-re*ae,ft=W*pe-Q*se,Dt=W*xe-re*se,pt=Q*xe-re*pe,it=Re*pt-Se*Dt+Pe*ft+je*gt-Ye*wt+Tt*Rt;return it?(h[0]=(k*pt-O*Dt+$*ft)*(it=1/it),h[1]=(x*Dt-g*pt-A*ft)*it,h[2]=(se*Tt-pe*Ye+xe*je)*it,h[3]=(Q*Ye-W*Tt-re*je)*it,h[4]=(O*gt-M*pt-$*wt)*it,h[5]=(d*pt-x*gt+A*wt)*it,h[6]=(pe*Pe-ae*Tt-xe*Se)*it,h[7]=(j*Tt-Q*Pe+re*Se)*it,h[8]=(M*Dt-k*gt+$*Rt)*it,h[9]=(g*gt-d*Dt-A*Rt)*it,h[10]=(ae*Ye-se*Pe+xe*Re)*it,h[11]=(W*Pe-j*Ye-re*Re)*it,h[12]=(k*wt-M*ft-O*Rt)*it,h[13]=(d*ft-g*wt+x*Rt)*it,h[14]=(se*Se-ae*je-pe*Re)*it,h[15]=(j*je-W*Se+Q*Re)*it,h):null},o.as=Nx,o.at=Ix,o.au=Vx,o.av=function(){const h={},l=ye.$version;for(const d in ye.$root){const g=ye.$root[d];if(g.required){let x=null;x=d==="version"?l:g.type==="array"?[]:{},x!=null&&(h[d]=x)}}return h},o.aw=ff,o.ax=at,o.ay=function(h){h=h.slice();const l=Object.create(null);for(let d=0;d<h.length;d++)l[h[d].id]=h[d];for(let d=0;d<h.length;d++)"ref"in h[d]&&(h[d]=xt(h[d],l[h[d].ref]));return h},o.az=function(h){if(h.type==="custom")return new LV(h);switch(h.type){case"background":return new PV(h);case"circle":return new p9(h);case"fill":return new R9(h);case"fill-extrusion":return new X9(h);case"heatmap":return new v9(h);case"hillshade":return new y9(h);case"line":return new nV(h);case"raster":return new DV(h);case"symbol":return new $y(h)}},o.b=Oe,o.b0=V,o.b1=mP,o.b2=dP,o.b3=function(h,l,d,g,x){var A,M=1/Math.tan(l/2);return h[0]=M/d,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=M,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,x!=null&&x!==1/0?(h[10]=(x+g)*(A=1/(g-x)),h[14]=2*x*g*A):(h[10]=-1,h[14]=-2*g),h},o.b4=function(h,l,d){var g=Math.sin(d),x=Math.cos(d),A=l[4],M=l[5],k=l[6],O=l[7],$=l[8],j=l[9],W=l[10],Q=l[11];return l!==h&&(h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[4]=A*x+$*g,h[5]=M*x+j*g,h[6]=k*x+W*g,h[7]=O*x+Q*g,h[8]=$*x-A*g,h[9]=j*x-M*g,h[10]=W*x-k*g,h[11]=Q*x-O*g,h},o.b5=L,o.b6=B,o.b7=function(h){return h*Math.PI/180},o.b8=function(h,l){return h[0]=l[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=l[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=l[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},o.b9=class extends gf{},o.ba=zx,o.bb=UV,o.bd=st,o.be=function(h,l){wr.REGISTERED_PROTOCOLS[h]=l},o.bf=function(h){delete wr.REGISTERED_PROTOCOLS[h]},o.bg=function(h,l){const d={};for(let x=0;x<h.length;x++){const A=l&&l[h[x].id]||ax(h[x]);l&&(l[h[x].id]=A);let M=d[A];M||(M=d[A]=[]),M.push(h[x])}const g=[];for(const x in d)g.push(d[x]);return g},o.bh=Et,o.bi=gP,o.bj=_P,o.bk=KE,o.bl=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=kn/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const l=h.bucket.layers[0],d=l.layout,g=l._unevaluatedLayout._values,x={layoutIconSize:g["icon-size"].possiblyEvaluate(new ln(h.bucket.zoom+1),h.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new ln(h.bucket.zoom+1),h.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new ln(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:$,maxZoom:j}=h.bucket.textSizeData;x.compositeTextSizes=[g["text-size"].possiblyEvaluate(new ln($),h.canonical),g["text-size"].possiblyEvaluate(new ln(j),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:$,maxZoom:j}=h.bucket.iconSizeData;x.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new ln($),h.canonical),g["icon-size"].possiblyEvaluate(new ln(j),h.canonical)]}const A=d.get("text-line-height")*Jn,M=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",k=d.get("text-keep-upright"),O=d.get("text-size");for(const $ of h.bucket.features){const j=d.get("text-font").evaluate($,{},h.canonical).join(","),W=O.evaluate($,{},h.canonical),Q=x.layoutTextSize.evaluate($,{},h.canonical),re=x.layoutIconSize.evaluate($,{},h.canonical),ae={horizontal:{},vertical:void 0},se=$.text;let pe,xe=[0,0];if(se){const Pe=se.toString(),je=d.get("text-letter-spacing").evaluate($,{},h.canonical)*Jn,Ye=vy(Pe)?je:0,Tt=d.get("text-anchor").evaluate($,{},h.canonical),Rt=DP(l,$,h.canonical);if(!Rt){const pt=d.get("text-radial-offset").evaluate($,{},h.canonical);xe=pt?IP(Tt,[pt*Jn,$x]):d.get("text-offset").evaluate($,{},h.canonical).map(it=>it*Jn)}let wt=M?"center":d.get("text-justify").evaluate($,{},h.canonical);const gt=d.get("symbol-placement"),ft=gt==="point"?d.get("text-max-width").evaluate($,{},h.canonical)*Jn:0,Dt=()=>{h.bucket.allowVerticalPlacement&&df(Pe)&&(ae.vertical=zy(se,h.glyphMap,h.glyphPositions,h.imagePositions,j,ft,A,Tt,"left",Ye,xe,o.ah.vertical,!0,gt,Q,W))};if(!M&&Rt){const pt=new Set;if(wt==="auto")for(let Ht=0;Ht<Rt.values.length;Ht+=2)pt.add(Nx(Rt.values[Ht]));else pt.add(wt);let it=!1;for(const Ht of pt)if(!ae.horizontal[Ht])if(it)ae.horizontal[Ht]=ae.horizontal[0];else{const Bt=zy(se,h.glyphMap,h.glyphPositions,h.imagePositions,j,ft,A,"center",Ht,Ye,xe,o.ah.horizontal,!1,gt,Q,W);Bt&&(ae.horizontal[Ht]=Bt,it=Bt.positionedLines.length===1)}Dt()}else{wt==="auto"&&(wt=Nx(Tt));const pt=zy(se,h.glyphMap,h.glyphPositions,h.imagePositions,j,ft,A,Tt,wt,Ye,xe,o.ah.horizontal,!1,gt,Q,W);pt&&(ae.horizontal[wt]=pt),Dt(),df(Pe)&&M&&k&&(ae.vertical=zy(se,h.glyphMap,h.glyphPositions,h.imagePositions,j,ft,A,Tt,wt,Ye,xe,o.ah.vertical,!1,gt,Q,W))}}let Re=!1;if($.icon&&$.icon.name){const Pe=h.imageMap[$.icon.name];Pe&&(pe=TV(h.imagePositions[$.icon.name],d.get("icon-offset").evaluate($,{},h.canonical),d.get("icon-anchor").evaluate($,{},h.canonical)),Re=!!Pe.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Re:h.bucket.sdfIcons!==Re&&ne("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pe.pixelRatio!==h.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Se=kP(ae.horizontal)||ae.vertical;h.bucket.iconsInText=!!Se&&Se.iconsInText,(Se||pe)&&VV(h.bucket,$,ae,pe,h.imageMap,x,Q,re,xe,Re,h.canonical)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},o.bm=Tx,o.bn=bx,o.bo=Sx,o.bp=Jl,o.bq=Ax,o.br=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},o.bs=function(h,l,d,g,x){return s(this,void 0,void 0,function*(){if(D())try{return yield _t(h,l,d,g,x)}catch{}return function(A,M,k,O,$){const j=A.width,W=A.height;zt&&Mt||(zt=new OffscreenCanvas(j,W),Mt=zt.getContext("2d",{willReadFrequently:!0})),zt.width=j,zt.height=W,Mt.drawImage(A,0,0,j,W);const Q=Mt.getImageData(M,k,O,$);return Mt.clearRect(0,0,j,W),Q.data}(h,l,d,g,x)})},o.bt=vP,o.bu=c,o.bv=f,o.bw=HE,o.bx=Zs,o.by=function(h){return h.message===ar},o.bz=Js,o.c=rr,o.d=h=>s(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(l)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.e=N,o.f=h=>new Promise((l,d)=>{const g=new Image;g.onload=()=>{l(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame(()=>{g.src=ct})},g.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const x=new Blob([new Uint8Array(h)],{type:"image/png"});g.src=h.byteLength?URL.createObjectURL(x):ct}),o.g=Xt,o.h=(h,l)=>dt(N(h,{type:"json"}),l),o.i=me,o.j=Be,o.k=be,o.l=(h,l)=>dt(N(h,{type:"arrayBuffer"}),l),o.m=dt,o.n=function(h){return new Ax(h).readFields(yV,[])},o.o=Zp,o.p=YE,o.q=Ii,o.r=Mp,o.s=vt,o.t=my,o.u=bt,o.v=ye,o.w=ne,o.x=sc,o.y=function([h,l,d]){return l+=90,l*=Math.PI/180,d*=Math.PI/180,{x:h*Math.cos(l)*Math.sin(d),y:h*Math.sin(l)*Math.sin(d),z:h*Math.cos(d)}},o.z=Ei}),i("worker",["./shared"],function(o){class s{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,te){for(const ue of K){this._layerConfigs[ue.id]=ue;const Me=this._layers[ue.id]=o.az(ue);Me._featureFilter=o.a6(Me.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(const ue of te)delete this.keyCache[ue],delete this._layerConfigs[ue],delete this._layers[ue];this.familiesBySource={};const oe=o.bg(Object.values(this._layerConfigs),this.keyCache);for(const ue of oe){const Me=ue.map(Ge=>this._layers[Ge.id]),Ee=Me[0];if(Ee.visibility==="none")continue;const Le=Ee.source||"";let Ce=this.familiesBySource[Le];Ce||(Ce=this.familiesBySource[Le]={});const ze=Ee.sourceLayer||"_geojsonTileLayer";let Je=Ce[ze];Je||(Je=Ce[ze]=[]),Je.push(Me)}}}class c{constructor(K){const te={},oe=[];for(const Le in K){const Ce=K[Le],ze=te[Le]={};for(const Je in Ce){const Ge=Ce[+Je];if(!Ge||Ge.bitmap.width===0||Ge.bitmap.height===0)continue;const We={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};oe.push(We),ze[Je]={rect:We,metrics:Ge.metrics}}}const{w:ue,h:Me}=o.p(oe),Ee=new o.o({width:ue||1,height:Me||1});for(const Le in K){const Ce=K[Le];for(const ze in Ce){const Je=Ce[+ze];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;const Ge=te[Le][ze].rect;o.o.copy(Je.bitmap,Ee,{x:0,y:0},{x:Ge.x+1,y:Ge.y+1},Je.bitmap)}}this.image=Ee,this.positions=te}}o.bh("GlyphAtlas",c);class f{constructor(K){this.tileID=new o.Q(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,te,oe,ue){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new o.a4;const Me=new o.bi(Object.keys(K.layers).sort()),Ee=new o.bj(this.tileID,this.promoteId);Ee.bucketLayerIDs=[];const Le={},Ce={featureIndex:Ee,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:oe},ze=te.familiesBySource[this.source];for(const cr in ze){const Cn=K.layers[cr];if(!Cn)continue;Cn.version===1&&o.w(`Vector tile source "${this.source}" layer "${cr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Zn=Me.encode(cr),Mi=[];for(let ji=0;ji<Cn.length;ji++){const si=Cn.feature(ji),so=Ee.getId(si,cr);Mi.push({feature:si,id:so,index:ji,sourceLayerIndex:Zn})}for(const ji of ze[cr]){const si=ji[0];si.source!==this.source&&o.w(`layer.source = ${si.source} does not equal this.source = ${this.source}`),si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility!=="none"&&(p(ji,this.zoom,oe),(Le[si.id]=si.createBucket({index:Ee.bucketLayerIDs.length,layers:ji,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zn,sourceID:this.source})).populate(Mi,Ce,this.tileID.canonical),Ee.bucketLayerIDs.push(ji.map(so=>so.id)))}}const Je=o.aE(Ce.glyphDependencies,cr=>Object.keys(cr).map(Number));this.inFlightDependencies.forEach(cr=>cr==null?void 0:cr.abort()),this.inFlightDependencies=[];let Ge=Promise.resolve({});if(Object.keys(Je).length){const cr=new AbortController;this.inFlightDependencies.push(cr),Ge=ue.sendAsync({type:"getGlyphs",data:{stacks:Je,source:this.source,tileID:this.tileID,type:"glyphs"}},cr)}const We=Object.keys(Ce.iconDependencies);let $t=Promise.resolve({});if(We.length){const cr=new AbortController;this.inFlightDependencies.push(cr),$t=ue.sendAsync({type:"getImages",data:{icons:We,source:this.source,tileID:this.tileID,type:"icons"}},cr)}const jt=Object.keys(Ce.patternDependencies);let ur=Promise.resolve({});if(jt.length){const cr=new AbortController;this.inFlightDependencies.push(cr),ur=ue.sendAsync({type:"getImages",data:{icons:jt,source:this.source,tileID:this.tileID,type:"patterns"}},cr)}const[nr,Cr,Xr]=yield Promise.all([Ge,$t,ur]),mn=new c(nr),Vn=new o.bk(Cr,Xr);for(const cr in Le){const Cn=Le[cr];Cn instanceof o.a5?(p(Cn.layers,this.zoom,oe),o.bl({bucket:Cn,glyphMap:nr,glyphPositions:mn.positions,imageMap:Cr,imagePositions:Vn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Cn.hasPattern&&(Cn instanceof o.bm||Cn instanceof o.bn||Cn instanceof o.bo)&&(p(Cn.layers,this.zoom,oe),Cn.addFeatures(Ce,this.tileID.canonical,Vn.patternPositions))}return this.status="done",{buckets:Object.values(Le).filter(cr=>!cr.isEmpty()),featureIndex:Ee,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mn.image,imageAtlas:Vn,glyphMap:this.returnDependencies?nr:null,iconMap:this.returnDependencies?Cr:null,glyphPositions:this.returnDependencies?mn.positions:null}})}}function p(ve,K,te){const oe=new o.a8(K);for(const ue of ve)ue.recalculate(oe,te)}class v{constructor(K,te,oe){this.actor=K,this.layerIndex=te,this.availableImages=oe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(K,te){return o._(this,void 0,void 0,function*(){const oe=yield o.l(K.request,te);try{return{vectorTile:new o.bp.VectorTile(new o.bq(oe.data)),rawData:oe.data,cacheControl:oe.cacheControl,expires:oe.expires}}catch(ue){const Me=new Uint8Array(oe.data);let Ee=`Unable to parse the tile at ${K.request.url}, `;throw Ee+=Me[0]===31&&Me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ue.messge}`,new Error(Ee)}})}loadTile(K){return o._(this,void 0,void 0,function*(){const te=K.uid,oe=!!(K&&K.request&&K.request.collectResourceTiming)&&new o.br(K.request),ue=new f(K);this.loading[te]=ue;const Me=new AbortController;ue.abort=Me;try{const Ee=yield this.loadVectorTile(K,Me);if(delete this.loading[te],!Ee)return null;const Le=Ee.rawData,Ce={};Ee.expires&&(Ce.expires=Ee.expires),Ee.cacheControl&&(Ce.cacheControl=Ee.cacheControl);const ze={};if(oe){const Ge=oe.finish();Ge&&(ze.resourceTiming=JSON.parse(JSON.stringify(Ge)))}ue.vectorTile=Ee.vectorTile;const Je=ue.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[te]=ue,this.fetching[te]={rawTileData:Le,cacheControl:Ce,resourceTiming:ze};try{const Ge=yield Je;return o.e({rawTileData:Le.slice(0)},Ge,Ce,ze)}finally{delete this.fetching[te]}}catch(Ee){throw delete this.loading[te],ue.status="done",this.loaded[te]=ue,Ee}})}reloadTile(K){return o._(this,void 0,void 0,function*(){const te=K.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const oe=this.loaded[te];if(oe.showCollisionBoxes=K.showCollisionBoxes,oe.status==="parsing"){const ue=yield oe.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Me;if(this.fetching[te]){const{rawTileData:Ee,cacheControl:Le,resourceTiming:Ce}=this.fetching[te];delete this.fetching[te],Me=o.e({rawTileData:Ee.slice(0)},ue,Le,Ce)}else Me=ue;return Me}if(oe.status==="done"&&oe.vectorTile)return oe.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(K){return o._(this,void 0,void 0,function*(){const te=this.loading,oe=K.uid;te&&te[oe]&&te[oe].abort&&(te[oe].abort.abort(),delete te[oe])})}removeTile(K){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]})}}class y{constructor(){this.loaded={}}loadTile(K){return o._(this,void 0,void 0,function*(){const{uid:te,encoding:oe,rawImageData:ue,redFactor:Me,greenFactor:Ee,blueFactor:Le,baseShift:Ce}=K,ze=ue.width+2,Je=ue.height+2,Ge=o.b(ue)?new o.R({width:ze,height:Je},yield o.bs(ue,-1,-1,ze,Je)):ue,We=new o.bt(te,Ge,oe,Me,Ee,Le,Ce);return this.loaded=this.loaded||{},this.loaded[te]=We,We})}removeTile(K){const te=this.loaded,oe=K.uid;te&&te[oe]&&delete te[oe]}}function _(ve,K){if(ve.length!==0){S(ve[0],K);for(var te=1;te<ve.length;te++)S(ve[te],!K)}}function S(ve,K){for(var te=0,oe=0,ue=0,Me=ve.length,Ee=Me-1;ue<Me;Ee=ue++){var Le=(ve[ue][0]-ve[Ee][0])*(ve[Ee][1]+ve[ue][1]),Ce=te+Le;oe+=Math.abs(te)>=Math.abs(Le)?te-Ce+Le:Le-Ce+te,te=Ce}te+oe>=0!=!!K&&ve.reverse()}var E=o.bu(function ve(K,te){var oe,ue=K&&K.type;if(ue==="FeatureCollection")for(oe=0;oe<K.features.length;oe++)ve(K.features[oe],te);else if(ue==="GeometryCollection")for(oe=0;oe<K.geometries.length;oe++)ve(K.geometries[oe],te);else if(ue==="Feature")ve(K.geometry,te);else if(ue==="Polygon")_(K.coordinates,te);else if(ue==="MultiPolygon")for(oe=0;oe<K.coordinates.length;oe++)_(K.coordinates[oe],te);return K});const P=o.bp.VectorTileFeature.prototype.toGeoJSON;var I={exports:{}},D=o.bv,L=o.bp.VectorTileFeature,B=U;function U(ve,K){this.options=K||{},this.features=ve,this.length=ve.length}function V(ve,K){this.id=typeof ve.id=="number"?ve.id:void 0,this.type=ve.type,this.rawGeometry=ve.type===1?[ve.geometry]:ve.geometry,this.properties=ve.tags,this.extent=K||4096}U.prototype.feature=function(ve){return new V(this.features[ve],this.options.extent)},V.prototype.loadGeometry=function(){var ve=this.rawGeometry;this.geometry=[];for(var K=0;K<ve.length;K++){for(var te=ve[K],oe=[],ue=0;ue<te.length;ue++)oe.push(new D(te[ue][0],te[ue][1]));this.geometry.push(oe)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ve=this.geometry,K=1/0,te=-1/0,oe=1/0,ue=-1/0,Me=0;Me<ve.length;Me++)for(var Ee=ve[Me],Le=0;Le<Ee.length;Le++){var Ce=Ee[Le];K=Math.min(K,Ce.x),te=Math.max(te,Ce.x),oe=Math.min(oe,Ce.y),ue=Math.max(ue,Ce.y)}return[K,oe,te,ue]},V.prototype.toGeoJSON=L.prototype.toGeoJSON;var N=o.bw,G=B;function Y(ve){var K=new N;return function(te,oe){for(var ue in te.layers)oe.writeMessage(3,ee,te.layers[ue])}(ve,K),K.finish()}function ee(ve,K){var te;K.writeVarintField(15,ve.version||1),K.writeStringField(1,ve.name||""),K.writeVarintField(5,ve.extent||4096);var oe={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<ve.length;te++)oe.feature=ve.feature(te),K.writeMessage(2,J,oe);var ue=oe.keys;for(te=0;te<ue.length;te++)K.writeStringField(3,ue[te]);var Me=oe.values;for(te=0;te<Me.length;te++)K.writeMessage(4,me,Me[te])}function J(ve,K){var te=ve.feature;te.id!==void 0&&K.writeVarintField(1,te.id),K.writeMessage(2,X,ve),K.writeVarintField(3,te.type),K.writeMessage(4,fe,te)}function X(ve,K){var te=ve.feature,oe=ve.keys,ue=ve.values,Me=ve.keycache,Ee=ve.valuecache;for(var Le in te.properties){var Ce=te.properties[Le],ze=Me[Le];if(Ce!==null){ze===void 0&&(oe.push(Le),Me[Le]=ze=oe.length-1),K.writeVarint(ze);var Je=typeof Ce;Je!=="string"&&Je!=="boolean"&&Je!=="number"&&(Ce=JSON.stringify(Ce));var Ge=Je+":"+Ce,We=Ee[Ge];We===void 0&&(ue.push(Ce),Ee[Ge]=We=ue.length-1),K.writeVarint(We)}}}function ne(ve,K){return(K<<3)+(7&ve)}function we(ve){return ve<<1^ve>>31}function fe(ve,K){for(var te=ve.loadGeometry(),oe=ve.type,ue=0,Me=0,Ee=te.length,Le=0;Le<Ee;Le++){var Ce=te[Le],ze=1;oe===1&&(ze=Ce.length),K.writeVarint(ne(1,ze));for(var Je=oe===3?Ce.length-1:Ce.length,Ge=0;Ge<Je;Ge++){Ge===1&&oe!==1&&K.writeVarint(ne(2,Je-1));var We=Ce[Ge].x-ue,$t=Ce[Ge].y-Me;K.writeVarint(we(We)),K.writeVarint(we($t)),ue+=We,Me+=$t}oe===3&&K.writeVarint(ne(7,1))}}function me(ve,K){var te=typeof ve;te==="string"?K.writeStringField(1,ve):te==="boolean"?K.writeBooleanField(7,ve):te==="number"&&(ve%1!=0?K.writeDoubleField(3,ve):ve<0?K.writeSVarintField(6,ve):K.writeVarintField(5,ve))}I.exports=Y,I.exports.fromVectorTileJs=Y,I.exports.fromGeojsonVt=function(ve,K){K=K||{};var te={};for(var oe in ve)te[oe]=new G(ve[oe].features,K),te[oe].name=oe,te[oe].version=K.version,te[oe].extent=K.extent;return Y({layers:te})},I.exports.GeoJSONWrapper=G;var Ve=o.bu(I.exports);const Oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ve=>ve},ct=Math.fround||(_t=new Float32Array(1),ve=>(_t[0]=+ve,_t[0]));var _t;const zt=3,Mt=5,ar=6;class rr{constructor(K){this.options=Object.assign(Object.create(Oe),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:te,minZoom:oe,maxZoom:ue}=this.options;te&&console.time("total time");const Me=`prepare ${K.length} points`;te&&console.time(Me),this.points=K;const Ee=[];for(let Ce=0;Ce<K.length;Ce++){const ze=K[Ce];if(!ze.geometry)continue;const[Je,Ge]=ze.geometry.coordinates,We=ct(Ue(Je)),$t=ct(st(Ge));Ee.push(We,$t,1/0,Ce,-1,1),this.options.reduce&&Ee.push(0)}let Le=this.trees[ue+1]=this._createTree(Ee);te&&console.timeEnd(Me);for(let Ce=ue;Ce>=oe;Ce--){const ze=+Date.now();Le=this.trees[Ce]=this._createTree(this._cluster(Le,Ce)),te&&console.log("z%d: %d clusters in %dms",Ce,Le.numItems,+Date.now()-ze)}return te&&console.timeEnd("total time"),this}getClusters(K,te){let oe=((K[0]+180)%360+360)%360-180;const ue=Math.max(-90,Math.min(90,K[1]));let Me=K[2]===180?180:((K[2]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)oe=-180,Me=180;else if(oe>Me){const Ge=this.getClusters([oe,ue,180,Ee],te),We=this.getClusters([-180,ue,Me,Ee],te);return Ge.concat(We)}const Le=this.trees[this._limitZoom(te)],Ce=Le.range(Ue(oe),st(Ee),Ue(Me),st(ue)),ze=Le.data,Je=[];for(const Ge of Ce){const We=this.stride*Ge;Je.push(ze[We+Mt]>1?wr(ze,We,this.clusterProps):this.points[ze[We+zt]])}return Je}getChildren(K){const te=this._getOriginId(K),oe=this._getOriginZoom(K),ue="No cluster with the specified id.",Me=this.trees[oe];if(!Me)throw new Error(ue);const Ee=Me.data;if(te*this.stride>=Ee.length)throw new Error(ue);const Le=this.options.radius/(this.options.extent*Math.pow(2,oe-1)),Ce=Me.within(Ee[te*this.stride],Ee[te*this.stride+1],Le),ze=[];for(const Je of Ce){const Ge=Je*this.stride;Ee[Ge+4]===K&&ze.push(Ee[Ge+Mt]>1?wr(Ee,Ge,this.clusterProps):this.points[Ee[Ge+zt]])}if(ze.length===0)throw new Error(ue);return ze}getLeaves(K,te,oe){const ue=[];return this._appendLeaves(ue,K,te=te||10,oe=oe||0,0),ue}getTile(K,te,oe){const ue=this.trees[this._limitZoom(K)],Me=Math.pow(2,K),{extent:Ee,radius:Le}=this.options,Ce=Le/Ee,ze=(oe-Ce)/Me,Je=(oe+1+Ce)/Me,Ge={features:[]};return this._addTileFeatures(ue.range((te-Ce)/Me,ze,(te+1+Ce)/Me,Je),ue.data,te,oe,Me,Ge),te===0&&this._addTileFeatures(ue.range(1-Ce/Me,ze,1,Je),ue.data,Me,oe,Me,Ge),te===Me-1&&this._addTileFeatures(ue.range(0,ze,Ce/Me,Je),ue.data,-1,oe,Me,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(K){let te=this._getOriginZoom(K)-1;for(;te<=this.options.maxZoom;){const oe=this.getChildren(K);if(te++,oe.length!==1)break;K=oe[0].properties.cluster_id}return te}_appendLeaves(K,te,oe,ue,Me){const Ee=this.getChildren(te);for(const Le of Ee){const Ce=Le.properties;if(Ce&&Ce.cluster?Me+Ce.point_count<=ue?Me+=Ce.point_count:Me=this._appendLeaves(K,Ce.cluster_id,oe,ue,Me):Me<ue?Me++:K.push(Le),K.length===oe)break}return Me}_createTree(K){const te=new o.au(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let oe=0;oe<K.length;oe+=this.stride)te.add(K[oe],K[oe+1]);return te.finish(),te.data=K,te}_addTileFeatures(K,te,oe,ue,Me,Ee){for(const Le of K){const Ce=Le*this.stride,ze=te[Ce+Mt]>1;let Je,Ge,We;if(ze)Je=Xt(te,Ce,this.clusterProps),Ge=te[Ce],We=te[Ce+1];else{const ur=this.points[te[Ce+zt]];Je=ur.properties;const[nr,Cr]=ur.geometry.coordinates;Ge=Ue(nr),We=st(Cr)}const $t={type:1,geometry:[[Math.round(this.options.extent*(Ge*Me-oe)),Math.round(this.options.extent*(We*Me-ue))]],tags:Je};let jt;jt=ze||this.options.generateId?te[Ce+zt]:this.points[te[Ce+zt]].id,jt!==void 0&&($t.id=jt),Ee.features.push($t)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,te){const{radius:oe,extent:ue,reduce:Me,minPoints:Ee}=this.options,Le=oe/(ue*Math.pow(2,te)),Ce=K.data,ze=[],Je=this.stride;for(let Ge=0;Ge<Ce.length;Ge+=Je){if(Ce[Ge+2]<=te)continue;Ce[Ge+2]=te;const We=Ce[Ge],$t=Ce[Ge+1],jt=K.within(Ce[Ge],Ce[Ge+1],Le),ur=Ce[Ge+Mt];let nr=ur;for(const Cr of jt){const Xr=Cr*Je;Ce[Xr+2]>te&&(nr+=Ce[Xr+Mt])}if(nr>ur&&nr>=Ee){let Cr,Xr=We*ur,mn=$t*ur,Vn=-1;const cr=((Ge/Je|0)<<5)+(te+1)+this.points.length;for(const Cn of jt){const Zn=Cn*Je;if(Ce[Zn+2]<=te)continue;Ce[Zn+2]=te;const Mi=Ce[Zn+Mt];Xr+=Ce[Zn]*Mi,mn+=Ce[Zn+1]*Mi,Ce[Zn+4]=cr,Me&&(Cr||(Cr=this._map(Ce,Ge,!0),Vn=this.clusterProps.length,this.clusterProps.push(Cr)),Me(Cr,this._map(Ce,Zn)))}Ce[Ge+4]=cr,ze.push(Xr/nr,mn/nr,1/0,cr,-1,nr),Me&&ze.push(Vn)}else{for(let Cr=0;Cr<Je;Cr++)ze.push(Ce[Ge+Cr]);if(nr>1)for(const Cr of jt){const Xr=Cr*Je;if(!(Ce[Xr+2]<=te)){Ce[Xr+2]=te;for(let mn=0;mn<Je;mn++)ze.push(Ce[Xr+mn])}}}}return ze}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,te,oe){if(K[te+Mt]>1){const Ee=this.clusterProps[K[te+ar]];return oe?Object.assign({},Ee):Ee}const ue=this.points[K[te+zt]].properties,Me=this.options.map(ue);return oe&&Me===ue?Object.assign({},Me):Me}}function wr(ve,K,te){return{type:"Feature",id:ve[K+zt],properties:Xt(ve,K,te),geometry:{type:"Point",coordinates:[(oe=ve[K],360*(oe-.5)),at(ve[K+1])]}};var oe}function Xt(ve,K,te){const oe=ve[K+Mt],ue=oe>=1e4?`${Math.round(oe/1e3)}k`:oe>=1e3?Math.round(oe/100)/10+"k":oe,Me=ve[K+ar],Ee=Me===-1?{}:Object.assign({},te[Me]);return Object.assign(Ee,{cluster:!0,cluster_id:ve[K+zt],point_count:oe,point_count_abbreviated:ue})}function Ue(ve){return ve/360+.5}function st(ve){const K=Math.sin(ve*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function at(ve){const K=(180-360*ve)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function dt(ve,K,te,oe){for(var ue,Me=oe,Ee=te-K>>1,Le=te-K,Ce=ve[K],ze=ve[K+1],Je=ve[te],Ge=ve[te+1],We=K+3;We<te;We+=3){var $t=vt(ve[We],ve[We+1],Ce,ze,Je,Ge);if($t>Me)ue=We,Me=$t;else if($t===Me){var jt=Math.abs(We-Ee);jt<Le&&(ue=We,Le=jt)}}Me>oe&&(ue-K>3&&dt(ve,K,ue,oe),ve[ue+2]=Me,te-ue>3&&dt(ve,ue,te,oe))}function vt(ve,K,te,oe,ue,Me){var Ee=ue-te,Le=Me-oe;if(Ee!==0||Le!==0){var Ce=((ve-te)*Ee+(K-oe)*Le)/(Ee*Ee+Le*Le);Ce>1?(te=ue,oe=Me):Ce>0&&(te+=Ee*Ce,oe+=Le*Ce)}return(Ee=ve-te)*Ee+(Le=K-oe)*Le}function It(ve,K,te,oe){var ue={id:ve===void 0?null:ve,type:K,geometry:te,tags:oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Me){var Ee=Me.geometry,Le=Me.type;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")de(Me,Ee);else if(Le==="Polygon"||Le==="MultiLineString")for(var Ce=0;Ce<Ee.length;Ce++)de(Me,Ee[Ce]);else if(Le==="MultiPolygon")for(Ce=0;Ce<Ee.length;Ce++)for(var ze=0;ze<Ee[Ce].length;ze++)de(Me,Ee[Ce][ze])}(ue),ue}function de(ve,K){for(var te=0;te<K.length;te+=3)ve.minX=Math.min(ve.minX,K[te]),ve.minY=Math.min(ve.minY,K[te+1]),ve.maxX=Math.max(ve.maxX,K[te]),ve.maxY=Math.max(ve.maxY,K[te+1])}function be(ve,K,te,oe){if(K.geometry){var ue=K.geometry.coordinates,Me=K.geometry.type,Ee=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),Le=[],Ce=K.id;if(te.promoteId?Ce=K.properties[te.promoteId]:te.generateId&&(Ce=oe||0),Me==="Point")Be(ue,Le);else if(Me==="MultiPoint")for(var ze=0;ze<ue.length;ze++)Be(ue[ze],Le);else if(Me==="LineString")Xe(ue,Le,Ee,!1);else if(Me==="MultiLineString"){if(te.lineMetrics){for(ze=0;ze<ue.length;ze++)Xe(ue[ze],Le=[],Ee,!1),ve.push(It(Ce,"LineString",Le,K.properties));return}ye(ue,Le,Ee,!1)}else if(Me==="Polygon")ye(ue,Le,Ee,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(ze=0;ze<K.geometry.geometries.length;ze++)be(ve,{id:Ce,geometry:K.geometry.geometries[ze],properties:K.properties},te,oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ze=0;ze<ue.length;ze++){var Je=[];ye(ue[ze],Je,Ee,!0),Le.push(Je)}}ve.push(It(Ce,Me,Le,K.properties))}}function Be(ve,K){K.push(lt(ve[0])),K.push(xt(ve[1])),K.push(0)}function Xe(ve,K,te,oe){for(var ue,Me,Ee=0,Le=0;Le<ve.length;Le++){var Ce=lt(ve[Le][0]),ze=xt(ve[Le][1]);K.push(Ce),K.push(ze),K.push(0),Le>0&&(Ee+=oe?(ue*ze-Ce*Me)/2:Math.sqrt(Math.pow(Ce-ue,2)+Math.pow(ze-Me,2))),ue=Ce,Me=ze}var Je=K.length-3;K[2]=1,dt(K,0,Je,te),K[Je+2]=1,K.size=Math.abs(Ee),K.start=0,K.end=K.size}function ye(ve,K,te,oe){for(var ue=0;ue<ve.length;ue++){var Me=[];Xe(ve[ue],Me,te,oe),K.push(Me)}}function lt(ve){return ve/360+.5}function xt(ve){var K=Math.sin(ve*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function Ze(ve,K,te,oe,ue,Me,Ee,Le){if(oe/=K,Me>=(te/=K)&&Ee<oe)return ve;if(Ee<te||Me>=oe)return null;for(var Ce=[],ze=0;ze<ve.length;ze++){var Je=ve[ze],Ge=Je.geometry,We=Je.type,$t=ue===0?Je.minX:Je.minY,jt=ue===0?Je.maxX:Je.maxY;if($t>=te&&jt<oe)Ce.push(Je);else if(!(jt<te||$t>=oe)){var ur=[];if(We==="Point"||We==="MultiPoint")ut(Ge,ur,te,oe,ue);else if(We==="LineString")nt(Ge,ur,te,oe,ue,!1,Le.lineMetrics);else if(We==="MultiLineString")qt(Ge,ur,te,oe,ue,!1);else if(We==="Polygon")qt(Ge,ur,te,oe,ue,!0);else if(We==="MultiPolygon")for(var nr=0;nr<Ge.length;nr++){var Cr=[];qt(Ge[nr],Cr,te,oe,ue,!0),Cr.length&&ur.push(Cr)}if(ur.length){if(Le.lineMetrics&&We==="LineString"){for(nr=0;nr<ur.length;nr++)Ce.push(It(Je.id,We,ur[nr],Je.tags));continue}We!=="LineString"&&We!=="MultiLineString"||(ur.length===1?(We="LineString",ur=ur[0]):We="MultiLineString"),We!=="Point"&&We!=="MultiPoint"||(We=ur.length===3?"Point":"MultiPoint"),Ce.push(It(Je.id,We,ur,Je.tags))}}}return Ce.length?Ce:null}function ut(ve,K,te,oe,ue){for(var Me=0;Me<ve.length;Me+=3){var Ee=ve[Me+ue];Ee>=te&&Ee<=oe&&(K.push(ve[Me]),K.push(ve[Me+1]),K.push(ve[Me+2]))}}function nt(ve,K,te,oe,ue,Me,Ee){for(var Le,Ce,ze=Lt(ve),Je=ue===0?er:gr,Ge=ve.start,We=0;We<ve.length-3;We+=3){var $t=ve[We],jt=ve[We+1],ur=ve[We+2],nr=ve[We+3],Cr=ve[We+4],Xr=ue===0?$t:jt,mn=ue===0?nr:Cr,Vn=!1;Ee&&(Le=Math.sqrt(Math.pow($t-nr,2)+Math.pow(jt-Cr,2))),Xr<te?mn>te&&(Ce=Je(ze,$t,jt,nr,Cr,te),Ee&&(ze.start=Ge+Le*Ce)):Xr>oe?mn<oe&&(Ce=Je(ze,$t,jt,nr,Cr,oe),Ee&&(ze.start=Ge+Le*Ce)):Vt(ze,$t,jt,ur),mn<te&&Xr>=te&&(Ce=Je(ze,$t,jt,nr,Cr,te),Vn=!0),mn>oe&&Xr<=oe&&(Ce=Je(ze,$t,jt,nr,Cr,oe),Vn=!0),!Me&&Vn&&(Ee&&(ze.end=Ge+Le*Ce),K.push(ze),ze=Lt(ve)),Ee&&(Ge+=Le)}var cr=ve.length-3;$t=ve[cr],jt=ve[cr+1],ur=ve[cr+2],(Xr=ue===0?$t:jt)>=te&&Xr<=oe&&Vt(ze,$t,jt,ur),cr=ze.length-3,Me&&cr>=3&&(ze[cr]!==ze[0]||ze[cr+1]!==ze[1])&&Vt(ze,ze[0],ze[1],ze[2]),ze.length&&K.push(ze)}function Lt(ve){var K=[];return K.size=ve.size,K.start=ve.start,K.end=ve.end,K}function qt(ve,K,te,oe,ue,Me){for(var Ee=0;Ee<ve.length;Ee++)nt(ve[Ee],K,te,oe,ue,Me,!1)}function Vt(ve,K,te,oe){ve.push(K),ve.push(te),ve.push(oe)}function er(ve,K,te,oe,ue,Me){var Ee=(Me-K)/(oe-K);return ve.push(Me),ve.push(te+(ue-te)*Ee),ve.push(1),Ee}function gr(ve,K,te,oe,ue,Me){var Ee=(Me-te)/(ue-te);return ve.push(K+(oe-K)*Ee),ve.push(Me),ve.push(1),Ee}function Pr(ve,K){for(var te=[],oe=0;oe<ve.length;oe++){var ue,Me=ve[oe],Ee=Me.type;if(Ee==="Point"||Ee==="MultiPoint"||Ee==="LineString")ue=Ke(Me.geometry,K);else if(Ee==="MultiLineString"||Ee==="Polygon"){ue=[];for(var Le=0;Le<Me.geometry.length;Le++)ue.push(Ke(Me.geometry[Le],K))}else if(Ee==="MultiPolygon")for(ue=[],Le=0;Le<Me.geometry.length;Le++){for(var Ce=[],ze=0;ze<Me.geometry[Le].length;ze++)Ce.push(Ke(Me.geometry[Le][ze],K));ue.push(Ce)}te.push(It(Me.id,Ee,ue,Me.tags))}return te}function Ke(ve,K){var te=[];te.size=ve.size,ve.start!==void 0&&(te.start=ve.start,te.end=ve.end);for(var oe=0;oe<ve.length;oe+=3)te.push(ve[oe]+K,ve[oe+1],ve[oe+2]);return te}function Zr(ve,K){if(ve.transformed)return ve;var te,oe,ue,Me=1<<ve.z,Ee=ve.x,Le=ve.y;for(te=0;te<ve.features.length;te++){var Ce=ve.features[te],ze=Ce.geometry,Je=Ce.type;if(Ce.geometry=[],Je===1)for(oe=0;oe<ze.length;oe+=2)Ce.geometry.push(pn(ze[oe],ze[oe+1],K,Me,Ee,Le));else for(oe=0;oe<ze.length;oe++){var Ge=[];for(ue=0;ue<ze[oe].length;ue+=2)Ge.push(pn(ze[oe][ue],ze[oe][ue+1],K,Me,Ee,Le));Ce.geometry.push(Ge)}}return ve.transformed=!0,ve}function pn(ve,K,te,oe,ue,Me){return[Math.round(te*(ve*oe-ue)),Math.round(te*(K*oe-Me))]}function Ma(ve,K,te,oe,ue){for(var Me=K===ue.maxZoom?0:ue.tolerance/((1<<K)*ue.extent),Ee={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:oe,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Le=0;Le<ve.length;Le++){Ee.numFeatures++,Wn(Ee,ve[Le],Me,ue);var Ce=ve[Le].minX,ze=ve[Le].minY,Je=ve[Le].maxX,Ge=ve[Le].maxY;Ce<Ee.minX&&(Ee.minX=Ce),ze<Ee.minY&&(Ee.minY=ze),Je>Ee.maxX&&(Ee.maxX=Je),Ge>Ee.maxY&&(Ee.maxY=Ge)}return Ee}function Wn(ve,K,te,oe){var ue=K.geometry,Me=K.type,Ee=[];if(Me==="Point"||Me==="MultiPoint")for(var Le=0;Le<ue.length;Le+=3)Ee.push(ue[Le]),Ee.push(ue[Le+1]),ve.numPoints++,ve.numSimplified++;else if(Me==="LineString")ht(Ee,ue,ve,te,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(Le=0;Le<ue.length;Le++)ht(Ee,ue[Le],ve,te,Me==="Polygon",Le===0);else if(Me==="MultiPolygon")for(var Ce=0;Ce<ue.length;Ce++){var ze=ue[Ce];for(Le=0;Le<ze.length;Le++)ht(Ee,ze[Le],ve,te,!0,Le===0)}if(Ee.length){var Je=K.tags||null;if(Me==="LineString"&&oe.lineMetrics){for(var Ge in Je={},K.tags)Je[Ge]=K.tags[Ge];Je.mapbox_clip_start=ue.start/ue.size,Je.mapbox_clip_end=ue.end/ue.size}var We={geometry:Ee,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:Je};K.id!==null&&(We.id=K.id),ve.features.push(We)}}function ht(ve,K,te,oe,ue,Me){var Ee=oe*oe;if(oe>0&&K.size<(ue?Ee:oe))te.numPoints+=K.length/3;else{for(var Le=[],Ce=0;Ce<K.length;Ce+=3)(oe===0||K[Ce+2]>Ee)&&(te.numSimplified++,Le.push(K[Ce]),Le.push(K[Ce+1])),te.numPoints++;ue&&function(ze,Je){for(var Ge=0,We=0,$t=ze.length,jt=$t-2;We<$t;jt=We,We+=2)Ge+=(ze[We]-ze[jt])*(ze[We+1]+ze[jt+1]);if(Ge>0===Je)for(We=0,$t=ze.length;We<$t/2;We+=2){var ur=ze[We],nr=ze[We+1];ze[We]=ze[$t-2-We],ze[We+1]=ze[$t-1-We],ze[$t-2-We]=ur,ze[$t-1-We]=nr}}(Le,Me),ve.push(Le)}}function sr(ve,K){var te=(K=this.options=function(ue,Me){for(var Ee in Me)ue[Ee]=Me[Ee];return ue}(Object.create(this.options),K)).debug;if(te&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");var oe=function(ue,Me){var Ee=[];if(ue.type==="FeatureCollection")for(var Le=0;Le<ue.features.length;Le++)be(Ee,ue.features[Le],Me,Le);else be(Ee,ue.type==="Feature"?ue:{geometry:ue},Me);return Ee}(ve,K);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=function(ue,Me){var Ee=Me.buffer/Me.extent,Le=ue,Ce=Ze(ue,1,-1-Ee,Ee,0,-1,2,Me),ze=Ze(ue,1,1-Ee,2+Ee,0,-1,2,Me);return(Ce||ze)&&(Le=Ze(ue,1,-Ee,1+Ee,0,-1,2,Me)||[],Ce&&(Le=Pr(Ce,1).concat(Le)),ze&&(Le=Le.concat(Pr(ze,-1)))),Le}(oe,K),oe.length&&this.splitTile(oe,0,0,0),te&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ut(ve,K,te){return 32*((1<<ve)*te+K)+ve}function Fr(ve,K){return K?ve.properties[K]:ve.id}function ha(ve,K){if(ve==null)return!0;if(ve.type==="Feature")return Fr(ve,K)!=null;if(ve.type==="FeatureCollection"){const te=new Set;for(const oe of ve.features){const ue=Fr(oe,K);if(ue==null||te.has(ue))return!1;te.add(ue)}return!0}return!1}function lr(ve,K){const te=new Map;if(ve!=null)if(ve.type==="Feature")te.set(Fr(ve,K),ve);else for(const oe of ve.features)te.set(Fr(oe,K),oe);return te}sr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},sr.prototype.splitTile=function(ve,K,te,oe,ue,Me,Ee){for(var Le=[ve,K,te,oe],Ce=this.options,ze=Ce.debug;Le.length;){oe=Le.pop(),te=Le.pop(),K=Le.pop(),ve=Le.pop();var Je=1<<K,Ge=Ut(K,te,oe),We=this.tiles[Ge];if(!We&&(ze>1&&console.time("creation"),We=this.tiles[Ge]=Ma(ve,K,te,oe,Ce),this.tileCoords.push({z:K,x:te,y:oe}),ze)){ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,te,oe,We.numFeatures,We.numPoints,We.numSimplified),console.timeEnd("creation"));var $t="z"+K;this.stats[$t]=(this.stats[$t]||0)+1,this.total++}if(We.source=ve,ue){if(K===Ce.maxZoom||K===ue)continue;var jt=1<<ue-K;if(te!==Math.floor(Me/jt)||oe!==Math.floor(Ee/jt))continue}else if(K===Ce.indexMaxZoom||We.numPoints<=Ce.indexMaxPoints)continue;if(We.source=null,ve.length!==0){ze>1&&console.time("clipping");var ur,nr,Cr,Xr,mn,Vn,cr=.5*Ce.buffer/Ce.extent,Cn=.5-cr,Zn=.5+cr,Mi=1+cr;ur=nr=Cr=Xr=null,mn=Ze(ve,Je,te-cr,te+Zn,0,We.minX,We.maxX,Ce),Vn=Ze(ve,Je,te+Cn,te+Mi,0,We.minX,We.maxX,Ce),ve=null,mn&&(ur=Ze(mn,Je,oe-cr,oe+Zn,1,We.minY,We.maxY,Ce),nr=Ze(mn,Je,oe+Cn,oe+Mi,1,We.minY,We.maxY,Ce),mn=null),Vn&&(Cr=Ze(Vn,Je,oe-cr,oe+Zn,1,We.minY,We.maxY,Ce),Xr=Ze(Vn,Je,oe+Cn,oe+Mi,1,We.minY,We.maxY,Ce),Vn=null),ze>1&&console.timeEnd("clipping"),Le.push(ur||[],K+1,2*te,2*oe),Le.push(nr||[],K+1,2*te,2*oe+1),Le.push(Cr||[],K+1,2*te+1,2*oe),Le.push(Xr||[],K+1,2*te+1,2*oe+1)}}},sr.prototype.getTile=function(ve,K,te){var oe=this.options,ue=oe.extent,Me=oe.debug;if(ve<0||ve>24)return null;var Ee=1<<ve,Le=Ut(ve,K=(K%Ee+Ee)%Ee,te);if(this.tiles[Le])return Zr(this.tiles[Le],ue);Me>1&&console.log("drilling down to z%d-%d-%d",ve,K,te);for(var Ce,ze=ve,Je=K,Ge=te;!Ce&&ze>0;)ze--,Je=Math.floor(Je/2),Ge=Math.floor(Ge/2),Ce=this.tiles[Ut(ze,Je,Ge)];return Ce&&Ce.source?(Me>1&&console.log("found parent tile z%d-%d-%d",ze,Je,Ge),Me>1&&console.time("drilling down"),this.splitTile(Ce.source,ze,Je,Ge,ve,K,te),Me>1&&console.timeEnd("drilling down"),this.tiles[Le]?Zr(this.tiles[Le],ue):null):null};class js extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(K,te){return o._(this,void 0,void 0,function*(){const oe=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ue=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!ue)return null;const Me=new class{constructor(Le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.W,this.length=Le.length,this._features=Le}feature(Le){return new class{constructor(Ce){this._feature=Ce,this.extent=o.W,this.type=Ce.type,this.properties=Ce.tags,"id"in Ce&&!isNaN(Ce.id)&&(this.id=parseInt(Ce.id,10))}loadGeometry(){if(this._feature.type===1){const Ce=[];for(const ze of this._feature.geometry)Ce.push([new o.P(ze[0],ze[1])]);return Ce}{const Ce=[];for(const ze of this._feature.geometry){const Je=[];for(const Ge of ze)Je.push(new o.P(Ge[0],Ge[1]));Ce.push(Je)}return Ce}}toGeoJSON(Ce,ze,Je){return P.call(this,Ce,ze,Je)}}(this._features[Le])}}(ue.features);let Ee=Ve(Me);return Ee.byteOffset===0&&Ee.byteLength===Ee.buffer.byteLength||(Ee=new Uint8Array(Ee)),{vectorTile:Me,rawData:Ee.buffer}})}loadData(K){var te;return o._(this,void 0,void 0,function*(){(te=this._pendingRequest)===null||te===void 0||te.abort();const oe=!!(K&&K.request&&K.request.collectResourceTiming)&&new o.br(K.request);this._pendingRequest=new AbortController;try{let ue=yield this.loadGeoJSON(K,this._pendingRequest);if(delete this._pendingRequest,typeof ue!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(E(ue,!0),K.filter){const Ee=o.bx(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ee.result==="error")throw new Error(Ee.value.map(Ce=>`${Ce.key}: ${Ce.message}`).join(", "));ue={type:"FeatureCollection",features:ue.features.filter(Ce=>Ee.value.evaluate({zoom:0},Ce))}}this._geoJSONIndex=K.cluster?new rr(function({superclusterOptions:Ee,clusterProperties:Le}){if(!Le||!Ee)return Ee;const Ce={},ze={},Je={accumulated:null,zoom:0},Ge={properties:null},We=Object.keys(Le);for(const $t of We){const[jt,ur]=Le[$t],nr=o.bx(ur),Cr=o.bx(typeof jt=="string"?[jt,["accumulated"],["get",$t]]:jt);Ce[$t]=nr.value,ze[$t]=Cr.value}return Ee.map=$t=>{Ge.properties=$t;const jt={};for(const ur of We)jt[ur]=Ce[ur].evaluate(Je,Ge);return jt},Ee.reduce=($t,jt)=>{Ge.properties=jt;for(const ur of We)Je.accumulated=$t[ur],$t[ur]=ze[ur].evaluate(Je,Ge)},Ee}(K)).load(ue.features):function(Ee,Le){return new sr(Ee,Le)}(ue,K.geojsonVtOptions),this.loaded={};const Me={};if(oe){const Ee=oe.finish();Ee&&(Me.resourceTiming={},Me.resourceTiming[K.source]=JSON.parse(JSON.stringify(Ee)))}return Me}catch(ue){if(delete this._pendingRequest,o.by(ue))return{abandoned:!0};throw ue}})}reloadTile(K){const te=this.loaded;return te&&te[K.uid]?super.reloadTile(K):this.loadTile(K)}loadGeoJSON(K,te){return o._(this,void 0,void 0,function*(){const{promoteId:oe}=K;if(K.request){const ue=yield o.h(K.request,te);return this._dataUpdateable=ha(ue.data,oe)?lr(ue.data,oe):void 0,ue.data}if(typeof K.data=="string")try{const ue=JSON.parse(K.data);return this._dataUpdateable=ha(ue,oe)?lr(ue,oe):void 0,ue}catch{throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`)}if(!K.dataDiff)throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${K.source}`);return function(ue,Me,Ee){var Le,Ce,ze,Je;if(Me.removeAll&&ue.clear(),Me.remove)for(const Ge of Me.remove)ue.delete(Ge);if(Me.add)for(const Ge of Me.add){const We=Fr(Ge,Ee);We!=null&&ue.set(We,Ge)}if(Me.update)for(const Ge of Me.update){let We=ue.get(Ge.id);if(We==null)continue;const $t=!Ge.removeAllProperties&&(((Le=Ge.removeProperties)===null||Le===void 0?void 0:Le.length)>0||((Ce=Ge.addOrUpdateProperties)===null||Ce===void 0?void 0:Ce.length)>0);if((Ge.newGeometry||Ge.removeAllProperties||$t)&&(We=Object.assign({},We),ue.set(Ge.id,We),$t&&(We.properties=Object.assign({},We.properties))),Ge.newGeometry&&(We.geometry=Ge.newGeometry),Ge.removeAllProperties)We.properties={};else if(((ze=Ge.removeProperties)===null||ze===void 0?void 0:ze.length)>0)for(const jt of Ge.removeProperties)Object.prototype.hasOwnProperty.call(We.properties,jt)&&delete We.properties[jt];if(((Je=Ge.addOrUpdateProperties)===null||Je===void 0?void 0:Je.length)>0)for(const{key:jt,value:ur}of Ge.addOrUpdateProperties)We.properties[jt]=ur}}(this._dataUpdateable,K.dataDiff,oe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(K){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}class qn{constructor(K){this.self=K,this.actor=new o.C(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,oe)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=oe},this.self.addProtocol=o.be,this.self.removeProtocol=o.bf,this.self.registerRTLTextPlugin=te=>{if(o.bz.isParsed())throw new Error("RTL text plugin already registered.");o.bz.setMethods(te)},this.actor.registerMessageHandler("loadDEMTile",(te,oe)=>this._getDEMWorkerSource(te,oe.source).loadTile(oe)),this.actor.registerMessageHandler("removeDEMTile",(te,oe)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,oe.source).removeTile(oe)})),this.actor.registerMessageHandler("getClusterExpansionZoom",(te,oe)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(te,oe.type,oe.source).getClusterExpansionZoom(oe)})),this.actor.registerMessageHandler("getClusterChildren",(te,oe)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(te,oe.type,oe.source).getClusterChildren(oe)})),this.actor.registerMessageHandler("getClusterLeaves",(te,oe)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(te,oe.type,oe.source).getClusterLeaves(oe)})),this.actor.registerMessageHandler("loadData",(te,oe)=>this._getWorkerSource(te,oe.type,oe.source).loadData(oe)),this.actor.registerMessageHandler("loadTile",(te,oe)=>this._getWorkerSource(te,oe.type,oe.source).loadTile(oe)),this.actor.registerMessageHandler("reloadTile",(te,oe)=>this._getWorkerSource(te,oe.type,oe.source).reloadTile(oe)),this.actor.registerMessageHandler("abortTile",(te,oe)=>this._getWorkerSource(te,oe.type,oe.source).abortTile(oe)),this.actor.registerMessageHandler("removeTile",(te,oe)=>this._getWorkerSource(te,oe.type,oe.source).removeTile(oe)),this.actor.registerMessageHandler("removeSource",(te,oe)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][oe.type]||!this.workerSources[te][oe.type][oe.source])return;const ue=this.workerSources[te][oe.type][oe.source];delete this.workerSources[te][oe.type][oe.source],ue.removeSource!==void 0&&ue.removeSource(oe)})),this.actor.registerMessageHandler("setReferrer",(te,oe)=>o._(this,void 0,void 0,function*(){this.referrer=oe})),this.actor.registerMessageHandler("syncRTLPluginState",(te,oe)=>this._syncRTLPluginState(te,oe)),this.actor.registerMessageHandler("importScript",(te,oe)=>o._(this,void 0,void 0,function*(){this.self.importScripts(oe)})),this.actor.registerMessageHandler("setImages",(te,oe)=>this._setImages(te,oe)),this.actor.registerMessageHandler("updateLayers",(te,oe)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(oe.layers,oe.removedIds)})),this.actor.registerMessageHandler("setLayers",(te,oe)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(oe)}))}_setImages(K,te){return o._(this,void 0,void 0,function*(){this.availableImages[K]=te;for(const oe in this.workerSources[K]){const ue=this.workerSources[K][oe];for(const Me in ue)ue[Me].availableImages=te}})}_syncRTLPluginState(K,te){return o._(this,void 0,void 0,function*(){o.bz.setState(te);const oe=o.bz.getPluginURL();if(te.pluginStatus==="loaded"&&!o.bz.isParsed()&&oe!=null){this.self.importScripts(oe);const ue=o.bz.isParsed();if(ue)return ue;throw new Error(`RTL Text Plugin failed to import scripts from ${oe}`)}return!1})}_getAvailableImages(K){let te=this.availableImages[K];return te||(te=[]),te}_getLayerIndex(K){let te=this.layerIndexes[K];return te||(te=this.layerIndexes[K]=new s),te}_getWorkerSource(K,te,oe){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][te]||(this.workerSources[K][te]={}),!this.workerSources[K][te][oe]){const ue={sendAsync:(Me,Ee)=>(Me.targetMapId=K,this.actor.sendAsync(Me,Ee))};switch(te){case"vector":this.workerSources[K][te][oe]=new v(ue,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][te][oe]=new js(ue,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][te][oe]=new this.externalWorkerSourceTypes[te](ue,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][te][oe]}_getDEMWorkerSource(K,te){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][te]||(this.demWorkerSources[K][te]=new y),this.demWorkerSources[K][te]}}return o.i(self)&&(self.worker=new qn(self)),qn}),i("index",["exports","./shared"],function(o,s){var c="4.0.0";let f,p;const v={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:T=>new Promise((u,m)=>{const b=requestAnimationFrame(u);T.signal.addEventListener("abort",()=>{cancelAnimationFrame(b),m(s.c())})}),getImageData(T,u=0){return this.getImageCanvasContext(T).getImageData(-u,-u,T.width+2*u,T.height+2*u)},getImageCanvasContext(T){const u=window.document.createElement("canvas"),m=u.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return u.width=T.width,u.height=T.height,m.drawImage(T,0,0,T.width,T.height),m},resolveURL:T=>(f||(f=document.createElement("a")),f.href=T,f.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(p==null&&(p=matchMedia("(prefers-reduced-motion: reduce)")),p.matches)}};class y{static testProp(u){if(!y.docStyle)return u[0];for(let m=0;m<u.length;m++)if(u[m]in y.docStyle)return u[m];return u[0]}static create(u,m,b){const w=window.document.createElement(u);return m!==void 0&&(w.className=m),b&&b.appendChild(w),w}static createNS(u,m){return window.document.createElementNS(u,m)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(u,m){u.style[y.transformProp]=m}static addEventListener(u,m,b,w={}){u.addEventListener(m,b,"passive"in w?w:w.capture)}static removeEventListener(u,m,b,w={}){u.removeEventListener(m,b,"passive"in w?w:w.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static getScale(u){const m=u.getBoundingClientRect();return{x:m.width/u.offsetWidth||1,y:m.height/u.offsetHeight||1,boundingClientRect:m}}static getPoint(u,m,b){const w=m.boundingClientRect;return new s.P((b.clientX-w.left)/m.x-u.clientLeft,(b.clientY-w.top)/m.y-u.clientTop)}static mousePos(u,m){const b=y.getScale(u);return y.getPoint(u,b,m)}static touchPos(u,m){const b=[],w=y.getScale(u);for(let C=0;C<m.length;C++)b.push(y.getPoint(u,w,m[C]));return b}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);const _={supported:!1,testSupport:function(T){!P&&E&&(I?D(T):S=T)}};let S,E,P=!1,I=!1;function D(T){const u=T.createTexture();T.bindTexture(T.TEXTURE_2D,u);try{if(T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,E),T.isContextLost())return;_.supported=!0}catch{}T.deleteTexture(u),P=!0}var L,B;typeof document<"u"&&(E=document.createElement("img"),E.onload=function(){S&&D(S),S=null,I=!0},E.onerror=function(){P=!0,S=null},E.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(T){let u,m,b,w;T.resetRequestQueue=()=>{u=[],m=0,b=0,w={}},T.addThrottleControl=F=>{const H=b++;return w[H]=F,H},T.removeThrottleControl=F=>{delete w[F],R()},T.getImage=(F,H,q=!0)=>new Promise((Z,ie)=>{_.supported&&(F.headers||(F.headers={}),F.headers.accept="image/webp,*/*"),s.e(F,{type:"image"}),u.push({abortController:H,requestParameters:F,supportImageRefresh:q,state:"queued",onError:ce=>{ie(ce)},onSuccess:ce=>{Z(ce)}}),R()});const C=F=>s._(this,void 0,void 0,function*(){F.state="running";const{requestParameters:H,supportImageRefresh:q,onError:Z,onSuccess:ie,abortController:ce}=F,he=q===!1&&!s.i(self)&&!s.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce((Ae,Fe)=>Ae&&Fe==="accept",!0));m++;const ge=he?z(H,ce):s.m(H,ce);try{const Ae=yield ge;delete F.abortController,F.state="completed",Ae.data instanceof HTMLImageElement||s.b(Ae.data)?ie(Ae):Ae.data&&ie({data:yield(le=Ae.data,typeof createImageBitmap=="function"?s.d(le):s.f(le)),cacheControl:Ae.cacheControl,expires:Ae.expires})}catch(Ae){delete F.abortController,Z(Ae)}finally{m--,R()}var le}),R=()=>{const F=(()=>{for(const H of Object.keys(w))if(w[H]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=m;H<F&&u.length>0;H++){const q=u.shift();q.abortController.signal.aborted?H--:C(q)}},z=(F,H)=>new Promise((q,Z)=>{const ie=new Image,ce=F.url,he=F.credentials;he&&he==="include"?ie.crossOrigin="use-credentials":(he&&he==="same-origin"||!s.s(ce))&&(ie.crossOrigin="anonymous"),H.signal.addEventListener("abort",()=>{ie.src="",Z(s.c())}),ie.fetchPriority="high",ie.onload=()=>{ie.onerror=ie.onload=null,q({data:ie})},ie.onerror=()=>{ie.onerror=ie.onload=null,H.signal.aborted||Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ie.src=ce})}(L||(L={})),L.resetRequestQueue(),function(T){T.Glyphs="Glyphs",T.Image="Image",T.Source="Source",T.SpriteImage="SpriteImage",T.SpriteJSON="SpriteJSON",T.Style="Style",T.Tile="Tile",T.Unknown="Unknown"}(B||(B={}));class U{constructor(u){this._transformRequestFn=u}transformRequest(u,m){return this._transformRequestFn&&this._transformRequestFn(u,m)||{url:u}}normalizeSpriteURL(u,m,b){const w=function(C){const R=C.match(V);if(!R)throw new Error(`Unable to parse URL "${C}"`);return{protocol:R[1],authority:R[2],path:R[3]||"/",params:R[4]?R[4].split("&"):[]}}(u);return w.path+=`${m}${b}`,function(C){const R=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${R}`}(w)}setTransformRequest(u){this._transformRequestFn=u}}const V=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function N(T){var u=new s.A(3);return u[0]=T[0],u[1]=T[1],u[2]=T[2],u}var G,Y=function(T,u,m){return T[0]=u[0]-m[0],T[1]=u[1]-m[1],T[2]=u[2]-m[2],T};G=new s.A(3),s.A!=Float32Array&&(G[0]=0,G[1]=0,G[2]=0);var ee=function(T){var u=T[0],m=T[1];return u*u+m*m};function J(T){const u=[];if(typeof T=="string")u.push({id:"default",url:T});else if(T&&T.length>0){const m=[];for(const{id:b,url:w}of T){const C=`${b}${w}`;m.indexOf(C)===-1&&(m.push(C),u.push({id:b,url:w}))}}return u}(function(){var T=new s.A(2);s.A!=Float32Array&&(T[0]=0,T[1]=0)})();class X{constructor(u,m,b,w){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(m,w)}update(u,m,b){const{width:w,height:C}=u,R=!(this.size&&this.size[0]===w&&this.size[1]===C||b),{context:z}=this,{gl:F}=z;if(this.useMipmap=!!(m&&m.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!m||m.premultiply!==!1)),R)this.size=[w,C],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||s.b(u)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,u):F.texImage2D(F.TEXTURE_2D,0,this.format,w,C,0,this.format,F.UNSIGNED_BYTE,u.data);else{const{x:H,y:q}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||s.b(u)?F.texSubImage2D(F.TEXTURE_2D,0,H,q,F.RGBA,F.UNSIGNED_BYTE,u):F.texSubImage2D(F.TEXTURE_2D,0,H,q,w,C,F.RGBA,F.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D)}bind(u,m,b){const{context:w}=this,{gl:C}=w;C.bindTexture(C.TEXTURE_2D,this.texture),b!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=C.LINEAR),u!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,b||u),this.filter=u),m!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,m),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,m),this.wrap=m)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function ne(T){const{userImage:u}=T;return!!(u&&u.render&&u.render())&&(T.data.replace(new Uint8Array(u.data.buffer)),!0)}class we extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,promiseResolve:b}of this.requestors)b(this._getImagesForIds(m));this.requestors=[]}}getImage(u){const m=this.images[u];if(m&&!m.data&&m.spriteData){const b=m.spriteData;m.data=new s.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),m.spriteData=null}return m}addImage(u,m){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let b=!0;const w=m.data||m.spriteData;return this._validateStretch(m.stretchX,w&&w.width)||(this.fire(new s.j(new Error(`Image "${u}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,w&&w.height)||(this.fire(new s.j(new Error(`Image "${u}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new s.j(new Error(`Image "${u}" has invalid "content" value`))),b=!1),b}_validateStretch(u,m){if(!u)return!0;let b=0;for(const w of u){if(w[0]<b||w[1]<w[0]||m<w[1])return!1;b=w[1]}return!0}_validateContent(u,m){if(!u)return!0;if(u.length!==4)return!1;const b=m.spriteData,w=b&&b.width||m.data.width,C=b&&b.height||m.data.height;return!(u[0]<0||w<u[0]||u[1]<0||C<u[1]||u[2]<0||w<u[2]||u[3]<0||C<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,m,b=!0){const w=this.getImage(u);if(b&&(w.data.width!==m.data.width||w.data.height!==m.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=w.version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise((m,b)=>{let w=!0;if(!this.isLoaded())for(const C of u)this.images[C]||(w=!1);this.isLoaded()||w?m(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:m})})}_getImagesForIds(u){const m={};for(const b of u){let w=this.getImage(b);w||(this.fire(new s.k("styleimagemissing",{id:b})),w=this.getImage(b)),w?m[b]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:s.w(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return m}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],b=this.getImage(u);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const w={w:b.data.width+2,h:b.data.height+2,x:0,y:0},C=new s.I(w,b);this.patterns[u]={bin:w,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new X(u,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:m,h:b}=s.p(u),w=this.atlasImage;w.resize({width:m||1,height:b||1});for(const C in this.patterns){const{bin:R}=this.patterns[C],z=R.x+1,F=R.y+1,H=this.getImage(C).data,q=H.width,Z=H.height;s.R.copy(H,w,{x:0,y:0},{x:z,y:F},{width:q,height:Z}),s.R.copy(H,w,{x:0,y:Z-1},{x:z,y:F-1},{width:q,height:1}),s.R.copy(H,w,{x:0,y:0},{x:z,y:F+Z},{width:q,height:1}),s.R.copy(H,w,{x:q-1,y:0},{x:z-1,y:F},{width:1,height:Z}),s.R.copy(H,w,{x:0,y:0},{x:z+q,y:F},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.getImage(m);b||s.w(`Image with ID: "${m}" was not found`),ne(b)&&this.updateImage(m,b)}}}const fe=1e20;function me(T,u,m,b,w,C,R,z,F){for(let H=u;H<u+b;H++)Ve(T,m*C+H,C,w,R,z,F);for(let H=m;H<m+w;H++)Ve(T,H*C+u,1,b,R,z,F)}function Ve(T,u,m,b,w,C,R){C[0]=0,R[0]=-fe,R[1]=fe,w[0]=T[u];for(let z=1,F=0,H=0;z<b;z++){w[z]=T[u+z*m];const q=z*z;do{const Z=C[F];H=(w[z]-w[Z]+q-Z*Z)/(z-Z)/2}while(H<=R[F]&&--F>-1);F++,C[F]=z,R[F]=H,R[F+1]=fe}for(let z=0,F=0;z<b;z++){for(;R[F+1]<z;)F++;const H=C[F],q=z-H;T[u+z*m]=w[H]+q*q}}class Oe{constructor(u,m){this.requestManager=u,this.localIdeographFontFamily=m,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return s._(this,void 0,void 0,function*(){const m=[];for(const C in u)for(const R of u[C])m.push(this._getAndCacheGlyphsPromise(C,R));const b=yield Promise.all(m),w={};for(const{stack:C,id:R,glyph:z}of b)w[C]||(w[C]={}),w[C][R]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};return w})}_getAndCacheGlyphsPromise(u,m){return s._(this,void 0,void 0,function*(){let b=this.entries[u];b||(b=this.entries[u]={glyphs:{},requests:{},ranges:{}});let w=b.glyphs[m];if(w!==void 0)return{stack:u,id:m,glyph:w};if(w=this._tinySDF(b,u,m),w)return b.glyphs[m]=w,{stack:u,id:m,glyph:w};const C=Math.floor(m/256);if(256*C>65535)throw new Error("glyphs > 65535 not supported");if(b.ranges[C])return{stack:u,id:m,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!b.requests[C]){const z=Oe.loadGlyphRange(u,C,this.url,this.requestManager);b.requests[C]=z}const R=yield b.requests[C];for(const z in R)this._doesCharSupportLocalGlyph(+z)||(b.glyphs[+z]=R[+z]);return b.ranges[C]=!0,{stack:u,id:m,glyph:R[m]||null}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(s.u["CJK Unified Ideographs"](u)||s.u["Hangul Syllables"](u)||s.u.Hiragana(u)||s.u.Katakana(u))}_tinySDF(u,m,b){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(b))return;let C=u.tinySDF;if(!C){let z="400";/bold/i.test(m)?z="900":/medium/i.test(m)?z="500":/light/i.test(m)&&(z="200"),C=u.tinySDF=new Oe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:w,fontWeight:z})}const R=C.draw(String.fromCharCode(b));return{id:b,bitmap:new s.o({width:R.width||60,height:R.height||60},R.data),metrics:{width:R.glyphWidth/2||24,height:R.glyphHeight/2||24,left:R.glyphLeft/2+.5||0,top:R.glyphTop/2-27.5||-8,advance:R.glyphAdvance/2||24,isDoubleResolution:!0}}}}Oe.loadGlyphRange=function(T,u,m,b){return s._(this,void 0,void 0,function*(){const w=256*u,C=w+255,R=b.transformRequest(m.replace("{fontstack}",T).replace("{range}",`${w}-${C}`),B.Glyphs),z=yield s.l(R,new AbortController);if(!z||!z.data)throw new Error(`Could not load glyph range. range: ${u}, ${w}-${C}`);const F={};for(const H of s.n(z.data))F[H.id]=H;return F})},Oe.TinySDF=class{constructor({fontSize:T=24,buffer:u=3,radius:m=8,cutoff:b=.25,fontFamily:w="sans-serif",fontWeight:C="normal",fontStyle:R="normal"}={}){this.buffer=u,this.cutoff=b,this.radius=m;const z=this.size=T+4*u,F=this._createCanvas(z),H=this.ctx=F.getContext("2d",{willReadFrequently:!0});H.font=`${R} ${C} ${T}px ${w}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(T){const u=document.createElement("canvas");return u.width=u.height=T,u}draw(T){const{width:u,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,actualBoundingBoxLeft:w,actualBoundingBoxRight:C}=this.ctx.measureText(T),R=Math.ceil(m),z=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-w))),F=Math.min(this.size-this.buffer,R+Math.ceil(b)),H=z+2*this.buffer,q=F+2*this.buffer,Z=Math.max(H*q,0),ie=new Uint8ClampedArray(Z),ce={data:ie,width:H,height:q,glyphWidth:z,glyphHeight:F,glyphTop:R,glyphLeft:0,glyphAdvance:u};if(z===0||F===0)return ce;const{ctx:he,buffer:ge,gridInner:le,gridOuter:Ae}=this;he.clearRect(ge,ge,z,F),he.fillText(T,ge,ge+R);const Fe=he.getImageData(ge,ge,z,F);Ae.fill(fe,0,Z),le.fill(0,0,Z);for(let _e=0;_e<F;_e++)for(let Ie=0;Ie<z;Ie++){const He=Fe.data[4*(_e*z+Ie)+3]/255;if(He===0)continue;const Ne=(_e+ge)*H+Ie+ge;if(He===1)Ae[Ne]=0,le[Ne]=fe;else{const qe=.5-He;Ae[Ne]=qe>0?qe*qe:0,le[Ne]=qe<0?qe*qe:0}}me(Ae,0,0,H,q,H,this.f,this.v,this.z),me(le,ge,ge,z,F,H,this.f,this.v,this.z);for(let _e=0;_e<Z;_e++){const Ie=Math.sqrt(Ae[_e])-Math.sqrt(le[_e]);ie[_e]=Math.round(255-255*(Ie/this.radius+this.cutoff))}return ce}};class ct{constructor(){this.specification=s.v.light.position}possiblyEvaluate(u,m){return s.y(u.expression.evaluate(m))}interpolate(u,m,b){return{x:s.z.number(u.x,m.x,b),y:s.z.number(u.y,m.y,b),z:s.z.number(u.z,m.z,b)}}}let _t;class zt extends s.E{constructor(u){super(),_t=_t||new s.q({anchor:new s.D(s.v.light.anchor),position:new ct,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(_t),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(s.r,u,m))for(const b in u){const w=u[b];b.endsWith("-transition")?this._transitionable.setTransition(b.slice(0,-11),w):this._transitionable.setValue(b,w)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,b){return(!b||b.validate!==!1)&&s.t(this,u.call(s.x,{value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}class Mt{constructor(u,m){this.width=u,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,m){const b=u.join(",")+String(m);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(u,m)),this.dashEntry[b]}getDashRanges(u,m,b){const w=[];let C=u.length%2==1?-u[u.length-1]*b:0,R=u[0]*b,z=!0;w.push({left:C,right:R,isDash:z,zeroLength:u[0]===0});let F=u[0];for(let H=1;H<u.length;H++){z=!z;const q=u[H];C=F*b,F+=q,R=F*b,w.push({left:C,right:R,isDash:z,zeroLength:q===0})}return w}addRoundDash(u,m,b){const w=m/2;for(let C=-b;C<=b;C++){const R=this.width*(this.nextRow+b+C);let z=0,F=u[z];for(let H=0;H<this.width;H++){H/F.right>1&&(F=u[++z]);const q=Math.abs(H-F.left),Z=Math.abs(H-F.right),ie=Math.min(q,Z);let ce;const he=C/b*(w+1);if(F.isDash){const ge=w-Math.abs(he);ce=Math.sqrt(ie*ie+ge*ge)}else ce=w-Math.sqrt(ie*ie+he*he);this.data[R+H]=Math.max(0,Math.min(255,ce+128))}}}addRegularDash(u){for(let z=u.length-1;z>=0;--z){const F=u[z],H=u[z+1];F.zeroLength?u.splice(z,1):H&&H.isDash===F.isDash&&(H.left=F.left,u.splice(z,1))}const m=u[0],b=u[u.length-1];m.isDash===b.isDash&&(m.left=b.left-this.width,b.right=m.right+this.width);const w=this.width*this.nextRow;let C=0,R=u[C];for(let z=0;z<this.width;z++){z/R.right>1&&(R=u[++C]);const F=Math.abs(z-R.left),H=Math.abs(z-R.right),q=Math.min(F,H);this.data[w+z]=Math.max(0,Math.min(255,(R.isDash?q:-q)+128))}}addDash(u,m){const b=m?7:0,w=2*b+1;if(this.nextRow+w>this.height)return s.w("LineAtlas out of space"),null;let C=0;for(let z=0;z<u.length;z++)C+=u[z];if(C!==0){const z=this.width/C,F=this.getDashRanges(u,this.width,z);m?this.addRoundDash(F,z,b):this.addRegularDash(F)}const R={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:C};return this.nextRow+=w,this.dirty=!0,R}bind(u){const m=u.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}const ar="maplibre_preloaded_worker_pool";class rr{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<rr.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(m=>{m.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ar]}numActive(){return Object.keys(this.active).length}}const wr=Math.floor(v.hardwareConcurrency/2);let Xt,Ue;function st(){return Xt||(Xt=new rr),Xt}rr.workerCount=s.B(globalThis)?Math.max(Math.min(wr,3),1):1;class at{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=m;const b=this.workerPool.acquire(m);for(let w=0;w<b.length;w++){const C=new s.C(b[w],m);C.name=`Worker ${w}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,m){const b=[];for(const w of this.actors)b.push(w.sendAsync({type:u,data:m}));return Promise.all(b)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(m=>{m.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,m){for(const b of this.actors)b.registerMessageHandler(u,m)}}function dt(){return Ue||(Ue=new at(st(),s.G),Ue.registerMessageHandler("getResource",(T,u,m)=>s.m(u,m))),Ue}function vt(T,u){const m=s.F();return s.H(m,m,[1,1,0]),s.J(m,m,[.5*T.width,.5*T.height,1]),s.K(m,m,T.calculatePosMatrix(u.toUnwrapped()))}function It(T,u,m,b,w,C){const R=function(Z,ie,ce){if(Z)for(const he of Z){const ge=ie[he];if(ge&&ge.source===ce&&ge.type==="fill-extrusion")return!0}else for(const he in ie){const ge=ie[he];if(ge.source===ce&&ge.type==="fill-extrusion")return!0}return!1}(w&&w.layers,u,T.id),z=C.maxPitchScaleFactor(),F=T.tilesIn(b,z,R);F.sort(de);const H=[];for(const Z of F)H.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(u,m,T._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,w,C,z,vt(T.transform,Z.tileID))});const q=function(Z){const ie={},ce={};for(const he of Z){const ge=he.queryResults,le=he.wrappedTileID,Ae=ce[le]=ce[le]||{};for(const Fe in ge){const _e=ge[Fe],Ie=Ae[Fe]=Ae[Fe]||{},He=ie[Fe]=ie[Fe]||[];for(const Ne of _e)Ie[Ne.featureIndex]||(Ie[Ne.featureIndex]=!0,He.push(Ne))}}return ie}(H);for(const Z in q)q[Z].forEach(ie=>{const ce=ie.feature,he=T.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=he});return q}function de(T,u){const m=T.tileID,b=u.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}function be(T,u,m){return s._(this,void 0,void 0,function*(){let b=T;if(T.url?b=(yield s.h(u.transformRequest(T.url,B.Source),m)).data:yield v.frameAsync(m),!b)return null;const w=s.L(s.e(b,T),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in b&&b.vector_layers&&(w.vectorLayerIds=b.vector_layers.map(C=>C.id)),w})}class Be{constructor(u,m){u&&(m?this.setSouthWest(u).setNorthEast(m):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof s.M?new s.M(u.lng,u.lat):s.M.convert(u),this}setSouthWest(u){return this._sw=u instanceof s.M?new s.M(u.lng,u.lat):s.M.convert(u),this}extend(u){const m=this._sw,b=this._ne;let w,C;if(u instanceof s.M)w=u,C=u;else{if(!(u instanceof Be))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(Be.convert(u)):this.extend(s.M.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(s.M.convert(u)):this;if(w=u._sw,C=u._ne,!w||!C)return this}return m||b?(m.lng=Math.min(w.lng,m.lng),m.lat=Math.min(w.lat,m.lat),b.lng=Math.max(C.lng,b.lng),b.lat=Math.max(C.lat,b.lat)):(this._sw=new s.M(w.lng,w.lat),this._ne=new s.M(C.lng,C.lat)),this}getCenter(){return new s.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.M(this.getWest(),this.getNorth())}getSouthEast(){return new s.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:m,lat:b}=s.M.convert(u);let w=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&w}static convert(u){return u instanceof Be?u:u&&new Be(u)}static fromLngLat(u,m=0){const b=360*m/40075017,w=b/Math.cos(Math.PI/180*u.lat);return new Be(new s.M(u.lng-w,u.lat-b),new s.M(u.lng+w,u.lat+b))}}class Xe{constructor(u,m,b){this.bounds=Be.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),b=Math.floor(s.N(this.bounds.getWest())*m),w=Math.floor(s.O(this.bounds.getNorth())*m),C=Math.ceil(s.N(this.bounds.getEast())*m),R=Math.ceil(s.O(this.bounds.getSouth())*m);return u.x>=b&&u.x<C&&u.y>=w&&u.y<R}}class ye extends s.E{constructor(u,m,b,w){if(super(),this.id=u,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.L(m,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield be(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(s.e(this,u),u.bounds&&(this.tileBounds=new Xe(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new s.j(u))}})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(m,B.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};b.request.collectResourceTiming=this._collectResourceTiming;let w="reloadTile";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise((C,R)=>{u.reloadPromise={resolve:C,reject:R}})}else u.actor=this.dispatcher.getActor(),w="loadTile";u.abortController=new AbortController;try{const C=yield u.actor.sendAsync({type:w,data:b},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,C)}catch(C){if(delete u.abortController,u.aborted)return;if(C&&C.status!==404)throw C;this._afterTileLoadWorkerResponse(u,null)}})}_afterTileLoadWorkerResponse(u,m){if(m&&m.resourceTiming&&(u.resourceTiming=m.resourceTiming),m&&this.map._refreshExpiredTiles&&u.setExpiryData(m),u.loadVectorData(m,this.map.painter),u.reloadPromise){const b=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(b.resolve).catch(b.reject)}}abortTile(u){return s._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"abortTile",data:{uid:u.uid,type:this.type,source:this.id}}))})}unloadTile(u){return s._(this,void 0,void 0,function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"removeTile",data:{uid:u.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class lt extends s.E{constructor(u,m,b,w){super(),this.id=u,this.dispatcher=b,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},m),s.e(this,s.L(m,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield be(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(s.e(this,u),u.bounds&&(this.tileBounds=new Xe(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new s.j(u))}})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}serialize(){return s.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const b=yield L.getImage(this.map._requestManager.transformRequest(m,B.Tile),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(b&&b.data){this.map._refreshExpiredTiles&&b.cacheControl&&b.expires&&u.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const w=this.map.painter.context,C=w.gl,R=b.data;u.texture=this.map.painter.getTileTexture(R.width),u.texture?u.texture.update(R,{useMipmap:!0}):(u.texture=new X(w,R,C.RGBA,{useMipmap:!0}),u.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),w.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,w.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,w.extTextureFilterAnisotropicMax)),u.state="loaded"}}catch(b){if(delete u.abortController,u.aborted)u.state="unloaded";else if(b)throw u.state="errored",b}})}abortTile(u){return s._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)})}unloadTile(u){return s._(this,void 0,void 0,function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)})}hasTransition(){return!1}}class xt extends lt{constructor(u,m,b,w){super(u,m,b,w),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b=this.map._requestManager.transformRequest(m,B.Tile);u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const w=yield L.getImage(b,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(w&&w.data){const C=w.data;this.map._refreshExpiredTiles&&w.cacheControl&&w.expires&&u.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const R=s.b(C)&&s.S()?C:yield this.readImageNow(C),z={type:this.type,uid:u.uid,source:this.id,rawImageData:R,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const F=yield u.actor.sendAsync({type:"loadDEMTile",data:z});u.dem=F,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(w){if(delete u.abortController,u.aborted)u.state="unloaded";else if(w)throw u.state="errored",w}})}readImageNow(u){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.U()){const m=u.width+2,b=u.height+2;try{return new s.R({width:m,height:b},yield s.V(u,-1,-1,m,b))}catch{}}return v.getImageData(u,1)})}_getNeighboringTiles(u){const m=u.canonical,b=Math.pow(2,m.z),w=(m.x-1+b)%b,C=m.x===0?u.wrap-1:u.wrap,R=(m.x+1+b)%b,z=m.x+1===b?u.wrap+1:u.wrap,F={};return F[new s.Q(u.overscaledZ,C,m.z,w,m.y).key]={backfilled:!1},F[new s.Q(u.overscaledZ,z,m.z,R,m.y).key]={backfilled:!1},m.y>0&&(F[new s.Q(u.overscaledZ,C,m.z,w,m.y-1).key]={backfilled:!1},F[new s.Q(u.overscaledZ,u.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},F[new s.Q(u.overscaledZ,z,m.z,R,m.y-1).key]={backfilled:!1}),m.y+1<b&&(F[new s.Q(u.overscaledZ,C,m.z,w,m.y+1).key]={backfilled:!1},F[new s.Q(u.overscaledZ,u.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},F[new s.Q(u.overscaledZ,z,m.z,R,m.y+1).key]={backfilled:!1}),F}unloadTile(u){return s._(this,void 0,void 0,function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:u.uid,source:this.id}}))})}}class Ze extends s.E{constructor(u,m,b,w){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(w),this._data=m.data,this._options=s.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;const C=s.W/this.tileSize;this.workerOptions=s.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*C,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*C,extent:s.W,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?m.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:s.W,radius:(m.clusterRadius||50)*C,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,m,b){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:u,limit:m,offset:b}})}_updateWorkerData(u){return s._(this,void 0,void 0,function*(){const m=s.e({type:this.type},this.workerOptions);u?m.dataDiff=u:typeof this._data=="string"?(m.request=this.map._requestManager.transformRequest(v.resolveURL(this._data),B.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{const b=yield this.actor.sendAsync({type:"loadData",data:m});if(this._pendingLoads--,this._removed||b.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let w=null;b.resourceTiming&&b.resourceTiming[this.id]&&(w=b.resourceTiming[this.id].slice(0));const C={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&s.e(C,{resourceTiming:w}),this.fire(new s.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))}catch(b){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(b))}})}loaded(){return this._pendingLoads===0}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const b={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.abortController=new AbortController;const w=yield this.actor.sendAsync({type:m,data:b},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(w,this.map.painter,m==="reloadTile")})}abortTile(u){return s._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0})}unloadTile(u){return s._(this,void 0,void 0,function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:u.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ut=s.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class nt extends s.E{constructor(u,m,b,w){super(),this.id=u,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=m}load(u){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const m=yield L.getImage(this.map._requestManager.transformRequest(this.url,B.Image),this._request);this._request=null,this._loaded=!0,m&&m.data&&(this.image=m.data,u&&(this.coordinates=u),this._finishLoading())}catch(m){this._request=null,this.fire(new s.j(m))}})}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const m=u.map(s.Y.fromLngLat);this.tileID=function(w){let C=1/0,R=1/0,z=-1/0,F=-1/0;for(const ie of w)C=Math.min(C,ie.x),R=Math.min(R,ie.y),z=Math.max(z,ie.x),F=Math.max(F,ie.y);const H=Math.max(z-C,F-R),q=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),Z=Math.pow(2,q);return new s.a0(q,Math.floor((C+z)/2*Z),Math.floor((R+F)/2*Z))}(m),this.minzoom=this.maxzoom=this.tileID.z;const b=m.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new s.Z,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,s.W,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,s.W),this._boundsArray.emplaceBack(b[2].x,b[2].y,s.W,s.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=s.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new X(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let b=!1;for(const w in this.tiles){const C=this.tiles[w];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,b=!0)}b&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Lt extends nt{constructor(u,m,b,w){super(u,m,b,w),this.roundZoom=!0,this.type="video",this.options=m}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const m of u.urls)this.urls.push(this.map._requestManager.transformRequest(m,B.Source).url);try{const m=yield s.a2(this.urls);if(this._loaded=!0,!m)return;this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(m){this.fire(new s.j(m))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const m=this.video.seekable;u<m.start(0)||u>m.end(0)?this.fire(new s.j(new s.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,m=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=s.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new X(u,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let b=!1;for(const w in this.tiles){const C=this.tiles[w];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,b=!0)}b&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class qt extends nt{constructor(u,m,b,w){super(u,m,b,w),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some(C=>!Array.isArray(C)||C.length!==2||C.some(R=>typeof R!="number"))||this.fire(new s.j(new s.a1(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.a1(`sources.${u}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new s.j(new s.a1(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a1(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.a1(`sources.${u}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const m=this.map.painter.context,b=m.gl;this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=s.$.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new X(m,this.canvas,b.RGBA,{premultiply:!0});let w=!1;for(const C in this.tiles){const R=this.tiles[C];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,w=!0)}w&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const Vt={},er=T=>{switch(T){case"geojson":return Ze;case"image":return nt;case"raster":return lt;case"raster-dem":return xt;case"vector":return ye;case"video":return Lt;case"canvas":return qt}return Vt[T]};class gr extends s.E{constructor(){super(...arguments),this.pluginStatus="unavailable",this.pluginURL=null,this.dispatcher=dt(),this.queue=[]}_sendPluginStateToWorker(){return s._(this,void 0,void 0,function*(){yield this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}),this.fire(new s.k("pluginStateChange",{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}))})}getRTLTextPluginStatus(){return this.pluginStatus}clearRTLTextPlugin(){this.pluginStatus="unavailable",this.pluginURL=null}setRTLTextPlugin(u,m=!1){return s._(this,void 0,void 0,function*(){if(this.pluginStatus==="deferred"||this.pluginStatus==="loading"||this.pluginStatus==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");this.pluginURL=v.resolveURL(u),this.pluginStatus="deferred",yield this._sendPluginStateToWorker(),m||(yield this._downloadRTLTextPlugin())})}_downloadRTLTextPlugin(){return s._(this,void 0,void 0,function*(){if(this.pluginStatus!=="deferred"||!this.pluginURL)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");try{this.pluginStatus="loading",yield this._sendPluginStateToWorker(),yield s.l({url:this.pluginURL},new AbortController),this.pluginStatus="loaded"}catch{this.pluginStatus="error"}yield this._sendPluginStateToWorker()})}lazyLoadRTLTextPlugin(){return s._(this,void 0,void 0,function*(){this.pluginStatus==="deferred"&&(yield this._downloadRTLTextPlugin())})}}let Pr=null;function Ke(){return Pr||(Pr=new gr),Pr}class Zr{constructor(u,m){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=s.a3(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const m=u+this.timeAdded;m<this.fadeEndTime||(this.fadeEndTime=m)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,m,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(w,C){const R={};if(!C)return R;for(const z of w){const F=z.layerIds.map(H=>C.getLayer(H)).filter(Boolean);if(F.length!==0){z.layers=F,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(H=>F.filter(q=>q.id===H)[0]));for(const H of F)R[H.id]=z}}return R}(u.buckets,m.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const C=this.buckets[w];if(C instanceof s.a5){if(this.hasSymbolBuckets=!0,!b)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const C=this.buckets[w];if(C instanceof s.a5&&C.hasRTLText){this.hasRTLText=!0,Ke().lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const w in this.buckets){const C=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(w).queryRadius(C))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new s.a4}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const b in this.buckets){const w=this.buckets[b];w.uploadPending()&&w.upload(u)}const m=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X(u,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X(u,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,m,b,w,C,R,z,F,H,q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:C,scale:R,tileSize:this.tileSize,pixelPosMatrix:q,transform:F,params:z,queryPadding:this.queryPadding*H},u,m,b):{}}querySourceFeatures(u,m){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const w=b.loadVTLayers(),C=m&&m.sourceLayer?m.sourceLayer:"",R=w._geojsonTileLayer||w[C];if(!R)return;const z=s.a6(m&&m.filter),{z:F,x:H,y:q}=this.tileID.canonical,Z={z:F,x:H,y:q};for(let ie=0;ie<R.length;ie++){const ce=R.feature(ie);if(z.needGeometry){const le=s.a7(ce,!0);if(!z.filter(new s.a8(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!z.filter(new s.a8(this.tileID.overscaledZ),ce))continue;const he=b.getId(ce,C),ge=new s.a9(ce,F,H,q,he);ge.tile=Z,u.push(ge)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const m=this.expirationTime;if(u.cacheControl){const b=s.aa(u.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const b=Date.now();let w=!1;if(this.expirationTime>b)w=!1;else if(m)if(this.expirationTime<m)w=!0;else{const C=this.expirationTime-m;C?this.expirationTime=b+Math.max(C,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!m.style.hasLayer(w))continue;const C=this.buckets[w],R=C.layers[0].sourceLayer||"_geojsonTileLayer",z=b[R],F=u[R];if(!z||!F||Object.keys(F).length===0)continue;C.update(F,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=m&&m.style&&m.style.getLayer(w);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=v.now()+u}setDependencies(u,m){const b={};for(const w of m)b[w]=!0;this.dependencies[u]=b}hasDependency(u,m){for(const b of u){const w=this.dependencies[b];if(w){for(const C of m)if(w[C])return!0}}return!1}}class pn{constructor(u,m){this.max=u,this.onRemove=m,this.reset()}reset(){for(const u in this.data)for(const m of this.data[u])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(u,m,b){const w=u.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const C={value:m,timeout:void 0};if(b!==void 0&&(C.timeout=setTimeout(()=>{this.remove(u,C)},b)),this.data[w].push(C),this.order.push(w),this.order.length>this.max){const R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const m=this.data[u].shift();return m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),m.value}getByKey(u){const m=this.data[u];return m?m[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,m){if(!this.has(u))return this;const b=u.wrapped().key,w=m===void 0?0:this.data[b].indexOf(m),C=this.data[b][w];return this.data[b].splice(w,1),C.timeout&&clearTimeout(C.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(C.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(u){const m=[];for(const b in this.data)for(const w of this.data[b])u(w.value)||m.push(w);for(const b of m)this.remove(b.value.tileID,b)}}class Ma{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,m,b){const w=String(m);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][w]=this.stateChanges[u][w]||{},s.e(this.stateChanges[u][w],b),this.deletedStates[u]===null){this.deletedStates[u]={};for(const C in this.state[u])C!==w&&(this.deletedStates[u][C]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][w]===null){this.deletedStates[u][w]={};for(const C in this.state[u][w])b[C]||(this.deletedStates[u][w][C]=null)}else for(const C in b)this.deletedStates[u]&&this.deletedStates[u][w]&&this.deletedStates[u][w][C]===null&&delete this.deletedStates[u][w][C]}removeFeatureState(u,m,b){if(this.deletedStates[u]===null)return;const w=String(m);if(this.deletedStates[u]=this.deletedStates[u]||{},b&&m!==void 0)this.deletedStates[u][w]!==null&&(this.deletedStates[u][w]=this.deletedStates[u][w]||{},this.deletedStates[u][w][b]=null);else if(m!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][w])for(b in this.deletedStates[u][w]={},this.stateChanges[u][w])this.deletedStates[u][w][b]=null;else this.deletedStates[u][w]=null;else this.deletedStates[u]=null}getState(u,m){const b=String(m),w=s.e({},(this.state[u]||{})[b],(this.stateChanges[u]||{})[b]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const C=this.deletedStates[u][m];if(C===null)return{};for(const R in C)delete w[R]}return w}initializeTileState(u,m){u.setFeatureState(this.state,m)}coalesceChanges(u,m){const b={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const C={};for(const R in this.stateChanges[w])this.state[w][R]||(this.state[w][R]={}),s.e(this.state[w][R],this.stateChanges[w][R]),C[R]=this.state[w][R];b[w]=C}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const C={};if(this.deletedStates[w]===null)for(const R in this.state[w])C[R]={},this.state[w][R]={};else for(const R in this.deletedStates[w]){if(this.deletedStates[w][R]===null)this.state[w][R]={};else for(const z of Object.keys(this.deletedStates[w][R]))delete this.state[w][R][z];C[R]=this.state[w][R]}b[w]=b[w]||{},s.e(b[w],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const w in u)u[w].setFeatureState(b,m)}}class Wn extends s.E{constructor(u,m,b){super(),this.id=u,this.dispatcher=b,this.on("data",w=>{w.dataType==="source"&&w.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,C,R,z)=>{const F=new(er(C.type))(w,C,R,z);if(F.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${F.id}`);return F})(u,m,b,this),this._tiles={},this._cache=new pn(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ma,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const m=this._tiles[u];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,m,b){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,m,b)}catch(w){u.state="errored",w.status!==404?this._source.fire(new s.j(w,{tile:u})):this.update(this.transform,this.terrain)}})}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new s.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const b=this._tiles[m];b.upload(u),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(ht).map(u=>u.key)}getRenderableIds(u){const m=[];for(const b in this._tiles)this._isIdRenderable(b,u)&&m.push(this._tiles[b]);return u?m.sort((b,w)=>{const C=b.tileID,R=w.tileID,z=new s.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),F=new s.P(R.canonical.x,R.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-R.overscaledZ||F.y-z.y||F.x-z.x}).map(b=>b.tileID.key):m.map(b=>b.tileID).sort(ht).map(b=>b.key)}hasRenderableParent(u){const m=this.findLoadedParent(u,0);return!!m&&this._isIdRenderable(m.tileID.key)}_isIdRenderable(u,m){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(m||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,m){return s._(this,void 0,void 0,function*(){const b=this._tiles[u];b&&(b.state!=="loading"&&(b.state=m),yield this._loadTile(b,u,m))})}_tileLoaded(u,m,b){u.timeAdded=v.now(),b==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(m,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const m=this.getRenderableIds();for(let w=0;w<m.length;w++){const C=m[w];if(u.neighboringTiles&&u.neighboringTiles[C]){const R=this.getTileByID(C);b(u,R),b(R,u)}}function b(w,C){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let R=C.tileID.canonical.x-w.tileID.canonical.x;const z=C.tileID.canonical.y-w.tileID.canonical.y,F=Math.pow(2,w.tileID.canonical.z),H=C.tileID.key;R===0&&z===0||Math.abs(z)>1||(Math.abs(R)>1&&(Math.abs(R+F)===1?R+=F:Math.abs(R-F)===1&&(R-=F)),C.dem&&w.dem&&(w.dem.backfillBorder(C.dem,R,z),w.neighboringTiles&&w.neighboringTiles[H]&&(w.neighboringTiles[H].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,m,b,w){for(const C in this._tiles){let R=this._tiles[C];if(w[C]||!R.hasData()||R.tileID.overscaledZ<=m||R.tileID.overscaledZ>b)continue;let z=R.tileID;for(;R&&R.tileID.overscaledZ>m+1;){const H=R.tileID.scaledTo(R.tileID.overscaledZ-1);R=this._tiles[H.key],R&&R.hasData()&&(z=H)}let F=z;for(;F.overscaledZ>m;)if(F=F.scaledTo(F.overscaledZ-1),u[F.key]){w[z.key]=z;break}}}findLoadedParent(u,m){if(u.key in this._loadedParentTiles){const b=this._loadedParentTiles[u.key];return b&&b.tileID.overscaledZ>=m?b:null}for(let b=u.overscaledZ-1;b>=m;b--){const w=u.scaledTo(b),C=this._getLoadedTile(w);if(C)return C}}_getLoadedTile(u){const m=this._tiles[u.key];return m&&m.hasData()?m:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const m=Math.ceil(u.width/this._source.tileSize)+1,b=Math.ceil(u.height/this._source.tileSize)+1,w=Math.floor(m*b*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(C)}handleWrapJump(u){const m=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,m){const b={};for(const w in this._tiles){const C=this._tiles[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+m),b[C.tileID.key]=C}this._tiles=b;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(u,m){if(this.transform=u,this.terrain=m,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(q=>new s.Q(q.canonical.z,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y)):(b=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m}),this._source.hasTile&&(b=b.filter(q=>this._source.hasTile(q)))):b=[];const w=u.coveringZoomLevel(this._source),C=Math.max(w-Wn.maxOverzooming,this._source.minzoom),R=Math.max(w+Wn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const q={};for(const Z of b)if(Z.canonical.z>this._source.minzoom){const ie=Z.scaledTo(Z.canonical.z-1);q[ie.key]=ie;const ce=Z.scaledTo(Math.max(this._source.minzoom,Math.min(Z.canonical.z,5)));q[ce.key]=ce}b=b.concat(Object.values(q))}const z=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,z&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const F=this._updateRetainedTiles(b,w);if(sr(this._source.type)){const q={},Z={},ie=Object.keys(F),ce=v.now();for(const he of ie){const ge=F[he],le=this._tiles[he];if(!le||le.fadeEndTime!==0&&le.fadeEndTime<=ce)continue;const Ae=this.findLoadedParent(ge,C);Ae&&(this._addTile(Ae.tileID),q[Ae.tileID.key]=Ae.tileID),Z[he]=ge}this._retainLoadedChildren(Z,w,R,F);for(const he in q)F[he]||(this._coveredTiles[he]=!0,F[he]=q[he]);if(m){const he={},ge={};for(const le of b)this._tiles[le.key].hasData()?he[le.key]=le:ge[le.key]=le;for(const le in ge){const Ae=ge[le].children(this._source.maxzoom);this._tiles[Ae[0].key]&&this._tiles[Ae[1].key]&&this._tiles[Ae[2].key]&&this._tiles[Ae[3].key]&&(he[Ae[0].key]=F[Ae[0].key]=Ae[0],he[Ae[1].key]=F[Ae[1].key]=Ae[1],he[Ae[2].key]=F[Ae[2].key]=Ae[2],he[Ae[3].key]=F[Ae[3].key]=Ae[3],delete ge[le])}for(const le in ge){const Ae=this.findLoadedParent(ge[le],this._source.minzoom);if(Ae){he[Ae.tileID.key]=F[Ae.tileID.key]=Ae.tileID;for(const Fe in he)he[Fe].isChildOf(Ae.tileID)&&delete he[Fe]}}for(const le in this._tiles)he[le]||(this._coveredTiles[le]=!0)}}for(const q in F)this._tiles[q].clearFadeHold();const H=s.ab(this._tiles,F);for(const q of H){const Z=this._tiles[q];Z.hasSymbolBuckets&&!Z.holdingForFade()?Z.setHoldDuration(this.map._fadeDuration):Z.hasSymbolBuckets&&!Z.symbolFadeFinished()||this._removeTile(q)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,m){const b={},w={},C=Math.max(m-Wn.maxOverzooming,this._source.minzoom),R=Math.max(m+Wn.maxUnderzooming,this._source.minzoom),z={};for(const F of u){const H=this._addTile(F);b[F.key]=F,H.hasData()||m<this._source.maxzoom&&(z[F.key]=F)}this._retainLoadedChildren(z,m,R,b);for(const F of u){let H=this._tiles[F.key];if(H.hasData())continue;if(m+1>this._source.maxzoom){const Z=F.children(this._source.maxzoom)[0],ie=this.getTile(Z);if(ie&&ie.hasData()){b[Z.key]=Z;continue}}else{const Z=F.children(this._source.maxzoom);if(b[Z[0].key]&&b[Z[1].key]&&b[Z[2].key]&&b[Z[3].key])continue}let q=H.wasRequested();for(let Z=F.overscaledZ-1;Z>=C;--Z){const ie=F.scaledTo(Z);if(w[ie.key])break;if(w[ie.key]=!0,H=this.getTile(ie),!H&&q&&(H=this._addTile(ie)),H){const ce=H.hasData();if((q||ce)&&(b[ie.key]=ie),q=H.wasRequested(),ce)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const m=[];let b,w=this._tiles[u].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){b=this._loadedParentTiles[w.key];break}m.push(w.key);const C=w.scaledTo(w.overscaledZ-1);if(b=this._getLoadedTile(C),b)break;w=C}for(const C of m)this._loadedParentTiles[C]=b}}_addTile(u){let m=this._tiles[u.key];if(m)return m;m=this._cache.getAndRemove(u),m&&(this._setTileReloadTimer(u.key,m),m.tileID=u,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,m)));const b=m;return m||(m=new Zr(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(m,u.key,m.state)),m.uses++,this._tiles[u.key]=m,b||this._source.fire(new s.k("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(u,m){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const b=m.getExpiryTimeout();b&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},b))}_removeTile(u){const m=this._tiles[u];m&&(m.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,m,b){const w=[],C=this.transform;if(!C)return w;const R=b?C.getCameraQueryGeometry(u):u,z=u.map(he=>C.pointCoordinate(he,this.terrain)),F=R.map(he=>C.pointCoordinate(he,this.terrain)),H=this.getIds();let q=1/0,Z=1/0,ie=-1/0,ce=-1/0;for(const he of F)q=Math.min(q,he.x),Z=Math.min(Z,he.y),ie=Math.max(ie,he.x),ce=Math.max(ce,he.y);for(let he=0;he<H.length;he++){const ge=this._tiles[H[he]];if(ge.holdingForFade())continue;const le=ge.tileID,Ae=Math.pow(2,C.zoom-ge.tileID.overscaledZ),Fe=m*ge.queryPadding*s.W/ge.tileSize/Ae,_e=[le.getTilePoint(new s.Y(q,Z)),le.getTilePoint(new s.Y(ie,ce))];if(_e[0].x-Fe<s.W&&_e[0].y-Fe<s.W&&_e[1].x+Fe>=0&&_e[1].y+Fe>=0){const Ie=z.map(Ne=>le.getTilePoint(Ne)),He=F.map(Ne=>le.getTilePoint(Ne));w.push({tile:ge,tileID:le,queryGeometry:Ie,cameraQueryGeometry:He,scale:Ae})}}return w}getVisibleCoordinates(u){const m=this.getRenderableIds(u).map(b=>this._tiles[b].tileID);for(const b of m)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return m}hasTransition(){if(this._source.hasTransition())return!0;if(sr(this._source.type)){const u=v.now();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=u)return!0}return!1}setFeatureState(u,m,b){this._state.updateState(u=u||"_geojsonTileLayer",m,b)}removeFeatureState(u,m,b){this._state.removeFeatureState(u=u||"_geojsonTileLayer",m,b)}getFeatureState(u,m){return this._state.getState(u=u||"_geojsonTileLayer",m)}setDependencies(u,m,b){const w=this._tiles[u];w&&w.setDependencies(m,b)}reloadTilesForDependencies(u,m){for(const b in this._tiles)this._tiles[b].hasDependency(u,m)&&this._reloadTile(b,"reloading");this._cache.filter(b=>!b.hasDependency(u,m))}}function ht(T,u){const m=Math.abs(2*T.wrap)-+(T.wrap<0),b=Math.abs(2*u.wrap)-+(u.wrap<0);return T.overscaledZ-u.overscaledZ||b-m||u.canonical.y-T.canonical.y||u.canonical.x-T.canonical.x}function sr(T){return T==="raster"||T==="image"||T==="video"}Wn.maxOverzooming=10,Wn.maxUnderzooming=3;class Ut{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=s.ac(u,0,1);let m=1,b=this._distances[m];const w=u*this.paddedLength+this.padding;for(;b<w&&m<this._distances.length;)b=this._distances[++m];const C=m-1,R=this._distances[C],z=b-R,F=z>0?(w-R)/z:0;return this.points[C].mult(1-F).add(this.points[m].mult(F))}}function Fr(T,u){let m=!0;return T==="always"||T!=="never"&&u!=="never"||(m=!1),m}class ha{constructor(u,m,b){const w=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/b),this.yCellCount=Math.ceil(m/b);for(let R=0;R<this.xCellCount*this.yCellCount;R++)w.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,b,w,C){this._forEachCell(m,b,w,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(w),this.bboxes.push(C)}insertCircle(u,m,b,w){this._forEachCell(m-w,b-w,m+w,b+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(b),this.circles.push(w)}_insertBoxCell(u,m,b,w,C,R){this.boxCells[C].push(R)}_insertCircleCell(u,m,b,w,C,R){this.circleCells[C].push(R)}_query(u,m,b,w,C,R,z){if(b<0||u>this.width||w<0||m>this.height)return[];const F=[];if(u<=0&&m<=0&&this.width<=b&&this.height<=w){if(C)return[{key:null,x1:u,y1:m,x2:b,y2:w}];for(let H=0;H<this.boxKeys.length;H++)F.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const q=this.circles[3*H],Z=this.circles[3*H+1],ie=this.circles[3*H+2];F.push({key:this.circleKeys[H],x1:q-ie,y1:Z-ie,x2:q+ie,y2:Z+ie})}}else this._forEachCell(u,m,b,w,this._queryCell,F,{hitTest:C,overlapMode:R,seenUids:{box:{},circle:{}}},z);return F}query(u,m,b,w){return this._query(u,m,b,w,!1,null)}hitTest(u,m,b,w,C,R){return this._query(u,m,b,w,!0,C,R).length>0}hitTestCircle(u,m,b,w,C){const R=u-b,z=u+b,F=m-b,H=m+b;if(z<0||R>this.width||H<0||F>this.height)return!1;const q=[];return this._forEachCell(R,F,z,H,this._queryCellCircle,q,{hitTest:!0,overlapMode:w,circle:{x:u,y:m,radius:b},seenUids:{box:{},circle:{}}},C),q.length>0}_queryCell(u,m,b,w,C,R,z,F){const{seenUids:H,hitTest:q,overlapMode:Z}=z,ie=this.boxCells[C];if(ie!==null){const he=this.bboxes;for(const ge of ie)if(!H.box[ge]){H.box[ge]=!0;const le=4*ge,Ae=this.boxKeys[ge];if(u<=he[le+2]&&m<=he[le+3]&&b>=he[le+0]&&w>=he[le+1]&&(!F||F(Ae))&&(!q||!Fr(Z,Ae.overlapMode))&&(R.push({key:Ae,x1:he[le],y1:he[le+1],x2:he[le+2],y2:he[le+3]}),q))return!0}}const ce=this.circleCells[C];if(ce!==null){const he=this.circles;for(const ge of ce)if(!H.circle[ge]){H.circle[ge]=!0;const le=3*ge,Ae=this.circleKeys[ge];if(this._circleAndRectCollide(he[le],he[le+1],he[le+2],u,m,b,w)&&(!F||F(Ae))&&(!q||!Fr(Z,Ae.overlapMode))){const Fe=he[le],_e=he[le+1],Ie=he[le+2];if(R.push({key:Ae,x1:Fe-Ie,y1:_e-Ie,x2:Fe+Ie,y2:_e+Ie}),q)return!0}}}return!1}_queryCellCircle(u,m,b,w,C,R,z,F){const{circle:H,seenUids:q,overlapMode:Z}=z,ie=this.boxCells[C];if(ie!==null){const he=this.bboxes;for(const ge of ie)if(!q.box[ge]){q.box[ge]=!0;const le=4*ge,Ae=this.boxKeys[ge];if(this._circleAndRectCollide(H.x,H.y,H.radius,he[le+0],he[le+1],he[le+2],he[le+3])&&(!F||F(Ae))&&!Fr(Z,Ae.overlapMode))return R.push(!0),!0}}const ce=this.circleCells[C];if(ce!==null){const he=this.circles;for(const ge of ce)if(!q.circle[ge]){q.circle[ge]=!0;const le=3*ge,Ae=this.circleKeys[ge];if(this._circlesCollide(he[le],he[le+1],he[le+2],H.x,H.y,H.radius)&&(!F||F(Ae))&&!Fr(Z,Ae.overlapMode))return R.push(!0),!0}}}_forEachCell(u,m,b,w,C,R,z,F){const H=this._convertToXCellCoord(u),q=this._convertToYCellCoord(m),Z=this._convertToXCellCoord(b),ie=this._convertToYCellCoord(w);for(let ce=H;ce<=Z;ce++)for(let he=q;he<=ie;he++)if(C.call(this,u,m,b,w,this.xCellCount*he+ce,R,z,F))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,b,w,C,R){const z=w-u,F=C-m,H=b+R;return H*H>z*z+F*F}_circleAndRectCollide(u,m,b,w,C,R,z){const F=(R-w)/2,H=Math.abs(u-(w+F));if(H>F+b)return!1;const q=(z-C)/2,Z=Math.abs(m-(C+q));if(Z>q+b)return!1;if(H<=F||Z<=q)return!0;const ie=H-F,ce=Z-q;return ie*ie+ce*ce<=b*b}}function lr(T,u,m,b,w){const C=s.F();return u?(s.J(C,C,[1/w,1/w,1]),m||s.ad(C,C,b.angle)):s.K(C,b.labelPlaneMatrix,T),C}function js(T,u,m,b,w){if(u){const C=s.ae(T);return s.J(C,C,[w,w,1]),m||s.ad(C,C,-b.angle),C}return b.glCoordMatrix}function qn(T,u,m){let b;m?(b=[T.x,T.y,m(T.x,T.y),1],s.af(b,b,u)):(b=[T.x,T.y,0,1],$t(b,b,u));const w=b[3];return{point:new s.P(b[0]/w,b[1]/w),signedDistanceFromCamera:w}}function ve(T,u){return .5+T/u*.5}function K(T,u){const m=T[0]/T[3],b=T[1]/T[3];return m>=-u[0]&&m<=u[0]&&b>=-u[1]&&b<=u[1]}function te(T,u,m,b,w,C,R,z,F,H){const q=b?T.textSizeData:T.iconSizeData,Z=s.ag(q,m.transform.zoom),ie=[256/m.width*2+1,256/m.height*2+1],ce=b?T.text.dynamicLayoutVertexArray:T.icon.dynamicLayoutVertexArray;ce.clear();const he=T.lineVertexArray,ge=b?T.text.placedSymbolArray:T.icon.placedSymbolArray,le=m.transform.width/m.transform.height;let Ae=!1;for(let Fe=0;Fe<ge.length;Fe++){const _e=ge.get(Fe);if(_e.hidden||_e.writingMode===s.ah.vertical&&!Ae){We(_e.numGlyphs,ce);continue}let Ie;if(Ae=!1,H?(Ie=[_e.anchorX,_e.anchorY,H(_e.anchorX,_e.anchorY),1],s.af(Ie,Ie,u)):(Ie=[_e.anchorX,_e.anchorY,0,1],$t(Ie,Ie,u)),!K(Ie,ie)){We(_e.numGlyphs,ce);continue}const He=ve(m.transform.cameraToCenterDistance,Ie[3]),Ne=s.ai(q,Z,_e),qe=R?Ne/He:Ne*He,et=new s.P(_e.anchorX,_e.anchorY),Qe=qn(et,w,H).point,ot={projections:{},offsets:{}},Pt=Me(_e,qe,!1,z,u,w,C,T.glyphOffsetArray,he,ce,Qe,et,ot,le,F,H);Ae=Pt.useVertical,(Pt.notEnoughRoom||Ae||Pt.needsFlipping&&Me(_e,qe,!0,z,u,w,C,T.glyphOffsetArray,he,ce,Qe,et,ot,le,F,H).notEnoughRoom)&&We(_e.numGlyphs,ce)}b?T.text.dynamicLayoutVertexBuffer.updateData(ce):T.icon.dynamicLayoutVertexBuffer.updateData(ce)}function oe(T,u,m,b,w,C,R,z,F,H,q,Z,ie){const ce=z.glyphStartIndex+z.numGlyphs,he=z.lineStartIndex,ge=z.lineStartIndex+z.lineLength,le=u.getoffsetX(z.glyphStartIndex),Ae=u.getoffsetX(ce-1),Fe=Je(T*le,m,b,w,C,R,z.segment,he,ge,F,H,q,Z,ie);if(!Fe)return null;const _e=Je(T*Ae,m,b,w,C,R,z.segment,he,ge,F,H,q,Z,ie);return _e?{first:Fe,last:_e}:null}function ue(T,u,m,b){return T===s.ah.horizontal&&Math.abs(m.y-u.y)>Math.abs(m.x-u.x)*b?{useVertical:!0}:(T===s.ah.vertical?u.y<m.y:u.x>m.x)?{needsFlipping:!0}:null}function Me(T,u,m,b,w,C,R,z,F,H,q,Z,ie,ce,he,ge){const le=u/24,Ae=T.lineOffsetX*le,Fe=T.lineOffsetY*le;let _e;if(T.numGlyphs>1){const Ie=T.glyphStartIndex+T.numGlyphs,He=T.lineStartIndex,Ne=T.lineStartIndex+T.lineLength,qe=oe(le,z,Ae,Fe,m,q,Z,T,F,C,ie,he,ge);if(!qe)return{notEnoughRoom:!0};const et=qn(qe.first.point,R,ge).point,Qe=qn(qe.last.point,R,ge).point;if(b&&!m){const ot=ue(T.writingMode,et,Qe,ce);if(ot)return ot}_e=[qe.first];for(let ot=T.glyphStartIndex+1;ot<Ie-1;ot++)_e.push(Je(le*z.getoffsetX(ot),Ae,Fe,m,q,Z,T.segment,He,Ne,F,C,ie,he,ge));_e.push(qe.last)}else{if(b&&!m){const He=qn(Z,w,ge).point,Ne=T.lineStartIndex+T.segment+1,qe=new s.P(F.getx(Ne),F.gety(Ne)),et=qn(qe,w,ge),Qe=et.signedDistanceFromCamera>0?et.point:Ee(Z,qe,He,1,w,ge),ot=ue(T.writingMode,He,Qe,ce);if(ot)return ot}const Ie=Je(le*z.getoffsetX(T.glyphStartIndex),Ae,Fe,m,q,Z,T.segment,T.lineStartIndex,T.lineStartIndex+T.lineLength,F,C,ie,he,ge);if(!Ie)return{notEnoughRoom:!0};_e=[Ie]}for(const Ie of _e)s.aj(H,Ie.point,Ie.angle);return{}}function Ee(T,u,m,b,w,C){const R=qn(T.add(T.sub(u)._unit()),w,C).point,z=m.sub(R);return m.add(z._mult(b/z.mag()))}function Le(T,u){const{projectionCache:m,lineVertexArray:b,labelPlaneMatrix:w,tileAnchorPoint:C,distanceFromAnchor:R,getElevation:z,previousVertex:F,direction:H,absOffsetX:q}=u;if(m.projections[T])return m.projections[T];const Z=new s.P(b.getx(T),b.gety(T)),ie=qn(Z,w,z);if(ie.signedDistanceFromCamera>0)return m.projections[T]=ie.point,ie.point;const ce=T-H;return Ee(R===0?C:new s.P(b.getx(ce),b.gety(ce)),Z,F,q-R+1,w,z)}function Ce(T,u,m){return T._unit()._perp()._mult(u*m)}function ze(T,u,m,b,w,C,R,z){const{projectionCache:F,direction:H}=z;if(F.offsets[T])return F.offsets[T];const q=m.add(u);if(T+H<b||T+H>=w)return F.offsets[T]=q,q;const Z=Le(T+H,z),ie=Ce(Z.sub(m),R,H),ce=m.add(ie),he=Z.add(ie);return F.offsets[T]=s.ak(C,q,ce,he)||q,F.offsets[T]}function Je(T,u,m,b,w,C,R,z,F,H,q,Z,ie,ce){const he=b?T-u:T+u;let ge=he>0?1:-1,le=0;b&&(ge*=-1,le=Math.PI),ge<0&&(le+=Math.PI);let Ae,Fe,_e=ge>0?z+R:z+R+1,Ie=w,He=w,Ne=0,qe=0;const et=Math.abs(he),Qe=[];let ot;for(;Ne+qe<=et;){if(_e+=ge,_e<z||_e>=F)return null;Ne+=qe,He=Ie,Fe=Ae;const mt={projectionCache:Z,lineVertexArray:H,labelPlaneMatrix:q,tileAnchorPoint:C,distanceFromAnchor:Ne,getElevation:ce,previousVertex:He,direction:ge,absOffsetX:et};if(Ie=Le(_e,mt),m===0)Qe.push(He),ot=Ie.sub(He);else{let Gt;const kt=Ie.sub(He);Gt=kt.mag()===0?Ce(Le(_e+ge,mt).sub(Ie),m,ge):Ce(kt,m,ge),Fe||(Fe=He.add(Gt)),Ae=ze(_e,Gt,Ie,z,F,Fe,m,mt),Qe.push(Fe),ot=Ae.sub(Fe)}qe=ot.mag()}const Pt=ot._mult((et-Ne)/qe)._add(Fe||He),Zt=le+Math.atan2(Ie.y-He.y,Ie.x-He.x);return Qe.push(Pt),{point:Pt,angle:ie?Zt:0,path:Qe}}const Ge=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function We(T,u){for(let m=0;m<T;m++){const b=u.length;u.resize(b+4),u.float32.set(Ge,3*b)}}function $t(T,u,m){const b=u[0],w=u[1];return T[0]=m[0]*b+m[4]*w+m[12],T[1]=m[1]*b+m[5]*w+m[13],T[3]=m[3]*b+m[7]*w+m[15],T}const jt=100;class ur{constructor(u,m=new ha(u.width+200,u.height+200,25),b=new ha(u.width+200,u.height+200,25)){this.transform=u,this.grid=m,this.ignoredGrid=b,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+jt,this.screenBottomBoundary=u.height+jt,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,m,b,w,C,R){const z=this.projectAndGetPerspectiveRatio(w,u.anchorPointX,u.anchorPointY,R),F=b*z.perspectiveRatio,H=u.x1*F+z.point.x,q=u.y1*F+z.point.y,Z=u.x2*F+z.point.x,ie=u.y2*F+z.point.y;return!this.isInsideGrid(H,q,Z,ie)||m!=="always"&&this.grid.hitTest(H,q,Z,ie,m,C)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[H,q,Z,ie],offscreen:this.isOffscreen(H,q,Z,ie)}}placeCollisionCircles(u,m,b,w,C,R,z,F,H,q,Z,ie,ce,he){const ge=[],le=new s.P(m.anchorX,m.anchorY),Ae=qn(le,R,he),Fe=ve(this.transform.cameraToCenterDistance,Ae.signedDistanceFromCamera),_e=(q?C/Fe:C*Fe)/s.ao,Ie=qn(le,z,he).point,He=oe(_e,w,m.lineOffsetX*_e,m.lineOffsetY*_e,!1,Ie,le,m,b,z,{projections:{},offsets:{}},!1,he);let Ne=!1,qe=!1,et=!0;if(He){const Qe=.5*ie*Fe+ce,ot=new s.P(-100,-100),Pt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Zt=new Ut,mt=He.first,Gt=He.last;let kt=[];for(let hr=mt.path.length-1;hr>=1;hr--)kt.push(mt.path[hr]);for(let hr=1;hr<Gt.path.length;hr++)kt.push(Gt.path[hr]);const un=2.5*Qe;if(F){const hr=kt.map(_r=>qn(_r,F,he));kt=hr.some(_r=>_r.signedDistanceFromCamera<=0)?[]:hr.map(_r=>_r.point)}let yr=[];if(kt.length>0){const hr=kt[0].clone(),_r=kt[0].clone();for(let Fn=1;Fn<kt.length;Fn++)hr.x=Math.min(hr.x,kt[Fn].x),hr.y=Math.min(hr.y,kt[Fn].y),_r.x=Math.max(_r.x,kt[Fn].x),_r.y=Math.max(_r.y,kt[Fn].y);yr=hr.x>=ot.x&&_r.x<=Pt.x&&hr.y>=ot.y&&_r.y<=Pt.y?[kt]:_r.x<ot.x||hr.x>Pt.x||_r.y<ot.y||hr.y>Pt.y?[]:s.al([kt],ot.x,ot.y,Pt.x,Pt.y)}for(const hr of yr){Zt.reset(hr,.25*Qe);let _r=0;_r=Zt.length<=.5*Qe?1:Math.ceil(Zt.paddedLength/un)+1;for(let Fn=0;Fn<_r;Fn++){const Yr=Fn/Math.max(_r-1,1),Di=Zt.lerp(Yr),li=Di.x+jt,En=Di.y+jt;ge.push(li,En,Qe,0);const bi=li-Qe,xi=En-Qe,Da=li+Qe,ds=En+Qe;if(et=et&&this.isOffscreen(bi,xi,Da,ds),qe=qe||this.isInsideGrid(bi,xi,Da,ds),u!=="always"&&this.grid.hitTestCircle(li,En,Qe,u,Z)&&(Ne=!0,!H))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!H&&Ne||!qe||Fe<this.perspectiveRatioCutoff?[]:ge,offscreen:et,collisionDetected:Ne}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let b=1/0,w=1/0,C=-1/0,R=-1/0;for(const q of u){const Z=new s.P(q.x+jt,q.y+jt);b=Math.min(b,Z.x),w=Math.min(w,Z.y),C=Math.max(C,Z.x),R=Math.max(R,Z.y),m.push(Z)}const z=this.grid.query(b,w,C,R).concat(this.ignoredGrid.query(b,w,C,R)),F={},H={};for(const q of z){const Z=q.key;if(F[Z.bucketInstanceId]===void 0&&(F[Z.bucketInstanceId]={}),F[Z.bucketInstanceId][Z.featureIndex])continue;const ie=[new s.P(q.x1,q.y1),new s.P(q.x2,q.y1),new s.P(q.x2,q.y2),new s.P(q.x1,q.y2)];s.am(m,ie)&&(F[Z.bucketInstanceId][Z.featureIndex]=!0,H[Z.bucketInstanceId]===void 0&&(H[Z.bucketInstanceId]=[]),H[Z.bucketInstanceId].push(Z.featureIndex))}return H}insertCollisionBox(u,m,b,w,C,R){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:C,collisionGroupID:R,overlapMode:m},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,b,w,C,R){const z=b?this.ignoredGrid:this.grid,F={bucketInstanceId:w,featureIndex:C,collisionGroupID:R,overlapMode:m};for(let H=0;H<u.length;H+=4)z.insertCircle(F,u[H],u[H+1],u[H+2])}projectAndGetPerspectiveRatio(u,m,b,w){let C;return w?(C=[m,b,w(m,b),1],s.af(C,C,u)):(C=[m,b,0,1],$t(C,C,u)),{point:new s.P((C[0]/C[3]+1)/2*this.transform.width+jt,(-C[1]/C[3]+1)/2*this.transform.height+jt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(u,m,b,w){return b<jt||u>=this.screenRightBoundary||w<jt||m>this.screenBottomBoundary}isInsideGrid(u,m,b,w){return b>=0&&u<this.gridRightBoundary&&w>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=s.an([]);return s.H(u,u,[-100,-100,0]),u}}function nr(T,u,m){return u*(s.W/(T.tileSize*Math.pow(2,m-T.tileID.overscaledZ)))}class Cr{constructor(u,m,b,w){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):w&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Xr{constructor(u,m,b,w,C){this.text=new Cr(u?u.text:null,m,b,C),this.icon=new Cr(u?u.icon:null,m,w,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class mn{constructor(u,m,b){this.text=u,this.icon=m,this.skipFade=b}}class Vn{constructor(){this.invProjMatrix=s.F(),this.viewportMatrix=s.F(),this.circles=[]}}class cr{constructor(u,m,b,w,C){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=w,this.tileID=C}}class Cn{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[u]}}function Zn(T,u,m,b,w){const{horizontalAlign:C,verticalAlign:R}=s.at(T);return new s.P(-(C-.5)*u+b[0]*w,-(R-.5)*m+b[1]*w)}function Mi(T,u,m,b,w,C){const{x1:R,x2:z,y1:F,y2:H,anchorPointX:q,anchorPointY:Z}=T,ie=new s.P(u,m);return b&&ie._rotate(w?C:-C),{x1:R+ie.x,y1:F+ie.y,x2:z+ie.x,y2:H+ie.y,anchorPointX:q,anchorPointY:Z}}class ji{constructor(u,m,b,w,C){this.transform=u.clone(),this.terrain=m,this.collisionIndex=new ur(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new Cn(w),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,m,b,w){const C=b.getBucket(m),R=b.latestFeatureIndex;if(!C||!R||m.id!==C.layerIds[0])return;const z=b.collisionBoxArray,F=C.layers[0].layout,H=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),q=b.tileSize/s.W,Z=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),ie=F.get("text-pitch-alignment")==="map",ce=F.get("text-rotation-alignment")==="map",he=nr(b,1,this.transform.zoom),ge=lr(Z,ie,ce,this.transform,he);let le=null;if(ie){const Fe=js(Z,ie,ce,this.transform,he);le=s.K([],this.transform.labelPlaneMatrix,Fe)}this.retainedQueryData[C.bucketInstanceId]=new cr(C.bucketInstanceId,R,C.sourceLayerIndex,C.index,b.tileID);const Ae={bucket:C,layout:F,posMatrix:Z,textLabelPlaneMatrix:ge,labelToScreenMatrix:le,scale:H,textPixelRatio:q,holdingForFade:b.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:s.ag(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(w)for(const Fe of C.sortKeyRanges){const{sortKey:_e,symbolInstanceStart:Ie,symbolInstanceEnd:He}=Fe;u.push({sortKey:_e,symbolInstanceStart:Ie,symbolInstanceEnd:He,parameters:Ae})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ae})}attemptAnchorPlacement(u,m,b,w,C,R,z,F,H,q,Z,ie,ce,he,ge,le){const Ae=s.ap[u.textAnchor],Fe=[u.textOffset0,u.textOffset1],_e=Zn(Ae,b,w,Fe,C),Ie=this.collisionIndex.placeCollisionBox(Mi(m,_e.x,_e.y,R,z,this.transform.angle),Z,F,H,q.predicate,le);if((!ge||this.collisionIndex.placeCollisionBox(Mi(ge,_e.x,_e.y,R,z,this.transform.angle),Z,F,H,q.predicate,le).box.length!==0)&&Ie.box.length>0){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID].text&&(He=this.prevPlacement.variableOffsets[ie.crossTileID].anchor),ie.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ie.crossTileID]={textOffset:Fe,width:b,height:w,anchor:Ae,textBoxScale:C,prevAnchor:He},this.markUsedJustification(ce,Ae,ie,he),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,he,ie),this.placedOrientations[ie.crossTileID]=he),{shift:_e,placedGlyphBoxes:Ie}}}placeLayerBucketPart(u,m,b){const{bucket:w,layout:C,posMatrix:R,textLabelPlaneMatrix:z,labelToScreenMatrix:F,textPixelRatio:H,holdingForFade:q,collisionBoxArray:Z,partiallyEvaluatedTextSize:ie,collisionGroup:ce}=u.parameters,he=C.get("text-optional"),ge=C.get("icon-optional"),le=s.aq(C,"text-overlap","text-allow-overlap"),Ae=le==="always",Fe=s.aq(C,"icon-overlap","icon-allow-overlap"),_e=Fe==="always",Ie=C.get("text-rotation-alignment")==="map",He=C.get("text-pitch-alignment")==="map",Ne=C.get("icon-text-fit")!=="none",qe=C.get("symbol-z-order")==="viewport-y",et=Ae&&(_e||!w.hasIconData()||ge),Qe=_e&&(Ae||!w.hasTextData()||he);!w.collisionArrays&&Z&&w.deserializeCollisionBoxes(Z);const ot=this.retainedQueryData[w.bucketInstanceId].tileID,Pt=this.terrain?(mt,Gt)=>this.terrain.getElevation(ot,mt,Gt):null,Zt=(mt,Gt)=>{var kt,un;if(m[mt.crossTileID])return;if(q)return void(this.placements[mt.crossTileID]=new mn(!1,!1,!1));let yr=!1,hr=!1,_r=!0,Fn=null,Yr={box:null,offscreen:null},Di={box:null,offscreen:null},li=null,En=null,bi=null,xi=0,Da=0,ds=0;Gt.textFeatureIndex?xi=Gt.textFeatureIndex:mt.useRuntimeCollisionCircles&&(xi=mt.featureIndex),Gt.verticalTextFeatureIndex&&(Da=Gt.verticalTextFeatureIndex);const Yl=Gt.textBox;if(Yl){const Xn=cn=>{let Yn=s.ah.horizontal;if(w.allowVerticalPlacement&&!cn&&this.prevPlacement){const ui=this.prevPlacement.placedOrientations[mt.crossTileID];ui&&(this.placedOrientations[mt.crossTileID]=ui,Yn=ui,this.markUsedOrientation(w,Yn,mt))}return Yn},$n=(cn,Yn)=>{if(w.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Gt.verticalTextBox){for(const ui of w.writingModes)if(ui===s.ah.vertical?(Yr=Yn(),Di=Yr):Yr=cn(),Yr&&Yr.box&&Yr.box.length)break}else Yr=cn()},Pn=mt.textAnchorOffsetStartIndex,Li=mt.textAnchorOffsetEndIndex;if(Li===Pn){const cn=(Yn,ui)=>{const Kn=this.collisionIndex.placeCollisionBox(Yn,le,H,R,ce.predicate,Pt);return Kn&&Kn.box&&Kn.box.length&&(this.markUsedOrientation(w,ui,mt),this.placedOrientations[mt.crossTileID]=ui),Kn};$n(()=>cn(Yl,s.ah.horizontal),()=>{const Yn=Gt.verticalTextBox;return w.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Yn?cn(Yn,s.ah.vertical):{box:null,offscreen:null}}),Xn(Yr&&Yr.box&&Yr.box.length)}else{let cn=s.ap[(un=(kt=this.prevPlacement)===null||kt===void 0?void 0:kt.variableOffsets[mt.crossTileID])===null||un===void 0?void 0:un.anchor];const Yn=(Kn,Sy,kn)=>{const jp=Kn.x2-Kn.x1,Ty=Kn.y2-Kn.y1,rl=mt.textBoxScale,nl=Ne&&Fe==="never"?Sy:null;let No={box:[],offscreen:!1},xf=le==="never"?1:2,Gp="never";cn&&xf++;for(let Cy=0;Cy<xf;Cy++){for(let wf=Pn;wf<Li;wf++){const Ay=w.textAnchorOffsets.get(wf);if(cn&&Ay.textAnchor!==cn)continue;const vc=this.attemptAnchorPlacement(Ay,Kn,jp,Ty,rl,Ie,He,H,R,ce,Gp,mt,w,kn,nl,Pt);if(vc&&(No=vc.placedGlyphBoxes,No&&No.box&&No.box.length))return yr=!0,Fn=vc.shift,No}cn?cn=null:Gp=le}return No};$n(()=>Yn(Yl,Gt.iconBox,s.ah.horizontal),()=>{const Kn=Gt.verticalTextBox;return w.allowVerticalPlacement&&!(Yr&&Yr.box&&Yr.box.length)&&mt.numVerticalGlyphVertices>0&&Kn?Yn(Kn,Gt.verticalIconBox,s.ah.vertical):{box:null,offscreen:null}}),Yr&&(yr=Yr.box,_r=Yr.offscreen);const ui=Xn(Yr&&Yr.box);if(!yr&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[mt.crossTileID];Kn&&(this.variableOffsets[mt.crossTileID]=Kn,this.markUsedJustification(w,Kn.anchor,mt,ui))}}}if(li=Yr,yr=li&&li.box&&li.box.length>0,_r=li&&li.offscreen,mt.useRuntimeCollisionCircles){const Xn=w.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),$n=s.ai(w.textSizeData,ie,Xn),Pn=C.get("text-padding");En=this.collisionIndex.placeCollisionCircles(le,Xn,w.lineVertexArray,w.glyphOffsetArray,$n,R,z,F,b,He,ce.predicate,mt.collisionCircleDiameter,Pn,Pt),En.circles.length&&En.collisionDetected&&!b&&s.w("Collisions detected, but collision boxes are not shown"),yr=Ae||En.circles.length>0&&!En.collisionDetected,_r=_r&&En.offscreen}if(Gt.iconFeatureIndex&&(ds=Gt.iconFeatureIndex),Gt.iconBox){const Xn=$n=>{const Pn=Ne&&Fn?Mi($n,Fn.x,Fn.y,Ie,He,this.transform.angle):$n;return this.collisionIndex.placeCollisionBox(Pn,Fe,H,R,ce.predicate,Pt)};Di&&Di.box&&Di.box.length&&Gt.verticalIconBox?(bi=Xn(Gt.verticalIconBox),hr=bi.box.length>0):(bi=Xn(Gt.iconBox),hr=bi.box.length>0),_r=_r&&bi.offscreen}const Kl=he||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,ps=ge||mt.numIconVertices===0;if(Kl||ps?ps?Kl||(hr=hr&&yr):yr=hr&&yr:hr=yr=hr&&yr,yr&&li&&li.box&&this.collisionIndex.insertCollisionBox(li.box,le,C.get("text-ignore-placement"),w.bucketInstanceId,Di&&Di.box&&Da?Da:xi,ce.ID),hr&&bi&&this.collisionIndex.insertCollisionBox(bi.box,Fe,C.get("icon-ignore-placement"),w.bucketInstanceId,ds,ce.ID),En&&(yr&&this.collisionIndex.insertCollisionCircles(En.circles,le,C.get("text-ignore-placement"),w.bucketInstanceId,xi,ce.ID),b)){const Xn=w.bucketInstanceId;let $n=this.collisionCircleArrays[Xn];$n===void 0&&($n=this.collisionCircleArrays[Xn]=new Vn);for(let Pn=0;Pn<En.circles.length;Pn+=4)$n.circles.push(En.circles[Pn+0]),$n.circles.push(En.circles[Pn+1]),$n.circles.push(En.circles[Pn+2]),$n.circles.push(En.collisionDetected?1:0)}if(mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[mt.crossTileID]=new mn(yr||et,hr||Qe,_r||w.justReloaded),m[mt.crossTileID]=!0};if(qe){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const mt=w.getSortedSymbolIndexes(this.transform.angle);for(let Gt=mt.length-1;Gt>=0;--Gt){const kt=mt[Gt];Zt(w.symbolInstances.get(kt),w.collisionArrays[kt])}}else for(let mt=u.symbolInstanceStart;mt<u.symbolInstanceEnd;mt++)Zt(w.symbolInstances.get(mt),w.collisionArrays[mt]);if(b&&w.bucketInstanceId in this.collisionCircleArrays){const mt=this.collisionCircleArrays[w.bucketInstanceId];s.ar(mt.invProjMatrix,R),mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(u,m,b,w){let C;C=w===s.ah.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[s.as(m)];const R=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const z of R)z>=0&&(u.text.placedSymbolArray.get(z).crossTileID=C>=0&&z!==C?0:b.crossTileID)}markUsedOrientation(u,m,b){const w=m===s.ah.horizontal||m===s.ah.horizontalOnly?m:0,C=m===s.ah.vertical?m:0,R=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const z of R)u.text.placedSymbolArray.get(z).placedOrientation=w;b.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const w=m?m.symbolFadeChange(u):1,C=m?m.opacities:{},R=m?m.variableOffsets:{},z=m?m.placedOrientations:{};for(const F in this.placements){const H=this.placements[F],q=C[F];q?(this.opacities[F]=new Xr(q,w,H.text,H.icon),b=b||H.text!==q.text.placed||H.icon!==q.icon.placed):(this.opacities[F]=new Xr(null,w,H.text,H.icon,H.skipFade),b=b||H.text||H.icon)}for(const F in C){const H=C[F];if(!this.opacities[F]){const q=new Xr(H,w,!1,!1);q.isHidden()||(this.opacities[F]=q,b=b||H.text.placed||H.icon.placed)}}for(const F in R)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=R[F]);for(const F in z)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=z[F]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const b={};for(const w of m){const C=w.getBucket(u);C&&w.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,b,w.collisionBoxArray)}}updateBucketOpacities(u,m,b){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const w=u.layers[0],C=w.layout,R=new Xr(null,0,!1,!1,!0),z=C.get("text-allow-overlap"),F=C.get("icon-allow-overlap"),H=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),q=C.get("text-rotation-alignment")==="map",Z=C.get("text-pitch-alignment")==="map",ie=C.get("icon-text-fit")!=="none",ce=new Xr(null,0,z&&(F||!u.hasIconData()||C.get("icon-optional")),F&&(z||!u.hasTextData()||C.get("text-optional")),!0);!u.collisionArrays&&b&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(b);const he=(ge,le,Ae)=>{for(let Fe=0;Fe<le/4;Fe++)ge.opacityVertexArray.emplaceBack(Ae);ge.hasVisibleVertices=ge.hasVisibleVertices||Ae!==Zu};for(let ge=0;ge<u.symbolInstances.length;ge++){const le=u.symbolInstances.get(ge),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:Fe,crossTileID:_e}=le;let Ie=this.opacities[_e];m[_e]?Ie=R:Ie||(Ie=ce,this.opacities[_e]=Ie),m[_e]=!0;const He=le.numIconVertices>0,Ne=this.placedOrientations[le.crossTileID],qe=Ne===s.ah.vertical,et=Ne===s.ah.horizontal||Ne===s.ah.horizontalOnly;if(Ae>0||Fe>0){const Qe=Gi(Ie.text);he(u.text,Ae,qe?Zu:Qe),he(u.text,Fe,et?Zu:Qe);const ot=Ie.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(mt=>{mt>=0&&(u.text.placedSymbolArray.get(mt).hidden=ot||qe?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=ot||et?1:0);const Pt=this.variableOffsets[le.crossTileID];Pt&&this.markUsedJustification(u,Pt.anchor,le,Ne);const Zt=this.placedOrientations[le.crossTileID];Zt&&(this.markUsedJustification(u,"left",le,Zt),this.markUsedOrientation(u,Zt,le))}if(He){const Qe=Gi(Ie.icon),ot=!(ie&&le.verticalPlacedIconSymbolIndex&&qe);le.placedIconSymbolIndex>=0&&(he(u.icon,le.numIconVertices,ot?Qe:Zu),u.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(he(u.icon,le.numVerticalIconVertices,ot?Zu:Qe),u.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Qe=u.collisionArrays[ge];if(Qe){let ot=new s.P(0,0);if(Qe.textBox||Qe.verticalTextBox){let Zt=!0;if(H){const mt=this.variableOffsets[_e];mt?(ot=Zn(mt.anchor,mt.width,mt.height,mt.textOffset,mt.textBoxScale),q&&ot._rotate(Z?this.transform.angle:-this.transform.angle)):Zt=!1}Qe.textBox&&si(u.textCollisionBox.collisionVertexArray,Ie.text.placed,!Zt||qe,ot.x,ot.y),Qe.verticalTextBox&&si(u.textCollisionBox.collisionVertexArray,Ie.text.placed,!Zt||et,ot.x,ot.y)}const Pt=!!(!et&&Qe.verticalIconBox);Qe.iconBox&&si(u.iconCollisionBox.collisionVertexArray,Ie.icon.placed,Pt,ie?ot.x:0,ie?ot.y:0),Qe.verticalIconBox&&si(u.iconCollisionBox.collisionVertexArray,Ie.icon.placed,!Pt,ie?ot.x:0,ie?ot.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const ge=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=ge.invProjMatrix,u.placementViewportMatrix=ge.viewportMatrix,u.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>u}setStale(){this.stale=!0}}function si(T,u,m,b,w){T.emplaceBack(u?1:0,m?1:0,b||0,w||0),T.emplaceBack(u?1:0,m?1:0,b||0,w||0),T.emplaceBack(u?1:0,m?1:0,b||0,w||0),T.emplaceBack(u?1:0,m?1:0,b||0,w||0)}const so=Math.pow(2,25),Vg=Math.pow(2,24),jb=Math.pow(2,17),jr=Math.pow(2,16),lp=Math.pow(2,9),up=Math.pow(2,8),fa=Math.pow(2,1);function Gi(T){if(T.opacity===0&&!T.placed)return 0;if(T.opacity===1&&T.placed)return 4294967295;const u=T.placed?1:0,m=Math.floor(127*T.opacity);return m*so+u*Vg+m*jb+u*jr+m*lp+u*up+m*fa+u}const Zu=0;class Ea{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,m,b,w,C){const R=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(R,w,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort((z,F)=>z.sortKey-F.sortKey));this._currentPartIndex<R.length;)if(m.placeLayerBucketPart(R[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,C())return!0;return!1}}class Pa{constructor(u,m,b,w,C,R,z,F){this.placement=new ji(u,m,R,z,F),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(u,m,b){const w=v.now(),C=()=>!this._forceFullPlacement&&v.now()-w>2;for(;this._currentPlacementIndex>=0;){const R=m[u[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(R.type==="symbol"&&(!R.minzoom||R.minzoom<=z)&&(!R.maxzoom||R.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Ea(R)),this._inProgressLayer.continuePlacement(b[R.source],this.placement,this._showCollisionBoxes,R,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const $l=512/s.W/2;class Fh{constructor(u,m,b){this.tileID=u,this.bucketInstanceId=b,this._symbolsByKey={};const w=new Map;for(let C=0;C<m.length;C++){const R=m.get(C),z=R.key,F=w.get(z);F?F.push(R):w.set(z,[R])}for(const[C,R]of w){const z={positions:R.map(F=>({x:Math.floor(F.anchorX*$l),y:Math.floor(F.anchorY*$l)})),crossTileIDs:R.map(F=>F.crossTileID)};if(z.positions.length>128){const F=new s.au(z.positions.length,16,Uint16Array);for(const{x:H,y:q}of z.positions)F.add(H,q);F.finish(),delete z.positions,z.index=F}this._symbolsByKey[C]=z}}getScaledCoordinates(u,m){const{x:b,y:w,z:C}=this.tileID.canonical,{x:R,y:z,z:F}=m.canonical,H=$l/Math.pow(2,F-C),q=(z*s.W+u.anchorY)*H,Z=w*s.W*$l;return{x:Math.floor((R*s.W+u.anchorX)*H-b*s.W*$l),y:Math.floor(q-Z)}}findMatches(u,m,b){const w=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let C=0;C<u.length;C++){const R=u.get(C);if(R.crossTileID)continue;const z=this._symbolsByKey[R.key];if(!z)continue;const F=this.getScaledCoordinates(R,m);if(z.index){const H=z.index.range(F.x-w,F.y-w,F.x+w,F.y+w).sort();for(const q of H){const Z=z.crossTileIDs[q];if(!b[Z]){b[Z]=!0,R.crossTileID=Z;break}}}else if(z.positions)for(let H=0;H<z.positions.length;H++){const q=z.positions[H],Z=z.crossTileIDs[H];if(Math.abs(q.x-F.x)<=w&&Math.abs(q.y-F.y)<=w&&!b[Z]){b[Z]=!0,R.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class Hn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Xu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const b in this.indexes){const w=this.indexes[b],C={};for(const R in w){const z=w[R];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+m),C[z.tileID.key]=z}this.indexes[b]=C}this.lng=u}addBucket(u,m,b){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<m.symbolInstances.length;C++)m.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const w=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const R=this.indexes[C];if(Number(C)>u.overscaledZ)for(const z in R){const F=R[z];F.tileID.isChildOf(u)&&F.findMatches(m.symbolInstances,u,w)}else{const z=R[u.scaledTo(Number(C)).key];z&&z.findMatches(m.symbolInstances,u,w)}}for(let C=0;C<m.symbolInstances.length;C++){const R=m.symbolInstances.get(C);R.crossTileID||(R.crossTileID=b.generate(),w[R.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Fh(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const b of m.getCrossTileIDsLists())for(const w of b)delete this.usedCrossTileIDs[u][w]}removeStaleBuckets(u){let m=!1;for(const b in this.indexes){const w=this.indexes[b];for(const C in w)u[w[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,w[C]),delete w[C],m=!0)}return m}}class ls{constructor(){this.layerIndexes={},this.crossTileIDs=new Hn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,b){let w=this.layerIndexes[u.id];w===void 0&&(w=this.layerIndexes[u.id]=new Xu);let C=!1;const R={};w.handleWrapJump(b);for(const z of m){const F=z.getBucket(u);F&&u.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(z.tileID,F,this.crossTileIDs)&&(C=!0),R[F.bucketInstanceId]=!0)}return w.removeStaleBuckets(R)&&(C=!0),C}pruneUnusedLayers(u){const m={};u.forEach(b=>{m[b]=!0});for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}const bn=(T,u)=>s.t(T,u&&u.filter(m=>m.identifier!=="source.canvas")),$h=s.av();class da extends s.E{constructor(u,m={}){super(),this._rtlTextPluginStateChange=()=>{for(const b in this.sourceCaches){const w=this.sourceCaches[b].getSource().type;w!=="vector"&&w!=="geojson"||this.sourceCaches[b].reload()}},this.map=u,this.dispatcher=new at(st(),u._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",(b,w)=>this.getGlyphs(b,w)),this.dispatcher.registerMessageHandler("getImages",(b,w)=>this.getImages(b,w)),this.imageManager=new we,this.imageManager.setEventedParent(this),this.glyphManager=new Oe(u._requestManager,m.localIdeographFontFamily),this.lineAtlas=new Mt(256,512),this.crossTileSymbolIndex=new ls,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.ax()),Ke().on("pluginStateChange",this._rtlTextPluginStateChange),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const w=this.sourceCaches[b.sourceId];if(!w)return;const C=w.getSource();if(C&&C.vectorLayerIds)for(const R in this._layers){const z=this._layers[R];z.source===C.id&&this._validateLayer(z)}})}loadURL(u,m={},b){this.fire(new s.k("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const w=this.map._requestManager.transformRequest(u,B.Style);this._loadStyleRequest=new AbortController,s.h(w,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,m,b)}).catch(C=>{this._loadStyleRequest=null,C&&this.fire(new s.j(C))})}loadJSON(u,m={},b){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,m.validate=m.validate!==!1,this._load(u,m,b)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load($h,{validate:!1})}_load(u,m,b){var w;const C=m.transformStyle?m.transformStyle(b,u):u;if(!m.validate||!bn(this,s.x(C))){this._loaded=!0,this.stylesheet=C;for(const R in C.sources)this.addSource(R,C.sources[R],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new zt(this.stylesheet.light),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){const u=s.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",u),this._order=u.map(m=>m.id),this._layers={},this._serializedLayers=null;for(const m of u){const b=s.az(m);b.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=b}}_loadSprite(u,m=!1,b=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(C,R,z,F){return s._(this,void 0,void 0,function*(){const H=J(C),q=z>1?"@2x":"",Z={},ie={};for(const{id:ce,url:he}of H){const ge=R.transformRequest(R.normalizeSpriteURL(he,q,".json"),B.SpriteJSON);Z[ce]=s.h(ge,F);const le=R.transformRequest(R.normalizeSpriteURL(he,q,".png"),B.SpriteImage);ie[ce]=L.getImage(le,F)}return yield Promise.all([...Object.values(Z),...Object.values(ie)]),function(ce,he){return s._(this,void 0,void 0,function*(){const ge={};for(const le in ce){ge[le]={};const Ae=v.getImageCanvasContext((yield he[le]).data),Fe=(yield ce[le]).data;for(const _e in Fe){const{width:Ie,height:He,x:Ne,y:qe,sdf:et,pixelRatio:Qe,stretchX:ot,stretchY:Pt,content:Zt}=Fe[_e];ge[le][_e]={data:null,pixelRatio:Qe,sdf:et,stretchX:ot,stretchY:Pt,content:Zt,spriteData:{width:Ie,height:He,x:Ne,y:qe,context:Ae}}}}return ge})}(Z,ie)})}(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(C=>{if(this._spriteRequest=null,C)for(const R in C){this._spritesImagesIds[R]=[];const z=this._spritesImagesIds[R]?this._spritesImagesIds[R].filter(F=>!(F in C)):[];for(const F of z)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const F in C[R]){const H=R==="default"?F:`${R}:${F}`;this._spritesImagesIds[R].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,C[R][F],!1):this.imageManager.addImage(H,C[R][F]),m&&(this._changedImages[H]=!0)}}}).catch(C=>{this._spriteRequest=null,w=C,this.fire(new s.j(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),b&&b(w)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(u){const m=this.sourceCaches[u.source];if(!m)return;const b=u.sourceLayer;if(!b)return;const w=m.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(b)===-1)&&this.fire(new s.j(new Error(`Source layer "${b}" does not exist on source "${w.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const m=this._serializedAllLayers();if(!u||u.length===0)return Object.values(m);const b=[];for(const w of u)m[w]&&b.push(m[w]);return b}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const m=Object.keys(this._layers);for(const b of m){const w=this._layers[b];w.type!=="custom"&&(u[b]=w.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const m=this._changed;if(this._changed){const w=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(w.length||C.length)&&this._updateWorkerLayers(w,C);for(const R in this._updatedSources){const z=this._updatedSources[R];if(z==="reload")this._reloadSource(R);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(R)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const R in this._updatedPaintProps)this._layers[R].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const b={};for(const w in this.sourceCaches){const C=this.sourceCaches[w];b[w]=C.used,C.used=!1}for(const w of this._order){const C=this._layers[w];C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const w in b){const C=this.sourceCaches[w];b[w]!==C.used&&C.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(u),this.z=u.zoom,m&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(u),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,m={}){this._checkLoaded();const b=this.serialize();if(u=m.transformStyle?m.transformStyle(b,u):u,bn(this,s.x(u)))return!1;(u=s.aA(u)).layers=s.ay(u.layers);const w=s.aB(b,u),C=this._getOperationsToPerform(w);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const R of C.operations)R();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const m=[],b=[];for(const w of u)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":m.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":m.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":m.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":m.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":m.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":m.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":m.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":m.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":m.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":m.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":m.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":m.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":m.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setTransition":m.push(()=>{});break;default:b.push(w.command)}return{operations:m,unimplemented:b}}addImage(u,m){if(this.getImage(u))return this.fire(new s.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,m),this._afterImageUpdated(u)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new s.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,m,b={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.x.source,`sources.${u}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const w=this.sourceCaches[u]=new Wn(u,m,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:u})),w.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===u)return this.fire(new s.j(new Error(`Source "${u}" cannot be removed while layer "${b}" is using it.`)));const m=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],m.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,m){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const b=this.sourceCaches[u].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(m),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,m,b={}){this._checkLoaded();const w=u.id;if(this.getLayer(w))return void this.fire(new s.j(new Error(`Layer "${w}" already exists on this map.`)));let C;if(u.type==="custom"){if(bn(this,s.aC(u)))return;C=s.az(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(w,u.source),u=s.aA(u),u=s.e(u,{source:w})),this._validate(s.x.layer,`layers.${w}`,u,{arrayIndex:-1},b))return;C=s.az(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:w}})}const R=m?this._order.indexOf(m):this._order.length;if(m&&R===-1)this.fire(new s.j(new Error(`Cannot add layer "${w}" before non-existing layer "${m}".`)));else{if(this._order.splice(R,0,w),this._layerOrderChanged=!0,this._layers[w]=C,this._removedLayers[w]&&C.source&&C.type!=="custom"){const z=this._removedLayers[w];delete this._removedLayers[w],z.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new s.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const b=this._order.indexOf(u);this._order.splice(b,1);const w=m?this._order.indexOf(m):this._order.length;m&&w===-1?this.fire(new s.j(new Error(`Cannot move layer "${u}" before non-existing layer "${m}".`))):(this._order.splice(w,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${u}".`)));m.setEventedParent(null);const b=this._order.indexOf(u);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,m,b){this._checkLoaded();const w=this.getLayer(u);w?w.minzoom===m&&w.maxzoom===b||(m!=null&&(w.minzoom=m),b!=null&&(w.maxzoom=b),this._updateLayer(w)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,m,b={}){this._checkLoaded();const w=this.getLayer(u);if(w){if(!s.aD(w.filter,m))return m==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(s.x.filter,`layers.${w.id}.filter`,m,null,b)||(w.filter=s.aA(m),this._updateLayer(w)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return s.aA(this.getLayer(u).filter)}setLayoutProperty(u,m,b,w={}){this._checkLoaded();const C=this.getLayer(u);C?s.aD(C.getLayoutProperty(m),b)||(C.setLayoutProperty(m,b,w),this._updateLayer(C)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,m){const b=this.getLayer(u);if(b)return b.getLayoutProperty(m);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,m,b,w={}){this._checkLoaded();const C=this.getLayer(u);C?s.aD(C.getPaintProperty(m),b)||(C.setPaintProperty(m,b,w)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new s.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,m){return this.getLayer(u).getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const b=u.source,w=u.sourceLayer,C=this.sourceCaches[b];if(C===void 0)return void this.fire(new s.j(new Error(`The source '${b}' does not exist in the map's style.`)));const R=C.getSource().type;R==="geojson"&&w?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):R!=="vector"||w?(u.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),C.setFeatureState(w,u.id,m)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,m){this._checkLoaded();const b=u.source,w=this.sourceCaches[b];if(w===void 0)return void this.fire(new s.j(new Error(`The source '${b}' does not exist in the map's style.`)));const C=w.getSource().type,R=C==="vector"?u.sourceLayer:void 0;C!=="vector"||R?m&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(R,u.id,m):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const m=u.source,b=u.sourceLayer,w=this.sourceCaches[m];if(w!==void 0)return w.getSource().type!=="vector"||b?(u.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),w.getFeatureState(b,u.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=s.aE(this.sourceCaches,C=>C.serialize()),m=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,w=this.stylesheet;return s.aF({version:w.version,name:w.name,metadata:w.metadata,light:w.light,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,sources:u,layers:m,terrain:b},C=>C!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const m=R=>this._layers[R].type==="fill-extrusion",b={},w=[];for(let R=this._order.length-1;R>=0;R--){const z=this._order[R];if(m(z)){b[z]=R;for(const F of u){const H=F[z];if(H)for(const q of H)w.push(q)}}}w.sort((R,z)=>z.intersectionZ-R.intersectionZ);const C=[];for(let R=this._order.length-1;R>=0;R--){const z=this._order[R];if(m(z))for(let F=w.length-1;F>=0;F--){const H=w[F].feature;if(b[H.layer.id]<R)break;C.push(H),w.pop()}else for(const F of u){const H=F[z];if(H)for(const q of H)C.push(q.feature)}}return C}queryRenderedFeatures(u,m,b){m&&m.filter&&this._validate(s.x.filter,"queryRenderedFeatures.filter",m.filter,null,m);const w={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(const z of m.layers){const F=this._layers[z];if(!F)return this.fire(new s.j(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];w[F.source]=!0}}const C=[];m.availableImages=this._availableImages;const R=this._serializedAllLayers();for(const z in this.sourceCaches)m.layers&&!w[z]||C.push(It(this.sourceCaches[z],this._layers,R,u,m,b));return this.placement&&C.push(function(z,F,H,q,Z,ie,ce){const he={},ge=ie.queryRenderedSymbols(q),le=[];for(const Ae of Object.keys(ge).map(Number))le.push(ce[Ae]);le.sort(de);for(const Ae of le){const Fe=Ae.featureIndex.lookupSymbolFeatures(ge[Ae.bucketInstanceId],F,Ae.bucketIndex,Ae.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,z);for(const _e in Fe){const Ie=he[_e]=he[_e]||[],He=Fe[_e];He.sort((Ne,qe)=>{const et=Ae.featureSortOrder;if(et){const Qe=et.indexOf(Ne.featureIndex);return et.indexOf(qe.featureIndex)-Qe}return qe.featureIndex-Ne.featureIndex});for(const Ne of He)Ie.push(Ne)}}for(const Ae in he)he[Ae].forEach(Fe=>{const _e=Fe.feature,Ie=H[z[Ae].source].getFeatureState(_e.layer["source-layer"],_e.id);_e.source=_e.layer.source,_e.layer["source-layer"]&&(_e.sourceLayer=_e.layer["source-layer"]),_e.state=Ie});return he}(this._layers,R,this.sourceCaches,u,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,m){m&&m.filter&&this._validate(s.x.filter,"querySourceFeatures.filter",m.filter,null,m);const b=this.sourceCaches[u];return b?function(w,C){const R=w.getRenderableIds().map(H=>w.getTileByID(H)),z=[],F={};for(let H=0;H<R.length;H++){const q=R[H],Z=q.tileID.canonical.key;F[Z]||(F[Z]=!0,q.querySourceFeatures(z,C))}return z}(b,m):[]}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const b=this.light.getLight();let w=!1;for(const R in u)if(!s.aD(u[R],b[R])){w=!0;break}if(!w)return;const C={now:v.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,m),this.light.updateTransitions(C)}_validate(u,m,b,w,C={}){return(!C||C.validate!==!1)&&bn(this,u.call(s.x,s.e({key:m,style:this.serialize(),value:b,styleSpec:s.v},w)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ke().off("pluginStateChange",this._rtlTextPluginStateChange);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.sourceCaches){const b=this.sourceCaches[m];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const m in this.sourceCaches)this.sourceCaches[m].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,m,b,w,C=!1){let R=!1,z=!1;const F={};for(const H of this._order){const q=this._layers[H];if(q.type!=="symbol")continue;if(!F[q.source]){const ie=this.sourceCaches[q.source];F[q.source]=ie.getRenderableIds(!0).map(ce=>ie.getTileByID(ce)).sort((ce,he)=>he.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(he.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(q,F[q.source],u.center.lng);R=R||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.now(),u.zoom))&&(this.pauseablePlacement=new Pa(u,this.map.terrain,this._order,C,m,b,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.now()),z=!0),R&&this.pauseablePlacement.placement.setStale()),z||R)for(const H of this._order){const q=this._layers[H];q.type==="symbol"&&this.placement.updateLayerOpacities(q,F[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m){return s._(this,void 0,void 0,function*(){const b=yield this.imageManager.getImages(m.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[m.source];return w&&w.setDependencies(m.tileID.key,m.type,m.icons),b})}getGlyphs(u,m){return s._(this,void 0,void 0,function*(){const b=yield this.glyphManager.getGlyphs(m.stacks),w=this.sourceCaches[m.source];return w&&w.setDependencies(m.tileID.key,m.type,[""]),b})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,m={}){this._checkLoaded(),u&&this._validate(s.x.glyphs,"glyphs",u,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,m,b={},w){this._checkLoaded();const C=[{id:u,url:m}],R=[...J(this.stylesheet.sprite),...C];this._validate(s.x.sprite,"sprite",R,null,b)||(this.stylesheet.sprite=R,this._loadSprite(C,!0,w))}removeSprite(u){this._checkLoaded();const m=J(this.stylesheet.sprite);if(m.find(b=>b.id===u)){if(this._spritesImagesIds[u])for(const b of this._spritesImagesIds[u])this.imageManager.removeImage(b),this._changedImages[b]=!0;m.splice(m.findIndex(b=>b.id===u),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return J(this.stylesheet.sprite)}setSprite(u,m={},b){this._checkLoaded(),u&&this._validate(s.x.sprite,"sprite",u,null,m)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,b):(this._unloadSprite(),b&&b(null)))}}var Nh=s.X([{name:"a_pos",type:"Int16",components:2}]),lo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Yu={prelude:Gr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Gr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Gr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Gr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Gr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Gr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Gr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Gr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Gr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Gr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Gr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Gr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Gr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Gr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Gr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Gr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Gr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Gr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Gr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Gr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",lo),terrainDepth:Gr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",lo),terrainCoords:Gr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",lo)};function Gr(T,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=u.match(/attribute ([\w]+) ([\w]+)/g),w=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=C?C.concat(w):w,z={};return{fragmentSource:T=T.replace(m,(F,H,q,Z,ie)=>(z[ie]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
varying ${q} ${Z} ${ie};
#else
uniform ${q} ${Z} u_${ie};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ie}
    ${q} ${Z} ${ie} = u_${ie};
#endif
`)),vertexSource:u=u.replace(m,(F,H,q,Z,ie)=>{const ce=Z==="float"?"vec2":"vec4",he=ie.match(/color/)?"color":ce;return z[ie]?H==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
attribute ${q} ${ce} a_${ie};
varying ${q} ${Z} ${ie};
#else
uniform ${q} ${Z} u_${ie};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = a_${ie};
#else
    ${q} ${Z} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = unpack_mix_${he}(a_${ie}, u_${ie}_t);
#else
    ${q} ${Z} ${ie} = u_${ie};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
attribute ${q} ${ce} a_${ie};
#else
uniform ${q} ${Z} u_${ie};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${q} ${Z} ${ie} = a_${ie};
#else
    ${q} ${Z} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${q} ${Z} ${ie} = unpack_mix_${he}(a_${ie}, u_${ie}_t);
#else
    ${q} ${Z} ${ie} = u_${ie};
#endif
`}),staticAttributes:b,staticUniforms:R}}class Vh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,m,b,w,C,R,z,F,H){this.context=u;let q=this.boundPaintVertexBuffers.length!==w.length;for(let Z=0;!q&&Z<w.length;Z++)this.boundPaintVertexBuffers[Z]!==w[Z]&&(q=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||q||this.boundIndexBuffer!==C||this.boundVertexOffset!==R||this.boundDynamicVertexBuffer!==z||this.boundDynamicVertexBuffer2!==F||this.boundDynamicVertexBuffer3!==H?this.freshBind(m,b,w,C,R,z,F,H):(u.bindVertexArray.set(this.vao),z&&z.bind(),C&&C.dynamicDraw&&C.bind(),F&&F.bind(),H&&H.bind())}freshBind(u,m,b,w,C,R,z,F){const H=u.numAttributes,q=this.context,Z=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=w,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=F,m.enableAttributes(Z,u);for(const ie of b)ie.enableAttributes(Z,u);R&&R.enableAttributes(Z,u),z&&z.enableAttributes(Z,u),F&&F.enableAttributes(Z,u),m.bind(),m.setVertexAttribPointers(Z,u,C);for(const ie of b)ie.bind(),ie.setVertexAttribPointers(Z,u,C);R&&(R.bind(),R.setVertexAttribPointers(Z,u,C)),w&&w.bind(),z&&(z.bind(),z.setVertexAttribPointers(Z,u,C)),F&&(F.bind(),F.setVertexAttribPointers(Z,u,C)),q.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Nl(T){const u=[];for(let m=0;m<T.length;m++){if(T[m]===null)continue;const b=T[m].split(" ");u.push(b.pop())}return u}class us{constructor(u,m,b,w,C,R){const z=u.gl;this.program=z.createProgram();const F=Nl(m.staticAttributes),H=b?b.getBinderAttributes():[],q=F.concat(H),Z=Yu.prelude.staticUniforms?Nl(Yu.prelude.staticUniforms):[],ie=m.staticUniforms?Nl(m.staticUniforms):[],ce=b?b.getBinderUniforms():[],he=Z.concat(ie).concat(ce),ge=[];for(const Ne of he)ge.indexOf(Ne)<0&&ge.push(Ne);const le=b?b.defines():[];C&&le.push("#define OVERDRAW_INSPECTOR;"),R&&le.push("#define TERRAIN3D;");const Ae=le.concat(Yu.prelude.fragmentSource,m.fragmentSource).join(`
`),Fe=le.concat(Yu.prelude.vertexSource,m.vertexSource).join(`
`),_e=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(_e,Ae),z.compileShader(_e),!z.getShaderParameter(_e,z.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${z.getShaderInfoLog(_e)}`);z.attachShader(this.program,_e);const Ie=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(Ie,Fe),z.compileShader(Ie),!z.getShaderParameter(Ie,z.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${z.getShaderInfoLog(Ie)}`);z.attachShader(this.program,Ie),this.attributes={};const He={};this.numAttributes=q.length;for(let Ne=0;Ne<this.numAttributes;Ne++)q[Ne]&&(z.bindAttribLocation(this.program,Ne,q[Ne]),this.attributes[q[Ne]]=Ne);if(z.linkProgram(this.program),!z.getProgramParameter(this.program,z.LINK_STATUS))throw new Error(`Program failed to link: ${z.getProgramInfoLog(this.program)}`);z.deleteShader(Ie),z.deleteShader(_e);for(let Ne=0;Ne<ge.length;Ne++){const qe=ge[Ne];if(qe&&!He[qe]){const et=z.getUniformLocation(this.program,qe);et&&(He[qe]=et)}}this.fixedUniforms=w(u,He),this.terrainUniforms=((Ne,qe)=>({u_depth:new s.aG(Ne,qe.u_depth),u_terrain:new s.aG(Ne,qe.u_terrain),u_terrain_dim:new s.aH(Ne,qe.u_terrain_dim),u_terrain_matrix:new s.aI(Ne,qe.u_terrain_matrix),u_terrain_unpack:new s.aJ(Ne,qe.u_terrain_unpack),u_terrain_exaggeration:new s.aH(Ne,qe.u_terrain_exaggeration)}))(u,He),this.binderUniforms=b?b.getUniforms(u,He):[]}draw(u,m,b,w,C,R,z,F,H,q,Z,ie,ce,he,ge,le,Ae,Fe){const _e=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(b),u.setStencilMode(w),u.setColorMode(C),u.setCullFace(R),F){u.activeTexture.set(_e.TEXTURE2),_e.bindTexture(_e.TEXTURE_2D,F.depthTexture),u.activeTexture.set(_e.TEXTURE3),_e.bindTexture(_e.TEXTURE_2D,F.texture);for(const He in this.terrainUniforms)this.terrainUniforms[He].set(F[He])}for(const He in this.fixedUniforms)this.fixedUniforms[He].set(z[He]);ge&&ge.setUniforms(u,this.binderUniforms,ce,{zoom:he});let Ie=0;switch(m){case _e.LINES:Ie=2;break;case _e.TRIANGLES:Ie=3;break;case _e.LINE_STRIP:Ie=1}for(const He of ie.get()){const Ne=He.vaos||(He.vaos={});(Ne[H]||(Ne[H]=new Vh)).bind(u,this,q,ge?ge.getPaintVertexBuffers():[],Z,He.vertexOffset,le,Ae,Fe),_e.drawElements(m,He.primitiveLength*Ie,_e.UNSIGNED_SHORT,He.primitiveOffset*Ie*2)}}}function Hh(T,u,m){const b=1/nr(m,1,u.transform.tileZoom),w=Math.pow(2,m.tileID.overscaledZ),C=m.tileSize*Math.pow(2,u.transform.tileZoom)/w,R=C*(m.tileID.canonical.x+m.tileID.wrap*w),z=C*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[b,T.fromScale,T.toScale],u_fade:T.t,u_pixel_coord_upper:[R>>16,z>>16],u_pixel_coord_lower:[65535&R,65535&z]}}const Ku=(T,u,m,b)=>{const w=u.style.light,C=w.properties.get("position"),R=[C.x,C.y,C.z],z=function(){var H=new s.A(9);return s.A!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}();w.properties.get("anchor")==="viewport"&&function(H,q){var Z=Math.sin(q),ie=Math.cos(q);H[0]=ie,H[1]=Z,H[2]=0,H[3]=-Z,H[4]=ie,H[5]=0,H[6]=0,H[7]=0,H[8]=1}(z,-u.transform.angle),function(H,q,Z){var ie=q[0],ce=q[1],he=q[2];H[0]=ie*Z[0]+ce*Z[3]+he*Z[6],H[1]=ie*Z[1]+ce*Z[4]+he*Z[7],H[2]=ie*Z[2]+ce*Z[5]+he*Z[8]}(R,R,z);const F=w.properties.get("color");return{u_matrix:T,u_lightpos:R,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+m,u_opacity:b}},Gb=(T,u,m,b,w,C,R)=>s.e(Ku(T,u,m,b),Hh(C,u,R),{u_height_factor:-Math.pow(2,w.overscaledZ)/R.tileSize/8}),Hg=T=>({u_matrix:T}),Uh=(T,u,m,b)=>s.e(Hg(T),Hh(m,u,b)),Wb=(T,u)=>({u_matrix:T,u_world:u}),Ug=(T,u,m,b,w)=>s.e(Uh(T,u,m,b),{u_world:w}),qb=(T,u,m,b)=>{const w=T.transform;let C,R;if(b.paint.get("circle-pitch-alignment")==="map"){const z=nr(m,1,w.zoom);C=!0,R=[z,z]}else C=!1,R=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:T.translatePosMatrix(u.posMatrix,m,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:T.pixelRatio,u_extrude_scale:R}},jg=(T,u,m)=>{const b=nr(m,1,u.zoom),w=Math.pow(2,u.zoom-m.tileID.overscaledZ),C=m.tileID.overscaleFactor();return{u_matrix:T,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[u.pixelsToGLUnits[0]/(b*w),u.pixelsToGLUnits[1]/(b*w)],u_overscale_factor:C}},Gg=(T,u,m=1)=>({u_matrix:T,u_color:u,u_overlay:0,u_overlay_scale:m}),jh=T=>({u_matrix:T}),Wg=(T,u,m,b)=>({u_matrix:T,u_extrude_scale:nr(u,1,m),u_intensity:b});function qg(T,u){const m=Math.pow(2,u.canonical.z),b=u.canonical.y;return[new s.Y(0,b/m).toLngLat().lat,new s.Y(0,(b+1)/m).toLngLat().lat]}const Gh=(T,u,m,b)=>{const w=T.transform;return{u_matrix:Ju(T,u,m,b),u_ratio:1/nr(u,1,w.zoom),u_device_pixel_ratio:T.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Zg=(T,u,m,b,w)=>s.e(Gh(T,u,m,w),{u_image:0,u_image_height:b}),Gs=(T,u,m,b,w)=>{const C=T.transform,R=pa(u,C);return{u_matrix:Ju(T,u,m,w),u_texsize:u.imageAtlasTexture.size,u_ratio:1/nr(u,1,C.zoom),u_device_pixel_ratio:T.pixelRatio,u_image:0,u_scale:[R,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Wh=(T,u,m,b,w,C)=>{const R=T.lineAtlas,z=pa(u,T.transform),F=m.layout.get("line-cap")==="round",H=R.getDash(b.from,F),q=R.getDash(b.to,F),Z=H.width*w.fromScale,ie=q.width*w.toScale;return s.e(Gh(T,u,m,C),{u_patternscale_a:[z/Z,-H.height/2],u_patternscale_b:[z/ie,-q.height/2],u_sdfgamma:R.width/(256*Math.min(Z,ie)*T.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:q.y,u_mix:w.t})};function pa(T,u){return 1/nr(T,1,u.tileZoom)}function Ju(T,u,m,b){return T.translatePosMatrix(b?b.posMatrix:u.tileID.posMatrix,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const qh=(T,u,m,b,w)=>{return{u_matrix:T,u_tl_parent:u,u_scale_parent:m,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(R=w.paint.get("raster-saturation"),R>0?1-1/(1.001-R):-R),u_contrast_factor:(C=w.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Qu(w.paint.get("raster-hue-rotate"))};var C,R};function Qu(T){T*=Math.PI/180;const u=Math.sin(T),m=Math.cos(T);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const ec=(T,u,m,b,w,C,R,z,F,H)=>{const q=w.transform;return{u_is_size_zoom_constant:+(T==="constant"||T==="source"),u_is_size_feature_constant:+(T==="constant"||T==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:q.cameraToCenterDistance,u_pitch:q.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:q.width/q.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:R,u_coord_matrix:z,u_is_text:+F,u_pitch_with_map:+b,u_texsize:H,u_texture:0}},tc=(T,u,m,b,w,C,R,z,F,H,q)=>{const Z=w.transform;return s.e(ec(T,u,m,b,w,C,R,z,F,H),{u_gamma_scale:b?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+q})},rc=(T,u,m,b,w,C,R,z,F,H)=>s.e(tc(T,u,m,b,w,C,R,z,!0,F,!0),{u_texsize_icon:H,u_texture_icon:1}),Zb=(T,u,m)=>({u_matrix:T,u_opacity:u,u_color:m}),Xb=(T,u,m,b,w,C)=>s.e(function(R,z,F,H){const q=F.imageManager.getPattern(R.from.toString()),Z=F.imageManager.getPattern(R.to.toString()),{width:ie,height:ce}=F.imageManager.getPixelSize(),he=Math.pow(2,H.tileID.overscaledZ),ge=H.tileSize*Math.pow(2,F.transform.tileZoom)/he,le=ge*(H.tileID.canonical.x+H.tileID.wrap*he),Ae=ge*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:q.tl,u_pattern_br_a:q.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[ie,ce],u_mix:z.t,u_pattern_size_a:q.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/nr(H,1,F.transform.tileZoom),u_pixel_coord_upper:[le>>16,Ae>>16],u_pixel_coord_lower:[65535&le,65535&Ae]}}(b,C,m,w),{u_matrix:T,u_opacity:u}),Xg={fillExtrusion:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_lightpos:new s.aK(T,u.u_lightpos),u_lightintensity:new s.aH(T,u.u_lightintensity),u_lightcolor:new s.aK(T,u.u_lightcolor),u_vertical_gradient:new s.aH(T,u.u_vertical_gradient),u_opacity:new s.aH(T,u.u_opacity)}),fillExtrusionPattern:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_lightpos:new s.aK(T,u.u_lightpos),u_lightintensity:new s.aH(T,u.u_lightintensity),u_lightcolor:new s.aK(T,u.u_lightcolor),u_vertical_gradient:new s.aH(T,u.u_vertical_gradient),u_height_factor:new s.aH(T,u.u_height_factor),u_image:new s.aG(T,u.u_image),u_texsize:new s.aL(T,u.u_texsize),u_pixel_coord_upper:new s.aL(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(T,u.u_pixel_coord_lower),u_scale:new s.aK(T,u.u_scale),u_fade:new s.aH(T,u.u_fade),u_opacity:new s.aH(T,u.u_opacity)}),fill:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix)}),fillPattern:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_image:new s.aG(T,u.u_image),u_texsize:new s.aL(T,u.u_texsize),u_pixel_coord_upper:new s.aL(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(T,u.u_pixel_coord_lower),u_scale:new s.aK(T,u.u_scale),u_fade:new s.aH(T,u.u_fade)}),fillOutline:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_world:new s.aL(T,u.u_world)}),fillOutlinePattern:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_world:new s.aL(T,u.u_world),u_image:new s.aG(T,u.u_image),u_texsize:new s.aL(T,u.u_texsize),u_pixel_coord_upper:new s.aL(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(T,u.u_pixel_coord_lower),u_scale:new s.aK(T,u.u_scale),u_fade:new s.aH(T,u.u_fade)}),circle:(T,u)=>({u_camera_to_center_distance:new s.aH(T,u.u_camera_to_center_distance),u_scale_with_map:new s.aG(T,u.u_scale_with_map),u_pitch_with_map:new s.aG(T,u.u_pitch_with_map),u_extrude_scale:new s.aL(T,u.u_extrude_scale),u_device_pixel_ratio:new s.aH(T,u.u_device_pixel_ratio),u_matrix:new s.aI(T,u.u_matrix)}),collisionBox:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_camera_to_center_distance:new s.aH(T,u.u_camera_to_center_distance),u_pixels_to_tile_units:new s.aH(T,u.u_pixels_to_tile_units),u_extrude_scale:new s.aL(T,u.u_extrude_scale),u_overscale_factor:new s.aH(T,u.u_overscale_factor)}),collisionCircle:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_inv_matrix:new s.aI(T,u.u_inv_matrix),u_camera_to_center_distance:new s.aH(T,u.u_camera_to_center_distance),u_viewport_size:new s.aL(T,u.u_viewport_size)}),debug:(T,u)=>({u_color:new s.aM(T,u.u_color),u_matrix:new s.aI(T,u.u_matrix),u_overlay:new s.aG(T,u.u_overlay),u_overlay_scale:new s.aH(T,u.u_overlay_scale)}),clippingMask:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix)}),heatmap:(T,u)=>({u_extrude_scale:new s.aH(T,u.u_extrude_scale),u_intensity:new s.aH(T,u.u_intensity),u_matrix:new s.aI(T,u.u_matrix)}),heatmapTexture:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_world:new s.aL(T,u.u_world),u_image:new s.aG(T,u.u_image),u_color_ramp:new s.aG(T,u.u_color_ramp),u_opacity:new s.aH(T,u.u_opacity)}),hillshade:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_image:new s.aG(T,u.u_image),u_latrange:new s.aL(T,u.u_latrange),u_light:new s.aL(T,u.u_light),u_shadow:new s.aM(T,u.u_shadow),u_highlight:new s.aM(T,u.u_highlight),u_accent:new s.aM(T,u.u_accent)}),hillshadePrepare:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_image:new s.aG(T,u.u_image),u_dimension:new s.aL(T,u.u_dimension),u_zoom:new s.aH(T,u.u_zoom),u_unpack:new s.aJ(T,u.u_unpack)}),line:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_ratio:new s.aH(T,u.u_ratio),u_device_pixel_ratio:new s.aH(T,u.u_device_pixel_ratio),u_units_to_pixels:new s.aL(T,u.u_units_to_pixels)}),lineGradient:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_ratio:new s.aH(T,u.u_ratio),u_device_pixel_ratio:new s.aH(T,u.u_device_pixel_ratio),u_units_to_pixels:new s.aL(T,u.u_units_to_pixels),u_image:new s.aG(T,u.u_image),u_image_height:new s.aH(T,u.u_image_height)}),linePattern:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_texsize:new s.aL(T,u.u_texsize),u_ratio:new s.aH(T,u.u_ratio),u_device_pixel_ratio:new s.aH(T,u.u_device_pixel_ratio),u_image:new s.aG(T,u.u_image),u_units_to_pixels:new s.aL(T,u.u_units_to_pixels),u_scale:new s.aK(T,u.u_scale),u_fade:new s.aH(T,u.u_fade)}),lineSDF:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_ratio:new s.aH(T,u.u_ratio),u_device_pixel_ratio:new s.aH(T,u.u_device_pixel_ratio),u_units_to_pixels:new s.aL(T,u.u_units_to_pixels),u_patternscale_a:new s.aL(T,u.u_patternscale_a),u_patternscale_b:new s.aL(T,u.u_patternscale_b),u_sdfgamma:new s.aH(T,u.u_sdfgamma),u_image:new s.aG(T,u.u_image),u_tex_y_a:new s.aH(T,u.u_tex_y_a),u_tex_y_b:new s.aH(T,u.u_tex_y_b),u_mix:new s.aH(T,u.u_mix)}),raster:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_tl_parent:new s.aL(T,u.u_tl_parent),u_scale_parent:new s.aH(T,u.u_scale_parent),u_buffer_scale:new s.aH(T,u.u_buffer_scale),u_fade_t:new s.aH(T,u.u_fade_t),u_opacity:new s.aH(T,u.u_opacity),u_image0:new s.aG(T,u.u_image0),u_image1:new s.aG(T,u.u_image1),u_brightness_low:new s.aH(T,u.u_brightness_low),u_brightness_high:new s.aH(T,u.u_brightness_high),u_saturation_factor:new s.aH(T,u.u_saturation_factor),u_contrast_factor:new s.aH(T,u.u_contrast_factor),u_spin_weights:new s.aK(T,u.u_spin_weights)}),symbolIcon:(T,u)=>({u_is_size_zoom_constant:new s.aG(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aG(T,u.u_is_size_feature_constant),u_size_t:new s.aH(T,u.u_size_t),u_size:new s.aH(T,u.u_size),u_camera_to_center_distance:new s.aH(T,u.u_camera_to_center_distance),u_pitch:new s.aH(T,u.u_pitch),u_rotate_symbol:new s.aG(T,u.u_rotate_symbol),u_aspect_ratio:new s.aH(T,u.u_aspect_ratio),u_fade_change:new s.aH(T,u.u_fade_change),u_matrix:new s.aI(T,u.u_matrix),u_label_plane_matrix:new s.aI(T,u.u_label_plane_matrix),u_coord_matrix:new s.aI(T,u.u_coord_matrix),u_is_text:new s.aG(T,u.u_is_text),u_pitch_with_map:new s.aG(T,u.u_pitch_with_map),u_texsize:new s.aL(T,u.u_texsize),u_texture:new s.aG(T,u.u_texture)}),symbolSDF:(T,u)=>({u_is_size_zoom_constant:new s.aG(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aG(T,u.u_is_size_feature_constant),u_size_t:new s.aH(T,u.u_size_t),u_size:new s.aH(T,u.u_size),u_camera_to_center_distance:new s.aH(T,u.u_camera_to_center_distance),u_pitch:new s.aH(T,u.u_pitch),u_rotate_symbol:new s.aG(T,u.u_rotate_symbol),u_aspect_ratio:new s.aH(T,u.u_aspect_ratio),u_fade_change:new s.aH(T,u.u_fade_change),u_matrix:new s.aI(T,u.u_matrix),u_label_plane_matrix:new s.aI(T,u.u_label_plane_matrix),u_coord_matrix:new s.aI(T,u.u_coord_matrix),u_is_text:new s.aG(T,u.u_is_text),u_pitch_with_map:new s.aG(T,u.u_pitch_with_map),u_texsize:new s.aL(T,u.u_texsize),u_texture:new s.aG(T,u.u_texture),u_gamma_scale:new s.aH(T,u.u_gamma_scale),u_device_pixel_ratio:new s.aH(T,u.u_device_pixel_ratio),u_is_halo:new s.aG(T,u.u_is_halo)}),symbolTextAndIcon:(T,u)=>({u_is_size_zoom_constant:new s.aG(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aG(T,u.u_is_size_feature_constant),u_size_t:new s.aH(T,u.u_size_t),u_size:new s.aH(T,u.u_size),u_camera_to_center_distance:new s.aH(T,u.u_camera_to_center_distance),u_pitch:new s.aH(T,u.u_pitch),u_rotate_symbol:new s.aG(T,u.u_rotate_symbol),u_aspect_ratio:new s.aH(T,u.u_aspect_ratio),u_fade_change:new s.aH(T,u.u_fade_change),u_matrix:new s.aI(T,u.u_matrix),u_label_plane_matrix:new s.aI(T,u.u_label_plane_matrix),u_coord_matrix:new s.aI(T,u.u_coord_matrix),u_is_text:new s.aG(T,u.u_is_text),u_pitch_with_map:new s.aG(T,u.u_pitch_with_map),u_texsize:new s.aL(T,u.u_texsize),u_texsize_icon:new s.aL(T,u.u_texsize_icon),u_texture:new s.aG(T,u.u_texture),u_texture_icon:new s.aG(T,u.u_texture_icon),u_gamma_scale:new s.aH(T,u.u_gamma_scale),u_device_pixel_ratio:new s.aH(T,u.u_device_pixel_ratio),u_is_halo:new s.aG(T,u.u_is_halo)}),background:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_opacity:new s.aH(T,u.u_opacity),u_color:new s.aM(T,u.u_color)}),backgroundPattern:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_opacity:new s.aH(T,u.u_opacity),u_image:new s.aG(T,u.u_image),u_pattern_tl_a:new s.aL(T,u.u_pattern_tl_a),u_pattern_br_a:new s.aL(T,u.u_pattern_br_a),u_pattern_tl_b:new s.aL(T,u.u_pattern_tl_b),u_pattern_br_b:new s.aL(T,u.u_pattern_br_b),u_texsize:new s.aL(T,u.u_texsize),u_mix:new s.aH(T,u.u_mix),u_pattern_size_a:new s.aL(T,u.u_pattern_size_a),u_pattern_size_b:new s.aL(T,u.u_pattern_size_b),u_scale_a:new s.aH(T,u.u_scale_a),u_scale_b:new s.aH(T,u.u_scale_b),u_pixel_coord_upper:new s.aL(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(T,u.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aH(T,u.u_tile_units_to_pixels)}),terrain:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_texture:new s.aG(T,u.u_texture),u_ele_delta:new s.aH(T,u.u_ele_delta)}),terrainDepth:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_ele_delta:new s.aH(T,u.u_ele_delta)}),terrainCoords:(T,u)=>({u_matrix:new s.aI(T,u.u_matrix),u_texture:new s.aG(T,u.u_texture),u_terrain_coords_id:new s.aH(T,u.u_terrain_coords_id),u_ele_delta:new s.aH(T,u.u_ele_delta)})};class Yb{constructor(u,m,b){this.context=u;const w=u.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ws={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Zh{constructor(u,m,b,w){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=w,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let b=0;b<this.attributes.length;b++){const w=m.attributes[this.attributes[b].name];w!==void 0&&u.enableVertexAttribArray(w)}}setVertexAttribPointers(u,m,b){for(let w=0;w<this.attributes.length;w++){const C=this.attributes[w],R=m.attributes[C.name];R!==void 0&&u.vertexAttribPointer(R,C.components,u[Ws[C.type]],!1,this.itemSize,C.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ei=new WeakMap;function _i(T){var u;if(Ei.has(T))return Ei.get(T);{const m=(u=T.getParameter(T.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return Ei.set(T,m),m}}class kr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Xh extends kr{getDefault(){return s.aO.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Yh extends kr{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class cp extends kr{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class hp extends kr{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Kh extends kr{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class fp extends kr{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class dp extends kr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Jh extends kr{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Yg extends kr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class Kg extends kr{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Vl extends kr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class Kb extends kr{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Jb extends kr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class Qb extends kr{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class ex extends kr{getDefault(){return s.aO.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class tx extends kr{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class rx extends kr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class pp extends kr{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Qh extends kr{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class mp extends kr{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class vp extends kr{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Hl extends kr{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Jg extends kr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Qg extends kr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class gp extends kr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class qs extends kr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class ey extends kr{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Ul extends kr{getDefault(){return null}set(u){var m;if(u===this.current&&!this.dirty)return;const b=this.gl;_i(b)?b.bindVertexArray(u):(m=b.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class jl extends kr{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class ty extends kr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class yp extends kr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class Ir extends kr{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class ef extends Ir{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class nx extends Ir{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class ry extends Ir{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class nc{constructor(u,m,b,w,C){this.context=u,this.width=m,this.height=b;const R=u.gl,z=this.framebuffer=R.createFramebuffer();if(this.colorAttachment=new ef(u,z),w)this.depthAttachment=C?new ry(u,z):new nx(u,z);else if(C)throw new Error("Stencil cannot be set without depth");if(R.checkFramebufferStatus(R.FRAMEBUFFER)!==R.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&u.deleteRenderbuffer(b)}u.deleteFramebuffer(this.framebuffer)}}class zn{constructor(u,m,b){this.blendFunction=u,this.blendColor=m,this.mask=b}}zn.Replace=[1,0],zn.disabled=new zn(zn.Replace,s.aO.transparent,[!1,!1,!1,!1]),zn.unblended=new zn(zn.Replace,s.aO.transparent,[!0,!0,!0,!0]),zn.alphaBlended=new zn([1,771],s.aO.transparent,[!0,!0,!0,!0]);class ix{constructor(u){var m,b;if(this.gl=u,this.clearColor=new Xh(this),this.clearDepth=new Yh(this),this.clearStencil=new cp(this),this.colorMask=new hp(this),this.depthMask=new Kh(this),this.stencilMask=new fp(this),this.stencilFunc=new dp(this),this.stencilOp=new Jh(this),this.stencilTest=new Yg(this),this.depthRange=new Kg(this),this.depthTest=new Vl(this),this.depthFunc=new Kb(this),this.blend=new Jb(this),this.blendFunc=new Qb(this),this.blendColor=new ex(this),this.blendEquation=new tx(this),this.cullFace=new rx(this),this.cullFaceSide=new pp(this),this.frontFace=new Qh(this),this.program=new mp(this),this.activeTexture=new vp(this),this.viewport=new Hl(this),this.bindFramebuffer=new Jg(this),this.bindRenderbuffer=new Qg(this),this.bindTexture=new gp(this),this.bindVertexBuffer=new qs(this),this.bindElementBuffer=new ey(this),this.bindVertexArray=new Ul(this),this.pixelStoreUnpack=new jl(this),this.pixelStoreUnpackPremultiplyAlpha=new ty(this),this.pixelStoreUnpackFlipY=new yp(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),_i(u)){this.HALF_FLOAT=u.HALF_FLOAT;const w=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=u.RGBA16F)!==null&&m!==void 0?m:w==null?void 0:w.RGBA16F_EXT,this.RGB16F=(b=u.RGB16F)!==null&&b!==void 0?b:w==null?void 0:w.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const w=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=w==null?void 0:w.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new Yb(this,u,m)}createVertexBuffer(u,m,b){return new Zh(this,u,m,b)}createRenderbuffer(u,m,b){const w=this.gl,C=w.createRenderbuffer();return this.bindRenderbuffer.set(C),w.renderbufferStorage(w.RENDERBUFFER,u,m,b),this.bindRenderbuffer.set(null),C}createFramebuffer(u,m,b,w){return new nc(this,u,m,b,w)}clear({color:u,depth:m,stencil:b}){const w=this.gl;let C=0;u&&(C|=w.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(C|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(C|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),w.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){s.aD(u.blendFunction,zn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return _i(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var m;return _i(this.gl)?this.gl.deleteVertexArray(u):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class Ar{constructor(u,m,b){this.func=u,this.mask=m,this.range=b}}Ar.ReadOnly=!1,Ar.ReadWrite=!0,Ar.disabled=new Ar(519,Ar.ReadOnly,[0,1]);const _p=7680;class sn{constructor(u,m,b,w,C,R){this.test=u,this.ref=m,this.mask=b,this.fail=w,this.depthFail=C,this.pass=R}}sn.disabled=new sn({func:519,mask:0},0,0,_p,_p,_p);class en{constructor(u,m,b){this.enable=u,this.mode=m,this.frontFace=b}}let Zs;function tf(T,u,m,b,w,C,R){const z=T.context,F=z.gl,H=T.useProgram("collisionBox"),q=[];let Z=0,ie=0;for(let _e=0;_e<b.length;_e++){const Ie=b[_e],He=u.getTile(Ie),Ne=He.getBucket(m);if(!Ne)continue;let qe=Ie.posMatrix;w[0]===0&&w[1]===0||(qe=T.translatePosMatrix(Ie.posMatrix,He,w,C));const et=R?Ne.textCollisionBox:Ne.iconCollisionBox,Qe=Ne.collisionCircleArray;if(Qe.length>0){const ot=s.F(),Pt=qe;s.aP(ot,Ne.placementInvProjMatrix,T.transform.glCoordMatrix),s.aP(ot,ot,Ne.placementViewportMatrix),q.push({circleArray:Qe,circleOffset:ie,transform:Pt,invTransform:ot,coord:Ie}),Z+=Qe.length/4,ie=Z}et&&H.draw(z,F.LINES,Ar.disabled,sn.disabled,T.colorModeForRenderPass(),en.disabled,jg(qe,T.transform,He),T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ie),m.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,T.transform.zoom,null,null,et.collisionVertexBuffer)}if(!R||!q.length)return;const ce=T.useProgram("collisionCircle"),he=new s.aQ;he.resize(4*Z),he._trim();let ge=0;for(const _e of q)for(let Ie=0;Ie<_e.circleArray.length/4;Ie++){const He=4*Ie,Ne=_e.circleArray[He+0],qe=_e.circleArray[He+1],et=_e.circleArray[He+2],Qe=_e.circleArray[He+3];he.emplace(ge++,Ne,qe,et,Qe,0),he.emplace(ge++,Ne,qe,et,Qe,1),he.emplace(ge++,Ne,qe,et,Qe,2),he.emplace(ge++,Ne,qe,et,Qe,3)}(!Zs||Zs.length<2*Z)&&(Zs=function(_e){const Ie=2*_e,He=new s.aS;He.resize(Ie),He._trim();for(let Ne=0;Ne<Ie;Ne++){const qe=6*Ne;He.uint16[qe+0]=4*Ne+0,He.uint16[qe+1]=4*Ne+1,He.uint16[qe+2]=4*Ne+2,He.uint16[qe+3]=4*Ne+2,He.uint16[qe+4]=4*Ne+3,He.uint16[qe+5]=4*Ne+0}return He}(Z));const le=z.createIndexBuffer(Zs,!0),Ae=z.createVertexBuffer(he,s.aR.members,!0);for(const _e of q){const Ie={u_matrix:_e.transform,u_inv_matrix:_e.invTransform,u_camera_to_center_distance:(Fe=T.transform).cameraToCenterDistance,u_viewport_size:[Fe.width,Fe.height]};ce.draw(z,F.TRIANGLES,Ar.disabled,sn.disabled,T.colorModeForRenderPass(),en.disabled,Ie,T.style.map.terrain&&T.style.map.terrain.getTerrainData(_e.coord),m.id,Ae,le,s.$.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,T.transform.zoom,null,null,null)}var Fe;Ae.destroy(),le.destroy()}en.disabled=new en(!1,1029,2305),en.backCCW=new en(!0,1029,2305);const bp=s.an(new Float32Array(16));function ny(T,u,m,b,w,C){const{horizontalAlign:R,verticalAlign:z}=s.at(T);return new s.P((-(R-.5)*u/w+b[0])*C,(-(z-.5)*m/w+b[1])*C)}function rf(T,u,m,b,w,C,R,z,F,H,q){const Z=T.text.placedSymbolArray,ie=T.text.dynamicLayoutVertexArray,ce=T.icon.dynamicLayoutVertexArray,he={};ie.clear();for(let ge=0;ge<Z.length;ge++){const le=Z.get(ge),Ae=le.hidden||!le.crossTileID||T.allowVerticalPlacement&&!le.placedOrientation?null:b[le.crossTileID];if(Ae){const Fe=new s.P(le.anchorX,le.anchorY),_e=qn(Fe,m?R:C,q),Ie=ve(w.cameraToCenterDistance,_e.signedDistanceFromCamera);let He=s.ai(T.textSizeData,F,le)*Ie/s.ao;m&&(He*=T.tilePixelRatio/z);const{width:Ne,height:qe,anchor:et,textOffset:Qe,textBoxScale:ot}=Ae,Pt=ny(et,Ne,qe,Qe,ot,He),Zt=m?qn(Fe.add(Pt),C,q).point:_e.point.add(u?Pt.rotate(-w.angle):Pt),mt=T.allowVerticalPlacement&&le.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let Gt=0;Gt<le.numGlyphs;Gt++)s.aj(ie,Zt,mt);H&&le.associatedIconIndex>=0&&(he[le.associatedIconIndex]={shiftedAnchor:Zt,angle:mt})}else We(le.numGlyphs,ie)}if(H){ce.clear();const ge=T.icon.placedSymbolArray;for(let le=0;le<ge.length;le++){const Ae=ge.get(le);if(Ae.hidden)We(Ae.numGlyphs,ce);else{const Fe=he[le];if(Fe)for(let _e=0;_e<Ae.numGlyphs;_e++)s.aj(ce,Fe.shiftedAnchor,Fe.angle);else We(Ae.numGlyphs,ce)}}T.icon.dynamicLayoutVertexBuffer.updateData(ce)}T.text.dynamicLayoutVertexBuffer.updateData(ie)}function nf(T,u,m){return m.iconsInText&&u?"symbolTextAndIcon":T?"symbolSDF":"symbolIcon"}function af(T,u,m,b,w,C,R,z,F,H,q,Z){const ie=T.context,ce=ie.gl,he=T.transform,ge=z==="map",le=F==="map",Ae=z!=="viewport"&&m.layout.get("symbol-placement")!=="point",Fe=ge&&!le&&!Ae,_e=!m.layout.get("symbol-sort-key").isConstant();let Ie=!1;const He=T.depthModeForSublayer(0,Ar.ReadOnly),Ne=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),qe=[];for(const et of b){const Qe=u.getTile(et),ot=Qe.getBucket(m);if(!ot)continue;const Pt=w?ot.text:ot.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;const Zt=Pt.programConfigurations.get(m.id),mt=w||ot.sdfIcons,Gt=w?ot.textSizeData:ot.iconSizeData,kt=le||he.pitch!==0,un=T.useProgram(nf(mt,w,ot),Zt),yr=s.ag(Gt,he.zoom),hr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(et);let _r,Fn,Yr,Di,li=[0,0],En=null;if(w)Fn=Qe.glyphAtlasTexture,Yr=ce.LINEAR,_r=Qe.glyphAtlasTexture.size,ot.iconsInText&&(li=Qe.imageAtlasTexture.size,En=Qe.imageAtlasTexture,Di=kt||T.options.rotating||T.options.zooming||Gt.kind==="composite"||Gt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const cn=m.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;Fn=Qe.imageAtlasTexture,Yr=mt||T.options.rotating||T.options.zooming||cn||kt?ce.LINEAR:ce.NEAREST,_r=Qe.imageAtlasTexture.size}const bi=nr(Qe,1,T.transform.zoom),xi=lr(et.posMatrix,le,ge,T.transform,bi),Da=js(et.posMatrix,le,ge,T.transform,bi),ds=Ne&&ot.hasTextData(),Yl=m.layout.get("icon-text-fit")!=="none"&&ds&&ot.hasIconData();if(Ae){const cn=T.style.map.terrain?(ui,Kn)=>T.style.map.terrain.getElevation(et,ui,Kn):null,Yn=m.layout.get("text-rotation-alignment")==="map";te(ot,et.posMatrix,T,w,xi,Da,le,H,Yn,cn)}const Kl=T.translatePosMatrix(et.posMatrix,Qe,C,R),ps=Ae||w&&Ne||Yl?bp:xi,Xn=T.translatePosMatrix(Da,Qe,C,R,!0),$n=mt&&m.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Pn;Pn=mt?ot.iconsInText?rc(Gt.kind,yr,Fe,le,T,Kl,ps,Xn,_r,li):tc(Gt.kind,yr,Fe,le,T,Kl,ps,Xn,w,_r,!0):ec(Gt.kind,yr,Fe,le,T,Kl,ps,Xn,w,_r);const Li={program:un,buffers:Pt,uniformValues:Pn,atlasTexture:Fn,atlasTextureIcon:En,atlasInterpolation:Yr,atlasInterpolationIcon:Di,isSDF:mt,hasHalo:$n};if(_e&&ot.canOverlap){Ie=!0;const cn=Pt.segments.get();for(const Yn of cn)qe.push({segments:new s.$([Yn]),sortKey:Yn.sortKey,state:Li,terrainData:hr})}else qe.push({segments:Pt.segments,sortKey:0,state:Li,terrainData:hr})}Ie&&qe.sort((et,Qe)=>et.sortKey-Qe.sortKey);for(const et of qe){const Qe=et.state;if(ie.activeTexture.set(ce.TEXTURE0),Qe.atlasTexture.bind(Qe.atlasInterpolation,ce.CLAMP_TO_EDGE),Qe.atlasTextureIcon&&(ie.activeTexture.set(ce.TEXTURE1),Qe.atlasTextureIcon&&Qe.atlasTextureIcon.bind(Qe.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),Qe.isSDF){const ot=Qe.uniformValues;Qe.hasHalo&&(ot.u_is_halo=1,iy(Qe.buffers,et.segments,m,T,Qe.program,He,q,Z,ot,et.terrainData)),ot.u_is_halo=0}iy(Qe.buffers,et.segments,m,T,Qe.program,He,q,Z,Qe.uniformValues,et.terrainData)}}function iy(T,u,m,b,w,C,R,z,F,H){const q=b.context;w.draw(q,q.gl.TRIANGLES,C,R,z,en.disabled,F,H,m.id,T.layoutVertexBuffer,T.indexBuffer,u,m.paint,b.transform.zoom,T.programConfigurations.get(m.id),T.dynamicLayoutVertexBuffer,T.opacityVertexBuffer)}function of(T,u,m,b,w){if(!m||!b||!b.imageAtlas)return;const C=b.imageAtlas.patternPositions;let R=C[m.to.toString()],z=C[m.from.toString()];if(!R&&z&&(R=z),!z&&R&&(z=R),!R||!z){const F=w.getPaintProperty(u);R=C[F],z=C[F]}R&&z&&T.setConstantPatternPositions(R,z)}function ay(T,u,m,b,w,C,R){const z=T.context.gl,F="fill-pattern",H=m.paint.get(F),q=H&&H.constantOr(1),Z=m.getCrossfadeParameters();let ie,ce,he,ge,le;R?(ce=q&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ie=z.LINES):(ce=q?"fillPattern":"fill",ie=z.TRIANGLES);const Ae=H.constantOr(null);for(const Fe of b){const _e=u.getTile(Fe);if(q&&!_e.patternsLoaded())continue;const Ie=_e.getBucket(m);if(!Ie)continue;const He=Ie.programConfigurations.get(m.id),Ne=T.useProgram(ce,He),qe=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Fe);q&&(T.context.activeTexture.set(z.TEXTURE0),_e.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),He.updatePaintBuffers(Z)),of(He,F,Ae,_e,m);const et=qe?Fe:null,Qe=T.translatePosMatrix(et?et.posMatrix:Fe.posMatrix,_e,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(R){ge=Ie.indexBuffer2,le=Ie.segments2;const ot=[z.drawingBufferWidth,z.drawingBufferHeight];he=ce==="fillOutlinePattern"&&q?Ug(Qe,T,Z,_e,ot):Wb(Qe,ot)}else ge=Ie.indexBuffer,le=Ie.segments,he=q?Uh(Qe,T,Z,_e):Hg(Qe);Ne.draw(T.context,ie,w,T.stencilModeForClipping(Fe),C,en.disabled,he,qe,m.id,Ie.layoutVertexBuffer,ge,le,m.paint,T.transform.zoom,He)}}function sf(T,u,m,b,w,C,R){const z=T.context,F=z.gl,H="fill-extrusion-pattern",q=m.paint.get(H),Z=q.constantOr(1),ie=m.getCrossfadeParameters(),ce=m.paint.get("fill-extrusion-opacity"),he=q.constantOr(null);for(const ge of b){const le=u.getTile(ge),Ae=le.getBucket(m);if(!Ae)continue;const Fe=T.style.map.terrain&&T.style.map.terrain.getTerrainData(ge),_e=Ae.programConfigurations.get(m.id),Ie=T.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",_e);Z&&(T.context.activeTexture.set(F.TEXTURE0),le.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),_e.updatePaintBuffers(ie)),of(_e,H,he,le,m);const He=T.translatePosMatrix(ge.posMatrix,le,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Ne=m.paint.get("fill-extrusion-vertical-gradient"),qe=Z?Gb(He,T,Ne,ce,ge,ie,le):Ku(He,T,Ne,ce);Ie.draw(z,z.gl.TRIANGLES,w,C,R,en.backCCW,qe,Fe,m.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,m.paint,T.transform.zoom,_e,T.style.map.terrain&&Ae.centroidVertexBuffer)}}function lf(T,u,m,b,w,C,R){const z=T.context,F=z.gl,H=m.fbo;if(!H)return;const q=T.useProgram("hillshade"),Z=T.style.map.terrain&&T.style.map.terrain.getTerrainData(u);z.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,H.colorAttachment.get()),q.draw(z,F.TRIANGLES,w,C,R,en.disabled,((ie,ce,he,ge)=>{const le=he.paint.get("hillshade-shadow-color"),Ae=he.paint.get("hillshade-highlight-color"),Fe=he.paint.get("hillshade-accent-color");let _e=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(_e-=ie.transform.angle);const Ie=!ie.options.moving;return{u_matrix:ge?ge.posMatrix:ie.transform.calculatePosMatrix(ce.tileID.toUnwrapped(),Ie),u_image:0,u_latrange:qg(0,ce.tileID),u_light:[he.paint.get("hillshade-exaggeration"),_e],u_shadow:le,u_highlight:Ae,u_accent:Fe}})(T,m,b,Z?u:null),Z,b.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments)}function xp(T,u,m,b,w,C){const R=T.context,z=R.gl,F=u.dem;if(F&&F.data){const H=F.dim,q=F.stride,Z=F.getPixels();if(R.activeTexture.set(z.TEXTURE1),R.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||T.getTileTexture(q),u.demTexture){const ce=u.demTexture;ce.update(Z,{premultiply:!1}),ce.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else u.demTexture=new X(R,Z,z.RGBA,{premultiply:!1}),u.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);R.activeTexture.set(z.TEXTURE0);let ie=u.fbo;if(!ie){const ce=new X(R,{width:H,height:H,data:null},z.RGBA);ce.bind(z.LINEAR,z.CLAMP_TO_EDGE),ie=u.fbo=R.createFramebuffer(H,H,!0,!1),ie.colorAttachment.set(ce.texture)}R.bindFramebuffer.set(ie.framebuffer),R.viewport.set([0,0,H,H]),T.useProgram("hillshadePrepare").draw(R,z.TRIANGLES,b,w,C,en.disabled,((ce,he)=>{const ge=he.stride,le=s.F();return s.aN(le,0,s.W,-s.W,0,0,1),s.H(le,le,[0,-s.W,0]),{u_matrix:le,u_image:1,u_dimension:[ge,ge],u_zoom:ce.overscaledZ,u_unpack:he.getUnpackVector()}})(u.tileID,F),null,m.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function oy(T,u,m,b,w,C){const R=b.paint.get("raster-fade-duration");if(!C&&R>0){const z=v.now(),F=(z-T.timeAdded)/R,H=u?(z-u.timeAdded)/R:-1,q=m.getSource(),Z=w.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),ie=!u||Math.abs(u.tileID.overscaledZ-Z)>Math.abs(T.tileID.overscaledZ-Z),ce=ie&&T.refreshedUponExpiration?1:s.ac(ie?F:1-H,0,1);return T.refreshedUponExpiration&&F>=1&&(T.refreshedUponExpiration=!1),u?{opacity:1,mix:1-ce}:{opacity:ce,mix:0}}return{opacity:1,mix:0}}const sy=new s.aO(1,0,0,1),uf=new s.aO(0,1,0,1),wp=new s.aO(0,0,1,1),ax=new s.aO(1,0,1,1),ly=new s.aO(0,1,1,1);function An(T,u,m,b){Pi(T,0,u+m/2,T.transform.width,m,b)}function cs(T,u,m,b){Pi(T,u-m/2,0,m,T.transform.height,b)}function Pi(T,u,m,b,w,C){const R=T.context,z=R.gl;z.enable(z.SCISSOR_TEST),z.scissor(u*T.pixelRatio,m*T.pixelRatio,b*T.pixelRatio,w*T.pixelRatio),R.clear({color:C}),z.disable(z.SCISSOR_TEST)}function Sp(T,u,m){const b=T.context,w=b.gl,C=m.posMatrix,R=T.useProgram("debug"),z=Ar.disabled,F=sn.disabled,H=T.colorModeForRenderPass(),q="$debug",Z=T.style.map.terrain&&T.style.map.terrain.getTerrainData(m);b.activeTexture.set(w.TEXTURE0);const ie=u.getTileByID(m.key).latestRawTileData,ce=Math.floor((ie&&ie.byteLength||0)/1024),he=u.getTile(m).tileSize,ge=512/Math.min(he,512)*(m.overscaledZ/T.transform.zoom)*.5;let le=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(le+=` => ${m.overscaledZ}`),function(Ae,Fe){Ae.initDebugOverlayCanvas();const _e=Ae.debugOverlayCanvas,Ie=Ae.context.gl,He=Ae.debugOverlayCanvas.getContext("2d");He.clearRect(0,0,_e.width,_e.height),He.shadowColor="white",He.shadowBlur=2,He.lineWidth=1.5,He.strokeStyle="white",He.textBaseline="top",He.font="bold 36px Open Sans, sans-serif",He.fillText(Fe,5,5),He.strokeText(Fe,5,5),Ae.debugOverlayTexture.update(_e),Ae.debugOverlayTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE)}(T,`${le} ${ce}kB`),R.draw(b,w.TRIANGLES,z,F,zn.alphaBlended,en.disabled,Gg(C,s.aO.transparent,ge),null,q,T.debugBuffer,T.quadTriangleIndexBuffer,T.debugSegments),R.draw(b,w.LINE_STRIP,z,F,H,en.disabled,Gg(C,s.aO.red),Z,q,T.debugBuffer,T.tileBorderIndexBuffer,T.debugSegments)}function cf(T,u,m){const b=T.context,w=b.gl,C=T.colorModeForRenderPass(),R=new Ar(w.LEQUAL,Ar.ReadWrite,T.depthRangeFor3D),z=T.useProgram("terrain"),F=u.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,T.width,T.height]);for(const H of m){const q=T.renderToTexture.getTexture(H),Z=u.getTerrainData(H.tileID);b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,q.texture);const ie={u_matrix:T.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta(T.transform.zoom)};z.draw(b,w.TRIANGLES,R,sn.disabled,C,en.backCCW,ie,Z,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}}class uy{constructor(u,m){this.context=new ix(u),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.F(),renderTime:0},this.setup(),this.numSublayers=Wn.maxUnderzooming+Wn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ls}resize(u,m,b){if(this.width=Math.floor(u*b),this.height=Math.floor(m*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const u=this.context,m=new s.aV;m.emplaceBack(0,0),m.emplaceBack(s.W,0),m.emplaceBack(0,s.W),m.emplaceBack(s.W,s.W),this.tileExtentBuffer=u.createVertexBuffer(m,Nh.members),this.tileExtentSegments=s.$.simpleSegment(0,0,4,2);const b=new s.aV;b.emplaceBack(0,0),b.emplaceBack(s.W,0),b.emplaceBack(0,s.W),b.emplaceBack(s.W,s.W),this.debugBuffer=u.createVertexBuffer(b,Nh.members),this.debugSegments=s.$.simpleSegment(0,0,4,5);const w=new s.Z;w.emplaceBack(0,0,0,0),w.emplaceBack(s.W,0,s.W,0),w.emplaceBack(0,s.W,0,s.W),w.emplaceBack(s.W,s.W,s.W,s.W),this.rasterBoundsBuffer=u.createVertexBuffer(w,ut.members),this.rasterBoundsSegments=s.$.simpleSegment(0,0,4,2);const C=new s.aV;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(C,Nh.members),this.viewportSegments=s.$.simpleSegment(0,0,4,2);const R=new s.aW;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(R);const z=new s.aX;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(z);const F=this.context.gl;this.stencilClearMode=new sn({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO)}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=s.F();s.aN(b,0,this.width,this.height,0,0,1),s.J(b,b,[m.drawingBufferWidth,m.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,m.TRIANGLES,Ar.disabled,this.stencilClearMode,zn.disabled,en.disabled,jh(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,m){if(this.currentStencilSource===u.source||!u.isTileClipped()||!m||!m.length)return;this.currentStencilSource=u.source;const b=this.context,w=b.gl;this.nextStencilID+m.length>256&&this.clearStencil(),b.setColorMode(zn.disabled),b.setDepthMode(Ar.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const R of m){const z=this._tileClippingMaskIDs[R.key]=this.nextStencilID++,F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R);C.draw(b,w.TRIANGLES,Ar.disabled,new sn({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),zn.disabled,en.disabled,jh(R.posMatrix),F,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new sn({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){const m=this.context.gl;return new sn({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(u){const m=this.context.gl,b=u.sort((R,z)=>z.overscaledZ-R.overscaledZ),w=b[b.length-1].overscaledZ,C=b[0].overscaledZ-w+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const R={};for(let z=0;z<C;z++)R[z+w]=new sn({func:m.GEQUAL,mask:255},z+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=C,[R,b]}return[{[w]:sn.disabled},b]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new zn([u.CONSTANT_COLOR,u.ONE],new s.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?zn.unblended:zn.alphaBlended}depthModeForSublayer(u,m,b){if(!this.opaquePassEnabledForLayer())return Ar.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Ar(b||this.context.gl.LEQUAL,m,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){this.style=u,this.options=m,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(v.now()),this.imageManager.beginFrame();const b=this.style._order,w=this.style.sourceCaches,C={},R={},z={};for(const F in w){const H=w[F];H.used&&H.prepare(this.context),C[F]=H.getVisibleCoordinates(),R[F]=C[F].slice().reverse(),z[F]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let F=0;F<b.length;F++)if(this.style._layers[b[F]].is3D()){this.opaquePassCutoff=F;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const F=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.aY(this.terrainFacilitator.matrix,this.transform.projMatrix)||F.length)&&(s.aZ(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(H,q){const Z=H.context,ie=Z.gl,ce=zn.unblended,he=new Ar(ie.LEQUAL,Ar.ReadWrite,[0,1]),ge=q.getTerrainMesh(),le=q.sourceCache.getRenderableTiles(),Ae=H.useProgram("terrainDepth");Z.bindFramebuffer.set(q.getFramebuffer("depth").framebuffer),Z.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),Z.clear({color:s.aO.transparent,depth:1});for(const Fe of le){const _e=q.getTerrainData(Fe.tileID),Ie={u_matrix:H.transform.calculatePosMatrix(Fe.tileID.toUnwrapped()),u_ele_delta:q.getMeshFrameDelta(H.transform.zoom)};Ae.draw(Z,ie.TRIANGLES,he,sn.disabled,ce,en.backCCW,Ie,_e,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,H.width,H.height])}(this,this.style.map.terrain),function(H,q){const Z=H.context,ie=Z.gl,ce=zn.unblended,he=new Ar(ie.LEQUAL,Ar.ReadWrite,[0,1]),ge=q.getTerrainMesh(),le=q.getCoordsTexture(),Ae=q.sourceCache.getRenderableTiles(),Fe=H.useProgram("terrainCoords");Z.bindFramebuffer.set(q.getFramebuffer("coords").framebuffer),Z.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),Z.clear({color:s.aO.transparent,depth:1}),q.coordsIndex=[];for(const _e of Ae){const Ie=q.getTerrainData(_e.tileID);Z.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,le.texture);const He={u_matrix:H.transform.calculatePosMatrix(_e.tileID.toUnwrapped()),u_terrain_coords_id:(255-q.coordsIndex.length)/255,u_texture:0,u_ele_delta:q.getMeshFrameDelta(H.transform.zoom)};Fe.draw(Z,ie.TRIANGLES,he,sn.disabled,ce,en.backCCW,He,Ie,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),q.coordsIndex.push(_e.tileID.key)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,H.width,H.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const F of b){const H=this.style._layers[F];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const q=R[H.source];(H.type==="custom"||q.length)&&this.renderLayer(this,w[H.source],H,q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?s.aO.black:s.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const F=this.style._layers[b[this.currentLayer]],H=w[F.source],q=C[F.source];this._renderTileClippingMasks(F,q),this.renderLayer(this,H,F,q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const F=this.style._layers[b[this.currentLayer]],H=w[F.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(F))continue;const q=(F.type==="symbol"?z:R)[F.source];this._renderTileClippingMasks(F,C[F.source]),this.renderLayer(this,H,F,q)}if(this.options.showTileBoundaries){const F=function(H,q){let Z=null;const ie=Object.values(H._layers).flatMap(le=>le.source&&!le.isHidden(q)?[H.sourceCaches[le.source]]:[]),ce=ie.filter(le=>le.getSource().type==="vector"),he=ie.filter(le=>le.getSource().type!=="vector"),ge=le=>{(!Z||Z.getSource().maxzoom<le.getSource().maxzoom)&&(Z=le)};return ce.forEach(le=>ge(le)),Z||he.forEach(le=>ge(le)),Z}(this.style,this.transform.zoom);F&&function(H,q,Z){for(let ie=0;ie<Z.length;ie++)Sp(H,q,Z[ie])}(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){const H=F.transform.padding;An(F,F.transform.height-(H.top||0),3,sy),An(F,H.bottom||0,3,uf),cs(F,H.left||0,3,wp),cs(F,F.transform.width-(H.right||0),3,ax);const q=F.transform.centerPoint;(function(Z,ie,ce,he){Pi(Z,ie-1,ce-10,2,20,he),Pi(Z,ie-10,ce-1,20,2,he)})(F,q.x,F.transform.height-q.y,ly)}(this),this.context.setDefault()}renderLayer(u,m,b,w){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(w||[]).length))switch(this.id=b.id,b.type){case"symbol":(function(C,R,z,F,H){if(C.renderPass!=="translucent")return;const q=sn.disabled,Z=C.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ie,ce,he,ge,le,Ae,Fe){const _e=ce.transform,Ie=le==="map",He=Ae==="map";for(const Ne of ie){const qe=ge.getTile(Ne),et=qe.getBucket(he);if(!et||!et.text||!et.text.segments.get().length)continue;const Qe=s.ag(et.textSizeData,_e.zoom),ot=nr(qe,1,ce.transform.zoom),Pt=lr(Ne.posMatrix,He,Ie,ce.transform,ot),Zt=he.layout.get("icon-text-fit")!=="none"&&et.hasIconData();if(Qe){const mt=Math.pow(2,_e.zoom-qe.tileID.overscaledZ);rf(et,Ie,He,Fe,_e,Pt,Ne.posMatrix,mt,Qe,Zt,ce.style.map.terrain?(Gt,kt)=>ce.style.map.terrain.getElevation(Ne,Gt,kt):null)}}}(F,C,z,R,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),H),z.paint.get("icon-opacity").constantOr(1)!==0&&af(C,R,z,F,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),q,Z),z.paint.get("text-opacity").constantOr(1)!==0&&af(C,R,z,F,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),q,Z),R.map.showCollisionBoxes&&(tf(C,R,z,F,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),!0),tf(C,R,z,F,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),!1))})(u,m,b,w,this.style.placement.variableOffsets);break;case"circle":(function(C,R,z,F){if(C.renderPass!=="translucent")return;const H=z.paint.get("circle-opacity"),q=z.paint.get("circle-stroke-width"),Z=z.paint.get("circle-stroke-opacity"),ie=!z.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(q.constantOr(1)===0||Z.constantOr(1)===0))return;const ce=C.context,he=ce.gl,ge=C.depthModeForSublayer(0,Ar.ReadOnly),le=sn.disabled,Ae=C.colorModeForRenderPass(),Fe=[];for(let _e=0;_e<F.length;_e++){const Ie=F[_e],He=R.getTile(Ie),Ne=He.getBucket(z);if(!Ne)continue;const qe=Ne.programConfigurations.get(z.id),et=C.useProgram("circle",qe),Qe=Ne.layoutVertexBuffer,ot=Ne.indexBuffer,Pt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ie),Zt={programConfiguration:qe,program:et,layoutVertexBuffer:Qe,indexBuffer:ot,uniformValues:qb(C,Ie,He,z),terrainData:Pt};if(ie){const mt=Ne.segments.get();for(const Gt of mt)Fe.push({segments:new s.$([Gt]),sortKey:Gt.sortKey,state:Zt})}else Fe.push({segments:Ne.segments,sortKey:0,state:Zt})}ie&&Fe.sort((_e,Ie)=>_e.sortKey-Ie.sortKey);for(const _e of Fe){const{programConfiguration:Ie,program:He,layoutVertexBuffer:Ne,indexBuffer:qe,uniformValues:et,terrainData:Qe}=_e.state;He.draw(ce,he.TRIANGLES,ge,le,Ae,en.disabled,et,Qe,z.id,Ne,qe,_e.segments,z.paint,C.transform.zoom,Ie)}})(u,m,b,w);break;case"heatmap":(function(C,R,z,F){if(z.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const H=C.context,q=H.gl,Z=sn.disabled,ie=new zn([q.ONE,q.ONE],s.aO.transparent,[!0,!0,!0,!0]);(function(ce,he,ge){const le=ce.gl;ce.activeTexture.set(le.TEXTURE1),ce.viewport.set([0,0,he.width/4,he.height/4]);let Ae=ge.heatmapFbo;if(Ae)le.bindTexture(le.TEXTURE_2D,Ae.colorAttachment.get()),ce.bindFramebuffer.set(Ae.framebuffer);else{const Fe=le.createTexture();le.bindTexture(le.TEXTURE_2D,Fe),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),Ae=ge.heatmapFbo=ce.createFramebuffer(he.width/4,he.height/4,!1,!1),function(_e,Ie,He,Ne){var qe,et;const Qe=_e.gl,ot=(qe=_e.HALF_FLOAT)!==null&&qe!==void 0?qe:Qe.UNSIGNED_BYTE,Pt=(et=_e.RGBA16F)!==null&&et!==void 0?et:Qe.RGBA;Qe.texImage2D(Qe.TEXTURE_2D,0,Pt,Ie.width/4,Ie.height/4,0,Qe.RGBA,ot,null),Ne.colorAttachment.set(He)}(ce,he,Fe,Ae)}})(H,C,z),H.clear({color:s.aO.transparent});for(let ce=0;ce<F.length;ce++){const he=F[ce];if(R.hasRenderableParent(he))continue;const ge=R.getTile(he),le=ge.getBucket(z);if(!le)continue;const Ae=le.programConfigurations.get(z.id),Fe=C.useProgram("heatmap",Ae),{zoom:_e}=C.transform;Fe.draw(H,q.TRIANGLES,Ar.disabled,Z,ie,en.disabled,Wg(he.posMatrix,ge,_e,z.paint.get("heatmap-intensity")),null,z.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,z.paint,C.transform.zoom,Ae)}H.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(H,q){const Z=H.context,ie=Z.gl,ce=q.heatmapFbo;if(!ce)return;Z.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,ce.colorAttachment.get()),Z.activeTexture.set(ie.TEXTURE1);let he=q.colorRampTexture;he||(he=q.colorRampTexture=new X(Z,q.colorRamp,ie.RGBA)),he.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(Z,ie.TRIANGLES,Ar.disabled,sn.disabled,H.colorModeForRenderPass(),en.disabled,((ge,le,Ae,Fe)=>{const _e=s.F();s.aN(_e,0,ge.width,ge.height,0,0,1);const Ie=ge.context.gl;return{u_matrix:_e,u_world:[Ie.drawingBufferWidth,Ie.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:le.paint.get("heatmap-opacity")}})(H,q),null,q.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,q.paint,H.transform.zoom)}(C,z))})(u,m,b,w);break;case"line":(function(C,R,z,F){if(C.renderPass!=="translucent")return;const H=z.paint.get("line-opacity"),q=z.paint.get("line-width");if(H.constantOr(1)===0||q.constantOr(1)===0)return;const Z=C.depthModeForSublayer(0,Ar.ReadOnly),ie=C.colorModeForRenderPass(),ce=z.paint.get("line-dasharray"),he=z.paint.get("line-pattern"),ge=he.constantOr(1),le=z.paint.get("line-gradient"),Ae=z.getCrossfadeParameters(),Fe=ge?"linePattern":ce?"lineSDF":le?"lineGradient":"line",_e=C.context,Ie=_e.gl;let He=!0;for(const Ne of F){const qe=R.getTile(Ne);if(ge&&!qe.patternsLoaded())continue;const et=qe.getBucket(z);if(!et)continue;const Qe=et.programConfigurations.get(z.id),ot=C.context.program.get(),Pt=C.useProgram(Fe,Qe),Zt=He||Pt.program!==ot,mt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ne),Gt=he.constantOr(null);if(Gt&&qe.imageAtlas){const yr=qe.imageAtlas,hr=yr.patternPositions[Gt.to.toString()],_r=yr.patternPositions[Gt.from.toString()];hr&&_r&&Qe.setConstantPatternPositions(hr,_r)}const kt=mt?Ne:null,un=ge?Gs(C,qe,z,Ae,kt):ce?Wh(C,qe,z,ce,Ae,kt):le?Zg(C,qe,z,et.lineClipsArray.length,kt):Gh(C,qe,z,kt);if(ge)_e.activeTexture.set(Ie.TEXTURE0),qe.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),Qe.updatePaintBuffers(Ae);else if(ce&&(Zt||C.lineAtlas.dirty))_e.activeTexture.set(Ie.TEXTURE0),C.lineAtlas.bind(_e);else if(le){const yr=et.gradients[z.id];let hr=yr.texture;if(z.gradientVersion!==yr.version){let _r=256;if(z.stepInterpolant){const Fn=R.getSource().maxzoom,Yr=Ne.canonical.z===Fn?Math.ceil(1<<C.transform.maxZoom-Ne.canonical.z):1;_r=s.ac(s.aT(et.maxLineLength/s.W*1024*Yr),256,_e.maxTextureSize)}yr.gradient=s.aU({expression:z.gradientExpression(),evaluationKey:"lineProgress",resolution:_r,image:yr.gradient||void 0,clips:et.lineClipsArray}),yr.texture?yr.texture.update(yr.gradient):yr.texture=new X(_e,yr.gradient,Ie.RGBA),yr.version=z.gradientVersion,hr=yr.texture}_e.activeTexture.set(Ie.TEXTURE0),hr.bind(z.stepInterpolant?Ie.NEAREST:Ie.LINEAR,Ie.CLAMP_TO_EDGE)}Pt.draw(_e,Ie.TRIANGLES,Z,C.stencilModeForClipping(Ne),ie,en.disabled,un,mt,z.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,z.paint,C.transform.zoom,Qe,et.layoutVertexBuffer2),He=!1}})(u,m,b,w);break;case"fill":(function(C,R,z,F){const H=z.paint.get("fill-color"),q=z.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const Z=C.colorModeForRenderPass(),ie=z.paint.get("fill-pattern"),ce=C.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&H.constantOr(s.aO.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===ce){const he=C.depthModeForSublayer(1,C.renderPass==="opaque"?Ar.ReadWrite:Ar.ReadOnly);ay(C,R,z,F,he,Z,!1)}if(C.renderPass==="translucent"&&z.paint.get("fill-antialias")){const he=C.depthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,Ar.ReadOnly);ay(C,R,z,F,he,Z,!0)}})(u,m,b,w);break;case"fill-extrusion":(function(C,R,z,F){const H=z.paint.get("fill-extrusion-opacity");if(H!==0&&C.renderPass==="translucent"){const q=new Ar(C.context.gl.LEQUAL,Ar.ReadWrite,C.depthRangeFor3D);if(H!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))sf(C,R,z,F,q,sn.disabled,zn.disabled),sf(C,R,z,F,q,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const Z=C.colorModeForRenderPass();sf(C,R,z,F,q,sn.disabled,Z)}}})(u,m,b,w);break;case"hillshade":(function(C,R,z,F){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const H=C.context,q=C.depthModeForSublayer(0,Ar.ReadOnly),Z=C.colorModeForRenderPass(),[ie,ce]=C.renderPass==="translucent"?C.stencilConfigForOverlap(F):[{},F];for(const he of ce){const ge=R.getTile(he);ge.needsHillshadePrepare!==void 0&&ge.needsHillshadePrepare&&C.renderPass==="offscreen"?xp(C,ge,z,q,sn.disabled,Z):C.renderPass==="translucent"&&lf(C,he,ge,z,q,ie[he.overscaledZ],Z)}H.viewport.set([0,0,C.width,C.height])})(u,m,b,w);break;case"raster":(function(C,R,z,F){if(C.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!F.length)return;const H=C.context,q=H.gl,Z=R.getSource(),ie=C.useProgram("raster"),ce=C.colorModeForRenderPass(),[he,ge]=Z instanceof nt?[{},F]:C.stencilConfigForOverlap(F),le=ge[ge.length-1].overscaledZ,Ae=!C.options.moving;for(const Fe of ge){const _e=C.depthModeForSublayer(Fe.overscaledZ-le,z.paint.get("raster-opacity")===1?Ar.ReadWrite:Ar.ReadOnly,q.LESS),Ie=R.getTile(Fe);Ie.registerFadeDuration(z.paint.get("raster-fade-duration"));const He=R.findLoadedParent(Fe,0),Ne=oy(Ie,He,R,z,C.transform,C.style.map.terrain);let qe,et;const Qe=z.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;H.activeTexture.set(q.TEXTURE0),Ie.texture.bind(Qe,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(q.TEXTURE1),He?(He.texture.bind(Qe,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),qe=Math.pow(2,He.tileID.overscaledZ-Ie.tileID.overscaledZ),et=[Ie.tileID.canonical.x*qe%1,Ie.tileID.canonical.y*qe%1]):Ie.texture.bind(Qe,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const ot=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Fe),Pt=ot?Fe:null,Zt=Pt?Pt.posMatrix:C.transform.calculatePosMatrix(Fe.toUnwrapped(),Ae),mt=qh(Zt,et||[0,0],qe||1,Ne,z);Z instanceof nt?ie.draw(H,q.TRIANGLES,_e,sn.disabled,ce,en.disabled,mt,ot,z.id,Z.boundsBuffer,C.quadTriangleIndexBuffer,Z.boundsSegments):ie.draw(H,q.TRIANGLES,_e,he[Fe.overscaledZ],ce,en.disabled,mt,ot,z.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}})(u,m,b,w);break;case"background":(function(C,R,z,F){const H=z.paint.get("background-color"),q=z.paint.get("background-opacity");if(q===0)return;const Z=C.context,ie=Z.gl,ce=C.transform,he=ce.tileSize,ge=z.paint.get("background-pattern");if(C.isPatternMissing(ge))return;const le=!ge&&H.a===1&&q===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==le)return;const Ae=sn.disabled,Fe=C.depthModeForSublayer(0,le==="opaque"?Ar.ReadWrite:Ar.ReadOnly),_e=C.colorModeForRenderPass(),Ie=C.useProgram(ge?"backgroundPattern":"background"),He=F||ce.coveringTiles({tileSize:he,terrain:C.style.map.terrain});ge&&(Z.activeTexture.set(ie.TEXTURE0),C.imageManager.bind(C.context));const Ne=z.getCrossfadeParameters();for(const qe of He){const et=F?qe.posMatrix:C.transform.calculatePosMatrix(qe.toUnwrapped()),Qe=ge?Xb(et,q,C,ge,{tileID:qe,tileSize:he},Ne):Zb(et,q,H),ot=C.style.map.terrain&&C.style.map.terrain.getTerrainData(qe);Ie.draw(Z,ie.TRIANGLES,Fe,Ae,_e,en.disabled,Qe,ot,z.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}})(u,0,b,w);break;case"custom":(function(C,R,z){const F=C.context,H=z.implementation;if(C.renderPass==="offscreen"){const q=H.prerender;q&&(C.setCustomLayerDefaults(),F.setColorMode(C.colorModeForRenderPass()),q.call(H,F.gl,C.transform.customLayerMatrix()),F.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),F.setColorMode(C.colorModeForRenderPass()),F.setStencilMode(sn.disabled);const q=H.renderingMode==="3d"?new Ar(C.context.gl.LEQUAL,Ar.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Ar.ReadOnly);F.setDepthMode(q),H.render(F.gl,C.transform.customLayerMatrix()),F.setDirty(),C.setBaseState(),F.bindFramebuffer.set(null)}})(u,0,b)}}translatePosMatrix(u,m,b,w,C){if(!b[0]&&!b[1])return u;const R=C?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(R){const H=Math.sin(R),q=Math.cos(R);b=[b[0]*q-b[1]*H,b[0]*H+b[1]*q]}const z=[C?b[0]:nr(m,b[0],this.transform.zoom),C?b[1]:nr(m,b[1],this.transform.zoom),0],F=new Float32Array(16);return s.H(F,u,z),F}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const m=this.imageManager.getPattern(u.from.toString()),b=this.imageManager.getPattern(u.to.toString());return!m||!b}useProgram(u,m){this.cache=this.cache||{};const b=u+(m?m.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new us(this.context,Yu[u],m,Xg[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new X(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:m}=this.context.gl;return this.width!==u||this.height!==m}}class hs{constructor(u,m){this.points=u,this.planes=m}static fromInvProjectionMatrix(u,m,b){const w=Math.pow(2,b),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const F=1/(z=s.af([],z,u))[3]/m*w;return s.a_(z,z,[F,F,1/z[3],F])}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const F=function(ie,ce){var he=ce[0],ge=ce[1],le=ce[2],Ae=he*he+ge*ge+le*le;return Ae>0&&(Ae=1/Math.sqrt(Ae)),ie[0]=ce[0]*Ae,ie[1]=ce[1]*Ae,ie[2]=ce[2]*Ae,ie}([],function(ie,ce,he){var ge=ce[0],le=ce[1],Ae=ce[2],Fe=he[0],_e=he[1],Ie=he[2];return ie[0]=le*Ie-Ae*_e,ie[1]=Ae*Fe-ge*Ie,ie[2]=ge*_e-le*Fe,ie}([],Y([],C[z[0]],C[z[1]]),Y([],C[z[2]],C[z[1]]))),H=-((q=F)[0]*(Z=C[z[1]])[0]+q[1]*Z[1]+q[2]*Z[2]);var q,Z;return F.concat(H)});return new hs(C,R)}}class fs{constructor(u,m){this.min=u,this.max=m,this.center=function(b,w,C){return b[0]=.5*w[0],b[1]=.5*w[1],b[2]=.5*w[2],b}([],function(b,w,C){return b[0]=w[0]+C[0],b[1]=w[1]+C[1],b[2]=w[2]+C[2],b}([],this.min,this.max))}quadrant(u){const m=[u%2==0,u<2],b=N(this.min),w=N(this.max);for(let C=0;C<m.length;C++)b[C]=m[C]?this.min[C]:this.center[C],w[C]=m[C]?this.center[C]:this.max[C];return w[2]=this.max[2],new fs(b,w)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const m=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let w=0;w<u.planes.length;w++){const C=u.planes[w];let R=0;for(let z=0;z<m.length;z++)s.a$(C,m[z])>=0&&R++;if(R===0)return 0;R!==m.length&&(b=!1)}if(b)return 2;for(let w=0;w<3;w++){let C=Number.MAX_VALUE,R=-Number.MAX_VALUE;for(let z=0;z<u.points.length;z++){const F=u.points[z][w]-this.min[w];C=Math.min(C,F),R=Math.max(R,F)}if(R<0||C>this.max[w]-this.min[w])return 0}return 1}}class Gl{constructor(u=0,m=0,b=0,w=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=b,this.right=w}interpolate(u,m,b){return m.top!=null&&u.top!=null&&(this.top=s.z.number(u.top,m.top,b)),m.bottom!=null&&u.bottom!=null&&(this.bottom=s.z.number(u.bottom,m.bottom,b)),m.left!=null&&u.left!=null&&(this.left=s.z.number(u.left,m.left,b)),m.right!=null&&u.right!=null&&(this.right=s.z.number(u.right,m.right,b)),this}getCenter(u,m){const b=s.ac((this.left+u-this.right)/2,0,u),w=s.ac((this.top+m-this.bottom)/2,0,m);return new s.P(b,w)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Gl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class hf{constructor(u,m,b,w,C){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=C===void 0||!!C,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=b??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Gl,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const u=new hf(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this.minElevationForCurrentTile=u.minElevationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const m=-s.b0(u,-180,180)*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=function(){var b=new s.A(4);return s.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}(),function(b,w,C){var R=w[0],z=w[1],F=w[2],H=w[3],q=Math.sin(C),Z=Math.cos(C);b[0]=R*Z+F*q,b[1]=z*Z+H*q,b[2]=R*-q+F*Z,b[3]=z*-q+H*Z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const m=s.ac(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const m=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this.tileZoom=Math.max(0,Math.floor(m)),this.scale=this.zoomScale(m),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,b){this._unmodified=!1,this._edgeInsets.interpolate(u,m,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const m=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(u){const m=[new s.b1(0,u)];if(this._renderWorldCopies){const b=this.pointCoordinate(new s.P(0,0)),w=this.pointCoordinate(new s.P(this.width,0)),C=this.pointCoordinate(new s.P(this.width,this.height)),R=this.pointCoordinate(new s.P(0,this.height)),z=Math.floor(Math.min(b.x,w.x,C.x,R.x)),F=Math.floor(Math.max(b.x,w.x,C.x,R.x)),H=1;for(let q=z-H;q<=F+H;q++)q!==0&&m.push(new s.b1(q,u))}return m}coveringTiles(u){var m,b;let w=this.coveringZoomLevel(u);const C=w;if(u.minzoom!==void 0&&w<u.minzoom)return[];u.maxzoom!==void 0&&w>u.maxzoom&&(w=u.maxzoom);const R=this.pointCoordinate(this.getCameraPoint()),z=s.Y.fromLngLat(this.center),F=Math.pow(2,w),H=[F*R.x,F*R.y,0],q=[F*z.x,F*z.y,0],Z=hs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w);let ie=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ie=w);const ce=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,he=_e=>({aabb:new fs([_e*F,0,0],[(_e+1)*F,F,0]),zoom:0,x:0,y:0,wrap:_e,fullyVisible:!1}),ge=[],le=[],Ae=w,Fe=u.reparseOverscaled?C:w;if(this._renderWorldCopies)for(let _e=1;_e<=3;_e++)ge.push(he(-_e)),ge.push(he(_e));for(ge.push(he(0));ge.length>0;){const _e=ge.pop(),Ie=_e.x,He=_e.y;let Ne=_e.fullyVisible;if(!Ne){const Pt=_e.aabb.intersects(Z);if(Pt===0)continue;Ne=Pt===2}const qe=u.terrain?H:q,et=_e.aabb.distanceX(qe),Qe=_e.aabb.distanceY(qe),ot=Math.max(Math.abs(et),Math.abs(Qe));if(_e.zoom===Ae||ot>ce+(1<<Ae-_e.zoom)-2&&_e.zoom>=ie){const Pt=Ae-_e.zoom,Zt=H[0]-.5-(Ie<<Pt),mt=H[1]-.5-(He<<Pt);le.push({tileID:new s.Q(_e.zoom===Ae?Fe:_e.zoom,_e.wrap,_e.zoom,Ie,He),distanceSq:ee([q[0]-.5-Ie,q[1]-.5-He]),tileDistanceToCamera:Math.sqrt(Zt*Zt+mt*mt)})}else for(let Pt=0;Pt<4;Pt++){const Zt=(Ie<<1)+Pt%2,mt=(He<<1)+(Pt>>1),Gt=_e.zoom+1;let kt=_e.aabb.quadrant(Pt);if(u.terrain){const un=new s.Q(Gt,_e.wrap,Gt,Zt,mt),yr=u.terrain.getMinMaxElevation(un),hr=(m=yr.minElevation)!==null&&m!==void 0?m:this.elevation,_r=(b=yr.maxElevation)!==null&&b!==void 0?b:this.elevation;kt=new fs([kt.min[0],kt.min[1],hr],[kt.max[0],kt.max[1],_r])}ge.push({aabb:kt,zoom:Gt,x:Zt,y:mt,wrap:_e.wrap,fullyVisible:Ne})}}return le.sort((_e,Ie)=>_e.distanceSq-Ie.distanceSq).map(_e=>_e.tileID)}resize(u,m){this.width=u,this.height=m,this.pixelsToGLUnits=[2/u,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const m=s.ac(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.P(s.N(u.lng)*this.worldSize,s.O(m)*this.worldSize)}unproject(u){return new s.Y(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const m=this.pointLocation(this.centerPoint,u),b=u.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-b))return;const w=this.getCameraPosition(),C=s.Y.fromLngLat(w.lngLat,w.altitude),R=s.Y.fromLngLat(m,b),z=C.x-R.x,F=C.y-R.y,H=C.z-R.z,q=Math.sqrt(z*z+F*F+H*H),Z=this.scaleZoom(this.cameraToCenterDistance/q/this.tileSize);this._elevation=b,this._center=m,this.zoom=Z}setLocationAtPoint(u,m){const b=this.pointCoordinate(m),w=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(u),R=new s.Y(C.x-(b.x-w.x),C.y-(b.y-w.y));this.center=this.coordinateLocation(R),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,m){return m?this.coordinatePoint(this.locationCoordinate(u),m.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,m){return this.coordinateLocation(this.pointCoordinate(u,m))}locationCoordinate(u){return s.Y.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,m){if(m){const ie=m.pointCoordinate(u);if(ie!=null)return ie}const b=[u.x,u.y,0,1],w=[u.x,u.y,1,1];s.af(b,b,this.pixelMatrixInverse),s.af(w,w,this.pixelMatrixInverse);const C=b[3],R=w[3],z=b[1]/C,F=w[1]/R,H=b[2]/C,q=w[2]/R,Z=H===q?0:(0-H)/(q-H);return new s.Y(s.z.number(b[0]/C,w[0]/R,Z)/this.worldSize,s.z.number(z,F,Z)/this.worldSize)}coordinatePoint(u,m=0,b=this.pixelMatrix){const w=[u.x*this.worldSize,u.y*this.worldSize,m,1];return s.af(w,w,b),new s.P(w[0]/w[3],w[1]/w[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new Be().extend(this.pointLocation(new s.P(0,u))).extend(this.pointLocation(new s.P(this.width,u))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Be([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,m=!1){const b=u.key,w=m?this._alignedPosMatrixCache:this._posMatrixCache;if(w[b])return w[b];const C=u.canonical,R=this.worldSize/this.zoomScale(C.z),z=C.x+Math.pow(2,C.z)*u.wrap,F=s.an(new Float64Array(16));return s.H(F,F,[z*R,C.y*R,0]),s.J(F,F,[R/s.W,R/s.W,1]),s.K(F,m?this.alignedProjMatrix:this.projMatrix,F),w[b]=new Float32Array(F),w[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,m,b,w,C=-90,R=90,z=-180,F=180;const H=this.size,q=this._unmodified;if(this.latRange){const ce=this.latRange;C=s.O(ce[1])*this.worldSize,R=s.O(ce[0])*this.worldSize,u=R-C<H.y?H.y/(R-C):0}if(this.lngRange){const ce=this.lngRange;z=s.b0(s.N(ce[0])*this.worldSize,0,this.worldSize),F=s.b0(s.N(ce[1])*this.worldSize,0,this.worldSize),F<z&&(F+=this.worldSize),m=F-z<H.x?H.x/(F-z):0}const Z=this.point,ie=Math.max(m||0,u||0);if(ie)return this.center=this.unproject(new s.P(m?(F+z)/2:Z.x,u?(R+C)/2:Z.y)),this.zoom+=this.scaleZoom(ie),this._unmodified=q,void(this._constraining=!1);if(this.latRange){const ce=Z.y,he=H.y/2;ce-he<C&&(w=C+he),ce+he>R&&(w=R-he)}if(this.lngRange){const ce=(z+F)/2,he=s.b0(Z.x,ce-this.worldSize/2,ce+this.worldSize/2),ge=H.x/2;he-ge<z&&(b=z+ge),he+ge>F&&(b=F-ge)}b===void 0&&w===void 0||(this.center=this.unproject(new s.P(b!==void 0?b:Z.x,w!==void 0?w:Z.y)).wrap()),this._unmodified=q,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,m=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b2(1,this.center.lat)*this.worldSize;let w=s.an(new Float64Array(16));s.J(w,w,[this.width/2,-this.height/2,1]),s.H(w,w,[1,-1,0]),this.labelPlaneMatrix=w,w=s.an(new Float64Array(16)),s.J(w,w,[1,-1,1]),s.H(w,w,[-1,-1,0]),s.J(w,w,[2/this.width,2/this.height,1]),this.glCoordMatrix=w;const C=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),R=Math.min(this.elevation,this.minElevationForCurrentTile),z=C-R*this._pixelPerMeter/Math.cos(this._pitch),F=R<0?z:C,H=Math.PI/2+this._pitch,q=this._fov*(.5+u.y/this.height),Z=Math.sin(q)*F/Math.sin(s.ac(Math.PI-H-q,.01,Math.PI-.01)),ie=this.getHorizon(),ce=2*Math.atan(ie/this.cameraToCenterDistance)*(.5+u.y/(2*ie)),he=Math.sin(ce)*F/Math.sin(s.ac(Math.PI-H-ce,.01,Math.PI-.01)),ge=Math.min(Z,he),le=1.01*(Math.cos(Math.PI/2-this._pitch)*ge+F),Ae=this.height/50;w=new Float64Array(16),s.b3(w,this._fov,this.width/this.height,Ae,le),w[8]=2*-u.x/this.width,w[9]=2*u.y/this.height,s.J(w,w,[1,-1,1]),s.H(w,w,[0,0,-this.cameraToCenterDistance]),s.b4(w,w,this._pitch),s.ad(w,w,this.angle),s.H(w,w,[-m,-b,0]),this.mercatorMatrix=s.J([],w,[this.worldSize,this.worldSize,this.worldSize]),s.J(w,w,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.K(new Float64Array(16),this.labelPlaneMatrix,w),s.H(w,w,[0,0,-this.elevation]),this.projMatrix=w,this.invProjMatrix=s.ar([],w),this.pixelMatrix3D=s.K(new Float64Array(16),this.labelPlaneMatrix,w);const Fe=this.width%2/2,_e=this.height%2/2,Ie=Math.cos(this.angle),He=Math.sin(this.angle),Ne=m-Math.round(m)+Ie*Fe+He*_e,qe=b-Math.round(b)+Ie*_e+He*Fe,et=new Float64Array(w);if(s.H(et,et,[Ne>.5?Ne-1:Ne,qe>.5?qe-1:qe,0]),this.alignedProjMatrix=et,w=s.ar(new Float64Array(16),this.pixelMatrix),!w)throw new Error("failed to invert matrix");this.pixelMatrixInverse=w,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new s.P(0,0)),m=[u.x*this.worldSize,u.y*this.worldSize,0,1];return s.af(m,m,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,u))}getCameraQueryGeometry(u){const m=this.getCameraPoint();if(u.length===1)return[u[0],m];{let b=m.x,w=m.y,C=m.x,R=m.y;for(const z of u)b=Math.min(b,z.x),w=Math.min(w,z.y),C=Math.max(C,z.x),R=Math.max(R,z.y);return[new s.P(b,w),new s.P(C,w),new s.P(C,R),new s.P(b,R),new s.P(b,w)]}}lngLatToCameraDepth(u,m){const b=this.locationCoordinate(u),w=[b.x*this.worldSize,b.y*this.worldSize,m,1];return s.af(w,w,this.projMatrix),w[2]/w[3]}}function Tp(T,u){let m,b=!1,w=null,C=null;const R=()=>{w=null,b&&(T.apply(C,m),w=setTimeout(R,u),b=!1)};return(...z)=>(b=!0,C=this,m=z,w||R(),w)}class Cp{constructor(u){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let b;return m.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(b=w)}),(b&&b[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(m.length>=3&&!m.some(b=>isNaN(b))){const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,m)}catch{}},this._updateHash=Tp(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const m=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,w=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,w),R=Math.round(m.lng*C)/C,z=Math.round(m.lat*C)/C,F=this._map.getBearing(),H=this._map.getPitch();let q="";if(q+=u?`/${R}/${z}/${b}`:`${b}/${z}/${R}`,(F||H)&&(q+="/"+Math.round(10*F)/10),H&&(q+=`/${Math.round(H)}`),this._hashName){const Z=this._hashName;let ie=!1;const ce=window.location.hash.slice(1).split("&").map(he=>{const ge=he.split("=")[0];return ge===Z?(ie=!0,`${ge}=${q}`):he}).filter(he=>he);return ie||ce.push(`${Z}=${q}`),`#${ce.join("&")}`}return`#${q}`}}const ic={linearity:.3,easing:s.b5(0,0,.3,1)},cy=s.e({deceleration:2500,maxSpeed:1400},ic),Xs=s.e({deceleration:20,maxSpeed:1400},ic),hy=s.e({deceleration:1e3,maxSpeed:360},ic),fy=s.e({deceleration:1e3,maxSpeed:90},ic);class dy{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=v.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)m.zoom+=C.zoomDelta||0,m.bearing+=C.bearingDelta||0,m.pitch+=C.pitchDelta||0,C.panDelta&&m.pan._add(C.panDelta),C.around&&(m.around=C.around),C.pinchAround&&(m.pinchAround=C.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(m.pan.mag()){const C=oc(m.pan.mag(),b,s.e({},cy,u||{}));w.offset=m.pan.mult(C.amount/m.pan.mag()),w.center=this._map.transform.center,ac(w,C)}if(m.zoom){const C=oc(m.zoom,b,Xs);w.zoom=this._map.transform.zoom+C.amount,ac(w,C)}if(m.bearing){const C=oc(m.bearing,b,hy);w.bearing=this._map.transform.bearing+s.ac(C.amount,-179,179),ac(w,C)}if(m.pitch){const C=oc(m.pitch,b,fy);w.pitch=this._map.transform.pitch+C.amount,ac(w,C)}if(w.zoom||w.bearing){const C=m.pinchAround===void 0?m.around:m.pinchAround;w.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),s.e(w,{noMoveStart:!0})}}function ac(T,u){(!T.duration||T.duration<u.duration)&&(T.duration=u.duration,T.easing=u.easing)}function oc(T,u,m){const{maxSpeed:b,linearity:w,deceleration:C}=m,R=s.ac(T*w/(u/1e3),-b,b),z=Math.abs(R)/(C*w);return{easing:m.easing,duration:1e3*z,amount:R*(z/2)}}class Wi extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b,w={}){const C=y.mousePos(m.getCanvas(),b),R=m.unproject(C);super(u,s.e({point:C,lngLat:R,originalEvent:b},w)),this._defaultPrevented=!1,this.target=m}}class Wl extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){const w=u==="touchend"?b.changedTouches:b.touches,C=y.touchPos(m.getCanvasContainer(),w),R=C.map(F=>m.unproject(F)),z=C.reduce((F,H,q,Z)=>F.add(H.div(Z.length)),new s.P(0,0));super(u,{points:C,point:z,lngLats:R,lngLat:m.unproject(z),originalEvent:b}),this._defaultPrevented=!1}}class Ys extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){super(u,{originalEvent:b}),this._defaultPrevented=!1}}class py{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new Ys(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new Wi(u.type,this._map,u))}mouseup(u){this._map.fire(new Wi(u.type,this._map,u))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new Wi(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Wi(u.type,this._map,u))}mouseover(u){this._map.fire(new Wi(u.type,this._map,u))}mouseout(u){this._map.fire(new Wi(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Wl(u.type,this._map,u))}touchmove(u){this._map.fire(new Wl(u.type,this._map,u))}touchend(u){this._map.fire(new Wl(u.type,this._map,u))}touchcancel(u){this._map.fire(new Wl(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ja{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Wi(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Wi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Wi(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qi{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(s.P.convert(u),this._map.terrain)}}class Ap{constructor(u,m){this._map=u,this._tr=new qi(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(y.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const b=m;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=b,this._box||(this._box=y.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const C=Math.min(w.x,b.x),R=Math.max(w.x,b.x),z=Math.min(w.y,b.y),F=Math.max(w.y,b.y);y.setTransform(this._box,`translate(${C}px,${z}px)`),this._box.style.width=R-C+"px",this._box.style.height=F-z+"px"}mouseupWindow(u,m){if(!this._active||u.button!==0)return;const b=this._startPos,w=m;if(this.reset(),y.suppressClick(),b.x!==w.x||b.y!==w.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(b,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new s.k(u,{originalEvent:m}))}}function Ia(T,u){if(T.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${T.length}, points ${u.length}`);const m={};for(let b=0;b<T.length;b++)m[T[b].identifier]=u[b];return m}class sc{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),b.length===this.numTouches&&(this.centroid=function(w){const C=new s.P(0,0);for(const R of w)C._add(R);return C.div(w.length)}(m),this.touches=Ia(b,m)))}touchmove(u,m,b){if(this.aborted||!this.centroid)return;const w=Ia(b,m);for(const C in this.touches){const R=w[C];(!R||R.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(u,m,b){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class Mp{constructor(u){this.singleTap=new sc(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,m,b){this.singleTap.touchstart(u,m,b)}touchmove(u,m,b){this.singleTap.touchmove(u,m,b)}touchend(u,m,b){const w=this.singleTap.touchend(u,m,b);if(w){const C=u.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(w)<30;if(C&&R||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class ox{constructor(u){this._tr=new qi(u),this._zoomIn=new Mp({numTouches:1,numTaps:2}),this._zoomOut=new Mp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,b){this._zoomIn.touchstart(u,m,b),this._zoomOut.touchstart(u,m,b)}touchmove(u,m,b){this._zoomIn.touchmove(u,m,b),this._zoomOut.touchmove(u,m,b)}touchend(u,m,b){const w=this._zoomIn.touchend(u,m,b),C=this._zoomOut.touchend(u,m,b),R=this._tr;return w?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:R.zoom+1,around:R.unproject(w)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:R.zoom-1,around:R.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lc{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const m=this._moveFunction(...u);if(m.bearingDelta||m.pitchDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(u,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=m.length?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,m){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const w=m.length?m[0]:m;return!this._moved&&w.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(b,w))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&y.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const my={0:1,2:2};class Ks{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const m=y.mouseButton(u);this._eventButton=m}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!function(m,b){const w=my[b];return m.buttons===void 0||(m.buttons&w)!==w}(u,this._eventButton)}isValidEndEvent(u){return y.mouseButton(u)===this._eventButton}}class Fo{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const Et=T=>{T.mousedown=T.dragStart,T.mousemoveWindow=T.dragMove,T.mouseup=T.dragEnd,T.contextmenu=function(u){u.preventDefault()}},Ep=({enable:T,clickTolerance:u,bearingDegreesPerPixelMoved:m=.8})=>{const b=new Ks({checkCorrectEvent:w=>y.mouseButton(w)===0&&w.ctrlKey||y.mouseButton(w)===2});return new lc({clickTolerance:u,move:(w,C)=>({bearingDelta:(C.x-w.x)*m}),moveStateManager:b,enable:T,assignEvents:Et})},ql=({enable:T,clickTolerance:u,pitchDegreesPerPixelMoved:m=-.5})=>{const b=new Ks({checkCorrectEvent:w=>y.mouseButton(w)===0&&w.ctrlKey||y.mouseButton(w)===2});return new lc({clickTolerance:u,move:(w,C)=>({pitchDelta:(C.y-w.y)*m}),moveStateManager:b,enable:T,assignEvents:Et})};class uc{constructor(u,m){this._clickTolerance=u.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(u,m,b){return this._calculateTransform(u,m,b)}touchmove(u,m,b){if(this._active&&!(b.length<this.minTouchs()))return u.preventDefault(),this._calculateTransform(u,m,b)}touchend(u,m,b){this._calculateTransform(u,m,b),this._active&&b.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,b){b.length>0&&(this._active=!0);const w=Ia(b,m),C=new s.P(0,0),R=new s.P(0,0);let z=0;for(const H in w){const q=w[H],Z=this._touches[H];Z&&(C._add(q),R._add(q.sub(Z)),z++,w[H]=q)}if(this._touches=w,z<this.minTouchs()||!R.mag())return;const F=R.div(z);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(z),panDelta:F}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ff{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,b){if(!this._firstTwoTouches)return;u.preventDefault();const[w,C]=this._firstTwoTouches,R=bt(b,m,w),z=bt(b,m,C);if(!R||!z)return;const F=this._aroundCenter?null:R.add(z).div(2);return this._move([R,z],F,u)}touchend(u,m,b){if(!this._firstTwoTouches)return;const[w,C]=this._firstTwoTouches,R=bt(b,m,w),z=bt(b,m,C);R&&z||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function bt(T,u,m){for(let b=0;b<T.length;b++)if(T[b].identifier===m)return u[b]}function df(T,u){return Math.log(T/u)/Math.LN2}class vy extends ff{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const b=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(df(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:df(this._distance,b),pinchAround:m}}}function gy(T,u){return 180*T.angleWith(u)/Math.PI}class pf extends ff{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m,b){const w=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:gy(this._vector,w),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,b=gy(u,this._startVector);return Math.abs(b)<m}}function mf(T){return Math.abs(T.y)>Math.abs(T.x)}class Pp extends ff{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,m,b){super.touchstart(u,m,b),this._currentTouchCount=b.length}_start(u){this._lastPoints=u,mf(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,b){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=u[0].sub(this._lastPoints[0]),C=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,C,b.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(u,m,b){if(this._valid!==void 0)return this._valid;const w=u.mag()>=2,C=m.mag()>=2;if(!w&&!C)return;if(!w||!C)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const R=u.y>0==m.y>0;return mf(u)&&mf(m)&&R}}const sx={panStep:100,bearingStep:15,pitchStep:10};class yy{constructor(u){this._tr=new qi(u);const m=sx;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,b=0,w=0,C=0,R=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?b=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?b=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?w=1:(u.preventDefault(),R=-1);break;case 40:u.shiftKey?w=-1:(u.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(b=0,w=0),{cameraAnimation:z=>{const F=this._tr;z.easeTo({duration:300,easeId:"keyboardHandler",easing:Js,zoom:m?Math.round(F.zoom)+m*(u.shiftKey?2:1):F.zoom,bearing:F.bearing+b*this._bearingStep,pitch:F.pitch+w*this._pitchStep,offset:[-C*this._panStep,-R*this._panStep],center:F.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Js(T){return T*(2-T)}const ln=4.000244140625;class cc{constructor(u,m){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=u,this._tr=new qi(u),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!u[this._map.cooperativeGestures._bypassKey])return;let m=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const b=v.now(),w=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%ln==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(w*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=y.mousePos(this._map.getCanvas(),u),b=this._tr;this._around=m.y>b.transform.height/2-b.transform.getHorizon()?s.M.convert(this._aroundCenter?b.center:b.unproject(m)):s.M.convert(b.center),this._aroundPoint=b.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>ln?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&F!==0&&(F=1/F);const H=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(H*F))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,b=this._startZoom,w=this._easing;let C,R=!1;if(this._type==="wheel"&&b&&w){const z=Math.min((v.now()-this._lastWheelEventTime)/200,1),F=w(z);C=s.z.number(b,m,F),z<1?this._frameId||(this._frameId=!0):R=!0}else C=m,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!R,zoomDelta:C-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=s.b6;if(this._prevEase){const b=this._prevEase,w=(v.now()-b.start)/b.duration,C=b.easing(w+.01)-b.easing(w),R=.27/Math.sqrt(C*C+1e-4)*.01,z=Math.sqrt(.0729-R*R);m=s.b5(R,z,.25,1)}return this._prevEase={start:v.now(),duration:u,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class vf{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _y{constructor(u){this._tr=new qi(u),this.reset()}reset(){this._active=!1}dblclick(u,m){return u.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class by{constructor(){this._tap=new Mp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,m,b){if(!this._swipePoint)if(this._tapTime){const w=m[0],C=u.timeStamp-this._tapTime<500,R=this._tapPoint.dist(w)<30;C&&R?b.length>0&&(this._swipePoint=w,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(u,m,b)}touchmove(u,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const w=m[0],C=w.y-this._swipePoint.y;return this._swipePoint=w,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,m,b)}touchend(u,m,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const w=this._tap.touchend(u,m,b);w&&(this._tapTime=u.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ip{constructor(u,m,b){this._el=u,this._mousePan=m,this._touchPan=b}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xy{constructor(u,m,b){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=m,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ga{constructor(u,m,b,w){this._el=u,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class hc{constructor(u,m){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=m,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=y.create("div","maplibregl-cooperative-gesture-screen",u);let m=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(m=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const b=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=m,this._container.appendChild(w);const C=document.createElement("div");C.className="maplibregl-mobile-message",C.textContent=b,this._container.appendChild(C),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(y.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(u){this._onCooperativeGesture(u.touches.length===1)}wheel(u){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!u[this._bypassKey])}_onCooperativeGesture(u){this._enabled&&u&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ot=T=>T.zoom||T.drag||T.pitch||T.rotate;class Yt extends s.k{}function Zl(T){return T.panDelta&&T.panDelta.mag()||T.zoomDelta||T.bearingDelta||T.pitchDelta}class Dp{constructor(u,m){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,C)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const R=w.type==="renderFrame"?void 0:w,z={needsRenderFrame:!1},F={},H={},q=w.touches,Z=q?this._getMapTouches(q):void 0,ie=Z?y.touchPos(this._map.getCanvas(),Z):y.mousePos(this._map.getCanvas(),w);for(const{handlerName:ge,handler:le,allowed:Ae}of this._handlers){if(!le.isEnabled())continue;let Fe;this._blockedByActive(H,Ae,ge)?le.reset():le[C||w.type]&&(Fe=le[C||w.type](w,ie,Z),this.mergeHandlerResult(z,F,Fe,ge,R),Fe&&Fe.needsRenderFrame&&this._triggerRenderFrame()),(Fe||le.isActive())&&(H[ge]=le)}const ce={};for(const ge in this._previousActiveHandlers)H[ge]||(ce[ge]=R);this._previousActiveHandlers=H,(Object.keys(ce).length||Zl(z))&&(this._changes.push([z,F,ce]),this._triggerRenderFrame()),(Object.keys(H).length||Zl(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=z;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new dy(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,C,R]of this._listeners)y.addEventListener(w,C,w===document?this.handleWindowEvent:this.handleEvent,R)}destroy(){for(const[u,m,b]of this._listeners)y.removeEventListener(u,m,u===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(u){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new py(m,u));const w=m.boxZoom=new Ap(m,u);this._add("boxZoom",w),u.interactive&&u.boxZoom&&w.enable();const C=m.cooperativeGestures=new hc(m,u.cooperativeGestures);this._add("cooperativeGestures",C),u.cooperativeGestures&&C.enable();const R=new ox(m),z=new _y(m);m.doubleClickZoom=new vf(z,R),this._add("tapZoom",R),this._add("clickZoom",z),u.interactive&&u.doubleClickZoom&&m.doubleClickZoom.enable();const F=new by;this._add("tapDragZoom",F);const H=m.touchPitch=new Pp(m);this._add("touchPitch",H),u.interactive&&u.touchPitch&&m.touchPitch.enable(u.touchPitch);const q=Ep(u),Z=ql(u);m.dragRotate=new xy(u,q,Z),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]),u.interactive&&u.dragRotate&&m.dragRotate.enable();const ie=(({enable:Fe,clickTolerance:_e})=>{const Ie=new Ks({checkCorrectEvent:He=>y.mouseButton(He)===0&&!He.ctrlKey});return new lc({clickTolerance:_e,move:(He,Ne)=>({around:Ne,panDelta:Ne.sub(He)}),activateOnStart:!0,moveStateManager:Ie,enable:Fe,assignEvents:Et})})(u),ce=new uc(u,m);m.dragPan=new Ip(b,ie,ce),this._add("mousePan",ie),this._add("touchPan",ce,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&m.dragPan.enable(u.dragPan);const he=new pf,ge=new vy;m.touchZoomRotate=new Ga(b,ge,he,F),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&m.touchZoomRotate.enable(u.touchZoomRotate);const le=m.scrollZoom=new cc(m,()=>this._triggerRenderFrame());this._add("scrollZoom",le,["mousePan"]),u.interactive&&u.scrollZoom&&m.scrollZoom.enable(u.scrollZoom);const Ae=m.keyboard=new yy(m);this._add("keyboard",Ae),u.interactive&&u.keyboard&&m.keyboard.enable(),this._add("blockableMapEvent",new ja(m))}_add(u,m,b){this._handlers.push({handlerName:u,handler:m,allowed:b}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ot(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,m,b){for(const w in u)if(w!==b&&(!m||m.indexOf(w)<0))return!0;return!1}_getMapTouches(u){const m=[];for(const b of u)this._el.contains(b.target)&&m.push(b);return m}mergeHandlerResult(u,m,b,w,C){if(!b)return;s.e(u,b);const R={handlerName:w,originalEvent:b.originalEvent||C};b.zoomDelta!==void 0&&(m.zoom=R),b.panDelta!==void 0&&(m.drag=R),b.pitchDelta!==void 0&&(m.pitch=R),b.bearingDelta!==void 0&&(m.rotate=R)}_applyChanges(){const u={},m={},b={};for(const[w,C,R]of this._changes)w.panDelta&&(u.panDelta=(u.panDelta||new s.P(0,0))._add(w.panDelta)),w.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(u.around=w.around),w.pinchAround!==void 0&&(u.pinchAround=w.pinchAround),w.noInertia&&(u.noInertia=w.noInertia),s.e(m,C),s.e(b,R);this._updateMapTransform(u,m,b),this._changes=[]}_updateMapTransform(u,m,b){const w=this._map,C=w._getTransformForUpdate(),R=w.terrain;if(!(Zl(u)||R&&this._terrainMovement))return this._fireEvents(m,b,!0);let{panDelta:z,zoomDelta:F,bearingDelta:H,pitchDelta:q,around:Z,pinchAround:ie}=u;ie!==void 0&&(Z=ie),w._stop(!0),Z=Z||w.transform.centerPoint;const ce=C.pointLocation(z?Z.sub(z):Z);H&&(C.bearing+=H),q&&(C.pitch+=q),F&&(C.zoom+=F),R?this._terrainMovement||!m.drag&&!m.zoom?m.drag&&this._terrainMovement?C.center=C.pointLocation(C.centerPoint.sub(z)):C.setLocationAtPoint(ce,Z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,C.setLocationAtPoint(ce,Z),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,C.recalculateZoom(w.terrain)})):C.setLocationAtPoint(ce,Z),w._applyUpdatedTransform(C),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,b,!0)}_fireEvents(u,m,b){const w=Ot(this._eventsInProgress),C=Ot(u),R={};for(const q in u){const{originalEvent:Z}=u[q];this._eventsInProgress[q]||(R[`${q}start`]=Z),this._eventsInProgress[q]=u[q]}!w&&C&&this._fireEvent("movestart",C.originalEvent);for(const q in R)this._fireEvent(q,R[q]);C&&this._fireEvent("move",C.originalEvent);for(const q in u){const{originalEvent:Z}=u[q];this._fireEvent(q,Z)}const z={};let F;for(const q in this._eventsInProgress){const{handlerName:Z,originalEvent:ie}=this._eventsInProgress[q];this._handlersById[Z].isActive()||(delete this._eventsInProgress[q],F=m[Z]||ie,z[`${q}end`]=F)}for(const q in z)this._fireEvent(q,z[q]);const H=Ot(this._eventsInProgress);if(b&&(w||C)&&!H){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=ie=>ie!==0&&-this._bearingSnap<ie&&ie<this._bearingSnap;!q||!q.essential&&v.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:F})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(q.bearing||this._map.getBearing())&&(q.bearing=0),q.freezeElevation=!0,this._map.easeTo(q,{originalEvent:F})),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new s.k(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Yt("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Lp extends s.E{constructor(u,m){super(),this._renderFrameCallback=()=>{const b=Math.min((v.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.M(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}panBy(u,m,b){return u=s.P.convert(u).mult(-1),this.panTo(this.transform.center,s.e({offset:u},m),b)}panTo(u,m,b){return this.easeTo(s.e({center:u},m),b)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,b){return this.easeTo(s.e({zoom:u},m),b)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,b){return this.easeTo(s.e({bearing:u},m),b)}resetNorth(u,m){return this.rotateTo(0,s.e({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}cameraForBounds(u,m){u=Be.convert(u);const b=m&&m.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),b,m)}_cameraForBoxAndBearing(u,m,b,w){const C={top:0,bottom:0,right:0,left:0};if(typeof(w=s.e({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const Pt=w.padding;w.padding={top:Pt,bottom:Pt,right:Pt,left:Pt}}w.padding=s.e(C,w.padding);const R=this.transform,z=R.padding,F=new Be(u,m),H=R.project(F.getNorthWest()),q=R.project(F.getNorthEast()),Z=R.project(F.getSouthEast()),ie=R.project(F.getSouthWest()),ce=s.b7(-b),he=H.rotate(ce),ge=q.rotate(ce),le=Z.rotate(ce),Ae=ie.rotate(ce),Fe=new s.P(Math.max(he.x,ge.x,Ae.x,le.x),Math.max(he.y,ge.y,Ae.y,le.y)),_e=new s.P(Math.min(he.x,ge.x,Ae.x,le.x),Math.min(he.y,ge.y,Ae.y,le.y)),Ie=Fe.sub(_e),He=(R.width-(z.left+z.right+w.padding.left+w.padding.right))/Ie.x,Ne=(R.height-(z.top+z.bottom+w.padding.top+w.padding.bottom))/Ie.y;if(Ne<0||He<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const qe=Math.min(R.scaleZoom(R.scale*Math.min(He,Ne)),w.maxZoom),et=s.P.convert(w.offset),Qe=new s.P((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(s.b7(b)),ot=et.add(Qe).mult(R.scale/R.zoomScale(qe));return{center:R.unproject(H.add(Z).div(2).sub(ot)),zoom:qe,bearing:b}}fitBounds(u,m,b){return this._fitInternal(this.cameraForBounds(u,m),m,b)}fitScreenCoordinates(u,m,b,w,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(u)),this.transform.pointLocation(s.P.convert(m)),b,w),w,C)}_fitInternal(u,m,b){return u?(delete(m=s.e(u,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(u,m){this.stop();const b=this._getTransformForUpdate();let w=!1,C=!1,R=!1;return"zoom"in u&&b.zoom!==+u.zoom&&(w=!0,b.zoom=+u.zoom),u.center!==void 0&&(b.center=s.M.convert(u.center)),"bearing"in u&&b.bearing!==+u.bearing&&(C=!0,b.bearing=+u.bearing),"pitch"in u&&b.pitch!==+u.pitch&&(R=!0,b.pitch=+u.pitch),u.padding==null||b.isPaddingEqual(u.padding)||(b.padding=u.padding),this._applyUpdatedTransform(b),this.fire(new s.k("movestart",m)).fire(new s.k("move",m)),w&&this.fire(new s.k("zoomstart",m)).fire(new s.k("zoom",m)).fire(new s.k("zoomend",m)),C&&this.fire(new s.k("rotatestart",m)).fire(new s.k("rotate",m)).fire(new s.k("rotateend",m)),R&&this.fire(new s.k("pitchstart",m)).fire(new s.k("pitch",m)).fire(new s.k("pitchend",m)),this.fire(new s.k("moveend",m))}calculateCameraOptionsFromTo(u,m,b,w=0){const C=s.Y.fromLngLat(u,m),R=s.Y.fromLngLat(b,w),z=R.x-C.x,F=R.y-C.y,H=R.z-C.z,q=Math.hypot(z,F,H);if(q===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(z,F),ie=this.transform.scaleZoom(this.transform.cameraToCenterDistance/q/this.transform.tileSize),ce=180*Math.atan2(z,-F)/Math.PI;let he=180*Math.acos(Z/q)/Math.PI;return he=H<0?90-he:90+he,{center:R.toLngLat(),zoom:ie,pitch:he,bearing:ce}}easeTo(u,m){this._stop(!1,u.easeId),((u=s.e({offset:[0,0],duration:500,easing:s.b6},u)).animate===!1||!u.essential&&v.prefersReducedMotion)&&(u.duration=0);const b=this._getTransformForUpdate(),w=this.getZoom(),C=this.getBearing(),R=this.getPitch(),z=this.getPadding(),F="zoom"in u?+u.zoom:w,H="bearing"in u?this._normalizeBearing(u.bearing,C):C,q="pitch"in u?+u.pitch:R,Z="padding"in u?u.padding:b.padding,ie=s.P.convert(u.offset);let ce=b.centerPoint.add(ie);const he=b.pointLocation(ce),ge=s.M.convert(u.center||he);this._normalizeCenter(ge);const le=b.project(he),Ae=b.project(ge).sub(le),Fe=b.zoomScale(F-w);let _e,Ie;u.around&&(_e=s.M.convert(u.around),Ie=b.locationPoint(_e));const He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||F!==w,this._rotating=this._rotating||C!==H,this._pitching=this._pitching||q!==R,this._padding=!b.isPaddingEqual(Z),this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,He),this.terrain&&this._prepareElevation(ge),this._ease(Ne=>{if(this._zooming&&(b.zoom=s.z.number(w,F,Ne)),this._rotating&&(b.bearing=s.z.number(C,H,Ne)),this._pitching&&(b.pitch=s.z.number(R,q,Ne)),this._padding&&(b.interpolatePadding(z,Z,Ne),ce=b.centerPoint.add(ie)),this.terrain&&!u.freezeElevation&&this._updateElevation(Ne),_e)b.setLocationAtPoint(_e,Ie);else{const qe=b.zoomScale(b.zoom-w),et=F>w?Math.min(2,Fe):Math.max(.5,Fe),Qe=Math.pow(et,1-Ne),ot=b.unproject(le.add(Ae.mult(Ne*Qe)).mult(qe));b.setLocationAtPoint(b.renderWorldCopies?ot.wrap():ot,ce)}this._applyUpdatedTransform(b),this._fireMoveEvents(m)},Ne=>{this.terrain&&this._finalizeElevation(),this._afterEase(m,Ne)},u),this}_prepareEase(u,m,b={}){this._moving=!0,m||b.moving||this.fire(new s.k("movestart",u)),this._zooming&&!b.zooming&&this.fire(new s.k("zoomstart",u)),this._rotating&&!b.rotating&&this.fire(new s.k("rotatestart",u)),this._pitching&&!b.pitching&&this.fire(new s.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&m!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(b-(m-(b*u+this._elevationStart))/(1-u)),this._elevationTarget=m}this.transform.elevation=s.z.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const m=u.clone(),{center:b,zoom:w,pitch:C,bearing:R,elevation:z}=this.transformCameraUpdate(m);b&&(m.center=b),w!==void 0&&(m.zoom=w),C!==void 0&&(m.pitch=C),R!==void 0&&(m.bearing=R),z!==void 0&&(m.elevation=z),this.transform.apply(m)}_fireMoveEvents(u){this.fire(new s.k("move",u)),this._zooming&&this.fire(new s.k("zoom",u)),this._rotating&&this.fire(new s.k("rotate",u)),this._pitching&&this.fire(new s.k("pitch",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const b=this._zooming,w=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new s.k("zoomend",u)),w&&this.fire(new s.k("rotateend",u)),C&&this.fire(new s.k("pitchend",u)),this.fire(new s.k("moveend",u))}flyTo(u,m){if(!u.essential&&v.prefersReducedMotion){const kt=s.L(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(kt,m)}this.stop(),u=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b6},u);const b=this._getTransformForUpdate(),w=this.getZoom(),C=this.getBearing(),R=this.getPitch(),z=this.getPadding(),F="zoom"in u?s.ac(+u.zoom,b.minZoom,b.maxZoom):w,H="bearing"in u?this._normalizeBearing(u.bearing,C):C,q="pitch"in u?+u.pitch:R,Z="padding"in u?u.padding:b.padding,ie=b.zoomScale(F-w),ce=s.P.convert(u.offset);let he=b.centerPoint.add(ce);const ge=b.pointLocation(he),le=s.M.convert(u.center||ge);this._normalizeCenter(le);const Ae=b.project(ge),Fe=b.project(le).sub(Ae);let _e=u.curve;const Ie=Math.max(b.width,b.height),He=Ie/ie,Ne=Fe.mag();if("minZoom"in u){const kt=s.ac(Math.min(u.minZoom,w,F),b.minZoom,b.maxZoom),un=Ie/b.zoomScale(kt-w);_e=Math.sqrt(un/Ne*2)}const qe=_e*_e;function et(kt){const un=(He*He-Ie*Ie+(kt?-1:1)*qe*qe*Ne*Ne)/(2*(kt?He:Ie)*qe*Ne);return Math.log(Math.sqrt(un*un+1)-un)}function Qe(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function ot(kt){return(Math.exp(kt)+Math.exp(-kt))/2}const Pt=et(!1);let Zt=function(kt){return ot(Pt)/ot(Pt+_e*kt)},mt=function(kt){return Ie*((ot(Pt)*(Qe(un=Pt+_e*kt)/ot(un))-Qe(Pt))/qe)/Ne;var un},Gt=(et(!0)-Pt)/_e;if(Math.abs(Ne)<1e-6||!isFinite(Gt)){if(Math.abs(Ie-He)<1e-6)return this.easeTo(u,m);const kt=He<Ie?-1:1;Gt=Math.abs(Math.log(He/Ie))/_e,mt=function(){return 0},Zt=function(un){return Math.exp(kt*_e*un)}}return u.duration="duration"in u?+u.duration:1e3*Gt/("screenSpeed"in u?+u.screenSpeed/_e:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=C!==H,this._pitching=q!==R,this._padding=!b.isPaddingEqual(Z),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(le),this._ease(kt=>{const un=kt*Gt,yr=1/Zt(un);b.zoom=kt===1?F:w+b.scaleZoom(yr),this._rotating&&(b.bearing=s.z.number(C,H,kt)),this._pitching&&(b.pitch=s.z.number(R,q,kt)),this._padding&&(b.interpolatePadding(z,Z,kt),he=b.centerPoint.add(ce)),this.terrain&&!u.freezeElevation&&this._updateElevation(kt);const hr=kt===1?le:b.unproject(Ae.add(Fe.mult(mt(un))).mult(yr));b.setLocationAtPoint(b.renderWorldCopies?hr.wrap():hr,he),this._applyUpdatedTransform(b),this._fireMoveEvents(m)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(m)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,m)}if(!u){const b=this.handlers;b&&b.stop(!1)}return this}_ease(u,m,b){b.animate===!1||b.duration===0?(u(1),m()):(this._easeStart=v.now(),this._easeOptions=b,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,m){u=s.b0(u,-180,180);const b=Math.abs(u-m);return Math.abs(u-360-m)<b&&(u-=360),Math.abs(u+360-m)<b&&(u+=360),u}_normalizeCenter(u){const m=this.transform;if(!m.renderWorldCopies||m.lngRange)return;const b=u.lng-m.center.lng;u.lng+=b>180?-360:b<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(s.M.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}const Ii={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class kp{constructor(u=Ii){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const b=this._map._getUIString(`AttributionControl.${m}`);u.title=b,u.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const m=this._map.style.sourceCaches;for(const w in m){const C=m[w];if(C.used||C.usedForTerrain){const R=C.getSource();R.attribution&&u.indexOf(R.attribution)<0&&u.push(R.attribution)}}u=u.filter(w=>String(w).trim()),u.sort((w,C)=>w.length-C.length),u=u.filter((w,C)=>{for(let R=C+1;R<u.length;R++)if(u[R].indexOf(w)>=0)return!1;return!0});const b=u.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,u.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Wa{constructor(u={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const b=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl");const m=y.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class lx{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const w of b)if(w.id===u)return void(w.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var fc=s.X([{name:"a_pos3d",type:"Int16",components:3}]);class Mn extends s.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,m){this.sourceCache.update(u,m),this._renderableTilesKeys=[];const b={};for(const w of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m}))b[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.posMatrix=new Float64Array(16),s.aN(w.posMatrix,0,s.W,0,s.W,0,1),this._tiles[w.key]=new Zr(w,this.tileSize));for(const w in this._tiles)b[w]||delete this._tiles[w]}freeRtt(u){for(const m in this._tiles){const b=this._tiles[m];(!u||b.tileID.equals(u)||b.tileID.isChildOf(u)||u.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const m={};for(const b of this._renderableTilesKeys){const w=this._tiles[b].tileID;if(w.canonical.equals(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16),s.aN(C.posMatrix,0,s.W,0,s.W,0,1),m[b]=C}else if(w.canonical.isChildOf(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const R=w.canonical.z-u.canonical.z,z=w.canonical.x-(w.canonical.x>>R<<R),F=w.canonical.y-(w.canonical.y>>R<<R),H=s.W>>R;s.aN(C.posMatrix,0,H,0,H,0,1),s.H(C.posMatrix,C.posMatrix,[-z*H,-F*H,0]),m[b]=C}else if(u.canonical.isChildOf(w.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const R=u.canonical.z-w.canonical.z,z=u.canonical.x-(u.canonical.x>>R<<R),F=u.canonical.y-(u.canonical.y>>R<<R),H=s.W>>R;s.aN(C.posMatrix,0,s.W,0,s.W,0,1),s.H(C.posMatrix,C.posMatrix,[z*H,F*H,0]),s.J(C.posMatrix,C.posMatrix,[1/2**R,1/2**R,0]),m[b]=C}}return m}getSourceTile(u,m){const b=this.sourceCache._source;let w=u.overscaledZ-this.deltaZoom;if(w>b.maxzoom&&(w=b.maxzoom),w<b.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(w).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!C||!C.dem)&&m)for(;w>=b.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(u.scaledTo(w--).key);return C}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(m=>m.timeAdded>=u)}}class Bn{constructor(u,m,b){this.painter=u,this.sourceCache=new Mn(m),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,m,b,w=s.W){var C;if(!(m>=0&&m<w&&b>=0&&b<w))return 0;const R=this.getTerrainData(u),z=(C=R.tile)===null||C===void 0?void 0:C.dem;if(!z)return 0;const F=function(he,ge,le){var Ae=ge[0],Fe=ge[1];return he[0]=le[0]*Ae+le[4]*Fe+le[12],he[1]=le[1]*Ae+le[5]*Fe+le[13],he}([],[m/w*s.W,b/w*s.W],R.u_terrain_matrix),H=[F[0]*z.dim,F[1]*z.dim],q=Math.floor(H[0]),Z=Math.floor(H[1]),ie=H[0]-q,ce=H[1]-Z;return z.get(q,Z)*(1-ie)*(1-ce)+z.get(q+1,Z)*ie*(1-ce)+z.get(q,Z+1)*(1-ie)*ce+z.get(q+1,Z+1)*ie*ce}getElevationForLngLatZoom(u,m){const{tileID:b,mercatorX:w,mercatorY:C}=this._getOverscaledTileIDFromLngLatZoom(u,m);return this.getElevation(b,w%s.W,C%s.W,s.W)}getElevation(u,m,b,w=s.W){return this.getDEMElevation(u,m,b,w)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const w=this.painter.context,C=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new X(w,C,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new X(w,new s.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}const m=this.sourceCache.getSourceTile(u,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const w=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new X(w,m.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),m.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const b=m&&m+m.tileID.key+u.key;if(b&&!this._demMatrixCache[b]){const w=this.sourceCache.sourceCache._source.maxzoom;let C=u.canonical.z-m.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=w?C=u.canonical.z-w:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const R=u.canonical.x-(u.canonical.x>>C<<C),z=u.canonical.y-(u.canonical.y>>C<<C),F=s.b8(new Float64Array(16),[1/(s.W<<C),1/(s.W<<C),0]);s.H(F,F,[R*s.W,z*s.W,0]),this._demMatrixCache[u.key]={matrix:F,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(u){const m=this.painter,b=m.width/devicePixelRatio,w=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new X(m.context,{width:b,height:w,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new X(m.context,{width:b,height:w,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(b,w,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,b,w))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,R=0;C<this._coordsTextureSize;C++)for(let z=0;z<this._coordsTextureSize;z++,R+=4)m[R+0]=255&z,m[R+1]=255&C,m[R+2]=z>>8<<4|C>>8,m[R+3]=0;const b=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),w=new X(u,b,u.gl.RGBA,{premultiply:!1});return w.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(u){const m=new Uint8Array(4),b=this.painter.context,w=b.gl;b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null);const C=m[0]+(m[2]>>4<<8),R=m[1]+((15&m[2])<<8),z=this.coordsIndex[255-m[3]],F=z&&this.sourceCache.getTileByID(z);if(!F)return null;const H=this._coordsTextureSize,q=(1<<F.tileID.canonical.z)*H;return new s.Y((F.tileID.canonical.x*H+C)/q+F.tileID.wrap,(F.tileID.canonical.y*H+R)/q,this.getElevation(F.tileID,C,R,H))}depthAtPoint(u){const m=new Uint8Array(4),b=this.painter.context,w=b.gl;return b.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null),(m[0]/16777216+m[1]/65536+m[2]/256+m[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,m=new s.b9,b=new s.aX,w=this.meshSize,C=s.W/w,R=w*w;for(let Z=0;Z<=w;Z++)for(let ie=0;ie<=w;ie++)m.emplaceBack(ie*C,Z*C,0);for(let Z=0;Z<R;Z+=w+1)for(let ie=0;ie<w;ie++)b.emplaceBack(ie+Z,w+ie+Z+1,w+ie+Z+2),b.emplaceBack(ie+Z,w+ie+Z+2,ie+Z+1);const z=m.length,F=z+2*(w+1);for(const Z of[0,1])for(let ie=0;ie<=w;ie++)for(const ce of[0,1])m.emplaceBack(ie*C,Z*s.W,ce);for(let Z=0;Z<2*w;Z+=2)b.emplaceBack(F+Z,F+Z+1,F+Z+3),b.emplaceBack(F+Z,F+Z+3,F+Z+2),b.emplaceBack(z+Z,z+Z+3,z+Z+1),b.emplaceBack(z+Z,z+Z+2,z+Z+3);const H=m.length,q=H+2*(w+1);for(const Z of[0,1])for(let ie=0;ie<=w;ie++)for(const ce of[0,1])m.emplaceBack(Z*s.W,ie*C,ce);for(let Z=0;Z<2*w;Z+=2)b.emplaceBack(H+Z,H+Z+1,H+Z+3),b.emplaceBack(H+Z,H+Z+3,H+Z+2),b.emplaceBack(q+Z,q+Z+3,q+Z+1),b.emplaceBack(q+Z,q+Z+2,q+Z+3);return this._mesh={indexBuffer:u.createIndexBuffer(b),vertexBuffer:u.createVertexBuffer(m,fc.members),segments:s.$.simpleSegment(0,0,m.length,b.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*s.ba/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,m){var b;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(u,m);return(b=this.getMinMaxElevation(w).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(u){const m=this.getTerrainData(u).tile,b={minElevation:null,maxElevation:null};return m&&m.dem&&(b.minElevation=m.dem.min*this.exaggeration,b.maxElevation=m.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(u,m){const b=s.Y.fromLngLat(u.wrap()),w=(1<<m)*s.W,C=b.x*w,R=b.y*w,z=Math.floor(C/s.W),F=Math.floor(R/s.W);return{tileID:new s.Q(m,0,m,z,F),mercatorX:C,mercatorY:R}}}class wy{constructor(u,m,b){this._context=u,this._size=m,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new X(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(b.texture),{id:u,fbo:m,texture:b,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(m=>u.id!==m),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const uo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class gf{constructor(u,m){this.painter=u,this.terrain=m,this.pool=new wy(u.context,30,m.sourceCache.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(b=>!u._layers[b].isHidden(m)),this._coordsDescendingInv={};for(const b in u.sourceCaches){this._coordsDescendingInv[b]={};const w=u.sourceCaches[b].getVisibleCoordinates();for(const C of w){const R=this.terrain.sourceCache.getTerrainCoords(C);for(const z in R)this._coordsDescendingInv[b][z]||(this._coordsDescendingInv[b][z]=[]),this._coordsDescendingInv[b][z].push(R[z])}}this._coordsDescendingInvStr={};for(const b of u._order){const w=u._layers[b],C=w.source;if(uo[w.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const R in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][R]=this._coordsDescendingInv[C][R].map(z=>z.key).sort().join()}}for(const b of this._renderableTiles)for(const w in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[w][b.tileID.key];C&&C!==b.rttCoords[w]&&(b.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const m=u.type,b=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(uo[m]&&(this._prevType&&uo[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(u.id),!w))return!0;if(uo[this._prevType]||uo[m]&&w){this._prevType=m;const C=this._stacks.length-1,R=this._stacks[C]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(cf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[C]){const H=this.pool.getObjectForId(z.rtt[C].id);if(H.stamp===z.rtt[C].stamp){this.pool.useObject(H);continue}}const F=this.pool.getOrCreateFreeObject();this.pool.useObject(F),this.pool.stampObject(F),z.rtt[C]={id:F.id,stamp:F.stamp},b.context.bindFramebuffer.set(F.fbo.framebuffer),b.context.clear({color:s.aO.transparent,stencil:0}),b.currentStencilSource=void 0;for(let H=0;H<R.length;H++){const q=b.style._layers[R[H]],Z=q.source?this._coordsDescendingInv[q.source][z.tileID.key]:[z.tileID];b.context.viewport.set([0,0,F.fbo.width,F.fbo.height]),b._renderTileClippingMasks(q,Z),b.renderLayer(b,b.style.sourceCaches[q.source],q,Z),q.source&&(z.rttCoords[q.source]=this._coordsDescendingInvStr[q.source][z.tileID.key])}}return cf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),uo[m]}return!1}}const Rp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Op=c,zp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Ii,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Xl=T=>{T.touchstart=T.dragStart,T.touchmoveWindow=T.dragMove,T.touchend=T.dragEnd},Bp={showCompass:!0,showZoom:!0,visualizePitch:!1};class Fp{constructor(u,m,b=!1){this.mousedown=R=>{this.startMouse(s.e({},R,{ctrlKey:!0,preventDefault:()=>R.preventDefault()}),y.mousePos(this.element,R)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=R=>{this.moveMouse(R,y.mousePos(this.element,R))},this.mouseup=R=>{this.mouseRotate.dragEnd(R),this.mousePitch&&this.mousePitch.dragEnd(R),this.offTemp()},this.touchstart=R=>{R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,R.targetTouches)[0],this.startTouch(R,this._startPos),y.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.addEventListener(window,"touchend",this.touchend))},this.touchmove=R=>{R.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,R.targetTouches)[0],this.moveTouch(R,this._lastPos))},this.touchend=R=>{R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const w=u.dragRotate._mouseRotate.getClickTolerance(),C=u.dragRotate._mousePitch.getClickTolerance();this.element=m,this.mouseRotate=Ep({clickTolerance:w,enable:!0}),this.touchRotate=(({enable:R,clickTolerance:z,bearingDegreesPerPixelMoved:F=.8})=>{const H=new Fo;return new lc({clickTolerance:z,move:(q,Z)=>({bearingDelta:(Z.x-q.x)*F}),moveStateManager:H,enable:R,assignEvents:Xl})})({clickTolerance:w,enable:!0}),this.map=u,b&&(this.mousePitch=ql({clickTolerance:C,enable:!0}),this.touchPitch=(({enable:R,clickTolerance:z,pitchDegreesPerPixelMoved:F=-.5})=>{const H=new Fo;return new lc({clickTolerance:z,move:(q,Z)=>({pitchDelta:(Z.y-q.y)*F}),moveStateManager:H,enable:R,assignEvents:Xl})})({clickTolerance:C,enable:!0})),y.addEventListener(m,"mousedown",this.mousedown),y.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(m,"touchcancel",this.reset)}startMouse(u,m){this.mouseRotate.dragStart(u,m),this.mousePitch&&this.mousePitch.dragStart(u,m),y.disableDrag()}startTouch(u,m){this.touchRotate.dragStart(u,m),this.touchPitch&&this.touchPitch.dragStart(u,m),y.disableDrag()}moveMouse(u,m){const b=this.map,{bearingDelta:w}=this.mouseRotate.dragMove(u,m)||{};if(w&&b.setBearing(b.getBearing()+w),this.mousePitch){const{pitchDelta:C}=this.mousePitch.dragMove(u,m)||{};C&&b.setPitch(b.getPitch()+C)}}moveTouch(u,m){const b=this.map,{bearingDelta:w}=this.touchRotate.dragMove(u,m)||{};if(w&&b.setBearing(b.getBearing()+w),this.touchPitch){const{pitchDelta:C}=this.touchPitch.dragMove(u,m)||{};C&&b.setPitch(b.getPitch()+C)}}off(){const u=this.element;y.removeEventListener(u,"mousedown",this.mousedown),y.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend),y.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend)}}let $o;function yf(T,u,m){if(T=new s.M(T.lng,T.lat),u){const b=new s.M(T.lng-360,T.lat),w=new s.M(T.lng+360,T.lat),C=m.locationPoint(T).distSqr(u);m.locationPoint(b).distSqr(u)<C?T=b:m.locationPoint(w).distSqr(u)<C&&(T=w)}for(;Math.abs(T.lng-m.center.lng)>180;){const b=m.locationPoint(T);if(b.x>=0&&b.y>=0&&b.x<=m.width&&b.y<=m.height)break;T.lng>m.center.lng?T.lng-=360:T.lng+=360}return T}const dc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _f(T,u,m){const b=T.classList;for(const w in dc)b.remove(`maplibregl-${m}-anchor-${w}`);b.add(`maplibregl-${m}-anchor-${u}`)}class pc extends s.E{constructor(u){if(super(),this._onKeyPress=m=>{const b=m.code,w=m.charCode||m.keyCode;b!=="Space"&&b!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=m=>{const b=m.originalEvent.target,w=this._element;this._popup&&(b===w||w.contains(b))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();((m==null?void 0:m.type)==="terrain"||(m==null?void 0:m.type)==="render"&&!b)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=yf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),m&&m.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${dc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${w}`),this._updateOpacity(m&&m.type==="moveend")},this._onMove=m=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(u==null?void 0:u.opacity,u==null?void 0:u.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=s.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const m=y.createNS("http://www.w3.org/2000/svg","svg"),b=41,w=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${w}px`),m.setAttributeNS(null,"viewBox",`0 0 ${w} ${b}`);const C=y.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const R=y.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const z=y.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const F=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ae of F){const Fe=y.createNS("http://www.w3.org/2000/svg","ellipse");Fe.setAttributeNS(null,"opacity","0.04"),Fe.setAttributeNS(null,"cx","10.5"),Fe.setAttributeNS(null,"cy","5.80029008"),Fe.setAttributeNS(null,"rx",Ae.rx),Fe.setAttributeNS(null,"ry",Ae.ry),z.appendChild(Fe)}const H=y.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const q=y.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(q);const Z=y.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"fill","#000000");const ie=y.createNS("http://www.w3.org/2000/svg","path");ie.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Z.appendChild(ie);const ce=y.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ce.setAttributeNS(null,"fill","#FFFFFF");const he=y.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ge=y.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");const le=y.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),he.appendChild(ge),he.appendChild(le),R.appendChild(z),R.appendChild(H),R.appendChild(Z),R.appendChild(ce),R.appendChild(he),m.appendChild(R),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(m),this._offset=s.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),_f(this._element,this._anchor,"marker"),u&&u.className)for(const m of u.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=s.M.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const w=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}_updateOpacity(u=!1){if(!this._map.terrain)return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,b=m.terrain.depthAtPoint(this._pos),w=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,w)-b<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/m.transform._pixelPerMeter,R=Math.sin(m.getPitch()*Math.PI/180)*C,z=m.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),F=m.transform.lngLatToCameraDepth(this._lngLat,w+R);this._element.style.opacity=F-z>.006?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=s.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,m){return u===void 0&&m===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),m!==void 0&&(this._opacityWhenCovered=m),this._map&&this._updateOpacity(!0),this}}const $p={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qs=0,el=!1;const Np={maxWidth:100,unit:"metric"};function mc(T,u,m){const b=m&&m.maxWidth||100,w=T._container.clientHeight/2,C=T.unproject([0,w]),R=T.unproject([b,w]),z=C.distanceTo(R);if(m&&m.unit==="imperial"){const F=3.2808*z;F>5280?tl(u,b,F/5280,T._getUIString("ScaleControl.Miles")):tl(u,b,F,T._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?tl(u,b,z/1852,T._getUIString("ScaleControl.NauticalMiles")):z>=1e3?tl(u,b,z/1e3,T._getUIString("ScaleControl.Kilometers")):tl(u,b,z,T._getUIString("ScaleControl.Meters"))}function tl(T,u,m,b){const w=function(C){const R=Math.pow(10,`${Math.floor(C)}`.length-1);let z=C/R;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(F){const H=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*H)/H}(z),R*z}(m);T.style.width=u*(w/m)+"px",T.innerHTML=`${w}&nbsp;${b}`}const Vp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Hp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function bf(T){if(T){if(typeof T=="number"){const u=Math.round(Math.abs(T)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,T),"top-left":new s.P(u,u),"top-right":new s.P(-u,u),bottom:new s.P(0,-T),"bottom-left":new s.P(u,-u),"bottom-right":new s.P(-u,-u),left:new s.P(T,0),right:new s.P(-T,0)}}if(T instanceof s.P||Array.isArray(T)){const u=s.P.convert(T);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:s.P.convert(T.center||[0,0]),top:s.P.convert(T.top||[0,0]),"top-left":s.P.convert(T["top-left"]||[0,0]),"top-right":s.P.convert(T["top-right"]||[0,0]),bottom:s.P.convert(T.bottom||[0,0]),"bottom-left":s.P.convert(T["bottom-left"]||[0,0]),"bottom-right":s.P.convert(T["bottom-right"]||[0,0]),left:s.P.convert(T.left||[0,0]),right:s.P.convert(T.right||[0,0])}}return bf(new s.P(0,0))}const Up=c;o.AJAXError=s.bd,o.Evented=s.E,o.LngLat=s.M,o.MercatorCoordinate=s.Y,o.Point=s.P,o.addProtocol=s.be,o.config=s.a,o.removeProtocol=s.bf,o.AttributionControl=kp,o.BoxZoomHandler=Ap,o.CanvasSource=qt,o.CooperativeGesturesHandler=hc,o.DoubleClickZoomHandler=vf,o.DragPanHandler=Ip,o.DragRotateHandler=xy,o.EdgeInsets=Gl,o.FullscreenControl=class extends s.E{constructor(T={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,T&&T.container&&(T.container instanceof HTMLElement?this._container=T.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(T){return this._map=T,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const T=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon",T).setAttribute("aria-hidden","true"),T.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const T=this._getTitle();this._fullscreenButton.setAttribute("aria-label",T),this._fullscreenButton.title=T}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Ze,o.GeolocateControl=class extends s.E{constructor(T){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const m=new s.M(u.coords.longitude,u.coords.latitude),b=u.coords.accuracy,w=this._map.getBearing(),C=s.e({bearing:w},this.options.fitBoundsOptions),R=Be.fromLngLat(m,b);this._map.fitBounds(R,C,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const m=new s.M(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&el)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",m=>m.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pc({element:this._dotElement}),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",m=>{m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m.originalEvent&&m.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")))})}},this.options=s.e({},$p,T)}onAdd(T){return this._map=T,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(u=!1){return s._(this,void 0,void 0,function*(){if($o!==void 0&&!u)return $o;if(window.navigator.permissions===void 0)return $o=!!window.navigator.geolocation,$o;try{$o=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{$o=!!window.navigator.geolocation}return $o})}().then(u=>this._setupUI(u)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qs=0,el=!1}_isOutOfMapMaxBounds(T){const u=this._map.getMaxBounds(),m=T.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const T=this._map.getBounds(),u=T.getSouthEast(),m=T.getNorthEast(),b=u.distanceTo(m),w=Math.ceil(this._accuracy/(b/this._map._container.clientHeight)*2);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qs--,el=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let T;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qs++,Qs>1?(T={maximumAge:6e5,timeout:0},el=!0):(T=this.options.positionOptions,el=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,T)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=Cp,o.ImageSource=nt,o.KeyboardHandler=yy,o.LngLatBounds=Be,o.LogoControl=Wa,o.Map=class extends Lp{constructor(T){if(s.bb.mark(s.bc.create),(T=s.e({},zp,T)).minZoom!=null&&T.maxZoom!=null&&T.minZoom>T.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(T.minPitch!=null&&T.maxPitch!=null&&T.minPitch>T.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(T.minPitch!=null&&T.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(T.maxPitch!=null&&T.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new hf(T.minZoom,T.maxZoom,T.minPitch,T.maxPitch,T.renderWorldCopies),{bearingSnap:T.bearingSnap}),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=T.interactive,this._maxTileCacheSize=T.maxTileCacheSize,this._maxTileCacheZoomLevels=T.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=T.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=T.preserveDrawingBuffer,this._antialias=T.antialias,this._trackResize=T.trackResize,this._bearingSnap=T.bearingSnap,this._refreshExpiredTiles=T.refreshExpiredTiles,this._fadeDuration=T.fadeDuration,this._crossSourceCollisions=T.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=T.collectResourceTiming,this._renderTaskQueue=new lx,this._controls=[],this._mapId=s.a3(),this._locale=s.e({},Rp,T.locale),this._clickTolerance=T.clickTolerance,this._overridePixelRatio=T.pixelRatio,this._maxCanvasSize=T.maxCanvasSize,this.transformCameraUpdate=T.transformCameraUpdate,this._imageQueueHandle=L.addThrottleControl(()=>this.isMoving()),this._requestManager=new U(T.transformRequest),typeof T.container=="string"){if(this._container=document.getElementById(T.container),!this._container)throw new Error(`Container '${T.container}' not found.`)}else{if(!(T.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=T.container}if(T.maxBounds&&this.setMaxBounds(T.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const m=Tp(b=>{this._trackResize&&!this._removed&&this.resize(b)._update()},50);this._resizeObserver=new ResizeObserver(b=>{u?m(b):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Dp(this,T),this._hash=T.hash&&new Cp(typeof T.hash=="string"&&T.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:T.center,zoom:T.zoom,bearing:T.bearing,pitch:T.pitch}),T.bounds&&(this.resize(),this.fitBounds(T.bounds,s.e({},T.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=T.localIdeographFontFamily,this._validateStyle=T.validateStyle,T.style&&this.setStyle(T.style,{localIdeographFontFamily:T.localIdeographFontFamily}),T.attributionControl&&this.addControl(new kp(typeof T.attributionControl=="boolean"?void 0:T.attributionControl)),T.maplibreLogo&&this.addControl(new Wa,T.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new s.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new s.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new s.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(T,u){if(u===void 0&&(u=T.getDefaultPosition?T.getDefaultPosition():"top-right"),!T||!T.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=T.onAdd(this);this._controls.push(T);const b=this._controlPositions[u];return u.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(T){if(!T||!T.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(T);return u>-1&&this._controls.splice(u,1),T.onRemove(this),this}hasControl(T){return this._controls.indexOf(T)>-1}calculateCameraOptionsFromTo(T,u,m,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(T,u,m,b)}resize(T){var u;const m=this._containerDimensions(),b=m[0],w=m[1],C=this._getClampedPixelRatio(b,w);if(this._resizeCanvas(b,w,C),this.painter.resize(b,w,C),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const F=this._getClampedPixelRatio(b,w);this._resizeCanvas(b,w,F),this.painter.resize(b,w,F)}this.transform.resize(b,w),(u=this._requestedCameraState)===null||u===void 0||u.resize(b,w);const R=!this._moving;return R&&(this.stop(),this.fire(new s.k("movestart",T)).fire(new s.k("move",T))),this.fire(new s.k("resize",T)),R&&this.fire(new s.k("moveend",T)),this}_getClampedPixelRatio(T,u){const{0:m,1:b}=this._maxCanvasSize,w=this.getPixelRatio(),C=T*w,R=u*w;return Math.min(C>m?m/C:1,R>b?b/R:1)*w}getPixelRatio(){var T;return(T=this._overridePixelRatio)!==null&&T!==void 0?T:devicePixelRatio}setPixelRatio(T){this._overridePixelRatio=T,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(T){return this.transform.setMaxBounds(Be.convert(T)),this._update()}setMinZoom(T){if((T=T??-2)>=-2&&T<=this.transform.maxZoom)return this.transform.minZoom=T,this._update(),this.getZoom()<T&&this.setZoom(T),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(T){if((T=T??22)>=this.transform.minZoom)return this.transform.maxZoom=T,this._update(),this.getZoom()>T&&this.setZoom(T),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(T){if((T=T??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(T>=0&&T<=this.transform.maxPitch)return this.transform.minPitch=T,this._update(),this.getPitch()<T&&this.setPitch(T),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(T){if((T=T??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(T>=this.transform.minPitch)return this.transform.maxPitch=T,this._update(),this.getPitch()>T&&this.setPitch(T),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(T){return this.transform.renderWorldCopies=T,this._update()}project(T){return this.transform.locationPoint(s.M.convert(T),this.style&&this.terrain)}unproject(T){return this.transform.pointLocation(s.P.convert(T),this.terrain)}isMoving(){var T;return this._moving||((T=this.handlers)===null||T===void 0?void 0:T.isMoving())}isZooming(){var T;return this._zooming||((T=this.handlers)===null||T===void 0?void 0:T.isZooming())}isRotating(){var T;return this._rotating||((T=this.handlers)===null||T===void 0?void 0:T.isRotating())}_createDelegatedListener(T,u,m){if(T==="mouseenter"||T==="mouseover"){let b=!1;return{layer:u,listener:m,delegates:{mousemove:C=>{const R=this.getLayer(u)?this.queryRenderedFeatures(C.point,{layers:[u]}):[];R.length?b||(b=!0,m.call(this,new Wi(T,this,C.originalEvent,{features:R}))):b=!1},mouseout:()=>{b=!1}}}}if(T==="mouseleave"||T==="mouseout"){let b=!1;return{layer:u,listener:m,delegates:{mousemove:R=>{(this.getLayer(u)?this.queryRenderedFeatures(R.point,{layers:[u]}):[]).length?b=!0:b&&(b=!1,m.call(this,new Wi(T,this,R.originalEvent)))},mouseout:R=>{b&&(b=!1,m.call(this,new Wi(T,this,R.originalEvent)))}}}}{const b=w=>{const C=this.getLayer(u)?this.queryRenderedFeatures(w.point,{layers:[u]}):[];C.length&&(w.features=C,m.call(this,w),delete w.features)};return{layer:u,listener:m,delegates:{[T]:b}}}}on(T,u,m){if(m===void 0)return super.on(T,u);const b=this._createDelegatedListener(T,u,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[T]=this._delegatedListeners[T]||[],this._delegatedListeners[T].push(b);for(const w in b.delegates)this.on(w,b.delegates[w]);return this}once(T,u,m){if(m===void 0)return super.once(T,u);const b=this._createDelegatedListener(T,u,m);for(const w in b.delegates)this.once(w,b.delegates[w]);return this}off(T,u,m){return m===void 0?super.off(T,u):(this._delegatedListeners&&this._delegatedListeners[T]&&(b=>{const w=this._delegatedListeners[T];for(let C=0;C<w.length;C++){const R=w[C];if(R.layer===u&&R.listener===m){for(const z in R.delegates)this.off(z,R.delegates[z]);return w.splice(C,1),this}}})(),this)}queryRenderedFeatures(T,u){if(!this.style)return[];let m;const b=T instanceof s.P||Array.isArray(T),w=b?T:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(b?{}:T)||{},w instanceof s.P||typeof w[0]=="number")m=[s.P.convert(w)];else{const C=s.P.convert(w[0]),R=s.P.convert(w[1]);m=[C,new s.P(R.x,C.y),R,new s.P(C.x,R.y),C]}return this.style.queryRenderedFeatures(m,u,this.transform)}querySourceFeatures(T,u){return this.style.querySourceFeatures(T,u)}setStyle(T,u){return(u=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&T?(this._diffStyle(T,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(T,u))}setTransformRequest(T){return this._requestManager.setTransformRequest(T),this}_getUIString(T){const u=this._locale[T];if(u==null)throw new Error(`Missing UI string '${T}'`);return u}_updateStyle(T,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(T,u));const m=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!T)),T?(this.style=new da(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof T=="string"?this.style.loadURL(T,u,m):this.style.loadJSON(T,u,m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new da(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(T,u){if(typeof T=="string"){const m=this._requestManager.transformRequest(T,B.Style);s.h(m,new AbortController).then(b=>{this._updateDiff(b.data,u)}).catch(b=>{b&&this.fire(new s.j(b))})}else typeof T=="object"&&this._updateDiff(T,u)}_updateDiff(T,u){try{this.style.setState(T,u)&&this._update(!0)}catch(m){s.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(T,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(T,u){return this._lazyInitEmptyStyle(),this.style.addSource(T,u),this._update(!0)}isSourceLoaded(T){const u=this.style&&this.style.sourceCaches[T];if(u!==void 0)return u.loaded();this.fire(new s.j(new Error(`There is no source with ID '${T}'`)))}setTerrain(T){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),T){const u=this.style.sourceCaches[T.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${T.source}`);this.terrain===null&&u.reload();for(const m in this.style._layers){const b=this.style._layers[m];b.type==="hillshade"&&b.source===T.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Bn(this.painter,u,T),this.painter.renderToTexture=new gf(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=m=>{m.dataType==="style"?this.terrain.sourceCache.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==T.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:T})),this}getTerrain(){var T,u;return(u=(T=this.terrain)===null||T===void 0?void 0:T.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const T=this.style&&this.style.sourceCaches;for(const u in T){const m=T[u]._tiles;for(const b in m){const w=m[b];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(T){return this.style.removeSource(T),this._update(!0)}getSource(T){return this.style.getSource(T)}addImage(T,u,m={}){const{pixelRatio:b=1,sdf:w=!1,stretchX:C,stretchY:R,content:z}=m;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||s.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:F,height:H,data:q}=u,Z=u;return this.style.addImage(T,{data:new s.R({width:F,height:H},new Uint8Array(q)),pixelRatio:b,stretchX:C,stretchY:R,content:z,sdf:w,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,T),this}}{const{width:F,height:H,data:q}=v.getImageData(u);this.style.addImage(T,{data:new s.R({width:F,height:H},q),pixelRatio:b,stretchX:C,stretchY:R,content:z,sdf:w,version:0})}}updateImage(T,u){const m=this.style.getImage(T);if(!m)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=u instanceof HTMLImageElement||s.b(u)?v.getImageData(u):u,{width:w,height:C,data:R}=b;if(w===void 0||C===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==m.data.width||C!==m.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(u instanceof HTMLImageElement||s.b(u));return m.data.replace(R,z),this.style.updateImage(T,m),this}getImage(T){return this.style.getImage(T)}hasImage(T){return T?!!this.style.getImage(T):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(T){this.style.removeImage(T)}loadImage(T){return L.getImage(this._requestManager.transformRequest(T,B.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(T,u){return this._lazyInitEmptyStyle(),this.style.addLayer(T,u),this._update(!0)}moveLayer(T,u){return this.style.moveLayer(T,u),this._update(!0)}removeLayer(T){return this.style.removeLayer(T),this._update(!0)}getLayer(T){return this.style.getLayer(T)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(T,u,m){return this.style.setLayerZoomRange(T,u,m),this._update(!0)}setFilter(T,u,m={}){return this.style.setFilter(T,u,m),this._update(!0)}getFilter(T){return this.style.getFilter(T)}setPaintProperty(T,u,m,b={}){return this.style.setPaintProperty(T,u,m,b),this._update(!0)}getPaintProperty(T,u){return this.style.getPaintProperty(T,u)}setLayoutProperty(T,u,m,b={}){return this.style.setLayoutProperty(T,u,m,b),this._update(!0)}getLayoutProperty(T,u){return this.style.getLayoutProperty(T,u)}setGlyphs(T,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(T,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(T,u,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(T,u,m,b=>{b||this._update(!0)}),this}removeSprite(T){return this._lazyInitEmptyStyle(),this.style.removeSprite(T),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(T,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(T,u,m=>{m||this._update(!0)}),this}setLight(T,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(T,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(T,u){return this.style.setFeatureState(T,u),this._update()}removeFeatureState(T,u){return this.style.removeFeatureState(T,u),this._update()}getFeatureState(T){return this.style.getFeatureState(T)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let T=0,u=0;return this._container&&(T=this._container.clientWidth||400,u=this._container.clientHeight||300),[T,u]}_setupContainer(){const T=this._container;T.classList.add("maplibregl-map");const u=this._canvasContainer=y.create("div","maplibregl-canvas-container",T);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),b=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],b);const w=this._controlContainer=y.create("div","maplibregl-control-container",T),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(R=>{C[R]=y.create("div",`maplibregl-ctrl-${R} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(T,u,m){this._canvas.width=Math.floor(m*T),this._canvas.height=Math.floor(m*u),this._canvas.style.width=`${T}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const T={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",b=>{u={requestedAttributes:T},b&&(u.statusMessage=b.statusMessage,u.type=b.type)},{once:!0});const m=this._canvas.getContext("webgl2",T)||this._canvas.getContext("webgl",T);if(!m){const b="Failed to initialize WebGL";throw u?(u.message=b,new Error(JSON.stringify(u))):new Error(b)}this.painter=new uy(m,this.transform),_.testSupport(m)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(T){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||T,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(T){return this._update(),this._renderTaskQueue.add(T)}_cancelRenderFrame(T){this._renderTaskQueue.remove(T)}_render(T){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(T),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const w=this.transform.zoom,C=v.now();this.style.zoomHistory.update(w,C);const R=new s.a8(w,{now:C,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=R.crossFadingFactor();z===1&&z===this._crossFadingFactor||(m=!0,this._crossFadingFactor=z),this.style.update(R)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bb.mark(s.bc.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,s.bb.mark(s.bc.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var T;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),L.removeThrottleControl(this._imageQueueHandle),(T=this._resizeObserver)===null||T===void 0||T.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bb.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then(T=>{s.bb.frame(T),this._frameRequest=null,this._render(T)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(T){this._showTileBoundaries!==T&&(this._showTileBoundaries=T,this._update())}get showPadding(){return!!this._showPadding}set showPadding(T){this._showPadding!==T&&(this._showPadding=T,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(T){this._showCollisionBoxes!==T&&(this._showCollisionBoxes=T,T?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(T){this._showOverdrawInspector!==T&&(this._showOverdrawInspector=T,this._update())}get repaint(){return!!this._repaint}set repaint(T){this._repaint!==T&&(this._repaint=T,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(T){this._vertices=T,this._update()}get version(){return Op}getCameraTargetElevation(){return this.transform.elevation}},o.MapMouseEvent=Wi,o.MapTouchEvent=Wl,o.MapWheelEvent=Ys,o.Marker=pc,o.NavigationControl=class{constructor(T){this._updateZoomButtons=()=>{const u=this._map.getZoom(),m=u===this._map.getMaxZoom(),b=u===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,m)=>{const b=this._map._getUIString(`NavigationControl.${m}`);u.title=b,u.setAttribute("aria-label",b)},this.options=s.e({},Bp,T),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),y.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),y.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(T){return this._map=T,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(T,u){const m=y.create("button",T,this._container);return m.type="button",m.addEventListener("click",u),m}},o.Popup=class extends s.E{constructor(T){super(),this.remove=()=>(this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map),this.fire(new s.k("close")),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=y.create("div","maplibregl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const R of this.options.className.split(" "))this._container.classList.add(R);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=yf(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!u)return;const m=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);let b=this.options.anchor;const w=bf(this.options.offset);if(!b){const R=this._container.offsetWidth,z=this._container.offsetHeight;let F;F=m.y+w.bottom.y<z?["top"]:m.y>this._map.transform.height-z?["bottom"]:[],m.x<R/2?F.push("left"):m.x>this._map.transform.width-R/2&&F.push("right"),b=F.length===0?"bottom":F.join("-")}const C=m.add(w[b]).round();y.setTransform(this._container,`${dc[b]} translate(${C.x}px,${C.y}px)`),_f(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Vp),T)}addTo(T){return this._map&&this.remove(),this._map=T,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(T){return this._lngLat=s.M.convert(T),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(T){return this.setDOMContent(document.createTextNode(T))}setHTML(T){const u=document.createDocumentFragment(),m=document.createElement("body");let b;for(m.innerHTML=T;b=m.firstChild,b;)u.appendChild(b);return this.setDOMContent(u)}getMaxWidth(){var T;return(T=this._container)===null||T===void 0?void 0:T.style.maxWidth}setMaxWidth(T){return this.options.maxWidth=T,this._update(),this}setDOMContent(T){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(T),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(T){this._container&&this._container.classList.add(T)}removeClassName(T){this._container&&this._container.classList.remove(T)}setOffset(T){return this.options.offset=T,this._update(),this}toggleClassName(T){if(this._container)return this._container.classList.toggle(T)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const T=this._container.querySelector(Hp);T&&T.focus()}},o.RasterDEMTileSource=xt,o.RasterTileSource=lt,o.ScaleControl=class{constructor(T){this._onMove=()=>{mc(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,mc(this._map,this._container,this.options)},this.options=s.e({},Np,T)}getDefaultPosition(){return"bottom-left"}onAdd(T){return this._map=T,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale",T.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=cc,o.Style=da,o.TerrainControl=class{constructor(T){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=T}onAdd(T){return this._map=T,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Pp,o.TwoFingersTouchRotateHandler=pf,o.TwoFingersTouchZoomHandler=vy,o.TwoFingersTouchZoomRotateHandler=Ga,o.VectorTileSource=ye,o.VideoSource=Lt,o.addSourceType=(T,u)=>s._(void 0,void 0,void 0,function*(){if(er(T))throw new Error(`A source type called "${T}" already exists.`);((m,b)=>{Vt[m]=b})(T,u)}),o.clearPrewarmedResources=function(){const T=Xt;T&&(T.isPreloaded()&&T.numActive()===1?(T.release(ar),Xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return Ke().getRTLTextPluginStatus()},o.getVersion=function(){return Up},o.getWorkerCount=function(){return rr.workerCount},o.getWorkerUrl=function(){return s.a.WORKER_URL},o.importScriptInWorkers=function(T){return dt().broadcast("importScript",T)},o.prewarm=function(){st().acquire(ar)},o.setMaxParallelImageRequests=function(T){s.a.MAX_PARALLEL_IMAGE_REQUESTS=T},o.setRTLTextPlugin=function(T,u){return Ke().setRTLTextPlugin(T,u)},o.setWorkerCount=function(T){rr.workerCount=T},o.setWorkerUrl=function(T){s.a.WORKER_URL=T}});var a=r;return a})})(u6);var cie=u6.exports;const Of=RB(cie);var ta=63710088e-1,kA={centimeters:ta*100,centimetres:ta*100,degrees:ta/111325,feet:ta*3.28084,inches:ta*39.37,kilometers:ta/1e3,kilometres:ta/1e3,meters:ta,metres:ta,miles:ta/1609.344,millimeters:ta*1e3,millimetres:ta*1e3,nauticalmiles:ta/1852,radians:1,yards:ta*1.0936},hie={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ta,yards:1.0936133},oT={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Lo(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function fie(e,t,r){switch(e){case"Point":return Ci(t).geometry;case"LineString":return Ao(t).geometry;case"Polygon":return RA(t).geometry;case"MultiPoint":return f6(t).geometry;case"MultiLineString":return h6(t).geometry;case"MultiPolygon":return d6(t).geometry;default:throw new Error(e+" is invalid")}}function Ci(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!e1(e[0])||!e1(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return Lo(n,t,r)}function die(e,t,r){return r===void 0&&(r={}),Sh(e.map(function(n){return Ci(n,t)}),r)}function RA(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return Lo(s,t,r)}function pie(e,t,r){return r===void 0&&(r={}),Sh(e.map(function(n){return RA(n,t)}),r)}function Ao(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return Lo(n,t,r)}function mie(e,t,r){return r===void 0&&(r={}),Sh(e.map(function(n){return Ao(n,t)}),r)}function Sh(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function h6(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return Lo(n,t,r)}function f6(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return Lo(n,t,r)}function d6(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return Lo(n,t,r)}function vie(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return Lo(n,t,r)}function gie(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function OA(e,t){t===void 0&&(t="kilometers");var r=kA[t];if(!r)throw new Error(t+" units is invalid");return e*r}function ub(e,t){t===void 0&&(t="kilometers");var r=kA[t];if(!r)throw new Error(t+" units is invalid");return e/r}function yie(e,t){return zd(ub(e,t))}function _ie(e){var t=e%360;return t<0&&(t+=360),t}function zd(e){var t=e%(2*Math.PI);return t*180/Math.PI}function Ta(e){var t=e%360;return t*Math.PI/180}function bie(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return OA(ub(e,t),r)}function xie(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=oT[t];if(!n)throw new Error("invalid original units");var i=oT[r];if(!i)throw new Error("invalid final units");return e/n*i}function e1(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function zA(e){return!!e&&e.constructor===Object}function wie(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!e1(t))throw new Error("bbox must only contain numbers")})}function Sie(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const Tie=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:oT,bearingToAzimuth:_ie,convertArea:xie,convertLength:bie,degreesToRadians:Ta,earthRadius:ta,factors:kA,feature:Lo,featureCollection:Sh,geometry:fie,geometryCollection:vie,isNumber:e1,isObject:zA,lengthToDegrees:yie,lengthToRadians:ub,lineString:Ao,lineStrings:mie,multiLineString:h6,multiPoint:f6,multiPolygon:d6,point:Ci,points:die,polygon:RA,polygons:pie,radiansToDegrees:zd,radiansToLength:OA,round:gie,unitsFactors:hie,validateBBox:wie,validateId:Sie},Symbol.toStringTag,{value:"Module"}));function Pg(e,t,r){if(e!==null)for(var n,i,a,o,s,c,f,p=0,v=0,y,_=e.type,S=_==="FeatureCollection",E=_==="Feature",P=S?e.features.length:1,I=0;I<P;I++){f=S?e.features[I].geometry:E?e.geometry:e,y=f?f.type==="GeometryCollection":!1,s=y?f.geometries.length:1;for(var D=0;D<s;D++){var L=0,B=0;if(o=y?f.geometries[D]:f,o!==null){c=o.coordinates;var U=o.type;switch(p=r&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(c,v,I,L,B)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(t(c[n],v,I,L,B)===!1)return!1;v++,U==="MultiPoint"&&L++}U==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-p;i++){if(t(c[n][i],v,I,L,B)===!1)return!1;v++}U==="MultiLineString"&&L++,U==="Polygon"&&B++}U==="Polygon"&&L++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(B=0,i=0;i<c[n].length;i++){for(a=0;a<c[n][i].length-p;a++){if(t(c[n][i][a],v,I,L,B)===!1)return!1;v++}B++}L++}break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(Pg(o.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cie(e,t,r,n){var i=r;return Pg(e,function(a,o,s,c,f){o===0&&r===void 0?i=a:i=t(i,a,o,s,c,f)},n),i}function p6(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function Aie(e,t,r){var n=r;return p6(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function Zv(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Mie(e,t,r){var n=r;return Zv(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function Eie(e){var t=[];return Pg(e,function(r){t.push(r)}),t}function BA(e,t){var r,n,i,a,o,s,c,f,p,v,y=0,_=e.type==="FeatureCollection",S=e.type==="Feature",E=_?e.features.length:1;for(r=0;r<E;r++){for(s=_?e.features[r].geometry:S?e.geometry:e,f=_?e.features[r].properties:S?e.properties:{},p=_?e.features[r].bbox:S?e.bbox:void 0,v=_?e.features[r].id:S?e.id:void 0,c=s?s.type==="GeometryCollection":!1,o=c?s.geometries.length:1,i=0;i<o;i++){if(a=c?s.geometries[i]:s,a===null){if(t(null,y,f,p,v)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,y,f,p,v)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(t(a.geometries[n],y,f,p,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function Pie(e,t,r){var n=r;return BA(e,function(i,a,o,s,c){a===0&&r===void 0?n=i:n=t(n,i,a,o,s,c)}),n}function tp(e,t){BA(e,function(r,n,i,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(Lo(r,i,{bbox:a,id:o}),n,0)===!1?!1:void 0}var c;switch(s){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var p=r.coordinates[f],v={type:c,coordinates:p};if(t(Lo(v,i),n,f)===!1)return!1}})}function Iie(e,t,r){var n=r;return tp(e,function(i,a,o){a===0&&o===0&&r===void 0?n=i:n=t(n,i,a,o)}),n}function m6(e,t){tp(e,function(r,n,i){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,c=0,f=0,p=0;if(Pg(r,function(v,y,_,S,E){if(s===void 0||n>c||S>f||E>p){s=v,c=n,f=S,p=E,a=0;return}var P=Ao([s,v],r.properties);if(t(P,n,i,E,a)===!1)return!1;a++,s=v})===!1)return!1}}})}function v6(e,t,r){var n=r,i=!1;return m6(e,function(a,o,s,c,f){i===!1&&r===void 0?n=a:n=t(n,a,o,s,c,f),i=!0}),n}function g6(e,t){if(!e)throw new Error("geojson is required");tp(e,function(r,n,i){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(Ao(o[s],r.properties),n,i,s)===!1)return!1;break}}})}function Die(e,t,r){var n=r;return g6(e,function(i,a,o,s){a===0&&r===void 0?n=i:n=t(n,i,a,o,s)}),n}function Lie(e,t){if(t=t||{},!zA(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var c=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=c.length+a-1),Ao([c[a],c[a+1]],o,t);case"Polygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a-1),Ao([c[i][a],c[i][a+1]],o,t);case"MultiLineString":return n<0&&(n=c.length+n),a<0&&(a=c[n].length+a-1),Ao([c[n][a],c[n][a+1]],o,t);case"MultiPolygon":return n<0&&(n=c.length+n),i<0&&(i=c[n].length+i),a<0&&(a=c[n][i].length-a-1),Ao([c[n][i][a],c[n][i][a+1]],o,t)}throw new Error("geojson is invalid")}function kie(e,t){if(t=t||{},!zA(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var c=s.coordinates;switch(s.type){case"Point":return Ci(c,o,t);case"MultiPoint":return n<0&&(n=c.length+n),Ci(c[n],o,t);case"LineString":return a<0&&(a=c.length+a),Ci(c[a],o,t);case"Polygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),Ci(c[i][a],o,t);case"MultiLineString":return n<0&&(n=c.length+n),a<0&&(a=c[n].length+a),Ci(c[n][a],o,t);case"MultiPolygon":return n<0&&(n=c.length+n),i<0&&(i=c[n].length+i),a<0&&(a=c[n][i].length-a),Ci(c[n][i][a],o,t)}throw new Error("geojson is invalid")}const Rie=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Eie,coordEach:Pg,coordReduce:Cie,featureEach:Zv,featureReduce:Mie,findPoint:kie,findSegment:Lie,flattenEach:tp,flattenReduce:Iie,geomEach:BA,geomReduce:Pie,lineEach:g6,lineReduce:Die,propEach:p6,propReduce:Aie,segmentEach:m6,segmentReduce:v6},Symbol.toStringTag,{value:"Module"}));function bl(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Bd(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}var y6={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kB,function(){function r(D,L,B,U,V){(function N(G,Y,ee,J,X){for(;J>ee;){if(J-ee>600){var ne=J-ee+1,we=Y-ee+1,fe=Math.log(ne),me=.5*Math.exp(2*fe/3),Ve=.5*Math.sqrt(fe*me*(ne-me)/ne)*(we-ne/2<0?-1:1),Oe=Math.max(ee,Math.floor(Y-we*me/ne+Ve)),ct=Math.min(J,Math.floor(Y+(ne-we)*me/ne+Ve));N(G,Y,Oe,ct,X)}var _t=G[Y],zt=ee,Mt=J;for(n(G,ee,Y),X(G[J],_t)>0&&n(G,ee,J);zt<Mt;){for(n(G,zt,Mt),zt++,Mt--;X(G[zt],_t)<0;)zt++;for(;X(G[Mt],_t)>0;)Mt--}X(G[ee],_t)===0?n(G,ee,Mt):n(G,++Mt,J),Mt<=Y&&(ee=Mt+1),Y<=Mt&&(J=Mt-1)}})(D,L,B||0,U||D.length-1,V||i)}function n(D,L,B){var U=D[L];D[L]=D[B],D[B]=U}function i(D,L){return D<L?-1:D>L?1:0}var a=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(D,L,B){if(!B)return L.indexOf(D);for(var U=0;U<L.length;U++)if(B(D,L[U]))return U;return-1}function s(D,L){c(D,0,D.children.length,L,D)}function c(D,L,B,U,V){V||(V=P(null)),V.minX=1/0,V.minY=1/0,V.maxX=-1/0,V.maxY=-1/0;for(var N=L;N<B;N++){var G=D.children[N];f(V,D.leaf?U(G):G)}return V}function f(D,L){return D.minX=Math.min(D.minX,L.minX),D.minY=Math.min(D.minY,L.minY),D.maxX=Math.max(D.maxX,L.maxX),D.maxY=Math.max(D.maxY,L.maxY),D}function p(D,L){return D.minX-L.minX}function v(D,L){return D.minY-L.minY}function y(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function _(D){return D.maxX-D.minX+(D.maxY-D.minY)}function S(D,L){return D.minX<=L.minX&&D.minY<=L.minY&&L.maxX<=D.maxX&&L.maxY<=D.maxY}function E(D,L){return L.minX<=D.maxX&&L.minY<=D.maxY&&L.maxX>=D.minX&&L.maxY>=D.minY}function P(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function I(D,L,B,U,V){for(var N=[L,B];N.length;)if(!((B=N.pop())-(L=N.pop())<=U)){var G=L+Math.ceil((B-L)/U/2)*U;r(D,G,L,B,V),N.push(L,G,G,B)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(D){var L=this.data,B=[];if(!E(D,L))return B;for(var U=this.toBBox,V=[];L;){for(var N=0;N<L.children.length;N++){var G=L.children[N],Y=L.leaf?U(G):G;E(D,Y)&&(L.leaf?B.push(G):S(D,Y)?this._all(G,B):V.push(G))}L=V.pop()}return B},a.prototype.collides=function(D){var L=this.data;if(!E(D,L))return!1;for(var B=[];L;){for(var U=0;U<L.children.length;U++){var V=L.children[U],N=L.leaf?this.toBBox(V):V;if(E(D,N)){if(L.leaf||S(D,N))return!0;B.push(V)}}L=B.pop()}return!1},a.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var L=0;L<D.length;L++)this.insert(D[L]);return this}var B=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length)if(this.data.height===B.height)this._splitRoot(this.data,B);else{if(this.data.height<B.height){var U=this.data;this.data=B,B=U}this._insert(B,this.data.height-B.height-1,!0)}else this.data=B;return this},a.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},a.prototype.clear=function(){return this.data=P([]),this},a.prototype.remove=function(D,L){if(!D)return this;for(var B,U,V,N=this.data,G=this.toBBox(D),Y=[],ee=[];N||Y.length;){if(N||(N=Y.pop(),U=Y[Y.length-1],B=ee.pop(),V=!0),N.leaf){var J=o(D,N.children,L);if(J!==-1)return N.children.splice(J,1),Y.push(N),this._condense(Y),this}V||N.leaf||!S(N,G)?U?(B++,N=U.children[B],V=!1):N=null:(Y.push(N),ee.push(B),B=0,U=N,N=N.children[0])}return this},a.prototype.toBBox=function(D){return D},a.prototype.compareMinX=function(D,L){return D.minX-L.minX},a.prototype.compareMinY=function(D,L){return D.minY-L.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(D){return this.data=D,this},a.prototype._all=function(D,L){for(var B=[];D;)D.leaf?L.push.apply(L,D.children):B.push.apply(B,D.children),D=B.pop();return L},a.prototype._build=function(D,L,B,U){var V,N=B-L+1,G=this._maxEntries;if(N<=G)return s(V=P(D.slice(L,B+1)),this.toBBox),V;U||(U=Math.ceil(Math.log(N)/Math.log(G)),G=Math.ceil(N/Math.pow(G,U-1))),(V=P([])).leaf=!1,V.height=U;var Y=Math.ceil(N/G),ee=Y*Math.ceil(Math.sqrt(G));I(D,L,B,ee,this.compareMinX);for(var J=L;J<=B;J+=ee){var X=Math.min(J+ee-1,B);I(D,J,X,Y,this.compareMinY);for(var ne=J;ne<=X;ne+=Y){var we=Math.min(ne+Y-1,X);V.children.push(this._build(D,ne,we,U-1))}}return s(V,this.toBBox),V},a.prototype._chooseSubtree=function(D,L,B,U){for(;U.push(L),!L.leaf&&U.length-1!==B;){for(var V=1/0,N=1/0,G=void 0,Y=0;Y<L.children.length;Y++){var ee=L.children[Y],J=y(ee),X=(ne=D,we=ee,(Math.max(we.maxX,ne.maxX)-Math.min(we.minX,ne.minX))*(Math.max(we.maxY,ne.maxY)-Math.min(we.minY,ne.minY))-J);X<N?(N=X,V=J<V?J:V,G=ee):X===N&&J<V&&(V=J,G=ee)}L=G||L.children[0]}var ne,we;return L},a.prototype._insert=function(D,L,B){var U=B?D:this.toBBox(D),V=[],N=this._chooseSubtree(U,this.data,L,V);for(N.children.push(D),f(N,U);L>=0&&V[L].children.length>this._maxEntries;)this._split(V,L),L--;this._adjustParentBBoxes(U,V,L)},a.prototype._split=function(D,L){var B=D[L],U=B.children.length,V=this._minEntries;this._chooseSplitAxis(B,V,U);var N=this._chooseSplitIndex(B,V,U),G=P(B.children.splice(N,B.children.length-N));G.height=B.height,G.leaf=B.leaf,s(B,this.toBBox),s(G,this.toBBox),L?D[L-1].children.push(G):this._splitRoot(B,G)},a.prototype._splitRoot=function(D,L){this.data=P([D,L]),this.data.height=D.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(D,L,B){for(var U,V,N,G,Y,ee,J,X=1/0,ne=1/0,we=L;we<=B-L;we++){var fe=c(D,0,we,this.toBBox),me=c(D,we,B,this.toBBox),Ve=(V=fe,N=me,G=void 0,Y=void 0,ee=void 0,J=void 0,G=Math.max(V.minX,N.minX),Y=Math.max(V.minY,N.minY),ee=Math.min(V.maxX,N.maxX),J=Math.min(V.maxY,N.maxY),Math.max(0,ee-G)*Math.max(0,J-Y)),Oe=y(fe)+y(me);Ve<X?(X=Ve,U=we,ne=Oe<ne?Oe:ne):Ve===X&&Oe<ne&&(ne=Oe,U=we)}return U||B-L},a.prototype._chooseSplitAxis=function(D,L,B){var U=D.leaf?this.compareMinX:p,V=D.leaf?this.compareMinY:v;this._allDistMargin(D,L,B,U)<this._allDistMargin(D,L,B,V)&&D.children.sort(U)},a.prototype._allDistMargin=function(D,L,B,U){D.children.sort(U);for(var V=this.toBBox,N=c(D,0,L,V),G=c(D,B-L,B,V),Y=_(N)+_(G),ee=L;ee<B-L;ee++){var J=D.children[ee];f(N,D.leaf?V(J):J),Y+=_(N)}for(var X=B-L-1;X>=L;X--){var ne=D.children[X];f(G,D.leaf?V(ne):ne),Y+=_(G)}return Y},a.prototype._adjustParentBBoxes=function(D,L,B){for(var U=B;U>=0;U--)f(L[U],D)},a.prototype._condense=function(D){for(var L=D.length-1,B=void 0;L>=0;L--)D[L].children.length===0?L>0?(B=D[L-1].children).splice(B.indexOf(D[L]),1):this.clear():s(D[L],this.toBBox)},a})})(y6);var Oie=y6.exports;function eh(e,t,r){r===void 0&&(r={});var n=bl(e),i=bl(t),a=Ta(i[1]-n[1]),o=Ta(i[0]-n[0]),s=Ta(n[1]),c=Ta(i[1]),f=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(s)*Math.cos(c);return OA(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r.units)}function zie(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return _6(e);case"FeatureCollection":return Bie(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return FA(e);default:throw new Error("unknown GeoJSON type")}}function _6(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=b6(e.properties),t.geometry=FA(e.geometry),t}function b6(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(i){return i}):t[r]=b6(n):t[r]=n}),t}function Bie(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return _6(r)}),t}function FA(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return FA(r)}),t):(t.coordinates=x6(e.coordinates),t)}function x6(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return x6(r)})}function DL(e,t,r,n){n===void 0&&(n={});var i=bl(e),a=Ta(i[0]),o=Ta(i[1]),s=Ta(r),c=ub(t,n.units),f=Math.asin(Math.sin(o)*Math.cos(c)+Math.cos(o)*Math.sin(c)*Math.cos(s)),p=a+Math.atan2(Math.sin(s)*Math.sin(c)*Math.cos(o),Math.cos(c)-Math.sin(o)*Math.sin(f)),v=zd(p),y=zd(f);return Ci([v,y],n.properties)}function w6(e,t,r){if(r===void 0&&(r={}),r.final===!0)return Fie(e,t);var n=bl(e),i=bl(t),a=Ta(n[0]),o=Ta(i[0]),s=Ta(n[1]),c=Ta(i[1]),f=Math.sin(o-a)*Math.cos(c),p=Math.cos(s)*Math.sin(c)-Math.sin(s)*Math.cos(c)*Math.cos(o-a);return zd(Math.atan2(f,p))}function Fie(e,t){var r=w6(t,e);return r=(r+180)%360,r}function LL(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return Zv(t,function(a,o){var s=eh(e,a);s<n&&(i=o,n=s)}),r=zie(t.features[i]),r.properties.featureIndex=i,r.properties.distanceToPoint=n,r}function kL(e){if(!e)throw new Error("geojson is required");var t=[];return tp(e,function(r){$ie(r,t)}),Sh(t)}function $ie(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=Bd(n);break;case"LineString":r=[Bd(n)]}r.forEach(function(i){var a=Nie(i,e.properties);a.forEach(function(o){o.id=t.length,t.push(o)})})}}function Nie(e,t){var r=[];return e.reduce(function(n,i){var a=Ao([n,i],t);return a.bbox=Vie(n,i),r.push(a),i}),r}function Vie(e,t){var r=e[0],n=e[1],i=t[0],a=t[1],o=r<i?r:i,s=n<a?n:a,c=r>i?r:i,f=n>a?n:a;return[o,s,c,f]}var $A={exports:{}},S6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=63710088e-1,e.factors={centimeters:e.earthRadius*100,centimetres:e.earthRadius*100,degrees:e.earthRadius/111325,feet:e.earthRadius*3.28084,inches:e.earthRadius*39.37,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:e.earthRadius*1e3,millimetres:e.earthRadius*1e3,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius*1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(J,X,ne){ne===void 0&&(ne={});var we={type:"Feature"};return(ne.id===0||ne.id)&&(we.id=ne.id),ne.bbox&&(we.bbox=ne.bbox),we.properties=X||{},we.geometry=J,we}e.feature=t;function r(J,X,ne){switch(J){case"Point":return n(X).geometry;case"LineString":return s(X).geometry;case"Polygon":return a(X).geometry;case"MultiPoint":return v(X).geometry;case"MultiLineString":return p(X).geometry;case"MultiPolygon":return y(X).geometry;default:throw new Error(J+" is invalid")}}e.geometry=r;function n(J,X,ne){if(ne===void 0&&(ne={}),!J)throw new Error("coordinates is required");if(!Array.isArray(J))throw new Error("coordinates must be an Array");if(J.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!N(J[0])||!N(J[1]))throw new Error("coordinates must contain numbers");var we={type:"Point",coordinates:J};return t(we,X,ne)}e.point=n;function i(J,X,ne){return ne===void 0&&(ne={}),f(J.map(function(we){return n(we,X)}),ne)}e.points=i;function a(J,X,ne){ne===void 0&&(ne={});for(var we=0,fe=J;we<fe.length;we++){var me=fe[we];if(me.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ve=0;Ve<me[me.length-1].length;Ve++)if(me[me.length-1][Ve]!==me[0][Ve])throw new Error("First and last Position are not equivalent.")}var Oe={type:"Polygon",coordinates:J};return t(Oe,X,ne)}e.polygon=a;function o(J,X,ne){return ne===void 0&&(ne={}),f(J.map(function(we){return a(we,X)}),ne)}e.polygons=o;function s(J,X,ne){if(ne===void 0&&(ne={}),J.length<2)throw new Error("coordinates must be an array of two or more positions");var we={type:"LineString",coordinates:J};return t(we,X,ne)}e.lineString=s;function c(J,X,ne){return ne===void 0&&(ne={}),f(J.map(function(we){return s(we,X)}),ne)}e.lineStrings=c;function f(J,X){X===void 0&&(X={});var ne={type:"FeatureCollection"};return X.id&&(ne.id=X.id),X.bbox&&(ne.bbox=X.bbox),ne.features=J,ne}e.featureCollection=f;function p(J,X,ne){ne===void 0&&(ne={});var we={type:"MultiLineString",coordinates:J};return t(we,X,ne)}e.multiLineString=p;function v(J,X,ne){ne===void 0&&(ne={});var we={type:"MultiPoint",coordinates:J};return t(we,X,ne)}e.multiPoint=v;function y(J,X,ne){ne===void 0&&(ne={});var we={type:"MultiPolygon",coordinates:J};return t(we,X,ne)}e.multiPolygon=y;function _(J,X,ne){ne===void 0&&(ne={});var we={type:"GeometryCollection",geometries:J};return t(we,X,ne)}e.geometryCollection=_;function S(J,X){if(X===void 0&&(X=0),X&&!(X>=0))throw new Error("precision must be a positive number");var ne=Math.pow(10,X||0);return Math.round(J*ne)/ne}e.round=S;function E(J,X){X===void 0&&(X="kilometers");var ne=e.factors[X];if(!ne)throw new Error(X+" units is invalid");return J*ne}e.radiansToLength=E;function P(J,X){X===void 0&&(X="kilometers");var ne=e.factors[X];if(!ne)throw new Error(X+" units is invalid");return J/ne}e.lengthToRadians=P;function I(J,X){return L(P(J,X))}e.lengthToDegrees=I;function D(J){var X=J%360;return X<0&&(X+=360),X}e.bearingToAzimuth=D;function L(J){var X=J%(2*Math.PI);return X*180/Math.PI}e.radiansToDegrees=L;function B(J){var X=J%360;return X*Math.PI/180}e.degreesToRadians=B;function U(J,X,ne){if(X===void 0&&(X="kilometers"),ne===void 0&&(ne="kilometers"),!(J>=0))throw new Error("length must be a positive number");return E(P(J,X),ne)}e.convertLength=U;function V(J,X,ne){if(X===void 0&&(X="meters"),ne===void 0&&(ne="kilometers"),!(J>=0))throw new Error("area must be a positive number");var we=e.areaFactors[X];if(!we)throw new Error("invalid original units");var fe=e.areaFactors[ne];if(!fe)throw new Error("invalid final units");return J/we*fe}e.convertArea=V;function N(J){return!isNaN(J)&&J!==null&&!Array.isArray(J)}e.isNumber=N;function G(J){return!!J&&J.constructor===Object}e.isObject=G;function Y(J){if(!J)throw new Error("bbox is required");if(!Array.isArray(J))throw new Error("bbox must be an Array");if(J.length!==4&&J.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");J.forEach(function(X){if(!N(X))throw new Error("bbox must only contain numbers")})}e.validateBBox=Y;function ee(J){if(!J)throw new Error("id is required");if(["string","number"].indexOf(typeof J)===-1)throw new Error("id must be a number or a string")}e.validateId=ee})(S6);var yi={};const Hie=OB(Tie);Object.defineProperty(yi,"__esModule",{value:!0});var aa=Hie;function Ig(e,t,r){if(e!==null)for(var n,i,a,o,s,c,f,p=0,v=0,y,_=e.type,S=_==="FeatureCollection",E=_==="Feature",P=S?e.features.length:1,I=0;I<P;I++){f=S?e.features[I].geometry:E?e.geometry:e,y=f?f.type==="GeometryCollection":!1,s=y?f.geometries.length:1;for(var D=0;D<s;D++){var L=0,B=0;if(o=y?f.geometries[D]:f,o!==null){c=o.coordinates;var U=o.type;switch(p=r&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(c,v,I,L,B)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(t(c[n],v,I,L,B)===!1)return!1;v++,U==="MultiPoint"&&L++}U==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-p;i++){if(t(c[n][i],v,I,L,B)===!1)return!1;v++}U==="MultiLineString"&&L++,U==="Polygon"&&B++}U==="Polygon"&&L++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(B=0,i=0;i<c[n].length;i++){for(a=0;a<c[n][i].length-p;a++){if(t(c[n][i][a],v,I,L,B)===!1)return!1;v++}B++}L++}break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(Ig(o.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Uie(e,t,r,n){var i=r;return Ig(e,function(a,o,s,c,f){o===0&&r===void 0?i=a:i=t(i,a,o,s,c,f)},n),i}function T6(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function jie(e,t,r){var n=r;return T6(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function C6(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Gie(e,t,r){var n=r;return C6(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function Wie(e){var t=[];return Ig(e,function(r){t.push(r)}),t}function NA(e,t){var r,n,i,a,o,s,c,f,p,v,y=0,_=e.type==="FeatureCollection",S=e.type==="Feature",E=_?e.features.length:1;for(r=0;r<E;r++){for(s=_?e.features[r].geometry:S?e.geometry:e,f=_?e.features[r].properties:S?e.properties:{},p=_?e.features[r].bbox:S?e.bbox:void 0,v=_?e.features[r].id:S?e.id:void 0,c=s?s.type==="GeometryCollection":!1,o=c?s.geometries.length:1,i=0;i<o;i++){if(a=c?s.geometries[i]:s,a===null){if(t(null,y,f,p,v)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,y,f,p,v)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(t(a.geometries[n],y,f,p,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function qie(e,t,r){var n=r;return NA(e,function(i,a,o,s,c){a===0&&r===void 0?n=i:n=t(n,i,a,o,s,c)}),n}function cb(e,t){NA(e,function(r,n,i,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(aa.feature(r,i,{bbox:a,id:o}),n,0)===!1?!1:void 0}var c;switch(s){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var p=r.coordinates[f],v={type:c,coordinates:p};if(t(aa.feature(v,i),n,f)===!1)return!1}})}function Zie(e,t,r){var n=r;return cb(e,function(i,a,o){a===0&&o===0&&r===void 0?n=i:n=t(n,i,a,o)}),n}function A6(e,t){cb(e,function(r,n,i){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,c=0,f=0,p=0;if(Ig(r,function(v,y,_,S,E){if(s===void 0||n>c||S>f||E>p){s=v,c=n,f=S,p=E,a=0;return}var P=aa.lineString([s,v],r.properties);if(t(P,n,i,E,a)===!1)return!1;a++,s=v})===!1)return!1}}})}function Xie(e,t,r){var n=r,i=!1;return A6(e,function(a,o,s,c,f){i===!1&&r===void 0?n=a:n=t(n,a,o,s,c,f),i=!0}),n}function M6(e,t){if(!e)throw new Error("geojson is required");cb(e,function(r,n,i){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(aa.lineString(o[s],r.properties),n,i,s)===!1)return!1;break}}})}function Yie(e,t,r){var n=r;return M6(e,function(i,a,o,s){a===0&&r===void 0?n=i:n=t(n,i,a,o,s)}),n}function Kie(e,t){if(t=t||{},!aa.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var c=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=c.length+a-1),aa.lineString([c[a],c[a+1]],o,t);case"Polygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a-1),aa.lineString([c[i][a],c[i][a+1]],o,t);case"MultiLineString":return n<0&&(n=c.length+n),a<0&&(a=c[n].length+a-1),aa.lineString([c[n][a],c[n][a+1]],o,t);case"MultiPolygon":return n<0&&(n=c.length+n),i<0&&(i=c[n].length+i),a<0&&(a=c[n][i].length-a-1),aa.lineString([c[n][i][a],c[n][i][a+1]],o,t)}throw new Error("geojson is invalid")}function Jie(e,t){if(t=t||{},!aa.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var c=s.coordinates;switch(s.type){case"Point":return aa.point(c,o,t);case"MultiPoint":return n<0&&(n=c.length+n),aa.point(c[n],o,t);case"LineString":return a<0&&(a=c.length+a),aa.point(c[a],o,t);case"Polygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),aa.point(c[i][a],o,t);case"MultiLineString":return n<0&&(n=c.length+n),a<0&&(a=c[n].length+a),aa.point(c[n][a],o,t);case"MultiPolygon":return n<0&&(n=c.length+n),i<0&&(i=c[n].length+i),a<0&&(a=c[n][i].length-a),aa.point(c[n][i][a],o,t)}throw new Error("geojson is invalid")}yi.coordAll=Wie;yi.coordEach=Ig;yi.coordReduce=Uie;yi.featureEach=C6;yi.featureReduce=Gie;yi.findPoint=Jie;yi.findSegment=Kie;yi.flattenEach=cb;yi.flattenReduce=Zie;yi.geomEach=NA;yi.geomReduce=qie;yi.lineEach=M6;yi.lineReduce=Yie;yi.propEach=T6;yi.propReduce=jie;yi.segmentEach=A6;yi.segmentReduce=Xie;var VA={};const Qie=OB(Rie);Object.defineProperty(VA,"__esModule",{value:!0});var eae=Qie;function sT(e){var t=[1/0,1/0,-1/0,-1/0];return eae.coordEach(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}sT.default=sT;VA.default=sT;var gs=Oie,E6=S6,P6=yi,zf=VA.default,tae=P6.featureEach;P6.coordEach;E6.polygon;var RL=E6.featureCollection;function I6(e){var t=new gs(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:zf(r),gs.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:zf(i),n.push(i)}):tae(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:zf(i),n.push(i)}),gs.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:zf(r),gs.prototype.remove.call(this,r,n)},t.clear=function(){return gs.prototype.clear.call(this)},t.search=function(r){var n=gs.prototype.search.call(this,this.toBBox(r));return RL(n)},t.collides=function(r){return gs.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=gs.prototype.all.call(this);return RL(r)},t.toJSON=function(){return gs.prototype.toJSON.call(this)},t.fromJSON=function(r){return gs.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=zf(r);else if(r.type==="FeatureCollection")n=zf(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}$A.exports=I6;$A.exports.default=I6;var rae=$A.exports;const nae=RB(rae);function iae(e,t){var r={},n=[];if(e.type==="LineString"&&(e=Lo(e)),t.type==="LineString"&&(t=Lo(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=OL(e,t);return i&&n.push(i),Sh(n)}var a=nae();return a.load(kL(t)),Zv(kL(e),function(o){Zv(a.search(o),function(s){var c=OL(o,s);if(c){var f=Bd(c).join(",");r[f]||(r[f]=!0,n.push(c))}})}),Sh(n)}function OL(e,t){var r=Bd(e),n=Bd(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],a=r[0][1],o=r[1][0],s=r[1][1],c=n[0][0],f=n[0][1],p=n[1][0],v=n[1][1],y=(v-f)*(o-i)-(p-c)*(s-a),_=(p-c)*(a-f)-(v-f)*(i-c),S=(o-i)*(a-f)-(s-a)*(i-c);if(y===0)return null;var E=_/y,P=S/y;if(E>=0&&E<=1&&P>=0&&P<=1){var I=i+E*(o-i),D=a+E*(s-a);return Ci([I,D])}return null}function hl(e,t,r){r===void 0&&(r={});var n=Ci([1/0,1/0],{dist:1/0}),i=0;return tp(e,function(a){for(var o=Bd(a),s=0;s<o.length-1;s++){var c=Ci(o[s]);c.properties.dist=eh(t,c,r);var f=Ci(o[s+1]);f.properties.dist=eh(t,f,r);var p=eh(c,f,r),v=Math.max(c.properties.dist,f.properties.dist),y=w6(c,f),_=DL(t,v,y+90,r),S=DL(t,v,y-90,r),E=iae(Ao([_.geometry.coordinates,S.geometry.coordinates]),Ao([c.geometry.coordinates,f.geometry.coordinates])),P=null;E.features.length>0&&(P=E.features[0],P.properties.dist=eh(t,P,r),P.properties.location=i+eh(c,P,r)),c.properties.dist<n.properties.dist&&(n=c,n.properties.index=s,n.properties.location=i),f.properties.dist<n.properties.dist&&(n=f,n.properties.index=s+1,n.properties.location=i+p),P&&P.properties.dist<n.properties.dist&&(n=P,n.properties.index=s),i+=p}}),n}function fl(e,t){return t===void 0&&(t={}),v6(e,function(r,n){var i=n.geometry.coordinates;return r+eh(i[0],i[1],t)},0)}function aae(e,t,r){r===void 0&&(r={});var n;r.final?n=zL(bl(t),bl(e)):n=zL(bl(e),bl(t));var i=n>180?-(360-n):n;return i}function zL(e,t){var r=Ta(e[1]),n=Ta(t[1]),i=Ta(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var a=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),o=Math.atan2(i,a);return(zd(o)+360)%360}const oae={name:"MyMap",data:()=>({map_style_url:"https://mirrors.sustech.edu.cn/osm-tile/styles/osm-bright/style.json",map_text_colour:"#000000",bus_location_data_api:[],bus_location_data_display:[],bus_plate_hash:{298:{plate:"粤BDF298"},363:{plate:"粤BDF363"},8040:{plate:"粤BDF040"},8147:{plate:"粤BDF147"},8267:{plate:"粤BDF267"},8330:{plate:"粤BDF330"},8335:{plate:"粤BDF335"},8338:{plate:"粤BDF338"},8345:{plate:"粤BDF345"},8365:{plate:"粤BDF365"},8371:{plate:"粤BDF371"},8411:{plate:"粤BDF411"},8421:{plate:"粤BDF421"},8430:{plate:"粤BDF430"},8447:{plate:"粤BDE447"},8458:{plate:"粤BDF458"},8470:{plate:"粤BDF470"},8471:{plate:"粤BDF471"},18447:{plate:"粤BDF447"}},geojson_line_1:[[113.99739584160139,22.610765716856296],[113.99773288526481,22.610577804306548],[113.99824514560808,22.609808813574297],[113.99899240486543,22.608186143427105],[113.99899684055141,22.608138484311375],[113.99876376465981,22.606584405046835],[113.9987454049567,22.606539955896604],[113.9983737643716,22.606046923598996],[113.99771305207776,22.60586005946536],[113.996462081496,22.60628164325351],[113.99540699384544,22.60655007340282],[113.99537457846512,22.606374521317747],[113.99533345805837,22.60631869878032],[113.99491868014185,22.60615102642152],[113.99446803578164,22.605922922486105],[113.993628105381,22.605432281601264],[113.99361283376653,22.605399929510398],[113.99427914343141,22.604297776694622],[113.99455101208882,22.604066349285663],[113.99481121659123,22.60381079129223],[113.99549648383878,22.60304833084697],[113.99570726599393,22.60298417975627],[113.99623267681147,22.60298349183956],[113.99686127008054,22.603078201644227],[113.9977201426685,22.603401409146592],[113.99788215074415,22.603408536156227],[113.99794417914393,22.60338145776082],[113.9980463074806,22.603268395934986],[113.99816665521513,22.602614977726315],[113.99835030416712,22.60216721735362],[113.99856193554633,22.601842951121434],[113.99881928525701,22.6015215956419],[113.9988344317295,22.601194082723367],[113.99895072783376,22.600790214181995],[113.9990602569799,22.600602634774226],[113.99921879840926,22.600476730796977],[113.99919877407567,22.60043325336671],[113.99802751236375,22.600038565633355],[113.99775839514615,22.599792681543633],[113.99730187808832,22.598960946075003],[113.99590977592047,22.5977773063799],[113.99576459924215,22.59751983095157],[113.99543299558397,22.59717440812865],[113.9951938686417,22.5966914370548],[113.99501583215859,22.59639577584673],[113.99463229185628,22.596104860560743],[113.99420385593578,22.595969591352997],[113.99378584507669,22.595967937443213],[113.99320018866534,22.59621976224022],[113.99265363550316,22.596738860232236],[113.99200633643709,22.59716671060916],[113.99157366427197,22.5971462468509],[113.99088482201618,22.596941863390235],[113.99038484213679,22.596998494112995],[113.99032102143205,22.597043977909916],[113.99019829041364,22.59753578294312],[113.99030286538937,22.59863964935582],[113.99048378356784,22.59907317753902],[113.99052006299269,22.59911721823263],[113.99075599101839,22.599276010611053],[113.99126127611241,22.599535900836155],[113.9917686585336,22.6000105337692],[113.99191211157755,22.60053218120178],[113.99183362959826,22.601016496848214],[113.99144872111891,22.60153952301182],[113.99077751816642,22.602118998056795],[113.99043902651476,22.60239072790739],[113.99010219314502,22.60332391993846]],geojson_line_2:[[113.9973489079054,22.61067741494136],[113.9976555155949,22.61051444868976],[113.9981618912118,22.60975341767644],[113.9988979465801,22.60815331611633],[113.9986648706885,22.60659923685179],[113.9983207115444,22.60613169032316],[113.9977156537446,22.60596002561628],[113.9964905851169,22.6063775771138],[113.9953277666447,22.60667341560261],[113.995278497141,22.60640224097063],[113.9934784038899,22.60548092977822],[113.99386414857948,22.604784676421257],[113.99419945106074,22.60426804504929],[113.99385306765333,22.603677155592816],[113.99298710913483,22.60350336409337],[113.99279885728298,22.603280910653833],[113.99233952276445,22.60296808489611],[113.99204584987558,22.60262745159568],[113.9915262747645,22.601612498395962],[113.9917196221943,22.601431625928],[113.9919172423369,22.60102266627295],[113.9920105698998,22.6005318195689],[113.9918969233072,22.59993661748595],[113.9914596783045,22.59960492109923]],gate_geojson:{},stations_geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[113.9902,22.60336]},properties:{name:"工学院 COE"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99153,22.599643]},properties:{name:"科研楼 Research Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.990399,22.597132]},properties:{name:"七号门 Gate7"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.992403,22.597011]},properties:{name:"行政楼 Administration Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.9944,22.59618]},properties:{name:"1号门 Gate1 (下行DN)"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99381,22.59604]},properties:{name:"1号门 Gate1 (上行UP)"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99585,22.59788]},properties:{name:"2号门 Gate2"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99878,22.60041]},properties:{name:"3号门 Gate3"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998329,22.601975]},properties:{name:"专家公寓 Guest Houses"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997811,22.603325]},properties:{name:"教工餐厅 Faculty Cafeteria"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995981,22.60293]},properties:{name:"社康中心 C.Health.Center"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.993824,22.604854]},properties:{name:"学生宿舍 Stu. Dormitories"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995238,22.606518]},properties:{name:"荔园 Lychee Hill"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.996732,22.606278]},properties:{name:"创园 Chuang Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998372,22.606102]},properties:{name:"慧园 Hui Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997473,22.610667]},properties:{name:"欣园 Joy Highland"}}]},bus_marker_arr:[],map:[],time_difference:0,timer:{}}),async created(){const e=await Rr.get("https://bus.sustcra.com/geojson/sustech_bldg.json");this.bldg_geojson=e.data;const t=await Rr.get("https://bus.sustcra.com/geojson/sustech_gate.json");this.gate_geojson=t.data,console.log("Fetch geojson of sustech complete")},methods:{async fetch_bus(){const e=await Rr.get("https://bus.sustcra.com/api/v2/monitor_osm/");this.bus_location_data_api=e.data;const t=new Date;console.log("bus location data fetched at "+parseInt(t.getTime()/1e3)),typeof this.bus_location_data_api[0].time_mt<"u"&&(this.time_difference=parseInt(t.getTime()/1e3-this.bus_location_data_api[0].time_mt),console.log("The clock drift is "+this.time_difference+" seconds")),this.update_location()},calculateBusAngle(e,t,r,n){const i=Ci([t,e]),a=Ci([n,r]);return aae(i,a)},findNearestPointOnSegment(e,t,r){const n=e[0]-t[0],i=e[1]-t[1],a=r[0]-t[0],o=r[1]-t[1],s=n*a+i*o,c=a*a+o*o,f=c!==0?s/c:-1;let p,v;return f<0?(p=t[0],v=t[1]):f>1?(p=r[0],v=r[1]):(p=t[0]+f*a,v=t[1]+f*o),[p,v]},findNearestSegment(e,t){let r=t[0],n=t[1],i=Number.MAX_VALUE;for(let a=0;a<t.length-1;a++){const o=t[a],s=t[a+1],c=this.findNearestPointOnSegment(e,o,s),f=this.calculateDistance(e,c);f<i&&(i=f,r=o,n=s)}return[r,n]},calculateDistance(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},update_location(){this.bus_marker_arr.forEach(e=>e.remove()),this.bus_marker_arr=[];for(let e=0;e<this.bus_location_data_api.length;e++){const t=this.bus_location_data_api[e];if(new Date().getTime()/1e3-t.time_mt<150){const r=[t.lng,t.lat];let n=0;const i=t.route_code.slice(-1)==="1";t.route_geojson=i?this.geojson_line_1:this.geojson_line_2;const a=this.findNearestSegment(r,t.route_geojson);n=this.calculateBusAngle(a[0][1],a[0][0],a[1][1],a[1][0]),n=t.route_dir===1?n:n-180;const o=document.createElement("div");o.className="marker",o.style.backgroundImage="url(https://bus.sustcra.com/bus-top-view.png)",o.style.width="30px",o.style.height="30px",o.style.backgroundSize="cover",o.style.cursor="pointer";const s=new Of.Marker({element:o}).setLngLat(r).setPopup(this.createPopup(t)).setRotation(parseInt(n)).addTo(this.map);this.bus_marker_arr.push(s)}}},createPopup(e){let t;const r=e.route_code.slice(-1);r==="1"?t=e.route_dir===0?"欣园 Joy Highland":"工学院 COE":r==="2"?t=e.route_dir===0?"欣园 Joy Highland":"科研楼 Research BLDG.":t="未知";const n=e.route_code.slice(-1)==="1"?"#f7911d":"#29abe2",i=`
      <div style="margin-top: 0; font-size: 14px; margin: 0; color: #333; font-weight: bold;">
        粤B${e.id.slice(2)}
      </div>
      <p style="font-size: 12px; margin: 0px 0; color: #666;">
        ${e.speed} km/h
      </p>
      <p style="margin: 0px 0; line-height: 1.4;">
        <span style="display: inline-block; background-color: ${n}; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">Line ${e.route_code.slice(-1)} 号线</span>
      </p>
      <p style="font-size: 12px; margin: 0px 0; color: #666;">
        To往: <b>${t}</b>
      </p>
      <p style="font-size: 12px; margin: 0px 0; color: #666;">
        下站: <b style="color: #333;">${e.next_station_string}</b>
      </p>
  `;return new Of.Popup({offset:20}).setHTML(i)},async refresh(){await this.fetch_bus()}},async mounted(){const e={lng:113.99373,lat:22.60308,zoom:14},t={bus_location_data:this.bus_location_data,geojson_line_1:this.geojson_line_1,geojson_line_2:this.geojson_line_2},r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,await r&&(console.log("dark mode enabled."),this.map_text_colour="#FFFFFF",this.map_style_url="https://mirrors.sustech.edu.cn/osm-tile/styles/osm-blue/style.json"),this.map=new Of.Map({container:this.$refs.myMap,style:this.map_style_url,center:[e.lng,e.lat],zoom:e.zoom});var n=new Of.NavigationControl;this.map.addControl(n,"top-left"),this.map.addControl(new Of.FullscreenControl,"top-left");class i{onAdd(f){this._map=f,this._container=document.createElement("div"),this._container.className="maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group";const p=this._createButton("interaction-lock");return this._container.appendChild(p),p.click(),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}_createButton(f){const p=window.document.createElement("button");return p.className=f,p.isInteractionEnabled=!0,p.addEventListener("click",v=>{p.isInteractionEnabled=!p.isInteractionEnabled,p.isInteractionEnabled?(this._map.dragPan.enable(),this._map.boxZoom.enable(),this._map.doubleClickZoom.enable(),this._map.touchZoomRotate.enable(),this._map.scrollZoom.enable(),p.innerHTML='<span class="maplibregl-ctrl-icon mapboxgl-ctrl-icon map-interaction-allow" aria-hidden="true"></span>'):(this._map.dragPan.disable(),this._map.boxZoom.disable(),this._map.doubleClickZoom.disable(),this._map.touchZoomRotate.disable(),this._map.scrollZoom.disable(),p.innerHTML='<span class="maplibregl-ctrl-icon mapboxgl-ctrl-icon map-interaction-lock" aria-hidden="true"></span>'),v.preventDefault(),v.stopPropagation()},!1),p}}const a=new i;this.map.addControl(a,"top-left");class o{onAdd(f){this.map=f,this.container=document.createElement("div"),this.container.className="maplibregl-ctrl maplibregl-ctrl-group",this.container.style.marginLeft="10px",this.container.style.marginBottom="10px";const p=document.createElement("button");return p.className="maplibregl-ctrl-icon",p.innerHTML="🌍",p.onclick=()=>{this.map.getLayoutProperty("raster-layer","visibility")==="visible"?this.map.setLayoutProperty("raster-layer","visibility","none"):this.map.setLayoutProperty("raster-layer","visibility","visible")},this.container.appendChild(p),this.container}onRemove(){this.container.parentNode.removeChild(this.container),this.map=void 0}}const s=new o;this.map.addControl(new Of.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),"top-right"),this.map.addControl(s,"top-right"),this.map.on("load",()=>{this.map.addSource("raster-tiles",{type:"raster",tiles:["https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}"],tileSize:256}),this.map.addLayer({id:"raster-layer",type:"raster",source:"raster-tiles",layout:{visibility:"none"},minzoom:0,maxzoom:22}),this.map.addSource("line1",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_1}}}),this.map.addSource("line2",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_2}}}),this.map.addLayer({id:"line1",type:"line",source:"line1",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f7911d","line-width":3}}),this.map.addLayer({id:"line2",type:"line",source:"line2",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#29abe2","line-width":3}});function c(f){return fetch(f).then(p=>p.blob()).then(p=>new Promise((v,y)=>{const _=new Image,S=URL.createObjectURL(p);_.onload=()=>{URL.revokeObjectURL(S),v(_)},_.onerror=()=>{URL.revokeObjectURL(S),y(new Error("Could not load image"))},_.src=S}))}Promise.all([c("https://bus.sustcra.com/station_icon.png"),c("https://bus.sustcra.com/bldg_icon.png"),c("https://bus.sustcra.com/gate_icon.png")]).then(f=>{this.map.addImage("bus-station",f[0]),this.map.addImage("bldg-icon",f[1]),this.map.addImage("gate-icon",f[2]),this.map.addSource("stations",{type:"geojson",data:this.stations_geojson}),this.map.addSource("bldgs",{type:"geojson",data:this.bldg_geojson}),this.map.addSource("gates",{type:"geojson",data:this.gate_geojson}),this.map.addLayer({id:"bus-station",type:"symbol",source:"stations",layout:{"icon-size":.075,"icon-image":"bus-station","text-field":["get","name"],"text-size":10,"text-offset":[0,1.25],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"bldgs",type:"symbol",source:"bldgs",layout:{"icon-size":.02,"icon-image":"bldg-icon","text-field":["get","name"],"text-size":9,"text-offset":[0,.3],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"gates",type:"symbol",source:"gates",layout:{"icon-size":.05,"icon-image":"gate-icon","text-field":["get","name"],"text-size":10,"text-offset":[0,.6],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]})}).catch(f=>{console.error("Error loading images:",f)})}),await this.fetch_bus(),this.timer=setInterval(()=>{this.refresh()},5e3)},async unmounted(){clearInterval(this.timer)}},sae={class:"map-container",ref:"myMap"};function lae(e,t,r,n,i,a){return rt(),Ct(Mr,null,[Nt("div",sae,null,512),Nt("span",null,"Time drift: "+br(e.time_difference)+" sec.",1)],64)}const uae=Dr(oae,[["render",lae],["__scopeId","data-v-7d32566e"],["__file","RealtimeMap.vue"]]),cae={name:"weather-span",data:()=>({text:""}),mounted(){this.load_weather()},methods:{load_weather(){Rr.get("https://api.sustech.online/weather").then(e=>{this.text=e.data.msg})}}},hae={id:"weather-container"},fae={id:"weather"};function dae(e,t,r,n,i,a){return rt(),Ct("div",hae,[Nt("span",fae,br(e.text),1)])}const pae=Dr(cae,[["render",dae],["__file","weather-span.vue"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lT=function(e,t){return lT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},lT(e,t)};function yt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");lT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mae=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),vae=function(){function e(){this.browser=new mae,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),pr=new vae;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(pr.wxa=!0,pr.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?pr.worker=!0:typeof navigator>"u"?(pr.node=!0,pr.svgSupported=!0):gae(navigator.userAgent,pr);function gae(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18),o&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}var HA=12,D6="sans-serif",Nu=HA+"px "+D6,yae=20,_ae=100,bae="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function xae(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-yae)/_ae;t[n]=i}return t}var wae=xae(bae),rp={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=rp.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||Nu),e.measureText(r);r=r||"",n=n||Nu;var a=/(\d+)px/.exec(n),o=a&&+a[1]||HA,s=0;if(n.indexOf("mono")>=0)s=o*r.length;else for(var c=0;c<r.length;c++){var f=wae[r[c]];s+=f==null?o:f*o}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},L6=np(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),k6=np(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),Dg=Object.prototype.toString,hb=Array.prototype,Sae=hb.forEach,Tae=hb.filter,UA=hb.slice,Cae=hb.map,BL=(function(){}).constructor,p_=BL?BL.prototype:null,jA="__proto__",Aae=2311;function R6(){return Aae++}function GA(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function Lr(e){if(e==null||typeof e!="object")return e;var t=e,r=Dg.call(e);if(r==="[object Array]"){if(!fv(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=Lr(e[n])}}else if(k6[r]){if(!fv(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!L6[r]&&!fv(e)&&!t1(e)){t={};for(var o in e)e.hasOwnProperty(o)&&o!==jA&&(t[o]=Lr(e[o]))}return t}function Ur(e,t,r){if(!or(t)||!or(e))return r?Lr(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==jA){var i=e[n],a=t[n];or(a)&&or(i)&&!Ft(a)&&!Ft(i)&&!t1(a)&&!t1(i)&&!FL(a)&&!FL(i)&&!fv(a)&&!fv(i)?Ur(i,a,r):(r||!(n in e))&&(e[n]=Lr(t[n]))}return e}function Mae(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=Ur(r,e[n],t);return r}function At(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==jA&&(e[r]=t[r]);return e}function rn(e,t,r){for(var n=Vr(t),i=0;i<n.length;i++){var a=n[i];(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}return e}function Wr(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function Eae(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function as(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var a=n[i];a!=="constructor"&&(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}else rn(e,t,r)}function Ha(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function Te(e,t,r){if(e&&t)if(e.forEach&&e.forEach===Sae)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}function Qt(e,t,r){if(!e)return[];if(!t)return WA(e);if(e.map&&e.map===Cae)return e.map(t,r);for(var n=[],i=0,a=e.length;i<a;i++)n.push(t.call(r,e[i],i,e));return n}function np(e,t,r,n){if(e&&t){for(var i=0,a=e.length;i<a;i++)r=t.call(n,r,e[i],i,e);return r}}function Fi(e,t,r){if(!e)return[];if(!t)return WA(e);if(e.filter&&e.filter===Tae)return e.filter(t,r);for(var n=[],i=0,a=e.length;i<a;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function Vr(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function Pae(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(UA.call(arguments)))}}var vr=p_&&ir(p_.bind)?p_.call.bind(p_.bind):Pae;function wn(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(UA.call(arguments)))}}function Ft(e){return Array.isArray?Array.isArray(e):Dg.call(e)==="[object Array]"}function ir(e){return typeof e=="function"}function Wt(e){return typeof e=="string"}function uT(e){return Dg.call(e)==="[object String]"}function Tn(e){return typeof e=="number"}function or(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function FL(e){return!!L6[Dg.call(e)]}function oo(e){return!!k6[Dg.call(e)]}function t1(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function fb(e){return e.colorStops!=null}function Iae(e){return e.image!=null}function r1(e){return e!==e}function Fd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function Er(e,t){return e??t}function v0(e,t,r){return e??t??r}function WA(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return UA.apply(e,t)}function O6(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function rs(e,t){if(!e)throw new Error(t)}function Es(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var z6="__ec_primitive__";function cT(e){e[z6]=!0}function fv(e){return e[z6]}var Dae=function(){function e(){this.data={}}return e.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,r){return this.data[t]=r,this},e.prototype.keys=function(){return Vr(this.data)},e.prototype.forEach=function(t){var r=this.data;for(var n in r)r.hasOwnProperty(n)&&t(r[n],n)},e}(),B6=typeof Map=="function";function Lae(){return B6?new Map:new Dae}var kae=function(){function e(t){var r=Ft(t);this.data=Lae();var n=this;t instanceof e?t.each(i):t&&Te(t,i);function i(a,o){r?n.set(a,o):n.set(o,a)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,r){return this.data.set(t,r),r},e.prototype.each=function(t,r){this.data.forEach(function(n,i){t.call(r,n,i)})},e.prototype.keys=function(){var t=this.data.keys();return B6?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function dr(e){return new kae(e)}function hT(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function db(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&At(r,t),r}function F6(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function $d(e,t){return e.hasOwnProperty(t)}function la(){}var g0=180/Math.PI;function ip(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Rae(e){return[e[0],e[1]]}function $L(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function $6(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function Oae(e){return Math.sqrt(zae(e))}function zae(e){return e[0]*e[0]+e[1]*e[1]}function kw(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function qA(e,t){var r=Oae(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function fT(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var ad=fT;function Bae(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var _d=Bae;function Po(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function od(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function sd(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Bf=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),Fae=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Bf(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,a=n-this._x,o=i-this._y;this._x=n,this._y=i,r.drift(a,o,t),this.handler.dispatchToElement(new Bf(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,c=this._dropTarget;this._dropTarget=s,r!==s&&(c&&s!==c&&this.handler.dispatchToElement(new Bf(c,t),"dragleave",t.event),s&&s!==c&&this.handler.dispatchToElement(new Bf(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Bf(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Bf(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}(),os=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var o=this._$eventProcessor;r!=null&&o&&o.normalizeQuery&&(r=o.normalizeQuery(r)),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===n)return this;var c={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},f=a[t].length-1,p=a[t][f];return p&&p.callAtLast?a[t].splice(f,0,c):a[t].push(c),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],a=0,o=n[t].length;a<o;a++)n[t][a].h!==r&&i.push(n[t][a]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=r.length,s=i.length,c=0;c<s;c++){var f=i[c];if(!(a&&a.filter&&f.query!=null&&!a.filter(t,f.query)))switch(o){case 0:f.h.call(f.ctx);break;case 1:f.h.call(f.ctx,r[0]);break;case 2:f.h.call(f.ctx,r[0],r[1]);break;default:f.h.apply(f.ctx,r);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=r.length,s=r[o-1],c=i.length,f=0;f<c;f++){var p=i[f];if(!(a&&a.filter&&p.query!=null&&!a.filter(t,p.query)))switch(o){case 0:p.h.call(s);break;case 1:p.h.call(s,r[0]);break;case 2:p.h.call(s,r[0],r[1]);break;default:p.h.apply(s,r.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}(),$ae=Math.log(2);function dT(e,t,r,n,i,a){var o=n+"-"+i,s=e.length;if(a.hasOwnProperty(o))return a[o];if(t===1){var c=Math.round(Math.log((1<<s)-1&~i)/$ae);return e[r][c]}for(var f=n|1<<r,p=r+1;n&1<<p;)p++;for(var v=0,y=0,_=0;y<s;y++){var S=1<<y;S&i||(v+=(_%2?-1:1)*e[r][y]*dT(e,t-1,p,f,i|S,a),_++)}return a[o]=v,v}function NL(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=dT(r,8,0,0,0,n);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*dT(r,7,o===0?1:0,1<<o,1<<s,n)/i*t[o];return function(c,f,p){var v=f*a[6]+p*a[7]+1;c[0]=(f*a[0]+p*a[1]+a[2])/v,c[1]=(f*a[3]+p*a[4]+a[5])/v}}}var VL="___zrEVENTSAVED",Rw=[];function Nae(e,t,r,n,i){return pT(Rw,t,n,i,!0)&&pT(e,r,Rw[0],Rw[1])}function pT(e,t,r,n,i){if(t.getBoundingClientRect&&pr.domSupported&&!N6(t)){var a=t[VL]||(t[VL]={}),o=Vae(t,a),s=Hae(o,a,i);if(s)return s(e,r,n),!0}return!1}function Vae(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,c=a%2,f=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[c]+":0",i[f]+":0",n[1-c]+":auto",i[1-f]+":auto",""].join("!important;"),e.appendChild(o),r.push(o)}return r}function Hae(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],a=t.srcCoords,o=[],s=[],c=!0,f=0;f<4;f++){var p=e[f].getBoundingClientRect(),v=2*f,y=p.left,_=p.top;o.push(y,_),c=c&&a&&y===a[v]&&_===a[v+1],s.push(e[f].offsetLeft,e[f].offsetTop)}return c&&i?i:(t.srcCoords=o,t[n]=r?NL(s,o):NL(o,s))}function N6(e){return e.nodeName.toUpperCase()==="CANVAS"}var Uae=/([&<>"'])/g,jae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function to(e){return e==null?"":(e+"").replace(Uae,function(t,r){return jae[r]})}var Gae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ow=[],Wae=pr.browser.firefox&&+pr.browser.version.split(".")[0]<39;function mT(e,t,r,n){return r=r||{},n?HL(e,t,r):Wae&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):HL(e,t,r),r}function HL(e,t,r){if(pr.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(N6(e)){var a=e.getBoundingClientRect();r.zrX=n-a.left,r.zrY=i-a.top;return}else if(pT(Ow,e,n,i)){r.zrX=Ow[0],r.zrY=Ow[1];return}}r.zrX=r.zrY=0}function ZA(e){return e||window.event}function yo(e,t,r){if(t=ZA(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var o=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];o&&mT(e,o,t,r)}else{mT(e,t,t,r);var a=qae(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&Gae.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function qae(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),a=n>0?-1:n<0?1:r>0?-1:1;return 3*i*a}function Zae(e,t,r,n){e.addEventListener(t,r,n)}function Xae(e,t,r,n){e.removeEventListener(t,r,n)}var Nd=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function UL(e){return e.which===2||e.which===3}var Yae=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(i){for(var a={points:[],touches:[],target:r,event:t},o=0,s=i.length;o<s;o++){var c=i[o],f=mT(n,c,{});a.points.push([f.zrX,f.zrY]),a.touches.push(c)}this._track.push(a)}},e.prototype._recognize=function(t){for(var r in zw)if(zw.hasOwnProperty(r)){var n=zw[r](this._track,t);if(n)return n}},e}();function jL(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function Kae(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var zw={pinch:function(e,t){var r=e.length;if(r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var a=jL(n)/jL(i);!isFinite(a)&&(a=1),t.pinchScale=a;var o=Kae(n);return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:e[0].target,event:t}}}}};function Xv(){return[1,0,0,1,0,0]}function XA(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Jae(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function bd(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],a=t[0]*r[2]+t[2]*r[3],o=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],c=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e}function vT(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function YA(e,t,r){var n=t[0],i=t[2],a=t[4],o=t[1],s=t[3],c=t[5],f=Math.sin(r),p=Math.cos(r);return e[0]=n*p+o*f,e[1]=-n*f+o*p,e[2]=i*p+s*f,e[3]=-i*f+p*s,e[4]=p*a+f*c,e[5]=p*c-f*a,e}function Qae(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function KA(e,t){var r=t[0],n=t[2],i=t[4],a=t[1],o=t[3],s=t[5],c=r*o-a*n;return c?(c=1/c,e[0]=o*c,e[1]=-a*c,e[2]=-n*c,e[3]=r*c,e[4]=(n*s-o*i)*c,e[5]=(a*i-r*s)*c,e):null}var dn=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var a=1-i;t.x=a*r.x+i*n.x,t.y=a*r.y+i*n.y},e}(),m_=Math.min,v_=Math.max,Tc=new dn,Cc=new dn,Ac=new dn,Mc=new dn,gm=new dn,ym=new dn,qr=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=m_(t.x,this.x),n=m_(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=v_(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=v_(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,a=Xv();return vT(a,a,[-r.x,-r.y]),Qae(a,a,[n,i]),vT(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,a=n.x+n.width,o=n.y,s=n.y+n.height,c=t.x,f=t.x+t.width,p=t.y,v=t.y+t.height,y=!(a<c||f<i||s<p||v<o);if(r){var _=1/0,S=0,E=Math.abs(a-c),P=Math.abs(f-i),I=Math.abs(s-p),D=Math.abs(v-o),L=Math.min(E,P),B=Math.min(I,D);a<c||f<i?L>S&&(S=L,E<P?dn.set(ym,-E,0):dn.set(ym,P,0)):L<_&&(_=L,E<P?dn.set(gm,E,0):dn.set(gm,-P,0)),s<p||v<o?B>S&&(S=B,I<D?dn.set(ym,0,-I):dn.set(ym,0,D)):L<_&&(_=L,I<D?dn.set(gm,0,I):dn.set(gm,0,-D))}return r&&dn.copy(r,y?gm:ym),y},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],a=n[3],o=n[4],s=n[5];t.x=r.x*i+o,t.y=r.y*a+s,t.width=r.width*i,t.height=r.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Tc.x=Ac.x=r.x,Tc.y=Mc.y=r.y,Cc.x=Mc.x=r.x+r.width,Cc.y=Ac.y=r.y+r.height,Tc.transform(n),Mc.transform(n),Cc.transform(n),Ac.transform(n),t.x=m_(Tc.x,Cc.x,Ac.x,Mc.x),t.y=m_(Tc.y,Cc.y,Ac.y,Mc.y);var c=v_(Tc.x,Cc.x,Ac.x,Mc.x),f=v_(Tc.y,Cc.y,Ac.y,Mc.y);t.width=c-t.x,t.height=f-t.y},e}(),V6="silent";function eoe(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:toe}}function toe(){Nd(this.event)}var roe=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(os),_m=function(){function e(t,r){this.x=t,this.y=r}return e}(),noe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Bw=new qr(0,0,0,0),H6=function(e){yt(t,e);function t(r,n,i,a,o){var s=e.call(this)||this;return s._hovered=new _m(0,0),s.storage=r,s.painter=n,s.painterRoot=a,s._pointerSize=o,i=i||new roe,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new Fae(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(Te(noe,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,a=U6(this,n,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var c=this._hovered=a?new _m(n,i):this.findHover(n,i),f=c.target,p=this.proxy;p.setCursor&&p.setCursor(f?f.cursor:"default"),s&&f!==s&&this.dispatchToElement(o,"mouseout",r),this.dispatchToElement(c,"mousemove",r),f&&f!==s&&this.dispatchToElement(c,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new _m(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var a=r.target;if(!(a&&a.silent)){for(var o="on"+n,s=eoe(n,r,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(n,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){typeof c[o]=="function"&&c[o].call(c,s),c.trigger&&c.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var a=this.storage.getDisplayList(),o=new _m(r,n);if(GL(a,o,r,n,i),this._pointerSize&&!o.target){for(var s=[],c=this._pointerSize,f=c/2,p=new qr(r-f,n-f,c,c),v=a.length-1;v>=0;v--){var y=a[v];y!==i&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(Bw.copy(y.getBoundingRect()),y.transform&&Bw.applyTransform(y.transform),Bw.intersect(p)&&s.push(y))}if(s.length)for(var _=4,S=Math.PI/12,E=Math.PI*2,P=0;P<f;P+=_)for(var I=0;I<E;I+=S){var D=r+P*Math.cos(I),L=n+P*Math.sin(I);if(GL(s,o,D,L,i),o.target)return o}}return o},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new Yae);var i=this._gestureMgr;n==="start"&&i.clear();var a=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),a){var o=a.type;r.gestureEvent=o;var s=new _m;s.target=a.target,this.dispatchToElement(s,o,a.event)}},t}(os);Te(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){H6.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=U6(this,r,n),a,o;if((e!=="mouseup"||!i)&&(a=this.findHover(r,n),o=a.target),e==="mousedown")this._downEl=o,this._downPoint=[t.zrX,t.zrY],this._upEl=o;else if(e==="mouseup")this._upEl=o;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||ad(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function ioe(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,a=!1;n;){if(n.ignoreClip&&(a=!0),!a){var o=n.getClipPath();if(o&&!o.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?V6:!0}return!1}function GL(e,t,r,n,i){for(var a=e.length-1;a>=0;a--){var o=e[a],s=void 0;if(o!==i&&!o.ignore&&(s=ioe(o,r,n))&&(!t.topTarget&&(t.topTarget=o),s!==V6)){t.target=o;break}}}function U6(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const aoe=H6;var j6=32,bm=7;function ooe(e){for(var t=0;e>=j6;)t|=e&1,e>>=1;return e+t}function WL(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;soe(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function soe(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function qL(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var a=e[n],o=t,s=n,c;o<s;)c=o+s>>>1,i(a,e[c])<0?s=c:o=c+1;var f=n-o;switch(f){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;f>0;)e[o+f]=e[o+f-1],f--}e[o]=a}}function Fw(e,t,r,n,i,a){var o=0,s=0,c=1;if(a(e,t[r+i])>0){for(s=n-i;c<s&&a(e,t[r+i+c])>0;)o=c,c=(c<<1)+1,c<=0&&(c=s);c>s&&(c=s),o+=i,c+=i}else{for(s=i+1;c<s&&a(e,t[r+i-c])<=0;)o=c,c=(c<<1)+1,c<=0&&(c=s);c>s&&(c=s);var f=o;o=i-c,c=i-f}for(o++;o<c;){var p=o+(c-o>>>1);a(e,t[r+p])>0?o=p+1:c=p}return c}function $w(e,t,r,n,i,a){var o=0,s=0,c=1;if(a(e,t[r+i])<0){for(s=i+1;c<s&&a(e,t[r+i-c])<0;)o=c,c=(c<<1)+1,c<=0&&(c=s);c>s&&(c=s);var f=o;o=i-c,c=i-f}else{for(s=n-i;c<s&&a(e,t[r+i+c])>=0;)o=c,c=(c<<1)+1,c<=0&&(c=s);c>s&&(c=s),o+=i,c+=i}for(o++;o<c;){var p=o+(c-o>>>1);a(e,t[r+p])<0?c=p:o=p+1}return c}function loe(e,t){var r=bm,n,i,a=0;e.length;var o=[];n=[],i=[];function s(_,S){n[a]=_,i[a]=S,a+=1}function c(){for(;a>1;){var _=a-2;if(_>=1&&i[_-1]<=i[_]+i[_+1]||_>=2&&i[_-2]<=i[_]+i[_-1])i[_-1]<i[_+1]&&_--;else if(i[_]>i[_+1])break;p(_)}}function f(){for(;a>1;){var _=a-2;_>0&&i[_-1]<i[_+1]&&_--,p(_)}}function p(_){var S=n[_],E=i[_],P=n[_+1],I=i[_+1];i[_]=E+I,_===a-3&&(n[_+1]=n[_+2],i[_+1]=i[_+2]),a--;var D=$w(e[P],e,S,E,0,t);S+=D,E-=D,E!==0&&(I=Fw(e[S+E-1],e,P,I,I-1,t),I!==0&&(E<=I?v(S,E,P,I):y(S,E,P,I)))}function v(_,S,E,P){var I=0;for(I=0;I<S;I++)o[I]=e[_+I];var D=0,L=E,B=_;if(e[B++]=e[L++],--P===0){for(I=0;I<S;I++)e[B+I]=o[D+I];return}if(S===1){for(I=0;I<P;I++)e[B+I]=e[L+I];e[B+P]=o[D];return}for(var U=r,V,N,G;;){V=0,N=0,G=!1;do if(t(e[L],o[D])<0){if(e[B++]=e[L++],N++,V=0,--P===0){G=!0;break}}else if(e[B++]=o[D++],V++,N=0,--S===1){G=!0;break}while((V|N)<U);if(G)break;do{if(V=$w(e[L],o,D,S,0,t),V!==0){for(I=0;I<V;I++)e[B+I]=o[D+I];if(B+=V,D+=V,S-=V,S<=1){G=!0;break}}if(e[B++]=e[L++],--P===0){G=!0;break}if(N=Fw(o[D],e,L,P,0,t),N!==0){for(I=0;I<N;I++)e[B+I]=e[L+I];if(B+=N,L+=N,P-=N,P===0){G=!0;break}}if(e[B++]=o[D++],--S===1){G=!0;break}U--}while(V>=bm||N>=bm);if(G)break;U<0&&(U=0),U+=2}if(r=U,r<1&&(r=1),S===1){for(I=0;I<P;I++)e[B+I]=e[L+I];e[B+P]=o[D]}else{if(S===0)throw new Error;for(I=0;I<S;I++)e[B+I]=o[D+I]}}function y(_,S,E,P){var I=0;for(I=0;I<P;I++)o[I]=e[E+I];var D=_+S-1,L=P-1,B=E+P-1,U=0,V=0;if(e[B--]=e[D--],--S===0){for(U=B-(P-1),I=0;I<P;I++)e[U+I]=o[I];return}if(P===1){for(B-=S,D-=S,V=B+1,U=D+1,I=S-1;I>=0;I--)e[V+I]=e[U+I];e[B]=o[L];return}for(var N=r;;){var G=0,Y=0,ee=!1;do if(t(o[L],e[D])<0){if(e[B--]=e[D--],G++,Y=0,--S===0){ee=!0;break}}else if(e[B--]=o[L--],Y++,G=0,--P===1){ee=!0;break}while((G|Y)<N);if(ee)break;do{if(G=S-$w(o[L],e,_,S,S-1,t),G!==0){for(B-=G,D-=G,S-=G,V=B+1,U=D+1,I=G-1;I>=0;I--)e[V+I]=e[U+I];if(S===0){ee=!0;break}}if(e[B--]=o[L--],--P===1){ee=!0;break}if(Y=P-Fw(e[D],o,0,P,P-1,t),Y!==0){for(B-=Y,L-=Y,P-=Y,V=B+1,U=L+1,I=0;I<Y;I++)e[V+I]=o[U+I];if(P<=1){ee=!0;break}}if(e[B--]=e[D--],--S===0){ee=!0;break}N--}while(G>=bm||Y>=bm);if(ee)break;N<0&&(N=0),N+=2}if(r=N,r<1&&(r=1),P===1){for(B-=S,D-=S,V=B+1,U=D+1,I=S-1;I>=0;I--)e[V+I]=e[U+I];e[B]=o[L]}else{if(P===0)throw new Error;for(U=B-(P-1),I=0;I<P;I++)e[U+I]=o[I]}}return{mergeRuns:c,forceMergeRuns:f,pushRun:s}}function y0(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var a=0;if(i<j6){a=WL(e,r,n,t),qL(e,r,n,r+a,t);return}var o=loe(e,t),s=ooe(i);do{if(a=WL(e,r,n,t),a<s){var c=i;c>s&&(c=s),qL(e,r,r+c,r+a,t),a=c}o.pushRun(r,a),o.mergeRuns(),i-=a,r+=a}while(i!==0);o.forceMergeRuns()}}var ro=1,Hm=2,Qf=4,ZL=!1;function Nw(){ZL||(ZL=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function XL(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var uoe=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=XL}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,a=r.length;i<a;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,y0(n,XL)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var a=i,o=t;a;)a.parent=o,a.updateTransform(),r.push(a),o=a,a=a.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),c=0;c<s.length;c++){var f=s[c];t.__dirty&&(f.__dirty|=ro),this._updateAndAddDisplayable(f,r,n)}t.__dirty=0}else{var p=t;r&&r.length?p.__clipPaths=r:p.__clipPaths&&p.__clipPaths.length>0&&(p.__clipPaths=[]),isNaN(p.z)&&(Nw(),p.z=0),isNaN(p.z2)&&(Nw(),p.z2=0),isNaN(p.zlevel)&&(Nw(),p.zlevel=0),this._displayList[this._displayListLen++]=p}var v=t.getDecalElement&&t.getDecalElement();v&&this._updateAndAddDisplayable(v,r,n);var y=t.getTextGuideLine();y&&this._updateAndAddDisplayable(y,r,n);var _=t.getTextContent();_&&this._updateAndAddDisplayable(_,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=Wr(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),G6;G6=pr.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const gT=G6;var dv={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-dv.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?dv.bounceIn(e*2)*.5:dv.bounceOut(e*2-1)*.5+.5}},g_=Math.pow,ku=Math.sqrt,n1=1e-8,W6=1e-4,YL=ku(3),y_=1/3,As=ip(),xo=ip(),xd=ip();function Mu(e){return e>-n1&&e<n1}function q6(e){return e>n1||e<-n1}function di(e,t,r,n,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*n+3*a*r)}function KL(e,t,r,n,i){var a=1-i;return 3*(((t-e)*a+2*(r-t)*i)*a+(n-r)*i*i)}function i1(e,t,r,n,i,a){var o=n+3*(t-r)-e,s=3*(r-t*2+e),c=3*(t-e),f=e-i,p=s*s-3*o*c,v=s*c-9*o*f,y=c*c-3*s*f,_=0;if(Mu(p)&&Mu(v))if(Mu(s))a[0]=0;else{var S=-c/s;S>=0&&S<=1&&(a[_++]=S)}else{var E=v*v-4*p*y;if(Mu(E)){var P=v/p,S=-s/o+P,I=-P/2;S>=0&&S<=1&&(a[_++]=S),I>=0&&I<=1&&(a[_++]=I)}else if(E>0){var D=ku(E),L=p*s+1.5*o*(-v+D),B=p*s+1.5*o*(-v-D);L<0?L=-g_(-L,y_):L=g_(L,y_),B<0?B=-g_(-B,y_):B=g_(B,y_);var S=(-s-(L+B))/(3*o);S>=0&&S<=1&&(a[_++]=S)}else{var U=(2*p*s-3*o*v)/(2*ku(p*p*p)),V=Math.acos(U)/3,N=ku(p),G=Math.cos(V),S=(-s-2*N*G)/(3*o),I=(-s+N*(G+YL*Math.sin(V)))/(3*o),Y=(-s+N*(G-YL*Math.sin(V)))/(3*o);S>=0&&S<=1&&(a[_++]=S),I>=0&&I<=1&&(a[_++]=I),Y>=0&&Y<=1&&(a[_++]=Y)}}return _}function Z6(e,t,r,n,i){var a=6*r-12*t+6*e,o=9*t+3*n-3*e-9*r,s=3*t-3*e,c=0;if(Mu(o)){if(q6(a)){var f=-s/a;f>=0&&f<=1&&(i[c++]=f)}}else{var p=a*a-4*o*s;if(Mu(p))i[0]=-a/(2*o);else if(p>0){var v=ku(p),f=(-a+v)/(2*o),y=(-a-v)/(2*o);f>=0&&f<=1&&(i[c++]=f),y>=0&&y<=1&&(i[c++]=y)}}return c}function a1(e,t,r,n,i,a){var o=(t-e)*i+e,s=(r-t)*i+t,c=(n-r)*i+r,f=(s-o)*i+o,p=(c-s)*i+s,v=(p-f)*i+f;a[0]=e,a[1]=o,a[2]=f,a[3]=v,a[4]=v,a[5]=p,a[6]=c,a[7]=n}function coe(e,t,r,n,i,a,o,s,c,f,p){var v,y=.005,_=1/0,S,E,P,I;As[0]=c,As[1]=f;for(var D=0;D<1;D+=.05)xo[0]=di(e,r,i,o,D),xo[1]=di(t,n,a,s,D),P=_d(As,xo),P<_&&(v=D,_=P);_=1/0;for(var L=0;L<32&&!(y<W6);L++)S=v-y,E=v+y,xo[0]=di(e,r,i,o,S),xo[1]=di(t,n,a,s,S),P=_d(xo,As),S>=0&&P<_?(v=S,_=P):(xd[0]=di(e,r,i,o,E),xd[1]=di(t,n,a,s,E),I=_d(xd,As),E<=1&&I<_?(v=E,_=I):y*=.5);return p&&(p[0]=di(e,r,i,o,v),p[1]=di(t,n,a,s,v)),ku(_)}function hoe(e,t,r,n,i,a,o,s,c){for(var f=e,p=t,v=0,y=1/c,_=1;_<=c;_++){var S=_*y,E=di(e,r,i,o,S),P=di(t,n,a,s,S),I=E-f,D=P-p;v+=Math.sqrt(I*I+D*D),f=E,p=P}return v}function Bi(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function yT(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function foe(e,t,r,n,i){var a=e-2*t+r,o=2*(t-e),s=e-n,c=0;if(Mu(a)){if(q6(o)){var f=-s/o;f>=0&&f<=1&&(i[c++]=f)}}else{var p=o*o-4*a*s;if(Mu(p)){var f=-o/(2*a);f>=0&&f<=1&&(i[c++]=f)}else if(p>0){var v=ku(p),f=(-o+v)/(2*a),y=(-o-v)/(2*a);f>=0&&f<=1&&(i[c++]=f),y>=0&&y<=1&&(i[c++]=y)}}return c}function X6(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function o1(e,t,r,n,i){var a=(t-e)*n+e,o=(r-t)*n+t,s=(o-a)*n+a;i[0]=e,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=r}function doe(e,t,r,n,i,a,o,s,c){var f,p=.005,v=1/0;As[0]=o,As[1]=s;for(var y=0;y<1;y+=.05){xo[0]=Bi(e,r,i,y),xo[1]=Bi(t,n,a,y);var _=_d(As,xo);_<v&&(f=y,v=_)}v=1/0;for(var S=0;S<32&&!(p<W6);S++){var E=f-p,P=f+p;xo[0]=Bi(e,r,i,E),xo[1]=Bi(t,n,a,E);var _=_d(xo,As);if(E>=0&&_<v)f=E,v=_;else{xd[0]=Bi(e,r,i,P),xd[1]=Bi(t,n,a,P);var I=_d(xd,As);P<=1&&I<v?(f=P,v=I):p*=.5}}return c&&(c[0]=Bi(e,r,i,f),c[1]=Bi(t,n,a,f)),ku(v)}function poe(e,t,r,n,i,a,o){for(var s=e,c=t,f=0,p=1/o,v=1;v<=o;v++){var y=v*p,_=Bi(e,r,i,y),S=Bi(t,n,a,y),E=_-s,P=S-c;f+=Math.sqrt(E*E+P*P),s=_,c=S}return f}var moe=/cubic-bezier\(([0-9,\.e ]+)\)/;function JA(e){var t=e&&moe.exec(e);if(t){var r=t[1].split(","),n=+Es(r[0]),i=+Es(r[1]),a=+Es(r[2]),o=+Es(r[3]);if(isNaN(n+i+a+o))return;var s=[];return function(c){return c<=0?0:c>=1?1:i1(0,n,a,1,c,s)&&di(0,i,o,1,s[0])}}}var voe=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||la,this.ondestroy=t.ondestroy||la,this.onrestart=t.onrestart||la,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,a=i/n;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var c=i%n;this._startTime=t-c,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=ir(t)?t:dv[t]||JA(t)},e}();const goe=voe;var Y6=function(){function e(t){this.value=t}return e}(),yoe=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new Y6(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),Lg=function(){function e(t){this._list=new yoe,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,a=null;if(i[t]==null){var o=n.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var c=n.head;n.remove(c),delete i[c.key],a=c.value,this._lastRemovedEntry=c}s?s.value=r:s=new Y6(r),s.key=t,n.insertEntry(s),i[t]=s}return a},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),JL={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ru(e){return e=Math.round(e),e<0?0:e>255?255:e}function _T(e){return e<0?0:e>1?1:e}function Vw(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Ru(parseFloat(t)/100*255):Ru(parseInt(t,10))}function pv(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?_T(parseFloat(t)/100):_T(parseFloat(t))}function Hw(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function __(e,t,r){return e+(t-e)*r}function vo(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function bT(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var K6=new Lg(20),b_=null;function Ff(e,t){b_&&bT(b_,t),b_=K6.put(e,b_||t.slice())}function Ls(e,t){if(e){t=t||[];var r=K6.get(e);if(r)return bT(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in JL)return bT(t,JL[n]),Ff(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(n.slice(1,4),16);if(!(a>=0&&a<=4095)){vo(t,0,0,0,1);return}return vo(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Ff(e,t),t}else if(i===7||i===9){var a=parseInt(n.slice(1,7),16);if(!(a>=0&&a<=16777215)){vo(t,0,0,0,1);return}return vo(t,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(n.slice(7),16)/255:1),Ff(e,t),t}return}var o=n.indexOf("("),s=n.indexOf(")");if(o!==-1&&s+1===i){var c=n.substr(0,o),f=n.substr(o+1,s-(o+1)).split(","),p=1;switch(c){case"rgba":if(f.length!==4)return f.length===3?vo(t,+f[0],+f[1],+f[2],1):vo(t,0,0,0,1);p=pv(f.pop());case"rgb":if(f.length>=3)return vo(t,Vw(f[0]),Vw(f[1]),Vw(f[2]),f.length===3?p:pv(f[3])),Ff(e,t),t;vo(t,0,0,0,1);return;case"hsla":if(f.length!==4){vo(t,0,0,0,1);return}return f[3]=pv(f[3]),QL(f,t),Ff(e,t),t;case"hsl":if(f.length!==3){vo(t,0,0,0,1);return}return QL(f,t),Ff(e,t),t;default:return}}vo(t,0,0,0,1)}}function QL(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=pv(e[1]),i=pv(e[2]),a=i<=.5?i*(n+1):i+n-i*n,o=i*2-a;return t=t||[],vo(t,Ru(Hw(o,a,r+1/3)*255),Ru(Hw(o,a,r)*255),Ru(Hw(o,a,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function ek(e,t){var r=Ls(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return pb(r,r.length===4?"rgba":"rgb")}}function _oe(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),a=Math.ceil(n),o=Ls(t[i]),s=Ls(t[a]),c=n-i,f=pb([Ru(__(o[0],s[0],c)),Ru(__(o[1],s[1],c)),Ru(__(o[2],s[2],c)),_T(__(o[3],s[3],c))],"rgba");return r?{color:f,leftIndex:i,rightIndex:a,value:n}:f}}function pb(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function s1(e,t){var r=Ls(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var l1=Math.round;function Yv(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=Ls(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t??1}}var tk=1e-4;function Eu(e){return e<tk&&e>-tk}function x_(e){return l1(e*1e3)/1e3}function xT(e){return l1(e*1e4)/1e4}function boe(e){return"matrix("+x_(e[0])+","+x_(e[1])+","+x_(e[2])+","+x_(e[3])+","+xT(e[4])+","+xT(e[5])+")"}var xoe={left:"start",right:"end",center:"middle",middle:"middle"};function woe(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function Soe(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function Toe(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function J6(e){return e&&!!e.image}function Coe(e){return e&&!!e.svgElement}function QA(e){return J6(e)||Coe(e)}function Q6(e){return e.type==="linear"}function eF(e){return e.type==="radial"}function tF(e){return e&&(e.type==="linear"||e.type==="radial")}function mb(e){return"url(#"+e+")"}function rF(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function nF(e){var t=e.x||0,r=e.y||0,n=(e.rotation||0)*g0,i=Er(e.scaleX,1),a=Er(e.scaleY,1),o=e.skewX||0,s=e.skewY||0,c=[];return(t||r)&&c.push("translate("+t+"px,"+r+"px)"),n&&c.push("rotate("+n+")"),(i!==1||a!==1)&&c.push("scale("+i+","+a+")"),(o||s)&&c.push("skew("+l1(o*g0)+"deg, "+l1(s*g0)+"deg)"),c.join(" ")}var Aoe=function(){return pr.hasGlobalWindow&&ir(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),wT=Array.prototype.slice;function gl(e,t,r){return(t-e)*r+e}function Uw(e,t,r,n){for(var i=t.length,a=0;a<i;a++)e[a]=gl(t[a],r[a],n);return e}function Moe(e,t,r,n){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=gl(t[o][s],r[o][s],n)}return e}function w_(e,t,r,n){for(var i=t.length,a=0;a<i;a++)e[a]=t[a]+r[a]*n;return e}function rk(e,t,r,n){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=t[o][s]+r[o][s]*n}return e}function Eoe(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,a=Math.min(r,n),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(r,n);s++)i.push({offset:o.offset,color:o.color.slice()})}function Poe(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var a=n.length,o=i.length;if(a!==o){var s=a>o;if(s)n.length=o;else for(var c=a;c<o;c++)n.push(r===1?i[c]:wT.call(i[c]))}for(var f=n[0]&&n[0].length,c=0;c<n.length;c++)if(r===1)isNaN(n[c])&&(n[c]=i[c]);else for(var p=0;p<f;p++)isNaN(n[c][p])&&(n[c][p]=i[c][p])}}function _0(e){if(Ha(e)){var t=e.length;if(Ha(e[0])){for(var r=[],n=0;n<t;n++)r.push(wT.call(e[n]));return r}return wT.call(e)}return e}function b0(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function Ioe(e){return Ha(e&&e[0])?2:1}var S_=0,x0=1,iF=2,Um=3,ST=4,TT=5,nk=6;function ik(e){return e===ST||e===TT}function T_(e){return e===x0||e===iF}var xm=[0,0,0,0],Doe=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=nk,c=r;if(Ha(r)){var f=Ioe(r);s=f,(f===1&&!Tn(r[0])||f===2&&!Tn(r[0][0]))&&(o=!0)}else if(Tn(r)&&!r1(r))s=S_;else if(Wt(r))if(!isNaN(+r))s=S_;else{var p=Ls(r);p&&(c=p,s=Um)}else if(fb(r)){var v=At({},c);v.colorStops=Qt(r.colorStops,function(_){return{offset:_.offset,color:Ls(_.color)}}),Q6(r)?s=ST:eF(r)&&(s=TT),c=v}a===0?this.valType=s:(s!==this.valType||s===nk)&&(o=!0),this.discrete=this.discrete||o;var y={time:t,value:c,rawValue:r,percent:0};return n&&(y.easing=n,y.easingFunc=ir(n)?n:dv[n]||JA(n)),i.push(y),y},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(E,P){return E.time-P.time});for(var i=this.valType,a=n.length,o=n[a-1],s=this.discrete,c=T_(i),f=ik(i),p=0;p<a;p++){var v=n[p],y=v.value,_=o.value;v.percent=v.time/t,s||(c&&p!==a-1?Poe(y,_,i):f&&Eoe(y.colorStops,_.colorStops))}if(!s&&i!==TT&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var S=n[0].value,p=0;p<a;p++)i===S_?n[p].additiveValue=n[p].value-S:i===Um?n[p].additiveValue=w_([],n[p].value,S,-1):T_(i)&&(n[p].additiveValue=i===x0?w_([],n[p].value,S,-1):rk([],n[p].value,S,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,c=this.propName,f=a===Um,p,v=this._lastFr,y=Math.min,_,S;if(s===1)_=S=o[0];else{if(r<0)p=0;else if(r<this._lastFrP){var E=y(v+1,s-1);for(p=E;p>=0&&!(o[p].percent<=r);p--);p=y(p,s-2)}else{for(p=v;p<s&&!(o[p].percent>r);p++);p=y(p-1,s-2)}S=o[p+1],_=o[p]}if(_&&S){this._lastFr=p,this._lastFrP=r;var P=S.percent-_.percent,I=P===0?1:y((r-_.percent)/P,1);S.easingFunc&&(I=S.easingFunc(I));var D=n?this._additiveValue:f?xm:t[c];if((T_(a)||f)&&!D&&(D=this._additiveValue=[]),this.discrete)t[c]=I<1?_.rawValue:S.rawValue;else if(T_(a))a===x0?Uw(D,_[i],S[i],I):Moe(D,_[i],S[i],I);else if(ik(a)){var L=_[i],B=S[i],U=a===ST;t[c]={type:U?"linear":"radial",x:gl(L.x,B.x,I),y:gl(L.y,B.y,I),colorStops:Qt(L.colorStops,function(N,G){var Y=B.colorStops[G];return{offset:gl(N.offset,Y.offset,I),color:b0(Uw([],N.color,Y.color,I))}}),global:B.global},U?(t[c].x2=gl(L.x2,B.x2,I),t[c].y2=gl(L.y2,B.y2,I)):t[c].r=gl(L.r,B.r,I)}else if(f)Uw(D,_[i],S[i],I),n||(t[c]=b0(D));else{var V=gl(_[i],S[i],I);n?this._additiveValue=V:t[c]=V}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===S_?t[n]=t[n]+i:r===Um?(Ls(t[n],xm),w_(xm,xm,i,1),t[n]=b0(xm)):r===x0?w_(t[n],t[n],i,1):r===iF&&rk(t[n],t[n],i,1)},e}(),eM=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){GA("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,Vr(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var a=this._tracks,o=0;o<n.length;o++){var s=n[o],c=a[s];if(!c){c=a[s]=new Doe(s);var f=void 0,p=this._getAdditiveTrack(s);if(p){var v=p.keyframes,y=v[v.length-1];f=y&&y.value,p.valType===Um&&f&&(f=b0(f))}else f=this._target[s];if(f==null)continue;t>0&&c.addKeyframe(0,_0(f),i),this._trackKeys.push(s)}c.addKeyframe(t,_0(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var a=n[i].getTrack(t);a&&(r=a)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],c=this._getAdditiveTrack(o),f=s.keyframes,p=f.length;if(s.prepare(i,c),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var v=f[p-1];v&&(r._target[s.propName]=v.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var y=new goe({life:i,loop:this._loop,delay:this._delay||0,onframe:function(_){r._started=2;var S=r._additiveAnimators;if(S){for(var E=!1,P=0;P<S.length;P++)if(S[P]._clip){E=!0;break}E||(r._additiveAnimators=null)}for(var P=0;P<n.length;P++)n[P].step(r._target,_);var I=r._onframeCbs;if(I)for(var P=0;P<I.length;P++)I[P](r._target,_)},ondestroy:function(){r._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),t&&y.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Qt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,a=0;a<t.length;a++){var o=n[t[a]];o&&!o.isFinished()&&(r?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!n[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var a=r[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,c=s[n?0:s.length-1];c&&(t[a]=_0(c.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||Vr(t);for(var n=0;n<r.length;n++){var i=r[n],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,t[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();function ld(){return new Date().getTime()}var Loe=function(e){yt(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=ld()-this._pausedTime,i=n-this._time,a=this._head;a;){var o=a.next,s=a.step(n,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(gT(n),!r._paused&&r.update())}gT(n)},t.prototype.start=function(){this._running||(this._time=ld(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=ld(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=ld()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new eM(r,n.loop);return this.addAnimator(i),i},t}(os),koe=300,jw=pr.domSupported,Gw=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Qt(e,function(i){var a=i.replace("mouse","pointer");return r.hasOwnProperty(a)?a:i});return{mouse:e,touch:t,pointer:n}}(),ak={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},ok=!1;function CT(e){var t=e.pointerType;return t==="pen"||t==="touch"}function Roe(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function Ww(e){e&&(e.zrByTouch=!0)}function Ooe(e,t){return yo(e.dom,new zoe(e,t),!0)}function aF(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var zoe=function(){function e(t,r){this.stopPropagation=la,this.stopImmediatePropagation=la,this.preventDefault=la,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),Xo={mousedown:function(e){e=yo(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=yo(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=yo(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=yo(this.dom,e);var t=e.toElement||e.relatedTarget;aF(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){ok=!0,e=yo(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){ok||(e=yo(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=yo(this.dom,e),Ww(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Xo.mousemove.call(this,e),Xo.mousedown.call(this,e)},touchmove:function(e){e=yo(this.dom,e),Ww(e),this.handler.processGesture(e,"change"),Xo.mousemove.call(this,e)},touchend:function(e){e=yo(this.dom,e),Ww(e),this.handler.processGesture(e,"end"),Xo.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<koe&&Xo.click.call(this,e)},pointerdown:function(e){Xo.mousedown.call(this,e)},pointermove:function(e){CT(e)||Xo.mousemove.call(this,e)},pointerup:function(e){Xo.mouseup.call(this,e)},pointerout:function(e){CT(e)||Xo.mouseout.call(this,e)}};Te(["click","dblclick","contextmenu"],function(e){Xo[e]=function(t){t=yo(this.dom,t),this.trigger(e,t)}});var AT={pointermove:function(e){CT(e)||AT.mousemove.call(this,e)},pointerup:function(e){AT.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Boe(e,t){var r=t.domHandlers;pr.pointerEventsSupported?Te(Gw.pointer,function(n){w0(t,n,function(i){r[n].call(e,i)})}):(pr.touchEventsSupported&&Te(Gw.touch,function(n){w0(t,n,function(i){r[n].call(e,i),Roe(t)})}),Te(Gw.mouse,function(n){w0(t,n,function(i){i=ZA(i),t.touching||r[n].call(e,i)})}))}function Foe(e,t){pr.pointerEventsSupported?Te(ak.pointer,r):pr.touchEventsSupported||Te(ak.mouse,r);function r(n){function i(a){a=ZA(a),aF(e,a.target)||(a=Ooe(e,a),t.domHandlers[n].call(e,a))}w0(t,n,i,{capture:!0})}}function w0(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,Zae(e.domTarget,t,r,n)}function qw(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&Xae(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var sk=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),$oe=function(e){yt(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new sk(r,Xo),jw&&(i._globalHandlerScope=new sk(document,AT)),Boe(i,i._localHandlerScope),i}return t.prototype.dispose=function(){qw(this._localHandlerScope),jw&&qw(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,jw&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?Foe(this,n):qw(n)}},t}(os);const Noe=$oe;var oF=1;pr.hasGlobalWindow&&(oF=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var u1=oF,MT=.4,ET="#333",PT="#ccc",Voe="#eee",lk=XA,uk=5e-5;function Ec(e){return e>uk||e<-uk}var Pc=[],$f=[],Zw=Xv(),Xw=Math.abs,Hoe=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Ec(this.rotation)||Ec(this.x)||Ec(this.y)||Ec(this.scaleX-1)||Ec(this.scaleY-1)||Ec(this.skewX)||Ec(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&(lk(n),this.invTransform=null);return}n=n||Xv(),r?this.getLocalTransform(n):lk(n),t&&(r?bd(n,t,n):Jae(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Pc);var n=Pc[0]<0?-1:1,i=Pc[1]<0?-1:1,a=((Pc[0]-n)*r+n)/Pc[0]||0,o=((Pc[1]-i)*r+i)/Pc[1]||0;t[0]*=a,t[1]*=a,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||Xv(),KA(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),a=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(a),r=Math.sqrt(r),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(bd($f,t.invTransform,r),r=$f);var n=this.originX,i=this.originY;(n||i)&&(Zw[4]=n,Zw[5]=i,bd($f,r,Zw),$f[4]-=n,$f[5]-=i,r=$f),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&Po(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&Po(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&Xw(t[0]-1)>1e-10&&Xw(t[3]-1)>1e-10?Math.sqrt(Xw(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){sF(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,a=t.scaleX,o=t.scaleY,s=t.anchorX,c=t.anchorY,f=t.rotation||0,p=t.x,v=t.y,y=t.skewX?Math.tan(t.skewX):0,_=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||c){var S=n+s,E=i+c;r[4]=-S*a-y*E*o,r[5]=-E*o-_*S*a}else r[4]=r[5]=0;return r[0]=a,r[3]=o,r[1]=_*a,r[2]=y*o,f&&YA(r,r,f),r[4]+=n+p,r[5]+=i+v,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Kv=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function sF(e,t){for(var r=0;r<Kv.length;r++){var n=Kv[r];e[n]=t[n]}}const tM=Hoe;var ck={};function no(e,t){t=t||Nu;var r=ck[t];r||(r=ck[t]=new Lg(500));var n=r.get(e);return n==null&&(n=rp.measureText(e,t).width,r.put(e,n)),n}function hk(e,t,r,n){var i=no(e,t),a=vb(t),o=jm(0,i,r),s=ed(0,a,n),c=new qr(o,s,i,a);return c}function rM(e,t,r,n){var i=((e||"")+"").split(`
`),a=i.length;if(a===1)return hk(i[0],t,r,n);for(var o=new qr(0,0,0,0),s=0;s<i.length;s++){var c=hk(i[s],t,r,n);s===0?o.copy(c):o.union(c)}return o}function jm(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function ed(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function vb(e){return no("国",e)}function Th(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function lF(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,a=r.height,o=r.width,s=a/2,c=r.x,f=r.y,p="left",v="top";if(n instanceof Array)c+=Th(n[0],r.width),f+=Th(n[1],r.height),p=null,v=null;else switch(n){case"left":c-=i,f+=s,p="right",v="middle";break;case"right":c+=i+o,f+=s,v="middle";break;case"top":c+=o/2,f-=i,p="center",v="bottom";break;case"bottom":c+=o/2,f+=a+i,p="center";break;case"inside":c+=o/2,f+=s,p="center",v="middle";break;case"insideLeft":c+=i,f+=s,v="middle";break;case"insideRight":c+=o-i,f+=s,p="right",v="middle";break;case"insideTop":c+=o/2,f+=i,p="center";break;case"insideBottom":c+=o/2,f+=a-i,p="center",v="bottom";break;case"insideTopLeft":c+=i,f+=i;break;case"insideTopRight":c+=o-i,f+=i,p="right";break;case"insideBottomLeft":c+=i,f+=a-i,v="bottom";break;case"insideBottomRight":c+=o-i,f+=a-i,p="right",v="bottom";break}return e=e||{},e.x=c,e.y=f,e.align=p,e.verticalAlign=v,e}var Yw="__zr_normal__",Kw=Kv.concat(["ignore"]),Uoe=np(Kv,function(e,t){return e[t]=!0,e},{ignore:!1}),Nf={},joe=new qr(0,0,0,0),nM=function(){function e(t){this.id=R6(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,a=r.innerTransformable,o=void 0,s=void 0,c=!1;a.parent=i?this:null;var f=!1;if(a.copyTransform(r),n.position!=null){var p=joe;n.layoutRect?p.copy(n.layoutRect):p.copy(this.getBoundingRect()),i||p.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Nf,n,p):lF(Nf,n,p),a.x=Nf.x,a.y=Nf.y,o=Nf.align,s=Nf.verticalAlign;var v=n.origin;if(v&&n.rotation!=null){var y=void 0,_=void 0;v==="center"?(y=p.width*.5,_=p.height*.5):(y=Th(v[0],p.width),_=Th(v[1],p.height)),f=!0,a.originX=-a.x+y+(i?0:p.x),a.originY=-a.y+_+(i?0:p.y)}}n.rotation!=null&&(a.rotation=n.rotation);var S=n.offset;S&&(a.x+=S[0],a.y+=S[1],f||(a.originX=-S[0],a.originY=-S[1]));var E=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,P=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),I=void 0,D=void 0,L=void 0;E&&this.canBeInsideText()?(I=n.insideFill,D=n.insideStroke,(I==null||I==="auto")&&(I=this.getInsideTextFill()),(D==null||D==="auto")&&(D=this.getInsideTextStroke(I),L=!0)):(I=n.outsideFill,D=n.outsideStroke,(I==null||I==="auto")&&(I=this.getOutsideFill()),(D==null||D==="auto")&&(D=this.getOutsideStroke(I),L=!0)),I=I||"#000",(I!==P.fill||D!==P.stroke||L!==P.autoStroke||o!==P.align||s!==P.verticalAlign)&&(c=!0,P.fill=I,P.stroke=D,P.autoStroke=L,P.align=o,P.verticalAlign=s,r.setDefaultTextStyle(P)),r.__dirty|=ro,c&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?PT:ET},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&Ls(r);n||(n=[255,255,255,1]);for(var i=n[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)n[o]=n[o]*i+(a?0:255)*(1-i);return n[3]=1,pb(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},At(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(or(t))for(var n=t,i=Vr(n),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,t[o])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==Yw)){var o=i.targetName,s=o?r[o]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,Kw)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var a=n[i];t[a]!=null&&!(a in r)&&(r[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(Yw,!1,t)},e.prototype.useState=function(t,r,n,i){var a=t===Yw,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,c=this.stateTransition;if(!(Wr(s,t)>=0&&(r||s.length===1))){var f;if(this.stateProxy&&!a&&(f=this.stateProxy(t)),f||(f=this.states&&this.states[t]),!f&&!a){GA("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(f);var p=!!(f&&f.hoverLayer||i);p&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,f,this._normalState,r,!n&&!this.__inHover&&c&&c.duration>0,c);var v=this._textContent,y=this._textGuide;return v&&v.useState(t,r,n,p),y&&y.useState(t,r,n,p),a?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!p&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ro),f}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],a=this.currentStates,o=t.length,s=o===a.length;if(s){for(var c=0;c<o;c++)if(t[c]!==a[c]){s=!1;break}}if(s)return;for(var c=0;c<o;c++){var f=t[c],p=void 0;this.stateProxy&&(p=this.stateProxy(f,t)),p||(p=this.states[f]),p&&i.push(p)}var v=i[o-1],y=!!(v&&v.hoverLayer||n);y&&this._toggleHoverLayerFlag(!0);var _=this._mergeStates(i),S=this.stateTransition;this.saveCurrentToNormalState(_),this._applyStateObj(t.join(","),_,this._normalState,!1,!r&&!this.__inHover&&S&&S.duration>0,S);var E=this._textContent,P=this._textGuide;E&&E.useStates(t,r,y),P&&P.useStates(t,r,y),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ro)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=Wr(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),a=Wr(i,t),o=Wr(i,r)>=0;a>=0?o?i.splice(a,1):i[a]=r:n&&!o&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var a=t[i];At(r,a),a.textConfig&&(n=n||{},At(n,a.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,a,o){var s=!(r&&i);r&&r.textConfig?(this.textConfig=At({},i?this.textConfig:n.textConfig),At(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var c={},f=!1,p=0;p<Kw.length;p++){var v=Kw[p],y=a&&Uoe[v];r&&r[v]!=null?y?(f=!0,c[v]=r[v]):this[v]=r[v]:s&&n[v]!=null&&(y?(f=!0,c[v]=n[v]):this[v]=n[v])}if(!a)for(var p=0;p<this.animators.length;p++){var _=this.animators[p],S=_.targetName;_.getLoop()||_.__changeFinalValue(S?(r||n)[S]:r||n)}f&&this._transitionState(t,c,o)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new tM,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),At(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=ro;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,a=new eM(i,r,n);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var a=i.animators,o=Wr(a,t);o>=0&&a.splice(o,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,a=[],o=0;o<i;o++){var s=n[o];!t||t===s.scope?s.stop(r):a.push(s)}return this.animators=a,this},e.prototype.animateTo=function(t,r,n){Jw(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){Jw(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var a=Jw(this,r,n,i),o=0;o<a.length;o++)a[o].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=ro;function r(n,i,a,o){Object.defineProperty(t,n,{get:function(){if(!this[i]){var c=this[i]=[];s(this,c)}return this[i]},set:function(c){this[a]=c[0],this[o]=c[1],this[i]=c,s(this,c)}});function s(c,f){Object.defineProperty(f,0,{get:function(){return c[a]},set:function(p){c[a]=p}}),Object.defineProperty(f,1,{get:function(){return c[o]},set:function(p){c[o]=p}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();as(nM,os);as(nM,tM);function Jw(e,t,r,n,i){r=r||{};var a=[];uF(e,"",e,t,r,n,a,i);var o=a.length,s=!1,c=r.done,f=r.aborted,p=function(){s=!0,o--,o<=0&&(s?c&&c():f&&f())},v=function(){o--,o<=0&&(s?c&&c():f&&f())};o||c&&c(),a.length>0&&r.during&&a[0].during(function(S,E){r.during(E)});for(var y=0;y<a.length;y++){var _=a[y];p&&_.done(p),v&&_.aborted(v),r.force&&_.duration(r.duration),_.start(r.easing)}return a}function Qw(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function Goe(e){return Ha(e[0])}function Woe(e,t,r){if(Ha(t[r]))if(Ha(e[r])||(e[r]=[]),oo(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),Qw(e[r],t[r],n))}else{var i=t[r],a=e[r],o=i.length;if(Goe(i))for(var s=i[0].length,c=0;c<o;c++)a[c]?Qw(a[c],i[c],s):a[c]=Array.prototype.slice.call(i[c]);else Qw(a,i,o);a.length=i.length}else e[r]=t[r]}function qoe(e,t){return e===t||Ha(e)&&Ha(t)&&Zoe(e,t)}function Zoe(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function uF(e,t,r,n,i,a,o,s){for(var c=Vr(n),f=i.duration,p=i.delay,v=i.additive,y=i.setToFinal,_=!or(a),S=e.animators,E=[],P=0;P<c.length;P++){var I=c[P],D=n[I];if(D!=null&&r[I]!=null&&(_||a[I]))if(or(D)&&!Ha(D)&&!fb(D)){if(t){s||(r[I]=D,e.updateDuringAnimation(t));continue}uF(e,I,r[I],D,i,a&&a[I],o,s)}else E.push(I);else s||(r[I]=D,e.updateDuringAnimation(t),E.push(I))}var L=E.length;if(!v&&L)for(var B=0;B<S.length;B++){var U=S[B];if(U.targetName===t){var V=U.stopTracks(E);if(V){var N=Wr(S,U);S.splice(N,1)}}}if(i.force||(E=Fi(E,function(J){return!qoe(n[J],r[J])}),L=E.length),L>0||i.force&&!o.length){var G=void 0,Y=void 0,ee=void 0;if(s){Y={},y&&(G={});for(var B=0;B<L;B++){var I=E[B];Y[I]=r[I],y?G[I]=n[I]:r[I]=n[I]}}else if(y){ee={};for(var B=0;B<L;B++){var I=E[B];ee[I]=_0(r[I]),Woe(r,n,I)}}var U=new eM(r,!1,!1,v?Fi(S,function(X){return X.targetName===t}):null);U.targetName=t,i.scope&&(U.scope=i.scope),y&&G&&U.whenWithKeys(0,G,E),ee&&U.whenWithKeys(0,ee,E),U.whenWithKeys(f??500,s?Y:n,E).delay(p||0),e.addAnimator(U,t),o.push(U)}}const cF=nM;var Rn=function(e){yt(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,a=i.indexOf(n);a>=0&&(i.splice(a,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=Wr(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,a=i[n];if(r&&r!==this&&r.parent!==this&&r!==a){i[n]=r,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,a=Wr(i,r);return a<0?this:(i.splice(a,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var a=r[i];n&&a.removeSelfFromZr(n),a.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];r.call(n,o,a)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=r.call(n,a);a.isGroup&&!o&&a.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new qr(0,0,0,0),i=r||this._children,a=[],o=null,s=0;s<i.length;s++){var c=i[s];if(!(c.ignore||c.invisible)){var f=c.getBoundingRect(),p=c.getLocalTransform(a);p?(qr.applyTransform(n,f,p),o=o||n.clone(),o.union(n)):(o=o||f.clone(),o.union(f))}}return o||n},t}(cF);Rn.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var S0={},hF={};function Xoe(e){delete hF[e]}function Yoe(e){if(!e)return!1;if(typeof e=="string")return s1(e,1)<MT;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=s1(t[i].color,1);return r/=n,r<MT}return!1}var Koe=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var a=new uoe,o=n.renderer||"canvas";S0[o]||(o=Vr(S0)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new S0[o](r,a,n,t),c=n.ssr||s.ssrOnly;this.storage=a,this.painter=s;var f=!pr.node&&!pr.worker&&!c?new Noe(s.getViewportRoot(),s.root):null,p=n.useCoarsePointer,v=p==null||p==="auto"?pr.touchEventsSupported:!!p,y=44,_;v&&(_=Er(n.pointerSize,y)),this.handler=new aoe(a,s,f,s.root,_),this.animation=new Loe({stage:{update:c?null:function(){return i._flush(!0)}}}),c||this.animation.start()}return e.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=Yoe(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=ld();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=ld();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Rn&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,Xoe(this.id)},e}();function fk(e,t){var r=new Koe(R6(),e,t);return hF[r.id]=r,r}function Joe(e,t){S0[e]=t}var dk=1e-4,fF=20;function Qoe(e){return e.replace(/^\s+|\s+$/g,"")}function na(e,t,r,n){var i=t[0],a=t[1],o=r[0],s=r[1],c=a-i,f=s-o;if(c===0)return f===0?o:(o+s)/2;if(n)if(c>0){if(e<=i)return o;if(e>=a)return s}else{if(e>=i)return o;if(e<=a)return s}else{if(e===i)return o;if(e===a)return s}return(e-i)/c*f+o}function pi(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Wt(e)?Qoe(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function ai(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),fF),e=(+e).toFixed(t),r?e:+e}function Gm(e){return e.sort(function(t,r){return t-r}),e}function Ps(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return ese(e)}function ese(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,a=t.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-n)}function dF(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),a=Math.round(r(Math.abs(t[1]-t[0]))/n),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function tse(e,t){var r=Math.max(Ps(e),Ps(t)),n=e+t;return r>fF?n:ai(n,r)}function pF(e){var t=Math.PI*2;return(e%t+t)%t}function c1(e){return e>-dk&&e<dk}var rse=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Il(e){if(e instanceof Date)return e;if(Wt(e)){var t=rse.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function nse(e){return Math.pow(10,iM(e))}function iM(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function mF(e,t){var r=iM(e),n=Math.pow(10,r),i=e/n,a;return t?i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10:i<1?a=1:i<2?a=2:i<3?a=3:i<5?a=5:a=10,e=a*n,r>=-20?+e.toFixed(r<0?-r:0):e}function h1(e){var t=parseFloat(e);return t==e&&(t!==0||!Wt(e)||e.indexOf("x")<=0)?t:NaN}function ise(e){return!isNaN(h1(e))}function vF(){return Math.round(Math.random()*9)}function gF(e,t){return t===0?e:gF(t,e%t)}function pk(e,t){return e==null?t:t==null?e:e*t/gF(e,t)}function Ba(e){throw new Error(e)}function mk(e,t,r){return(t-e)*r+e}var yF="series\0",ase="\0_ec_\0";function Ca(e){return e instanceof Array?e:e==null?[]:[e]}function IT(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var a=r[n];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var vk=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function kg(e){return or(e)&&!Ft(e)&&!(e instanceof Date)?e.value:e}function ose(e){return or(e)&&!(e instanceof Array)}function sse(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",a=r==="replaceAll";e=e||[],t=(t||[]).slice();var o=dr();Te(t,function(c,f){if(!or(c)){t[f]=null;return}});var s=lse(e,o,r);return(n||i)&&use(s,e,o,t),n&&cse(s,t),n||i?hse(s,t,i):a&&fse(s,t),dse(s),s}function lse(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var a=e[i];a&&a.id!=null&&t.set(a.id,i),n.push({existing:r==="replaceMerge"||Jv(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return n}function use(e,t,r,n){Te(n,function(i,a){if(!(!i||i.id==null)){var o=mv(i.id),s=r.get(o);if(s!=null){var c=e[s];rs(!c.newOption,'Duplicated option on id "'+o+'".'),c.newOption=i,c.existing=t[s],n[a]=null}}})}function cse(e,t){Te(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var a=e[i].existing;if(!e[i].newOption&&a&&(a.id==null||r.id==null)&&!Jv(r)&&!Jv(a)&&_F("name",a,r)){e[i].newOption=r,t[n]=null;return}}})}function hse(e,t,r){Te(t,function(n){if(n){for(var i,a=0;(i=e[a])&&(i.newOption||Jv(i.existing)||i.existing&&n.id!=null&&!_F("id",n,i.existing));)a++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),a++}})}function fse(e,t){Te(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function dse(e){var t=dr();Te(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),Te(e,function(r){var n=r.newOption;rs(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),Te(e,function(r,n){var i=r.existing,a=r.newOption,o=r.keyInfo;if(or(a)){if(o.name=a.name!=null?mv(a.name):i?i.name:yF+n,i)o.id=mv(i.id);else if(a.id!=null)o.id=mv(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(t.get(o.id))}t.set(o.id,r)}})}function _F(e,t,r){var n=ks(t[e],null),i=ks(r[e],null);return n!=null&&i!=null&&n===i}function mv(e){return ks(e,"")}function ks(e,t){return e==null?t:Wt(e)?e:Tn(e)||uT(e)?e+"":t}function aM(e){var t=e.name;return!!(t&&t.indexOf(yF))}function Jv(e){return e&&e.id!=null&&mv(e.id).indexOf(ase)===0}function pse(e,t,r){Te(e,function(n){var i=n.newOption;or(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=mse(t,i,n.existing,r))})}function mse(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function Ch(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return Ft(t.dataIndex)?Qt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return Ft(t.name)?Qt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Gn(){var e="__ec_inner_"+vse++;return function(t){return t[e]||(t[e]={})}}var vse=vF();function eS(e,t,r){var n=oM(t,r),i=n.mainTypeSpecified,a=n.queryOptionMap,o=n.others,s=o,c=r?r.defaultMainType:null;return!i&&c&&a.set(c,{}),a.each(function(f,p){var v=Rg(e,p,f,{useDefault:c===p,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[p+"Models"]=v.models,s[p+"Model"]=v.models[0]}),s}function oM(e,t){var r;if(Wt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=dr(),a={},o=!1;return Te(r,function(s,c){if(c==="dataIndex"||c==="dataIndexInside"){a[c]=s;return}var f=c.match(/^(\w+)(Index|Id|Name)$/)||[],p=f[1],v=(f[2]||"").toLowerCase();if(!(!p||!v||t&&t.includeMainTypes&&Wr(t.includeMainTypes,p)<0)){o=o||!!p;var y=i.get(p)||i.set(p,{});y[v]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var $a={useDefault:!0,enableAll:!1,enableNone:!1},gse={useDefault:!1,enableAll:!0,enableNone:!0};function Rg(e,t,r,n){n=n||$a;var i=r.index,a=r.id,o=r.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var c=void 0;return s.models=n.useDefault&&(c=e.getComponent(t))?[c]:[],s}return i==="none"||i===!1?(rs(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(rs(n.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=e.queryComponents({mainType:t,index:i,id:a,name:o}),s)}function bF(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function yse(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function _se(e){return e==="auto"?pr.domSupported?"html":"richText":e||"html"}function bse(e,t,r,n,i){var a=t==null||t==="auto";if(n==null)return n;if(Tn(n)){var o=mk(r||0,n,i);return ai(o,a?Math.max(Ps(r||0),Ps(n)):t)}else{if(Wt(n))return i<1?r:n;for(var s=[],c=r,f=n,p=Math.max(c?c.length:0,f.length),v=0;v<p;++v){var y=e.getDimensionInfo(v);if(y&&y.type==="ordinal")s[v]=(i<1&&c?c:f)[v];else{var _=c&&c[v]?c[v]:0,S=f[v],o=mk(_,S,i);s[v]=ai(o,a?Math.max(Ps(_),Ps(S)):t)}}return s}}var xse=".",Ic="___EC__COMPONENT__CONTAINER___",xF="___EC__EXTENDED_CLASS___";function Is(e){var t={main:"",sub:""};if(e){var r=e.split(xse);t.main=r[0]||"",t.sub=r[1]||""}return t}function wse(e){rs(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function Sse(e){return!!(e&&e[xF])}function sM(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return Tse(n)?i=function(a){yt(o,a);function o(){return a.apply(this,arguments)||this}return o}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},Eae(i,this)),At(i.prototype,r),i[xF]=!0,i.extend=this.extend,i.superCall=Mse,i.superApply=Ese,i.superClass=n,i}}function Tse(e){return ir(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function wF(e,t){e.extend=t.extend}var Cse=Math.round(Math.random()*10);function Ase(e){var t=["__\0is_clz",Cse++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function Mse(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function Ese(e,t,r){return this.superClass.prototype[t].apply(e,r)}function gb(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){wse(i),n.prototype.type=i;var a=Is(i);if(!a.sub)t[a.main]=n;else if(a.sub!==Ic){var o=r(a);o[a.sub]=n}}return n},e.getClass=function(n,i,a){var o=t[n];if(o&&o[Ic]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return o},e.getClassesByMainType=function(n){var i=Is(n),a=[],o=t[i.main];return o&&o[Ic]?Te(o,function(s,c){c!==Ic&&a.push(s)}):a.push(o),a},e.hasClass=function(n){var i=Is(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return Te(t,function(i,a){n.push(a)}),n},e.hasSubTypes=function(n){var i=Is(n),a=t[i.main];return a&&a[Ic]};function r(n){var i=t[n.main];return(!i||!i[Ic])&&(i=t[n.main]={},i[Ic]=!0),i}}function Qv(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,a){for(var o={},s=0;s<e.length;s++){var c=e[s][1];if(!(i&&Wr(i,c)>=0||a&&Wr(a,c)<0)){var f=n.getShallow(c,t);f!=null&&(o[e[s][0]]=f)}}return o}}var Pse=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Ise=Qv(Pse),Dse=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return Ise(this,t,r)},e}(),DT=new Lg(50);function Lse(e){if(typeof e=="string"){var t=DT.get(e);return t&&t.image}else return e}function lM(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var a=DT.get(e),o={hostEl:r,cb:n,cbPayload:i};return a?(t=a.image,!yb(t)&&a.pending.push(o)):(t=rp.loadImage(e,gk,gk),t.__zrImageSrc=e,DT.put(e,t.__cachedImgObj={image:t,pending:[o]})),t}else return e;else return t}function gk(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function yb(e){return e&&e.width&&e.height}var tS=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function kse(e,t,r,n,i){if(!t)return"";var a=(e+"").split(`
`);i=SF(t,r,n,i);for(var o=0,s=a.length;o<s;o++)a[o]=TF(a[o],i);return a.join(`
`)}function SF(e,t,r,n){n=n||{};var i=At({},n);i.font=t,r=Er(r,"..."),i.maxIterations=Er(n.maxIterations,2);var a=i.minChar=Er(n.minChar,0);i.cnCharWidth=no("国",t);var o=i.ascCharWidth=no("a",t);i.placeholder=Er(n.placeholder,"");for(var s=e=Math.max(0,e-1),c=0;c<a&&s>=o;c++)s-=o;var f=no(r,t);return f>s&&(r="",f=0),s=e-f,i.ellipsis=r,i.ellipsisWidth=f,i.contentWidth=s,i.containerWidth=e,i}function TF(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var a=no(e,n);if(a<=r)return e;for(var o=0;;o++){if(a<=i||o>=t.maxIterations){e+=t.ellipsis;break}var s=o===0?Rse(e,i,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*i/a):0;e=e.substr(0,s),a=no(e,n)}return e===""&&(e=t.placeholder),e}function Rse(e,t,r,n){for(var i=0,a=0,o=e.length;a<o&&i<t;a++){var s=e.charCodeAt(a);i+=0<=s&&s<=127?r:n}return a}function Ose(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,a=r==="truncate",o=vb(i),s=Er(t.lineHeight,o),c=!!t.backgroundColor,f=t.lineOverflow==="truncate",p=t.width,v;p!=null&&(r==="break"||r==="breakAll")?v=e?CF(e,t.font,p,r==="breakAll",0).lines:[]:v=e?e.split(`
`):[];var y=v.length*s,_=Er(t.height,y);if(y>_&&f){var S=Math.floor(_/s);v=v.slice(0,S)}if(e&&a&&p!=null)for(var E=SF(p,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),P=0;P<v.length;P++)v[P]=TF(v[P],E);for(var I=_,D=0,P=0;P<v.length;P++)D=Math.max(no(v[P],i),D);p==null&&(p=D);var L=D;return n&&(I+=n[0]+n[2],L+=n[1]+n[3],p+=n[1]+n[3]),c&&(L=p),{lines:v,height:_,outerWidth:L,outerHeight:I,lineHeight:s,calculatedLineHeight:o,contentWidth:D,contentHeight:y,width:p}}var zse=function(){function e(){}return e}(),yk=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),Bse=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function Fse(e,t){var r=new Bse;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,a=t.overflow,o=(a==="break"||a==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:a==="breakAll"}:null,s=tS.lastIndex=0,c;(c=tS.exec(e))!=null;){var f=c.index;f>s&&rS(r,e.substring(s,f),t,o),rS(r,c[2],t,o,c[1]),s=tS.lastIndex}s<e.length&&rS(r,e.substring(s,e.length),t,o);var p=[],v=0,y=0,_=t.padding,S=a==="truncate",E=t.lineOverflow==="truncate";function P(Oe,ct,_t){Oe.width=ct,Oe.lineHeight=_t,v+=_t,y=Math.max(y,ct)}e:for(var I=0;I<r.lines.length;I++){for(var D=r.lines[I],L=0,B=0,U=0;U<D.tokens.length;U++){var V=D.tokens[U],N=V.styleName&&t.rich[V.styleName]||{},G=V.textPadding=N.padding,Y=G?G[1]+G[3]:0,ee=V.font=N.font||t.font;V.contentHeight=vb(ee);var J=Er(N.height,V.contentHeight);if(V.innerHeight=J,G&&(J+=G[0]+G[2]),V.height=J,V.lineHeight=v0(N.lineHeight,t.lineHeight,J),V.align=N&&N.align||t.align,V.verticalAlign=N&&N.verticalAlign||"middle",E&&i!=null&&v+V.lineHeight>i){U>0?(D.tokens=D.tokens.slice(0,U),P(D,B,L),r.lines=r.lines.slice(0,I+1)):r.lines=r.lines.slice(0,I);break e}var X=N.width,ne=X==null||X==="auto";if(typeof X=="string"&&X.charAt(X.length-1)==="%")V.percentWidth=X,p.push(V),V.contentWidth=no(V.text,ee);else{if(ne){var we=N.backgroundColor,fe=we&&we.image;fe&&(fe=Lse(fe),yb(fe)&&(V.width=Math.max(V.width,fe.width*J/fe.height)))}var me=S&&n!=null?n-B:null;me!=null&&me<V.width?!ne||me<Y?(V.text="",V.width=V.contentWidth=0):(V.text=kse(V.text,me-Y,ee,t.ellipsis,{minChar:t.truncateMinChar}),V.width=V.contentWidth=no(V.text,ee)):V.contentWidth=no(V.text,ee)}V.width+=Y,B+=V.width,N&&(L=Math.max(L,V.lineHeight))}P(D,B,L)}r.outerWidth=r.width=Er(n,y),r.outerHeight=r.height=Er(i,v),r.contentHeight=v,r.contentWidth=y,_&&(r.outerWidth+=_[1]+_[3],r.outerHeight+=_[0]+_[2]);for(var I=0;I<p.length;I++){var V=p[I],Ve=V.percentWidth;V.width=parseInt(Ve,10)/100*r.width}return r}function rS(e,t,r,n,i){var a=t==="",o=i&&r.rich[i]||{},s=e.lines,c=o.font||r.font,f=!1,p,v;if(n){var y=o.padding,_=y?y[1]+y[3]:0;if(o.width!=null&&o.width!=="auto"){var S=Th(o.width,n.width)+_;s.length>0&&S+n.accumWidth>n.width&&(p=t.split(`
`),f=!0),n.accumWidth=S}else{var E=CF(t,c,n.width,n.breakAll,n.accumWidth);n.accumWidth=E.accumWidth+_,v=E.linesWidths,p=E.lines}}else p=t.split(`
`);for(var P=0;P<p.length;P++){var I=p[P],D=new zse;if(D.styleName=i,D.text=I,D.isLineHolder=!I&&!a,typeof o.width=="number"?D.width=o.width:D.width=v?v[P]:no(I,c),!P&&!f){var L=(s[s.length-1]||(s[0]=new yk)).tokens,B=L.length;B===1&&L[0].isLineHolder?L[0]=D:(I||!B||a)&&L.push(D)}else s.push(new yk([D]))}}function $se(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var Nse=np(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function Vse(e){return $se(e)?!!Nse[e]:!0}function CF(e,t,r,n,i){for(var a=[],o=[],s="",c="",f=0,p=0,v=0;v<e.length;v++){var y=e.charAt(v);if(y===`
`){c&&(s+=c,p+=f),a.push(s),o.push(p),s="",c="",f=0,p=0;continue}var _=no(y,t),S=n?!1:!Vse(y);if(a.length?p+_>r:i+p+_>r){p?(s||c)&&(S?(s||(s=c,c="",f=0,p=f),a.push(s),o.push(p-f),c+=y,f+=_,s="",p=f):(c&&(s+=c,c="",f=0),a.push(s),o.push(p),s=y,p=_)):S?(a.push(c),o.push(f),c=y,f=_):(a.push(y),o.push(_));continue}p+=_,S?(c+=y,f+=_):(c&&(s+=c,c="",f=0),s+=y)}return!a.length&&!s&&(s=e,c="",f=0),c&&(s+=c),s&&(a.push(s),o.push(p)),a.length===1&&(p+=i),{accumWidth:p,lines:a,linesWidths:o}}var LT="__zr_style_"+Math.round(Math.random()*10),gh={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},_b={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};gh[LT]=!0;var _k=["z","z2","invisible"],Hse=["invisible"],Use=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=Vr(r),i=0;i<n.length;i++){var a=n[i];a==="style"?this.useStyle(r[a]):e.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&jse(this,r,n)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var c=this.parent;c;){if(c.ignore)return!1;c=c.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();return a.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,c=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new qr(0,0,0,0)),n?qr.applyTransform(r,i,n):r.copy(i),(o||s||c)&&(r.width+=o*2+Math.abs(s),r.height+=o*2+Math.abs(c),r.x=Math.min(r.x,r.x+s-o),r.y=Math.min(r.y,r.y+c-o));var f=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-f),r.y=Math.floor(r.y-f),r.width=Math.ceil(r.width+1+f*2),r.height=Math.ceil(r.height+1+f*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new qr(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:At(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Hm,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Hm)},t.prototype.styleUpdated=function(){this.__dirty&=~Hm},t.prototype.createStyle=function(r){return db(gh,r)},t.prototype.useStyle=function(r){r[LT]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[LT]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,_k)},t.prototype._applyStateObj=function(r,n,i,a,o,s){e.prototype._applyStateObj.call(this,r,n,i,a,o,s);var c=!(n&&a),f;if(n&&n.style?o?a?f=n.style:(f=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(f,n.style)):(f=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(f,n.style)):c&&(f=i.style),f)if(o){var p=this.style;if(this.style=this.createStyle(c?{}:p),c)for(var v=Vr(p),y=0;y<v.length;y++){var _=v[y];_ in f&&(f[_]=f[_],this.style[_]=p[_])}for(var S=Vr(f),y=0;y<S.length;y++){var _=S[y];this.style[_]=this.style[_]}this._transitionState(r,{style:f},s,this.getAnimationStyleProps())}else this.useStyle(f);for(var E=this.__inHover?Hse:_k,y=0;y<E.length;y++){var _=E[y];n&&n[_]!=null?this[_]=n[_]:c&&i[_]!=null&&(this[_]=i[_])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var o=r[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return At(r,n),r},t.prototype.getAnimationStyleProps=function(){return _b},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=ro|Hm}(),t}(cF),nS=new qr(0,0,0,0),iS=new qr(0,0,0,0);function jse(e,t,r){return nS.copy(e.getBoundingRect()),e.transform&&nS.applyTransform(e.transform),iS.width=t,iS.height=r,!nS.intersect(iS)}const Og=Use;var wo=Math.min,So=Math.max,aS=Math.sin,oS=Math.cos,Dc=Math.PI*2,C_=ip(),A_=ip(),M_=ip();function bk(e,t,r,n,i,a){i[0]=wo(e,r),i[1]=wo(t,n),a[0]=So(e,r),a[1]=So(t,n)}var xk=[],wk=[];function Gse(e,t,r,n,i,a,o,s,c,f){var p=Z6,v=di,y=p(e,r,i,o,xk);c[0]=1/0,c[1]=1/0,f[0]=-1/0,f[1]=-1/0;for(var _=0;_<y;_++){var S=v(e,r,i,o,xk[_]);c[0]=wo(S,c[0]),f[0]=So(S,f[0])}y=p(t,n,a,s,wk);for(var _=0;_<y;_++){var E=v(t,n,a,s,wk[_]);c[1]=wo(E,c[1]),f[1]=So(E,f[1])}c[0]=wo(e,c[0]),f[0]=So(e,f[0]),c[0]=wo(o,c[0]),f[0]=So(o,f[0]),c[1]=wo(t,c[1]),f[1]=So(t,f[1]),c[1]=wo(s,c[1]),f[1]=So(s,f[1])}function Wse(e,t,r,n,i,a,o,s){var c=X6,f=Bi,p=So(wo(c(e,r,i),1),0),v=So(wo(c(t,n,a),1),0),y=f(e,r,i,p),_=f(t,n,a,v);o[0]=wo(e,i,y),o[1]=wo(t,a,_),s[0]=So(e,i,y),s[1]=So(t,a,_)}function qse(e,t,r,n,i,a,o,s,c){var f=od,p=sd,v=Math.abs(i-a);if(v%Dc<1e-4&&v>1e-4){s[0]=e-r,s[1]=t-n,c[0]=e+r,c[1]=t+n;return}if(C_[0]=oS(i)*r+e,C_[1]=aS(i)*n+t,A_[0]=oS(a)*r+e,A_[1]=aS(a)*n+t,f(s,C_,A_),p(c,C_,A_),i=i%Dc,i<0&&(i=i+Dc),a=a%Dc,a<0&&(a=a+Dc),i>a&&!o?a+=Dc:i<a&&o&&(i+=Dc),o){var y=a;a=i,i=y}for(var _=0;_<a;_+=Math.PI/2)_>i&&(M_[0]=oS(_)*r+e,M_[1]=aS(_)*n+t,f(s,M_,s),p(c,M_,c))}var tn={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Lc=[],kc=[],ys=[],lu=[],_s=[],bs=[],sS=Math.min,lS=Math.max,Rc=Math.cos,Oc=Math.sin,dl=Math.abs,kT=Math.PI,yu=kT*2,uS=typeof Float32Array<"u",wm=[];function cS(e){var t=Math.round(e/kT*1e8)/1e8;return t%2*kT}function Zse(e,t){var r=cS(e[0]);r<0&&(r+=yu);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=yu?i=r+yu:t&&r-i>=yu?i=r-yu:!t&&r>i?i=r+(yu-cS(r-i)):t&&r<i&&(i=r-(yu-cS(i-r))),e[0]=r,e[1]=i}var Vu=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=dl(n/u1/t)||0,this._uy=dl(n/u1/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(tn.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=dl(t-this._xi),i=dl(r-this._yi),a=n>this._ux||i>this._uy;if(this.addData(tn.L,t,r),this._ctx&&a&&this._ctx.lineTo(t,r),a)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var o=n*n+i*i;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=o)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,a,o){return this._drawPendingPt(),this.addData(tn.C,t,r,n,i,a,o),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,a,o),this._xi=a,this._yi=o,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(tn.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,a,o){this._drawPendingPt(),wm[0]=i,wm[1]=a,Zse(wm,o),i=wm[0],a=wm[1];var s=a-i;return this.addData(tn.A,t,r,n,n,i,s,0,o?0:1),this._ctx&&this._ctx.arc(t,r,n,i,a,o),this._xi=Rc(a)*n+t,this._yi=Oc(a)*n+r,this},e.prototype.arcTo=function(t,r,n,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,a),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(tn.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(tn.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&uS&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,a=0;a<r;a++)n+=t[a].len();uS&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var a=0;a<r;a++)for(var o=t[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},e.prototype.addData=function(t,r,n,i,a,o,s,c,f){if(this._saveData){var p=this.data;this._len+arguments.length>p.length&&(this._expandData(),p=this.data);for(var v=0;v<arguments.length;v++)p[this._len++]=arguments[v]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,uS&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){ys[0]=ys[1]=_s[0]=_s[1]=Number.MAX_VALUE,lu[0]=lu[1]=bs[0]=bs[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,a=0,o;for(o=0;o<this._len;){var s=t[o++],c=o===1;switch(c&&(r=t[o],n=t[o+1],i=r,a=n),s){case tn.M:r=i=t[o++],n=a=t[o++],_s[0]=i,_s[1]=a,bs[0]=i,bs[1]=a;break;case tn.L:bk(r,n,t[o],t[o+1],_s,bs),r=t[o++],n=t[o++];break;case tn.C:Gse(r,n,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],_s,bs),r=t[o++],n=t[o++];break;case tn.Q:Wse(r,n,t[o++],t[o++],t[o],t[o+1],_s,bs),r=t[o++],n=t[o++];break;case tn.A:var f=t[o++],p=t[o++],v=t[o++],y=t[o++],_=t[o++],S=t[o++]+_;o+=1;var E=!t[o++];c&&(i=Rc(_)*v+f,a=Oc(_)*y+p),qse(f,p,v,y,_,S,E,_s,bs),r=Rc(S)*v+f,n=Oc(S)*y+p;break;case tn.R:i=r=t[o++],a=n=t[o++];var P=t[o++],I=t[o++];bk(i,a,i+P,a+I,_s,bs);break;case tn.Z:r=i,n=a;break}od(ys,ys,_s),sd(lu,lu,bs)}return o===0&&(ys[0]=ys[1]=lu[0]=lu[1]=0),new qr(ys[0],ys[1],lu[0]-ys[0],lu[1]-ys[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,a=0,o=0,s=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var f=this._pathSegLen,p=0,v=0,y=0;y<r;){var _=t[y++],S=y===1;S&&(a=t[y],o=t[y+1],s=a,c=o);var E=-1;switch(_){case tn.M:a=s=t[y++],o=c=t[y++];break;case tn.L:{var P=t[y++],I=t[y++],D=P-a,L=I-o;(dl(D)>n||dl(L)>i||y===r-1)&&(E=Math.sqrt(D*D+L*L),a=P,o=I);break}case tn.C:{var B=t[y++],U=t[y++],P=t[y++],I=t[y++],V=t[y++],N=t[y++];E=hoe(a,o,B,U,P,I,V,N,10),a=V,o=N;break}case tn.Q:{var B=t[y++],U=t[y++],P=t[y++],I=t[y++];E=poe(a,o,B,U,P,I,10),a=P,o=I;break}case tn.A:var G=t[y++],Y=t[y++],ee=t[y++],J=t[y++],X=t[y++],ne=t[y++],we=ne+X;y+=1,t[y++],S&&(s=Rc(X)*ee+G,c=Oc(X)*J+Y),E=lS(ee,J)*sS(yu,Math.abs(ne)),a=Rc(we)*ee+G,o=Oc(we)*J+Y;break;case tn.R:{s=a=t[y++],c=o=t[y++];var fe=t[y++],me=t[y++];E=fe*2+me*2;break}case tn.Z:{var D=s-a,L=c-o;E=Math.sqrt(D*D+L*L),a=s,o=c;break}}E>=0&&(f[v++]=E,p+=E)}return this._pathLen=p,p},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,a=this._uy,o=this._len,s,c,f,p,v,y,_=r<1,S,E,P=0,I=0,D,L=0,B,U;if(!(_&&(this._pathSegLen||this._calculateLength(),S=this._pathSegLen,E=this._pathLen,D=r*E,!D)))e:for(var V=0;V<o;){var N=n[V++],G=V===1;switch(G&&(f=n[V],p=n[V+1],s=f,c=p),N!==tn.L&&L>0&&(t.lineTo(B,U),L=0),N){case tn.M:s=f=n[V++],c=p=n[V++],t.moveTo(f,p);break;case tn.L:{v=n[V++],y=n[V++];var Y=dl(v-f),ee=dl(y-p);if(Y>i||ee>a){if(_){var J=S[I++];if(P+J>D){var X=(D-P)/J;t.lineTo(f*(1-X)+v*X,p*(1-X)+y*X);break e}P+=J}t.lineTo(v,y),f=v,p=y,L=0}else{var ne=Y*Y+ee*ee;ne>L&&(B=v,U=y,L=ne)}break}case tn.C:{var we=n[V++],fe=n[V++],me=n[V++],Ve=n[V++],Oe=n[V++],ct=n[V++];if(_){var J=S[I++];if(P+J>D){var X=(D-P)/J;a1(f,we,me,Oe,X,Lc),a1(p,fe,Ve,ct,X,kc),t.bezierCurveTo(Lc[1],kc[1],Lc[2],kc[2],Lc[3],kc[3]);break e}P+=J}t.bezierCurveTo(we,fe,me,Ve,Oe,ct),f=Oe,p=ct;break}case tn.Q:{var we=n[V++],fe=n[V++],me=n[V++],Ve=n[V++];if(_){var J=S[I++];if(P+J>D){var X=(D-P)/J;o1(f,we,me,X,Lc),o1(p,fe,Ve,X,kc),t.quadraticCurveTo(Lc[1],kc[1],Lc[2],kc[2]);break e}P+=J}t.quadraticCurveTo(we,fe,me,Ve),f=me,p=Ve;break}case tn.A:var _t=n[V++],zt=n[V++],Mt=n[V++],ar=n[V++],rr=n[V++],wr=n[V++],Xt=n[V++],Ue=!n[V++],st=Mt>ar?Mt:ar,at=dl(Mt-ar)>.001,dt=rr+wr,vt=!1;if(_){var J=S[I++];P+J>D&&(dt=rr+wr*(D-P)/J,vt=!0),P+=J}if(at&&t.ellipse?t.ellipse(_t,zt,Mt,ar,Xt,rr,dt,Ue):t.arc(_t,zt,st,rr,dt,Ue),vt)break e;G&&(s=Rc(rr)*Mt+_t,c=Oc(rr)*ar+zt),f=Rc(dt)*Mt+_t,p=Oc(dt)*ar+zt;break;case tn.R:s=f=n[V],c=p=n[V+1],v=n[V++],y=n[V++];var It=n[V++],de=n[V++];if(_){var J=S[I++];if(P+J>D){var be=D-P;t.moveTo(v,y),t.lineTo(v+sS(be,It),y),be-=It,be>0&&t.lineTo(v+It,y+sS(be,de)),be-=de,be>0&&t.lineTo(v+lS(It-be,0),y+de),be-=It,be>0&&t.lineTo(v,y+lS(de-be,0));break e}P+=J}t.rect(v,y,It,de);break;case tn.Z:if(_){var J=S[I++];if(P+J>D){var X=(D-P)/J;t.lineTo(f*(1-X)+s*X,p*(1-X)+c*X);break e}P+=J}t.closePath(),f=s,p=c}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=tn,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function Cu(e,t,r,n,i,a,o){if(i===0)return!1;var s=i,c=0,f=e;if(o>t+s&&o>n+s||o<t-s&&o<n-s||a>e+s&&a>r+s||a<e-s&&a<r-s)return!1;if(e!==r)c=(t-n)/(e-r),f=(e*n-r*t)/(e-r);else return Math.abs(a-e)<=s/2;var p=c*a-o+f,v=p*p/(c*c+1);return v<=s/2*s/2}function Xse(e,t,r,n,i,a,o,s,c,f,p){if(c===0)return!1;var v=c;if(p>t+v&&p>n+v&&p>a+v&&p>s+v||p<t-v&&p<n-v&&p<a-v&&p<s-v||f>e+v&&f>r+v&&f>i+v&&f>o+v||f<e-v&&f<r-v&&f<i-v&&f<o-v)return!1;var y=coe(e,t,r,n,i,a,o,s,f,p,null);return y<=v/2}function AF(e,t,r,n,i,a,o,s,c){if(o===0)return!1;var f=o;if(c>t+f&&c>n+f&&c>a+f||c<t-f&&c<n-f&&c<a-f||s>e+f&&s>r+f&&s>i+f||s<e-f&&s<r-f&&s<i-f)return!1;var p=doe(e,t,r,n,i,a,s,c,null);return p<=f/2}var Sk=Math.PI*2;function E_(e){return e%=Sk,e<0&&(e+=Sk),e}var Sm=Math.PI*2;function Yse(e,t,r,n,i,a,o,s,c){if(o===0)return!1;var f=o;s-=e,c-=t;var p=Math.sqrt(s*s+c*c);if(p-f>r||p+f<r)return!1;if(Math.abs(n-i)%Sm<1e-4)return!0;if(a){var v=n;n=E_(i),i=E_(v)}else n=E_(n),i=E_(i);n>i&&(i+=Sm);var y=Math.atan2(c,s);return y<0&&(y+=Sm),y>=n&&y<=i||y+Sm>=n&&y+Sm<=i}function zc(e,t,r,n,i,a){if(a>t&&a>n||a<t&&a<n||n===t)return 0;var o=(a-t)/(n-t),s=n<t?1:-1;(o===1||o===0)&&(s=n<t?.5:-.5);var c=o*(r-e)+e;return c===i?1/0:c>i?s:0}var uu=Vu.CMD,Bc=Math.PI*2,Kse=1e-4;function Jse(e,t){return Math.abs(e-t)<Kse}var xa=[-1,-1,-1],bo=[-1,-1];function Qse(){var e=bo[0];bo[0]=bo[1],bo[1]=e}function ele(e,t,r,n,i,a,o,s,c,f){if(f>t&&f>n&&f>a&&f>s||f<t&&f<n&&f<a&&f<s)return 0;var p=i1(t,n,a,s,f,xa);if(p===0)return 0;for(var v=0,y=-1,_=void 0,S=void 0,E=0;E<p;E++){var P=xa[E],I=P===0||P===1?.5:1,D=di(e,r,i,o,P);D<c||(y<0&&(y=Z6(t,n,a,s,bo),bo[1]<bo[0]&&y>1&&Qse(),_=di(t,n,a,s,bo[0]),y>1&&(S=di(t,n,a,s,bo[1]))),y===2?P<bo[0]?v+=_<t?I:-I:P<bo[1]?v+=S<_?I:-I:v+=s<S?I:-I:P<bo[0]?v+=_<t?I:-I:v+=s<_?I:-I)}return v}function tle(e,t,r,n,i,a,o,s){if(s>t&&s>n&&s>a||s<t&&s<n&&s<a)return 0;var c=foe(t,n,a,s,xa);if(c===0)return 0;var f=X6(t,n,a);if(f>=0&&f<=1){for(var p=0,v=Bi(t,n,a,f),y=0;y<c;y++){var _=xa[y]===0||xa[y]===1?.5:1,S=Bi(e,r,i,xa[y]);S<o||(xa[y]<f?p+=v<t?_:-_:p+=a<v?_:-_)}return p}else{var _=xa[0]===0||xa[0]===1?.5:1,S=Bi(e,r,i,xa[0]);return S<o?0:a<t?_:-_}}function rle(e,t,r,n,i,a,o,s){if(s-=t,s>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);xa[0]=-c,xa[1]=c;var f=Math.abs(n-i);if(f<1e-4)return 0;if(f>=Bc-1e-4){n=0,i=Bc;var p=a?1:-1;return o>=xa[0]+e&&o<=xa[1]+e?p:0}if(n>i){var v=n;n=i,i=v}n<0&&(n+=Bc,i+=Bc);for(var y=0,_=0;_<2;_++){var S=xa[_];if(S+e>o){var E=Math.atan2(s,S),p=a?1:-1;E<0&&(E=Bc+E),(E>=n&&E<=i||E+Bc>=n&&E+Bc<=i)&&(E>Math.PI/2&&E<Math.PI*1.5&&(p=-p),y+=p)}}return y}function MF(e,t,r,n,i){for(var a=e.data,o=e.len(),s=0,c=0,f=0,p=0,v=0,y,_,S=0;S<o;){var E=a[S++],P=S===1;switch(E===uu.M&&S>1&&(r||(s+=zc(c,f,p,v,n,i))),P&&(c=a[S],f=a[S+1],p=c,v=f),E){case uu.M:p=a[S++],v=a[S++],c=p,f=v;break;case uu.L:if(r){if(Cu(c,f,a[S],a[S+1],t,n,i))return!0}else s+=zc(c,f,a[S],a[S+1],n,i)||0;c=a[S++],f=a[S++];break;case uu.C:if(r){if(Xse(c,f,a[S++],a[S++],a[S++],a[S++],a[S],a[S+1],t,n,i))return!0}else s+=ele(c,f,a[S++],a[S++],a[S++],a[S++],a[S],a[S+1],n,i)||0;c=a[S++],f=a[S++];break;case uu.Q:if(r){if(AF(c,f,a[S++],a[S++],a[S],a[S+1],t,n,i))return!0}else s+=tle(c,f,a[S++],a[S++],a[S],a[S+1],n,i)||0;c=a[S++],f=a[S++];break;case uu.A:var I=a[S++],D=a[S++],L=a[S++],B=a[S++],U=a[S++],V=a[S++];S+=1;var N=!!(1-a[S++]);y=Math.cos(U)*L+I,_=Math.sin(U)*B+D,P?(p=y,v=_):s+=zc(c,f,y,_,n,i);var G=(n-I)*B/L+I;if(r){if(Yse(I,D,B,U,U+V,N,t,G,i))return!0}else s+=rle(I,D,B,U,U+V,N,G,i);c=Math.cos(U+V)*L+I,f=Math.sin(U+V)*B+D;break;case uu.R:p=c=a[S++],v=f=a[S++];var Y=a[S++],ee=a[S++];if(y=p+Y,_=v+ee,r){if(Cu(p,v,y,v,t,n,i)||Cu(y,v,y,_,t,n,i)||Cu(y,_,p,_,t,n,i)||Cu(p,_,p,v,t,n,i))return!0}else s+=zc(y,v,y,_,n,i),s+=zc(p,_,p,v,n,i);break;case uu.Z:if(r){if(Cu(c,f,p,v,t,n,i))return!0}else s+=zc(c,f,p,v,n,i);c=p,f=v;break}}return!r&&!Jse(f,v)&&(s+=zc(c,f,p,v,n,i)||0),s!==0}function nle(e,t,r){return MF(e,0,!1,t,r)}function ile(e,t,r,n){return MF(e,t,!0,r,n)}var f1=rn({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},gh),ale={style:rn({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},_b.style)},hS=Kv.concat(["invisible","culling","z","z2","zlevel","parent"]),ole=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(c){r.buildPath(c,r.shape)}),i.silent=!0;var a=i.style;for(var o in n)a[o]!==n[o]&&(a[o]=n[o]);a.fill=n.fill?n.decal:null,a.decal=null,a.shadowColor=null,n.strokeFirst&&(a.stroke=null);for(var s=0;s<hS.length;++s)i[hS[s]]=this[hS[s]];i.__dirty|=ro}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=Vr(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<n.length;a++){var o=n[a],s=r[o];o==="style"?this.style?At(this.style,s):this.useStyle(s):o==="shape"?At(this.shape,s):e.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Wt(r)){var n=s1(r,0);return n>.5?ET:n>.2?Voe:PT}else if(r)return PT}return ET},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Wt(n)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=s1(r,0)<MT;if(a===o)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~Qf},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Vu(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&Qf)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),r=o.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var c=n.strokeNoScale?this.getLineScale():1,f=n.lineWidth;if(!this.hasFill()){var p=this.strokeContainThreshold;f=Math.max(f,p??4)}c>1e-10&&(s.width+=f/c,s.height+=f/c,s.x-=f/c/2,s.y-=f/c/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect(),o=this.style;if(r=i[0],n=i[1],a.contain(r,n)){var s=this.path;if(this.hasStroke()){var c=o.lineWidth,f=o.strokeNoScale?this.getLineScale():1;if(f>1e-10&&(this.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),ile(s,c/f,r,n)))return!0}if(this.hasFill())return nle(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Qf,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:At(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Qf)},t.prototype.createStyle=function(r){return db(f1,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=At({},this.shape))},t.prototype._applyStateObj=function(r,n,i,a,o,s){e.prototype._applyStateObj.call(this,r,n,i,a,o,s);var c=!(n&&a),f;if(n&&n.shape?o?a?f=n.shape:(f=At({},i.shape),At(f,n.shape)):(f=At({},a?this.shape:i.shape),At(f,n.shape)):c&&(f=i.shape),f)if(o){this.shape=At({},this.shape);for(var p={},v=Vr(f),y=0;y<v.length;y++){var _=v[y];typeof f[_]=="object"?this.shape[_]=f[_]:p[_]=f[_]}this._transitionState(r,{shape:p},s)}else this.shape=f,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var o=r[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return ale},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(a){yt(o,a);function o(s){var c=a.call(this,s)||this;return r.init&&r.init.call(c,s),c}return o.prototype.getDefaultStyle=function(){return Lr(r.style)},o.prototype.getDefaultShape=function(){return Lr(r.shape)},o}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=ro|Hm|Qf}(),t}(Og);const Qr=ole;var sle=rn({strokeFirst:!0,font:Nu,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},f1),EF=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return db(sle,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=rM(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var a=r.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Og);EF.prototype.type="tspan";const d1=EF;var lle=rn({x:0,y:0},gh),ule={style:rn({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},_b.style)};function cle(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var PF=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return db(lle,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var a=cle(n.image)?n.image:this.__image;if(!a)return 0;var o=r==="width"?"height":"width",s=n[o];return s==null?a[r]:a[r]/a[o]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return ule},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new qr(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Og);PF.prototype.type="image";const zl=PF;function hle(e,t){var r=t.x,n=t.y,i=t.width,a=t.height,o=t.r,s,c,f,p;i<0&&(r=r+i,i=-i),a<0&&(n=n+a,a=-a),typeof o=="number"?s=c=f=p=o:o instanceof Array?o.length===1?s=c=f=p=o[0]:o.length===2?(s=f=o[0],c=p=o[1]):o.length===3?(s=o[0],c=p=o[1],f=o[2]):(s=o[0],c=o[1],f=o[2],p=o[3]):s=c=f=p=0;var v;s+c>i&&(v=s+c,s*=i/v,c*=i/v),f+p>i&&(v=f+p,f*=i/v,p*=i/v),c+f>a&&(v=c+f,c*=a/v,f*=a/v),s+p>a&&(v=s+p,s*=a/v,p*=a/v),e.moveTo(r+s,n),e.lineTo(r+i-c,n),c!==0&&e.arc(r+i-c,n+c,c,-Math.PI/2,0),e.lineTo(r+i,n+a-f),f!==0&&e.arc(r+i-f,n+a-f,f,0,Math.PI/2),e.lineTo(r+p,n+a),p!==0&&e.arc(r+p,n+a-p,p,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var ud=Math.round;function IF(e,t,r){if(t){var n=t.x1,i=t.x2,a=t.y1,o=t.y2;e.x1=n,e.x2=i,e.y1=a,e.y2=o;var s=r&&r.lineWidth;return s&&(ud(n*2)===ud(i*2)&&(e.x1=e.x2=oh(n,s,!0)),ud(a*2)===ud(o*2)&&(e.y1=e.y2=oh(a,s,!0))),e}}function DF(e,t,r){if(t){var n=t.x,i=t.y,a=t.width,o=t.height;e.x=n,e.y=i,e.width=a,e.height=o;var s=r&&r.lineWidth;return s&&(e.x=oh(n,s,!0),e.y=oh(i,s,!0),e.width=Math.max(oh(n+a,s,!1)-e.x,a===0?0:1),e.height=Math.max(oh(i+o,s,!1)-e.y,o===0?0:1)),e}}function oh(e,t,r){if(!t)return e;var n=ud(e*2);return(n+ud(t))%2===0?n/2:(n+(r?1:-1))/2}var fle=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),dle={},LF=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new fle},t.prototype.buildPath=function(r,n){var i,a,o,s;if(this.subPixelOptimize){var c=DF(dle,n,this.style);i=c.x,a=c.y,o=c.width,s=c.height,c.r=n.r,n=c}else i=n.x,a=n.y,o=n.width,s=n.height;n.r?hle(r,n):r.rect(i,a,o,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Qr);LF.prototype.type="rect";const oi=LF;var Tk={fill:"#000"},Ck=2,ple={style:rn({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},_b.style)},kF=function(e){yt(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=Tk,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,gle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new qr(0,0,0,0),n=this._children,i=[],a=null,o=0;o<n.length;o++){var s=n[o],c=s.getBoundingRect(),f=s.getLocalTransform(i);f?(r.copy(c),r.applyTransform(f),a=a||r.clone(),a.union(r)):(a=a||c.clone(),a.union(c))}this._rect=a||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||Tk},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,a=r.rich||i&&{};return At(r,n),i&&a?(this._mergeRich(a,i),r.rich=a):a&&(r.rich=a),r},t.prototype._mergeRich=function(r,n){for(var i=Vr(n),a=0;a<i.length;a++){var o=i[a];r[o]=r[o]||{},At(r[o],n[o])}},t.prototype.getAnimationStyleProps=function(){return ple},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||Nu,i=r.padding,a=Lk(r),o=Ose(a,r),s=fS(r),c=!!r.backgroundColor,f=o.outerHeight,p=o.outerWidth,v=o.contentWidth,y=o.lines,_=o.lineHeight,S=this._defaultStyle,E=r.x||0,P=r.y||0,I=r.align||S.align||"left",D=r.verticalAlign||S.verticalAlign||"top",L=E,B=ed(P,o.contentHeight,D);if(s||i){var U=jm(E,p,I),V=ed(P,f,D);s&&this._renderBackground(r,r,U,V,p,f)}B+=_/2,i&&(L=Dk(E,I,i),D==="top"?B+=i[0]:D==="bottom"&&(B-=i[2]));for(var N=0,G=!1,Y=Ik("fill"in r?r.fill:(G=!0,S.fill)),ee=Pk("stroke"in r?r.stroke:!c&&(!S.autoStroke||G)?(N=Ck,S.stroke):null),J=r.textShadowBlur>0,X=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),ne=o.calculatedLineHeight,we=0;we<y.length;we++){var fe=this._getOrCreateChild(d1),me=fe.createStyle();fe.useStyle(me),me.text=y[we],me.x=L,me.y=B,I&&(me.textAlign=I),me.textBaseline="middle",me.opacity=r.opacity,me.strokeFirst=!0,J&&(me.shadowBlur=r.textShadowBlur||0,me.shadowColor=r.textShadowColor||"transparent",me.shadowOffsetX=r.textShadowOffsetX||0,me.shadowOffsetY=r.textShadowOffsetY||0),me.stroke=ee,me.fill=Y,ee&&(me.lineWidth=r.lineWidth||N,me.lineDash=r.lineDash,me.lineDashOffset=r.lineDashOffset||0),me.font=n,Mk(me,r),B+=_,X&&fe.setBoundingRect(new qr(jm(me.x,r.width,me.textAlign),ed(me.y,ne,me.textBaseline),v,ne))}},t.prototype._updateRichTexts=function(){var r=this.style,n=Lk(r),i=Fse(n,r),a=i.width,o=i.outerWidth,s=i.outerHeight,c=r.padding,f=r.x||0,p=r.y||0,v=this._defaultStyle,y=r.align||v.align,_=r.verticalAlign||v.verticalAlign,S=jm(f,o,y),E=ed(p,s,_),P=S,I=E;c&&(P+=c[3],I+=c[0]);var D=P+a;fS(r)&&this._renderBackground(r,r,S,E,o,s);for(var L=!!r.backgroundColor,B=0;B<i.lines.length;B++){for(var U=i.lines[B],V=U.tokens,N=V.length,G=U.lineHeight,Y=U.width,ee=0,J=P,X=D,ne=N-1,we=void 0;ee<N&&(we=V[ee],!we.align||we.align==="left");)this._placeToken(we,r,G,I,J,"left",L),Y-=we.width,J+=we.width,ee++;for(;ne>=0&&(we=V[ne],we.align==="right");)this._placeToken(we,r,G,I,X,"right",L),Y-=we.width,X-=we.width,ne--;for(J+=(a-(J-P)-(D-X)-Y)/2;ee<=ne;)we=V[ee],this._placeToken(we,r,G,I,J+we.width/2,"center",L),J+=we.width,ee++;I+=G}},t.prototype._placeToken=function(r,n,i,a,o,s,c){var f=n.rich[r.styleName]||{};f.text=r.text;var p=r.verticalAlign,v=a+i/2;p==="top"?v=a+r.height/2:p==="bottom"&&(v=a+i-r.height/2);var y=!r.isLineHolder&&fS(f);y&&this._renderBackground(f,n,s==="right"?o-r.width:s==="center"?o-r.width/2:o,v-r.height/2,r.width,r.height);var _=!!f.backgroundColor,S=r.textPadding;S&&(o=Dk(o,s,S),v-=r.height/2-S[0]-r.innerHeight/2);var E=this._getOrCreateChild(d1),P=E.createStyle();E.useStyle(P);var I=this._defaultStyle,D=!1,L=0,B=Ik("fill"in f?f.fill:"fill"in n?n.fill:(D=!0,I.fill)),U=Pk("stroke"in f?f.stroke:"stroke"in n?n.stroke:!_&&!c&&(!I.autoStroke||D)?(L=Ck,I.stroke):null),V=f.textShadowBlur>0||n.textShadowBlur>0;P.text=r.text,P.x=o,P.y=v,V&&(P.shadowBlur=f.textShadowBlur||n.textShadowBlur||0,P.shadowColor=f.textShadowColor||n.textShadowColor||"transparent",P.shadowOffsetX=f.textShadowOffsetX||n.textShadowOffsetX||0,P.shadowOffsetY=f.textShadowOffsetY||n.textShadowOffsetY||0),P.textAlign=s,P.textBaseline="middle",P.font=r.font||Nu,P.opacity=v0(f.opacity,n.opacity,1),Mk(P,f),U&&(P.lineWidth=v0(f.lineWidth,n.lineWidth,L),P.lineDash=Er(f.lineDash,n.lineDash),P.lineDashOffset=n.lineDashOffset||0,P.stroke=U),B&&(P.fill=B);var N=r.contentWidth,G=r.contentHeight;E.setBoundingRect(new qr(jm(P.x,N,P.textAlign),ed(P.y,G,P.textBaseline),N,G))},t.prototype._renderBackground=function(r,n,i,a,o,s){var c=r.backgroundColor,f=r.borderWidth,p=r.borderColor,v=c&&c.image,y=c&&!v,_=r.borderRadius,S=this,E,P;if(y||r.lineHeight||f&&p){E=this._getOrCreateChild(oi),E.useStyle(E.createStyle()),E.style.fill=null;var I=E.shape;I.x=i,I.y=a,I.width=o,I.height=s,I.r=_,E.dirtyShape()}if(y){var D=E.style;D.fill=c||null,D.fillOpacity=Er(r.fillOpacity,1)}else if(v){P=this._getOrCreateChild(zl),P.onload=function(){S.dirtyStyle()};var L=P.style;L.image=c.image,L.x=i,L.y=a,L.width=o,L.height=s}if(f&&p){var D=E.style;D.lineWidth=f,D.stroke=p,D.strokeOpacity=Er(r.strokeOpacity,1),D.lineDash=r.borderDash,D.lineDashOffset=r.borderDashOffset||0,E.strokeContainThreshold=0,E.hasFill()&&E.hasStroke()&&(D.strokeFirst=!0,D.lineWidth*=2)}var B=(E||P).style;B.shadowBlur=r.shadowBlur||0,B.shadowColor=r.shadowColor||"transparent",B.shadowOffsetX=r.shadowOffsetX||0,B.shadowOffsetY=r.shadowOffsetY||0,B.opacity=v0(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return OF(r)&&(n=[r.fontStyle,r.fontWeight,RF(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&Es(n)||r.textFont||r.font},t}(Og),mle={left:!0,right:1,center:1},vle={top:1,bottom:1,middle:1},Ak=["fontStyle","fontWeight","fontSize","fontFamily"];function RF(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?HA+"px":e+"px"}function Mk(e,t){for(var r=0;r<Ak.length;r++){var n=Ak[r],i=t[n];i!=null&&(e[n]=i)}}function OF(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function gle(e){return Ek(e),Te(e.rich,Ek),e}function Ek(e){if(e){e.font=kF.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||mle[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||vle[r]?r:"top";var n=e.padding;n&&(e.padding=O6(e.padding))}}function Pk(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function Ik(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function Dk(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function Lk(e){var t=e.text;return t!=null&&(t+=""),t}function fS(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const ca=kF;var an=Gn(),yle=function(e,t,r,n){if(n){var i=an(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(a){var o=an(a);o.seriesIndex=e,o.dataIndex=r,o.dataType=t})}},kk=1,Rk={},zF=Gn(),uM=Gn(),cM=0,bb=1,xb=2,ko=["emphasis","blur","select"],Ok=["normal","emphasis","blur","select"],_le=10,ble=9,yh="highlight",T0="downplay",vv="select",C0="unselect",gv="toggleSelect";function Vf(e){return e!=null&&e!=="none"}var zk=new Lg(100);function Bk(e){if(Wt(e)){var t=zk.get(e);return t||(t=ek(e,-.1),zk.put(e,t)),t}else if(fb(e)){var r=At({},e);return r.colorStops=Qt(e.colorStops,function(n){return{offset:n.offset,color:ek(n.color,-.1)}}),r}return e}function wb(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function BF(e){wb(e,"emphasis",xb)}function FF(e){e.hoverState===xb&&wb(e,"normal",cM)}function hM(e){wb(e,"blur",bb)}function $F(e){e.hoverState===bb&&wb(e,"normal",cM)}function xle(e){e.selected=!0}function wle(e){e.selected=!1}function Fk(e,t,r){t(e,r)}function Bl(e,t,r){Fk(e,t,r),e.isGroup&&e.traverse(function(n){Fk(n,t,r)})}function $k(e,t){switch(t){case"emphasis":e.hoverState=xb;break;case"normal":e.hoverState=cM;break;case"blur":e.hoverState=bb;break;case"select":e.selected=!0}}function Sle(e,t,r,n){for(var i=e.style,a={},o=0;o<t.length;o++){var s=t[o],c=i[s];a[s]=c??(n&&n[s])}for(var o=0;o<e.animators.length;o++){var f=e.animators[o];f.__fromStateTransition&&f.__fromStateTransition.indexOf(r)<0&&f.targetName==="style"&&f.saveTo(a,t)}return a}function Tle(e,t,r,n){var i=r&&Wr(r,"select")>=0,a=!1;if(e instanceof Qr){var o=zF(e),s=i&&o.selectFill||o.normalFill,c=i&&o.selectStroke||o.normalStroke;if(Vf(s)||Vf(c)){n=n||{};var f=n.style||{};f.fill==="inherit"?(a=!0,n=At({},n),f=At({},f),f.fill=s):!Vf(f.fill)&&Vf(s)?(a=!0,n=At({},n),f=At({},f),f.fill=Bk(s)):!Vf(f.stroke)&&Vf(c)&&(a||(n=At({},n),f=At({},f)),f.stroke=Bk(c)),n.style=f}}if(n&&n.z2==null){a||(n=At({},n));var p=e.z2EmphasisLift;n.z2=e.z2+(p??_le)}return n}function Cle(e,t,r){if(r&&r.z2==null){r=At({},r);var n=e.z2SelectLift;r.z2=e.z2+(n??ble)}return r}function Ale(e,t,r){var n=Wr(e.currentStates,t)>=0,i=e.style.opacity,a=n?null:Sle(e,["opacity"],t,{opacity:1});r=r||{};var o=r.style||{};return o.opacity==null&&(r=At({},r),o=At({opacity:n?i:a.opacity*.1},o),r.style=o),r}function dS(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return Tle(this,e,t,r);if(e==="blur")return Ale(this,e,r);if(e==="select")return Cle(this,e,r)}return r}function Mle(e){e.stateProxy=dS;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=dS),r&&(r.stateProxy=dS)}function Nk(e,t){!UF(e,t)&&!e.__highByOuter&&Bl(e,BF)}function Vk(e,t){!UF(e,t)&&!e.__highByOuter&&Bl(e,FF)}function eg(e,t){e.__highByOuter|=1<<(t||0),Bl(e,BF)}function tg(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Bl(e,FF)}function NF(e){Bl(e,hM)}function fM(e){Bl(e,$F)}function VF(e){Bl(e,xle)}function HF(e){Bl(e,wle)}function UF(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function jF(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,a){var o=uM(a),s=i==="series",c=s?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!s&&n.push(c),o.isBlured&&(c.group.traverse(function(f){$F(f)}),s&&r.push(a)),o.isBlured=!1}),Te(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function RT(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function a(f,p){for(var v=0;v<p.length;v++){var y=f.getItemGraphicEl(p[v]);y&&fM(y)}}if(e!=null&&!(!t||t==="none")){var o=i.getSeriesByIndex(e),s=o.coordinateSystem;s&&s.master&&(s=s.master);var c=[];i.eachSeries(function(f){var p=o===f,v=f.coordinateSystem;v&&v.master&&(v=v.master);var y=v&&s?v===s:p;if(!(r==="series"&&!p||r==="coordinateSystem"&&!y||t==="series"&&p)){var _=n.getViewOfSeriesModel(f);if(_.group.traverse(function(P){P.__highByOuter&&p&&t==="self"||hM(P)}),Ha(t))a(f.getData(),t);else if(or(t))for(var S=Vr(t),E=0;E<S.length;E++)a(f.getData(S[E]),t[S[E]]);c.push(f),uM(f).isBlured=!0}}),i.eachComponent(function(f,p){if(f!=="series"){var v=n.getViewOfComponentModel(p);v&&v.toggleBlurSeries&&v.toggleBlurSeries(c,!0,i)}})}}function OT(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(n){uM(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(a){hM(a)})}}}function Ele(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(i){var a=Ch(i,t);a=(Ft(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),c=0;!o&&c<s;)o=i.getItemGraphicEl(c++);if(o){var f=an(o);RT(n,f.focus,f.blurScope,r)}else{var p=e.get(["emphasis","focus"]),v=e.get(["emphasis","blurScope"]);p!=null&&RT(n,p,v,r)}}}function dM(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var a=n.getModel().getComponent(e,t);if(!a)return i;var o=n.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(r),c,f=0;f<s.length;f++)if(an(s[f]).focus==="self"){c=!0;break}return{focusSelf:c,dispatchers:s}}function Ple(e,t,r){var n=an(e),i=dM(n.componentMainType,n.componentIndex,n.componentHighDownName,r),a=i.dispatchers,o=i.focusSelf;a?(o&&OT(n.componentMainType,n.componentIndex,r),Te(a,function(s){return Nk(s,t)})):(RT(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&OT(n.componentMainType,n.componentIndex,r),Nk(e,t))}function Ile(e,t,r){jF(r);var n=an(e),i=dM(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?Te(i,function(a){return Vk(a,t)}):Vk(e,t)}function Dle(e,t,r){if(BT(t)){var n=t.dataType,i=e.getData(n),a=Ch(i,t);Ft(a)||(a=[a]),e[t.type===gv?"toggleSelect":t.type===vv?"select":"unselect"](a,n)}}function Hk(e){var t=e.getAllData();Te(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(a,o){e.isSelected(o,i)?VF(a):HF(a)})})}function Lle(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();Te(n,function(i){i.data;var a=i.type,o=r.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:r.seriesIndex};a!=null&&(s.dataType=a),t.push(s)}})}),t}function p1(e,t,r){GF(e,!0),Bl(e,Mle),Rle(e,t,r)}function kle(e){GF(e,!1)}function rg(e,t,r,n){n?kle(e):p1(e,t,r)}function Rle(e,t,r){var n=an(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var Uk=["emphasis","blur","select"],Ole={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function jk(e,t,r,n){r=r||"itemStyle";for(var i=0;i<Uk.length;i++){var a=Uk[i],o=t.getModel([a,r]),s=e.ensureState(a);s.style=n?n(o):o[Ole[r]]()}}function GF(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function zT(e){return!!(e&&e.__highDownDispatcher)}function zle(e){var t=Rk[e];return t==null&&kk<=32&&(t=Rk[e]=kk++),t}function BT(e){var t=e.type;return t===vv||t===C0||t===gv}function Gk(e){var t=e.type;return t===yh||t===T0}function Ble(e){var t=zF(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Hf=Vu.CMD,Fle=[[],[],[]],Wk=Math.sqrt,$le=Math.atan2;function Nle(e,t){if(t){var r=e.data,n=e.len(),i,a,o,s,c,f,p=Hf.M,v=Hf.C,y=Hf.L,_=Hf.R,S=Hf.A,E=Hf.Q;for(o=0,s=0;o<n;){switch(i=r[o++],s=o,a=0,i){case p:a=1;break;case y:a=1;break;case v:a=3;break;case E:a=2;break;case S:var P=t[4],I=t[5],D=Wk(t[0]*t[0]+t[1]*t[1]),L=Wk(t[2]*t[2]+t[3]*t[3]),B=$le(-t[1]/L,t[0]/D);r[o]*=D,r[o++]+=P,r[o]*=L,r[o++]+=I,r[o++]*=D,r[o++]*=L,r[o++]+=B,r[o++]+=B,o+=2,s=o;break;case _:f[0]=r[o++],f[1]=r[o++],Po(f,f,t),r[s++]=f[0],r[s++]=f[1],f[0]+=r[o++],f[1]+=r[o++],Po(f,f,t),r[s++]=f[0],r[s++]=f[1]}for(c=0;c<a;c++){var U=Fle[c];U[0]=r[o++],U[1]=r[o++],Po(U,U,t),r[s++]=U[0],r[s++]=U[1]}}e.increaseVersion()}}var pS=Math.sqrt,P_=Math.sin,I_=Math.cos,Tm=Math.PI;function qk(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function FT(e,t){return(e[0]*t[0]+e[1]*t[1])/(qk(e)*qk(t))}function Zk(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(FT(e,t))}function Xk(e,t,r,n,i,a,o,s,c,f,p){var v=c*(Tm/180),y=I_(v)*(e-r)/2+P_(v)*(t-n)/2,_=-1*P_(v)*(e-r)/2+I_(v)*(t-n)/2,S=y*y/(o*o)+_*_/(s*s);S>1&&(o*=pS(S),s*=pS(S));var E=(i===a?-1:1)*pS((o*o*(s*s)-o*o*(_*_)-s*s*(y*y))/(o*o*(_*_)+s*s*(y*y)))||0,P=E*o*_/s,I=E*-s*y/o,D=(e+r)/2+I_(v)*P-P_(v)*I,L=(t+n)/2+P_(v)*P+I_(v)*I,B=Zk([1,0],[(y-P)/o,(_-I)/s]),U=[(y-P)/o,(_-I)/s],V=[(-1*y-P)/o,(-1*_-I)/s],N=Zk(U,V);if(FT(U,V)<=-1&&(N=Tm),FT(U,V)>=1&&(N=0),N<0){var G=Math.round(N/Tm*1e6)/1e6;N=Tm*2+G%2*Tm}p.addData(f,D,L,o,s,B,N,v,a)}var Vle=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Hle=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Ule(e){var t=new Vu;if(!e)return t;var r=0,n=0,i=r,a=n,o,s=Vu.CMD,c=e.match(Vle);if(!c)return t;for(var f=0;f<c.length;f++){for(var p=c[f],v=p.charAt(0),y=void 0,_=p.match(Hle)||[],S=_.length,E=0;E<S;E++)_[E]=parseFloat(_[E]);for(var P=0;P<S;){var I=void 0,D=void 0,L=void 0,B=void 0,U=void 0,V=void 0,N=void 0,G=r,Y=n,ee=void 0,J=void 0;switch(v){case"l":r+=_[P++],n+=_[P++],y=s.L,t.addData(y,r,n);break;case"L":r=_[P++],n=_[P++],y=s.L,t.addData(y,r,n);break;case"m":r+=_[P++],n+=_[P++],y=s.M,t.addData(y,r,n),i=r,a=n,v="l";break;case"M":r=_[P++],n=_[P++],y=s.M,t.addData(y,r,n),i=r,a=n,v="L";break;case"h":r+=_[P++],y=s.L,t.addData(y,r,n);break;case"H":r=_[P++],y=s.L,t.addData(y,r,n);break;case"v":n+=_[P++],y=s.L,t.addData(y,r,n);break;case"V":n=_[P++],y=s.L,t.addData(y,r,n);break;case"C":y=s.C,t.addData(y,_[P++],_[P++],_[P++],_[P++],_[P++],_[P++]),r=_[P-2],n=_[P-1];break;case"c":y=s.C,t.addData(y,_[P++]+r,_[P++]+n,_[P++]+r,_[P++]+n,_[P++]+r,_[P++]+n),r+=_[P-2],n+=_[P-1];break;case"S":I=r,D=n,ee=t.len(),J=t.data,o===s.C&&(I+=r-J[ee-4],D+=n-J[ee-3]),y=s.C,G=_[P++],Y=_[P++],r=_[P++],n=_[P++],t.addData(y,I,D,G,Y,r,n);break;case"s":I=r,D=n,ee=t.len(),J=t.data,o===s.C&&(I+=r-J[ee-4],D+=n-J[ee-3]),y=s.C,G=r+_[P++],Y=n+_[P++],r+=_[P++],n+=_[P++],t.addData(y,I,D,G,Y,r,n);break;case"Q":G=_[P++],Y=_[P++],r=_[P++],n=_[P++],y=s.Q,t.addData(y,G,Y,r,n);break;case"q":G=_[P++]+r,Y=_[P++]+n,r+=_[P++],n+=_[P++],y=s.Q,t.addData(y,G,Y,r,n);break;case"T":I=r,D=n,ee=t.len(),J=t.data,o===s.Q&&(I+=r-J[ee-4],D+=n-J[ee-3]),r=_[P++],n=_[P++],y=s.Q,t.addData(y,I,D,r,n);break;case"t":I=r,D=n,ee=t.len(),J=t.data,o===s.Q&&(I+=r-J[ee-4],D+=n-J[ee-3]),r+=_[P++],n+=_[P++],y=s.Q,t.addData(y,I,D,r,n);break;case"A":L=_[P++],B=_[P++],U=_[P++],V=_[P++],N=_[P++],G=r,Y=n,r=_[P++],n=_[P++],y=s.A,Xk(G,Y,r,n,V,N,L,B,U,y,t);break;case"a":L=_[P++],B=_[P++],U=_[P++],V=_[P++],N=_[P++],G=r,Y=n,r+=_[P++],n+=_[P++],y=s.A,Xk(G,Y,r,n,V,N,L,B,U,y,t);break}}(v==="z"||v==="Z")&&(y=s.Z,t.addData(y),r=i,n=a),o=y}return t.toStatic(),t}var WF=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(Qr);function qF(e){return e.setData!=null}function ZF(e,t){var r=Ule(e),n=At({},t);return n.buildPath=function(i){if(qF(i)){i.setData(r.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;r.rebuildPath(a,1)}},n.applyTransform=function(i){Nle(r,i),this.dirtyShape()},n}function jle(e,t){return new WF(ZF(e,t))}function Gle(e,t){var r=ZF(e,t),n=function(i){yt(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return a}(WF);return n}function Wle(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var a=e[i];r.push(a.getUpdatedPathProxy(!0))}var o=new Qr(t);return o.createPathProxy(),o.buildPath=function(s){if(qF(s)){s.appendPath(r);var c=s.getContext();c&&s.rebuildPath(c,1)}},o}var qle=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),XF=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new qle},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(Qr);XF.prototype.type="circle";const pM=XF;var Zle=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),YF=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Zle},t.prototype.buildPath=function(r,n){var i=.5522848,a=n.cx,o=n.cy,s=n.rx,c=n.ry,f=s*i,p=c*i;r.moveTo(a-s,o),r.bezierCurveTo(a-s,o-p,a-f,o-c,a,o-c),r.bezierCurveTo(a+f,o-c,a+s,o-p,a+s,o),r.bezierCurveTo(a+s,o+p,a+f,o+c,a,o+c),r.bezierCurveTo(a-f,o+c,a-s,o+p,a-s,o),r.closePath()},t}(Qr);YF.prototype.type="ellipse";const KF=YF;var JF=Math.PI,mS=JF*2,Fc=Math.sin,Uf=Math.cos,Xle=Math.acos,Qi=Math.atan2,Yk=Math.abs,yv=Math.sqrt,Wm=Math.max,xs=Math.min,Zo=1e-4;function Yle(e,t,r,n,i,a,o,s){var c=r-e,f=n-t,p=o-i,v=s-a,y=v*c-p*f;if(!(y*y<Zo))return y=(p*(t-a)-v*(e-i))/y,[e+y*c,t+y*f]}function D_(e,t,r,n,i,a,o){var s=e-r,c=t-n,f=(o?a:-a)/yv(s*s+c*c),p=f*c,v=-f*s,y=e+p,_=t+v,S=r+p,E=n+v,P=(y+S)/2,I=(_+E)/2,D=S-y,L=E-_,B=D*D+L*L,U=i-a,V=y*E-S*_,N=(L<0?-1:1)*yv(Wm(0,U*U*B-V*V)),G=(V*L-D*N)/B,Y=(-V*D-L*N)/B,ee=(V*L+D*N)/B,J=(-V*D+L*N)/B,X=G-P,ne=Y-I,we=ee-P,fe=J-I;return X*X+ne*ne>we*we+fe*fe&&(G=ee,Y=J),{cx:G,cy:Y,x0:-p,y0:-v,x1:G*(i/U-1),y1:Y*(i/U-1)}}function Kle(e){var t;if(Ft(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Jle(e,t){var r,n=Wm(t.r,0),i=Wm(t.r0||0,0),a=n>0,o=i>0;if(!(!a&&!o)){if(a||(n=i,i=0),i>n){var s=n;n=i,i=s}var c=t.startAngle,f=t.endAngle;if(!(isNaN(c)||isNaN(f))){var p=t.cx,v=t.cy,y=!!t.clockwise,_=Yk(f-c),S=_>mS&&_%mS;if(S>Zo&&(_=S),!(n>Zo))e.moveTo(p,v);else if(_>mS-Zo)e.moveTo(p+n*Uf(c),v+n*Fc(c)),e.arc(p,v,n,c,f,!y),i>Zo&&(e.moveTo(p+i*Uf(f),v+i*Fc(f)),e.arc(p,v,i,f,c,y));else{var E=void 0,P=void 0,I=void 0,D=void 0,L=void 0,B=void 0,U=void 0,V=void 0,N=void 0,G=void 0,Y=void 0,ee=void 0,J=void 0,X=void 0,ne=void 0,we=void 0,fe=n*Uf(c),me=n*Fc(c),Ve=i*Uf(f),Oe=i*Fc(f),ct=_>Zo;if(ct){var _t=t.cornerRadius;_t&&(r=Kle(_t),E=r[0],P=r[1],I=r[2],D=r[3]);var zt=Yk(n-i)/2;if(L=xs(zt,I),B=xs(zt,D),U=xs(zt,E),V=xs(zt,P),Y=N=Wm(L,B),ee=G=Wm(U,V),(N>Zo||G>Zo)&&(J=n*Uf(f),X=n*Fc(f),ne=i*Uf(c),we=i*Fc(c),_<JF)){var Mt=Yle(fe,me,ne,we,J,X,Ve,Oe);if(Mt){var ar=fe-Mt[0],rr=me-Mt[1],wr=J-Mt[0],Xt=X-Mt[1],Ue=1/Fc(Xle((ar*wr+rr*Xt)/(yv(ar*ar+rr*rr)*yv(wr*wr+Xt*Xt)))/2),st=yv(Mt[0]*Mt[0]+Mt[1]*Mt[1]);Y=xs(N,(n-st)/(Ue+1)),ee=xs(G,(i-st)/(Ue-1))}}}if(!ct)e.moveTo(p+fe,v+me);else if(Y>Zo){var at=xs(I,Y),dt=xs(D,Y),vt=D_(ne,we,fe,me,n,at,y),It=D_(J,X,Ve,Oe,n,dt,y);e.moveTo(p+vt.cx+vt.x0,v+vt.cy+vt.y0),Y<N&&at===dt?e.arc(p+vt.cx,v+vt.cy,Y,Qi(vt.y0,vt.x0),Qi(It.y0,It.x0),!y):(at>0&&e.arc(p+vt.cx,v+vt.cy,at,Qi(vt.y0,vt.x0),Qi(vt.y1,vt.x1),!y),e.arc(p,v,n,Qi(vt.cy+vt.y1,vt.cx+vt.x1),Qi(It.cy+It.y1,It.cx+It.x1),!y),dt>0&&e.arc(p+It.cx,v+It.cy,dt,Qi(It.y1,It.x1),Qi(It.y0,It.x0),!y))}else e.moveTo(p+fe,v+me),e.arc(p,v,n,c,f,!y);if(!(i>Zo)||!ct)e.lineTo(p+Ve,v+Oe);else if(ee>Zo){var at=xs(E,ee),dt=xs(P,ee),vt=D_(Ve,Oe,J,X,i,-dt,y),It=D_(fe,me,ne,we,i,-at,y);e.lineTo(p+vt.cx+vt.x0,v+vt.cy+vt.y0),ee<G&&at===dt?e.arc(p+vt.cx,v+vt.cy,ee,Qi(vt.y0,vt.x0),Qi(It.y0,It.x0),!y):(dt>0&&e.arc(p+vt.cx,v+vt.cy,dt,Qi(vt.y0,vt.x0),Qi(vt.y1,vt.x1),!y),e.arc(p,v,i,Qi(vt.cy+vt.y1,vt.cx+vt.x1),Qi(It.cy+It.y1,It.cx+It.x1),y),at>0&&e.arc(p+It.cx,v+It.cy,at,Qi(It.y1,It.x1),Qi(It.y0,It.x0),!y))}else e.lineTo(p+Ve,v+Oe),e.arc(p,v,i,f,c,y)}e.closePath()}}}var Qle=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),QF=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Qle},t.prototype.buildPath=function(r,n){Jle(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Qr);QF.prototype.type="sector";const mM=QF;var eue=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),e$=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new eue},t.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,o=Math.PI*2;r.moveTo(i+n.r,a),r.arc(i,a,n.r,0,o,!1),r.moveTo(i+n.r0,a),r.arc(i,a,n.r0,0,o,!0)},t}(Qr);e$.prototype.type="ring";const t$=e$;function tue(e,t,r,n){var i=[],a=[],o=[],s=[],c,f,p,v;if(n){p=[1/0,1/0],v=[-1/0,-1/0];for(var y=0,_=e.length;y<_;y++)od(p,p,e[y]),sd(v,v,e[y]);od(p,p,n[0]),sd(v,v,n[1])}for(var y=0,_=e.length;y<_;y++){var S=e[y];if(r)c=e[y?y-1:_-1],f=e[(y+1)%_];else if(y===0||y===_-1){i.push(Rae(e[y]));continue}else c=e[y-1],f=e[y+1];$6(a,f,c),kw(a,a,t);var E=fT(S,c),P=fT(S,f),I=E+P;I!==0&&(E/=I,P/=I),kw(o,a,-E),kw(s,a,P);var D=$L([],S,o),L=$L([],S,s);n&&(sd(D,D,p),od(D,D,v),sd(L,L,p),od(L,L,v)),i.push(D),i.push(L)}return r&&i.push(i.shift()),i}function r$(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var a=tue(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(r?o:o-1);s++){var c=a[s*2],f=a[s*2+1],p=i[(s+1)%o];e.bezierCurveTo(c[0],c[1],f[0],f[1],p[0],p[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,v=i.length;s<v;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var rue=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),n$=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new rue},t.prototype.buildPath=function(r,n){r$(r,n,!0)},t}(Qr);n$.prototype.type="polygon";const vM=n$;var nue=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),zg=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new nue},t.prototype.buildPath=function(r,n){r$(r,n,!1)},t}(Qr);zg.prototype.type="polyline";var iue={},aue=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),i$=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new aue},t.prototype.buildPath=function(r,n){var i,a,o,s;if(this.subPixelOptimize){var c=IF(iue,n,this.style);i=c.x1,a=c.y1,o=c.x2,s=c.y2}else i=n.x1,a=n.y1,o=n.x2,s=n.y2;var f=n.percent;f!==0&&(r.moveTo(i,a),f<1&&(o=i*(1-f)+o*f,s=a*(1-f)+s*f),r.lineTo(o,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(Qr);i$.prototype.type="line";const Hu=i$;var ka=[],oue=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function Kk(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?KL:di)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?KL:di)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?yT:Bi)(e.x1,e.cpx1,e.x2,t),(r?yT:Bi)(e.y1,e.cpy1,e.y2,t)]}var a$=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new oue},t.prototype.buildPath=function(r,n){var i=n.x1,a=n.y1,o=n.x2,s=n.y2,c=n.cpx1,f=n.cpy1,p=n.cpx2,v=n.cpy2,y=n.percent;y!==0&&(r.moveTo(i,a),p==null||v==null?(y<1&&(o1(i,c,o,y,ka),c=ka[1],o=ka[2],o1(a,f,s,y,ka),f=ka[1],s=ka[2]),r.quadraticCurveTo(c,f,o,s)):(y<1&&(a1(i,c,p,o,y,ka),c=ka[1],p=ka[2],o=ka[3],a1(a,f,v,s,y,ka),f=ka[1],v=ka[2],s=ka[3]),r.bezierCurveTo(c,f,p,v,o,s)))},t.prototype.pointAt=function(r){return Kk(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=Kk(this.shape,r,!0);return qA(n,n)},t}(Qr);a$.prototype.type="bezier-curve";const gM=a$;var sue=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),o$=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new sue},t.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,o=Math.max(n.r,0),s=n.startAngle,c=n.endAngle,f=n.clockwise,p=Math.cos(s),v=Math.sin(s);r.moveTo(p*o+i,v*o+a),r.arc(i,a,o,s,c,!f)},t}(Qr);o$.prototype.type="arc";const yM=o$;var lue=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],a=0;a<i.length;a++)i[a].buildPath(r,i[a].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Qr.prototype.getBoundingRect.call(this)},t}(Qr);const s$=lue;var uue=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const l$=uue;var u$=function(e){yt(t,e);function t(r,n,i,a,o,s){var c=e.call(this,o)||this;return c.x=r??0,c.y=n??0,c.x2=i??1,c.y2=a??0,c.type="linear",c.global=s||!1,c}return t}(l$),cue=function(e){yt(t,e);function t(r,n,i,a,o){var s=e.call(this,a)||this;return s.x=r??.5,s.y=n??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return t}(l$);const hue=cue;var $c=[0,0],Nc=[0,0],L_=new dn,k_=new dn,fue=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new dn;for(var n=0;n<2;n++)this._axes[n]=new dn;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,a=t.x,o=t.y,s=a+t.width,c=o+t.height;if(n[0].set(a,o),n[1].set(s,o),n[2].set(s,c),n[3].set(a,c),r)for(var f=0;f<4;f++)n[f].transform(r);dn.sub(i[0],n[1],n[0]),dn.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var f=0;f<2;f++)this._origin[f]=i[f].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return L_.set(1/0,1/0),k_.set(0,0),!this._intersectCheckOneSide(this,t,L_,k_,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,L_,k_,i,-1)&&(n=!1,i)||i||dn.copy(r,n?L_:k_),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,a,o){for(var s=!0,c=0;c<2;c++){var f=this._axes[c];if(this._getProjMinMaxOnAxis(c,t._corners,$c),this._getProjMinMaxOnAxis(c,r._corners,Nc),$c[1]<Nc[0]||$c[0]>Nc[1]){if(s=!1,a)return s;var p=Math.abs(Nc[0]-$c[1]),v=Math.abs($c[0]-Nc[1]);Math.min(p,v)>i.len()&&(p<v?dn.scale(i,f,-p*o):dn.scale(i,f,v*o))}else if(n){var p=Math.abs(Nc[0]-$c[1]),v=Math.abs($c[0]-Nc[1]);Math.min(p,v)<n.len()&&(p<v?dn.scale(n,f,p*o):dn.scale(n,f,-v*o))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],a=this._origin,o=r[0].dot(i)+a[t],s=o,c=o,f=1;f<r.length;f++){var p=r[f].dot(i)+a[t];s=Math.min(p,s),c=Math.max(p,c)}n[0]=s,n[1]=c},e}();const m1=fue;var due=[],pue=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new qr(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(due)),r.union(a)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(r,n))return!0}return!1},t}(Og);const mue=pue;var vue=Gn();function gue(e,t,r,n,i){var a;if(t&&t.ecModel){var o=t.ecModel.getUpdatePayload();a=o&&o.animation}var s=t&&t.isAnimationEnabled(),c=e==="update";if(s){var f=void 0,p=void 0,v=void 0;n?(f=Er(n.duration,200),p=Er(n.easing,"cubicOut"),v=0):(f=t.getShallow(c?"animationDurationUpdate":"animationDuration"),p=t.getShallow(c?"animationEasingUpdate":"animationEasing"),v=t.getShallow(c?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(f=a.duration),a.easing!=null&&(p=a.easing),a.delay!=null&&(v=a.delay)),ir(v)&&(v=v(r,i)),ir(f)&&(f=f(r));var y={duration:f||0,delay:v,easing:p};return y}else return null}function _M(e,t,r,n,i,a,o){var s=!1,c;ir(i)?(o=a,a=i,i=null):or(i)&&(a=i.cb,o=i.during,s=i.isFrom,c=i.removeOpt,i=i.dataIndex);var f=e==="leave";f||t.stopAnimation("leave");var p=gue(e,n,i,f?c||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(p&&p.duration>0){var v=p.duration,y=p.delay,_=p.easing,S={duration:v,delay:y||0,easing:_,done:a,force:!!a||!!o,setToFinal:!f,scope:e,during:o};s?t.animateFrom(r,S):t.animateTo(r,S)}else t.stopAnimation(),!s&&t.attr(r),o&&o(1),a&&a()}function Fs(e,t,r,n,i,a){_M("update",e,t,r,n,i,a)}function ap(e,t,r,n,i,a){_M("enter",e,t,r,n,i,a)}function _v(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function v1(e,t,r,n,i,a){_v(e)||_M("leave",e,t,r,n,i,a)}function Jk(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),v1(e,{style:{opacity:0}},t,r,n)}function yue(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||Jk(i,t,r,n)}):Jk(e,t,r,n)}function _ue(e){vue(e).oldStyle=e.style}var g1=Math.max,y1=Math.min,$T={};function bue(e){return Qr.extend(e)}var xue=Gle;function wue(e,t){return xue(e,t)}function ss(e,t){$T[e]=t}function Sue(e){if($T.hasOwnProperty(e))return $T[e]}function bM(e,t,r,n){var i=jle(e,t);return r&&(n==="center"&&(r=h$(r,i.getBoundingRect())),f$(i,r)),i}function c$(e,t,r){var n=new zl({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var a={width:i.width,height:i.height};n.setStyle(h$(t,a))}}});return n}function h$(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var a=e.x+e.width/2,o=e.y+e.height/2;return{x:a-n/2,y:o-i/2,width:n,height:i}}var Tue=Wle;function f$(e,t){if(e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function ng(e,t){return IF(e,e,{lineWidth:t}),e}function Cue(e){return DF(e.shape,e.shape,e.style),e}var Aue=oh;function d$(e,t){for(var r=XA([]);e&&e!==t;)bd(r,e.getLocalTransform(),r),e=e.parent;return r}function ig(e,t,r){return t&&!Ha(t)&&(t=tM.getLocalTransform(t)),r&&(t=KA([],t)),Po([],e,t)}function p$(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return a=ig(a,t,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function Qk(e){return!e.isGroup}function Mue(e){return e.shape!=null}function m$(e,t,r){if(!e||!t)return;function n(o){var s={};return o.traverse(function(c){Qk(c)&&c.anid&&(s[c.anid]=c)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return Mue(o)&&(s.shape=At({},o.shape)),s}var a=n(e);t.traverse(function(o){if(Qk(o)&&o.anid){var s=a[o.anid];if(s){var c=i(o);o.attr(i(s)),Fs(o,c,r,an(o).dataIndex)}}})}function Eue(e,t){return Qt(e,function(r){var n=r[0];n=g1(n,t.x),n=y1(n,t.x+t.width);var i=r[1];return i=g1(i,t.y),i=y1(i,t.y+t.height),[n,i]})}function Pue(e,t){var r=g1(e.x,t.x),n=y1(e.x+e.width,t.x+t.width),i=g1(e.y,t.y),a=y1(e.y+e.height,t.y+t.height);if(n>=r&&a>=i)return{x:r,y:i,width:n-r,height:a-i}}function xM(e,t,r){var n=At({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),rn(i,r),new zl(n)):bM(e.replace("path://",""),n,r,"center")}function Iue(e,t,r,n,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(v$(e,t,r,n,s[0],s[1],o[0],o[1]))return!0;o=s}}function v$(e,t,r,n,i,a,o,s){var c=r-e,f=n-t,p=o-i,v=s-a,y=vS(p,v,c,f);if(Due(y))return!1;var _=e-i,S=t-a,E=vS(_,S,c,f)/y;if(E<0||E>1)return!1;var P=vS(_,S,p,v)/y;return!(P<0||P>1)}function vS(e,t,r,n){return e*n-r*t}function Due(e){return e<=1e-6&&e>=-1e-6}function wM(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Wt(t)?{formatter:t}:t,a=r.mainType,o=r.componentIndex,s={componentType:a,name:n,$vars:["name"]};s[a+"Index"]=o;var c=e.formatterParamsExtra;c&&Te(Vr(c),function(p){$d(s,p)||(s[p]=c[p],s.$vars.push(p))});var f=an(e.el);f.componentMainType=a,f.componentIndex=o,f.tooltipConfig={name:n,option:rn({content:n,formatterParams:s},i)}}function eR(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function Sb(e,t){if(e)if(Ft(e))for(var r=0;r<e.length;r++)eR(e[r],t);else eR(e,t)}ss("circle",pM);ss("ellipse",KF);ss("sector",mM);ss("ring",t$);ss("polygon",vM);ss("polyline",zg);ss("rect",oi);ss("line",Hu);ss("bezierCurve",gM);ss("arc",yM);const Lue=Object.freeze(Object.defineProperty({__proto__:null,Arc:yM,BezierCurve:gM,BoundingRect:qr,Circle:pM,CompoundPath:s$,Ellipse:KF,Group:Rn,Image:zl,IncrementalDisplayable:mue,Line:Hu,LinearGradient:u$,OrientedBoundingRect:m1,Path:Qr,Point:dn,Polygon:vM,Polyline:zg,RadialGradient:hue,Rect:oi,Ring:t$,Sector:mM,Text:ca,applyTransform:ig,clipPointsByRect:Eue,clipRectByRect:Pue,createIcon:xM,extendPath:wue,extendShape:bue,getShapeClass:Sue,getTransform:d$,groupTransition:m$,initProps:ap,isElementRemoved:_v,lineLineIntersect:v$,linePolygonIntersect:Iue,makeImage:c$,makePath:bM,mergePath:Tue,registerShape:ss,removeElement:v1,removeElementWithFadeOut:yue,resizePath:f$,setTooltipConfig:wM,subPixelOptimize:Aue,subPixelOptimizeLine:ng,subPixelOptimizeRect:Cue,transformDirection:p$,traverseElements:Sb,updateProps:Fs},Symbol.toStringTag,{value:"Module"}));var Tb={};function kue(e,t){for(var r=0;r<ko.length;r++){var n=ko[r],i=t[n],a=e.ensureState(n);a.style=a.style||{},a.style.text=i}var o=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(o,!0)}function tR(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,a=e.labelDimIndex,o=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=ir(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var c={normal:s},f=0;f<ko.length;f++){var p=ko[f],v=t[p];c[p]=Er(n?n.getFormattedLabel(i,p,null,a,v&&v.get("formatter")):null,s)}return c}function Cb(e,t,r,n){r=r||Tb;for(var i=e instanceof ca,a=!1,o=0;o<Ok.length;o++){var s=t[Ok[o]];if(s&&s.getShallow("show")){a=!0;break}}var c=i?e:e.getTextContent();if(a){i||(c||(c=new ca,e.setTextContent(c)),e.stateProxy&&(c.stateProxy=e.stateProxy));var f=tR(r,t),p=t.normal,v=!!p.getShallow("show"),y=Dl(p,n&&n.normal,r,!1,!i);y.text=f.normal,i||e.setTextConfig(rR(p,r,!1));for(var o=0;o<ko.length;o++){var _=ko[o],s=t[_];if(s){var S=c.ensureState(_),E=!!Er(s.getShallow("show"),v);if(E!==v&&(S.ignore=!E),S.style=Dl(s,n&&n[_],r,!0,!i),S.style.text=f[_],!i){var P=e.ensureState(_);P.textConfig=rR(s,r,!0)}}}c.silent=!!p.getShallow("silent"),c.style.x!=null&&(y.x=c.style.x),c.style.y!=null&&(y.y=c.style.y),c.ignore=!v,c.useStyle(y),c.dirty(),r.enableTextSetter&&(g$(c).setLabelText=function(I){var D=tR(r,t,I);kue(c,D)})}else c&&(c.ignore=!0);e.dirty()}function Bg(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<ko.length;n++){var i=ko[n];r[i]=e.getModel([i,t])}return r}function Dl(e,t,r,n,i){var a={};return Rue(a,e,r,n,i),t&&At(a,t),a}function rR(e,t,r){t=t||{};var n={},i,a=e.getShallow("rotate"),o=Er(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),a!=null&&(a*=Math.PI/180,n.rotation=a),o!=null&&(n.distance=o),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function Rue(e,t,r,n,i){r=r||Tb;var a=t.ecModel,o=a&&a.option.textStyle,s=Oue(t),c;if(s){c={};for(var f in s)if(s.hasOwnProperty(f)){var p=t.getModel(["rich",f]);oR(c[f]={},p,o,r,n,i,!1,!0)}}c&&(e.rich=c);var v=t.get("overflow");v&&(e.overflow=v);var y=t.get("minMargin");y!=null&&(e.margin=y),oR(e,t,o,r,n,i,!0,!1)}function Oue(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Tb).rich;if(r){t=t||{};for(var n=Vr(r),i=0;i<n.length;i++){var a=n[i];t[a]=1}}e=e.parentModel}return t}var nR=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],iR=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],aR=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function oR(e,t,r,n,i,a,o,s){r=!i&&r||Tb;var c=n&&n.inheritColor,f=t.getShallow("color"),p=t.getShallow("textBorderColor"),v=Er(t.getShallow("opacity"),r.opacity);(f==="inherit"||f==="auto")&&(c?f=c:f=null),(p==="inherit"||p==="auto")&&(c?p=c:p=null),a||(f=f||r.color,p=p||r.textBorderColor),f!=null&&(e.fill=f),p!=null&&(e.stroke=p);var y=Er(t.getShallow("textBorderWidth"),r.textBorderWidth);y!=null&&(e.lineWidth=y);var _=Er(t.getShallow("textBorderType"),r.textBorderType);_!=null&&(e.lineDash=_);var S=Er(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);S!=null&&(e.lineDashOffset=S),!i&&v==null&&!s&&(v=n&&n.defaultOpacity),v!=null&&(e.opacity=v),!i&&!a&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var E=0;E<nR.length;E++){var P=nR[E],I=Er(t.getShallow(P),r[P]);I!=null&&(e[P]=I)}for(var E=0;E<iR.length;E++){var P=iR[E],I=t.getShallow(P);I!=null&&(e[P]=I)}if(e.verticalAlign==null){var D=t.getShallow("baseline");D!=null&&(e.verticalAlign=D)}if(!o||!n.disableBox){for(var E=0;E<aR.length;E++){var P=aR[E],I=t.getShallow(P);I!=null&&(e[P]=I)}var L=t.getShallow("borderType");L!=null&&(e.borderDash=L),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&c&&(e.backgroundColor=c),(e.borderColor==="auto"||e.borderColor==="inherit")&&c&&(e.borderColor=c)}}function zue(e,t){var r=t&&t.getModel("textStyle");return Es([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var g$=Gn(),Bue=["textStyle","color"],gS=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],yS=new ca,Fue=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(Bue):null)},e.prototype.getFont=function(){return zue({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<gS.length;n++)r[gS[n]]=this.getShallow(gS[n]);return yS.useStyle(r),yS.update(),yS.getBoundingRect()},e}();const $ue=Fue;var y$=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Nue=Qv(y$),Vue=function(){function e(){}return e.prototype.getLineStyle=function(t){return Nue(this,t)},e}(),_$=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Hue=Qv(_$),Uue=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return Hue(this,t,r)},e}(),Oh=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){Ur(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var a=this.parentModel;a&&(i=a.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,a=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(a,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(Lr(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!pr.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();sM(Oh);Ase(Oh);as(Oh,Vue);as(Oh,Uue);as(Oh,Dse);as(Oh,$ue);const sa=Oh;var jue=Math.round(Math.random()*10);function Ab(e){return[e||"",jue++].join("_")}function Gue(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=Is(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var a=Is(r).main;e.hasSubTypes(r)&&t[a]&&(i=t[a](n))}return i}}function Wue(e,t){e.topologicalTravel=function(a,o,s,c){if(!a.length)return;var f=r(o),p=f.graph,v=f.noEntryList,y={};for(Te(a,function(D){y[D]=!0});v.length;){var _=v.pop(),S=p[_],E=!!y[_];E&&(s.call(c,_,S.originalDeps.slice()),delete y[_]),Te(S.successor,E?I:P)}Te(y,function(){var D="";throw new Error(D)});function P(D){p[D].entryCount--,p[D].entryCount===0&&v.push(D)}function I(D){y[D]=!0,P(D)}};function r(a){var o={},s=[];return Te(a,function(c){var f=n(o,c),p=f.originalDeps=t(c),v=i(p,a);f.entryCount=v.length,f.entryCount===0&&s.push(c),Te(v,function(y){Wr(f.predecessor,y)<0&&f.predecessor.push(y);var _=n(o,y);Wr(_.successor,y)<0&&_.successor.push(c)})}),{graph:o,noEntryList:s}}function n(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return Te(a,function(c){Wr(o,c)>=0&&s.push(c)}),s}}function SM(e,t){return Ur(Ur({},e,!0),t,!0)}const que={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Zue={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var _1="ZH",TM="EN",ag=TM,A0={},CM={},b$=pr.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(_1)>-1?_1:ag}():ag;function x$(e,t){e=e.toUpperCase(),CM[e]=new sa(t),A0[e]=t}function Xue(e){if(Wt(e)){var t=A0[e.toUpperCase()]||{};return e===_1||e===TM?Lr(t):Ur(Lr(t),Lr(A0[ag]),!1)}else return Ur(Lr(e),Lr(A0[ag]),!1)}function Yue(e){return CM[e]}function Kue(){return CM[ag]}x$(TM,que);x$(_1,Zue);var AM=1e3,MM=AM*60,bv=MM*60,To=bv*24,sR=To*365,qm={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},R_="{yyyy}-{MM}-{dd}",lR={year:"{yyyy}",month:"{yyyy}-{MM}",day:R_,hour:R_+" "+qm.hour,minute:R_+" "+qm.minute,second:R_+" "+qm.second,millisecond:qm.none},_S=["year","month","day","hour","minute","second","millisecond"],w$=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function cu(e,t){return e+="","0000".substr(0,t-e.length)+e}function wd(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function Jue(e){return e===wd(e)}function Que(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Mb(e,t,r,n){var i=Il(e),a=i[EM(r)](),o=i[Sd(r)]()+1,s=Math.floor((o-1)/3)+1,c=i[Eb(r)](),f=i["get"+(r?"UTC":"")+"Day"](),p=i[og(r)](),v=(p-1)%12+1,y=i[Pb(r)](),_=i[Ib(r)](),S=i[Db(r)](),E=n instanceof sa?n:Yue(n||b$)||Kue(),P=E.getModel("time"),I=P.get("month"),D=P.get("monthAbbr"),L=P.get("dayOfWeek"),B=P.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,cu(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,I[o-1]).replace(/{MMM}/g,D[o-1]).replace(/{MM}/g,cu(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,cu(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,L[f]).replace(/{ee}/g,B[f]).replace(/{e}/g,f+"").replace(/{HH}/g,cu(p,2)).replace(/{H}/g,p+"").replace(/{hh}/g,cu(v+"",2)).replace(/{h}/g,v+"").replace(/{mm}/g,cu(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,cu(_,2)).replace(/{s}/g,_+"").replace(/{SSS}/g,cu(S,3)).replace(/{S}/g,S+"")}function ece(e,t,r,n,i){var a=null;if(Wt(r))a=r;else if(ir(r))a=r(e.value,t,{level:e.level});else{var o=At({},qm);if(e.level>0)for(var s=0;s<_S.length;++s)o[_S[s]]="{primary|"+o[_S[s]]+"}";var c=r?r.inherit===!1?r:rn(r,o):o,f=S$(e.value,i);if(c[f])a=c[f];else if(c.inherit){for(var p=w$.indexOf(f),s=p-1;s>=0;--s)if(c[f]){a=c[f];break}a=a||o.none}if(Ft(a)){var v=e.level==null?0:e.level>=0?e.level:a.length+e.level;v=Math.min(v,a.length-1),a=a[v]}}return Mb(new Date(e.value),a,i,n)}function S$(e,t){var r=Il(e),n=r[Sd(t)]()+1,i=r[Eb(t)](),a=r[og(t)](),o=r[Pb(t)](),s=r[Ib(t)](),c=r[Db(t)](),f=c===0,p=f&&s===0,v=p&&o===0,y=v&&a===0,_=y&&i===1,S=_&&n===1;return S?"year":_?"month":y?"day":v?"hour":p?"minute":f?"second":"millisecond"}function uR(e,t,r){var n=Tn(e)?Il(e):e;switch(t=t||S$(e,r),t){case"year":return n[EM(r)]();case"half-year":return n[Sd(r)]()>=6?1:0;case"quarter":return Math.floor((n[Sd(r)]()+1)/4);case"month":return n[Sd(r)]();case"day":return n[Eb(r)]();case"half-day":return n[og(r)]()/24;case"hour":return n[og(r)]();case"minute":return n[Pb(r)]();case"second":return n[Ib(r)]();case"millisecond":return n[Db(r)]()}}function EM(e){return e?"getUTCFullYear":"getFullYear"}function Sd(e){return e?"getUTCMonth":"getMonth"}function Eb(e){return e?"getUTCDate":"getDate"}function og(e){return e?"getUTCHours":"getHours"}function Pb(e){return e?"getUTCMinutes":"getMinutes"}function Ib(e){return e?"getUTCSeconds":"getSeconds"}function Db(e){return e?"getUTCMilliseconds":"getMilliseconds"}function tce(e){return e?"setUTCFullYear":"setFullYear"}function T$(e){return e?"setUTCMonth":"setMonth"}function C$(e){return e?"setUTCDate":"setDate"}function A$(e){return e?"setUTCHours":"setHours"}function M$(e){return e?"setUTCMinutes":"setMinutes"}function E$(e){return e?"setUTCSeconds":"setSeconds"}function P$(e){return e?"setUTCMilliseconds":"setMilliseconds"}function I$(e){if(!ise(e))return Wt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function D$(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Lb=O6;function NT(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(p){return p&&Es(p)?p:"-"}function a(p){return!!(p!=null&&!isNaN(p)&&isFinite(p))}var o=t==="time",s=e instanceof Date;if(o||s){var c=o?Il(e):e;if(isNaN(+c)){if(s)return"-"}else return Mb(c,n,r)}if(t==="ordinal")return uT(e)?i(e):Tn(e)&&a(e)?e+"":"-";var f=h1(e);return a(f)?I$(f):uT(e)?i(e):typeof e=="boolean"?e+"":"-"}var cR=["a","b","c","d","e","f","g"],bS=function(e,t){return"{"+e+(t??"")+"}"};function L$(e,t,r){Ft(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],a=0;a<i.length;a++){var o=cR[a];e=e.replace(bS(o),bS(o,0))}for(var s=0;s<n;s++)for(var c=0;c<i.length;c++){var f=t[s][i[c]];e=e.replace(bS(cR[c],s),r?to(f):f)}return e}function rce(e,t){var r=Wt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var a=r.renderMode||"html";if(!n)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+to(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+to(n)+";"+(t||"")+'"></span>';var o=r.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Ah(e,t){return t=t||"transparent",Wt(e)?e:or(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function hR(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var M0=Te,nce=["left","right","top","bottom","width","height"],O_=[["width","left","right"],["height","top","bottom"]];function PM(e,t,r,n,i){var a=0,o=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(c,f){var p=c.getBoundingRect(),v=t.childAt(f+1),y=v&&v.getBoundingRect(),_,S;if(e==="horizontal"){var E=p.width+(y?-y.x+p.x:0);_=a+E,_>n||c.newline?(a=0,_=E,o+=s+r,s=p.height):s=Math.max(s,p.height)}else{var P=p.height+(y?-y.y+p.y:0);S=o+P,S>i||c.newline?(a+=s+r,o=0,S=P,s=p.width):s=Math.max(s,p.width)}c.newline||(c.x=a,c.y=o,c.markRedraw(),e==="horizontal"?a=_+r:o=S+r)})}var xv=PM;wn(PM,"vertical");wn(PM,"horizontal");function Vd(e,t,r){r=Lb(r||0);var n=t.width,i=t.height,a=pi(e.left,n),o=pi(e.top,i),s=pi(e.right,n),c=pi(e.bottom,i),f=pi(e.width,n),p=pi(e.height,i),v=r[2]+r[0],y=r[1]+r[3],_=e.aspect;switch(isNaN(f)&&(f=n-s-y-a),isNaN(p)&&(p=i-c-v-o),_!=null&&(isNaN(f)&&isNaN(p)&&(_>n/i?f=n*.8:p=i*.8),isNaN(f)&&(f=_*p),isNaN(p)&&(p=f/_)),isNaN(a)&&(a=n-s-f-y),isNaN(o)&&(o=i-c-p-v),e.left||e.right){case"center":a=n/2-f/2-r[3];break;case"right":a=n-f-y;break}switch(e.top||e.bottom){case"middle":case"center":o=i/2-p/2-r[0];break;case"bottom":o=i-p-v;break}a=a||0,o=o||0,isNaN(f)&&(f=n-y-a-(s||0)),isNaN(p)&&(p=i-v-o-(c||0));var S=new qr(a+r[3],o+r[0],f,p);return S.margin=r,S}function sg(e){var t=e.layoutMode||e.constructor.layoutMode;return or(t)?t:t?{type:t}:null}function Hd(e,t,r){var n=r&&r.ignoreSize;!Ft(n)&&(n=[n,n]);var i=o(O_[0],0),a=o(O_[1],1);f(O_[0],e,i),f(O_[1],e,a);function o(p,v){var y={},_=0,S={},E=0,P=2;if(M0(p,function(L){S[L]=e[L]}),M0(p,function(L){s(t,L)&&(y[L]=S[L]=t[L]),c(y,L)&&_++,c(S,L)&&E++}),n[v])return c(t,p[1])?S[p[2]]=null:c(t,p[2])&&(S[p[1]]=null),S;if(E===P||!_)return S;if(_>=P)return y;for(var I=0;I<p.length;I++){var D=p[I];if(!s(y,D)&&s(e,D)){y[D]=e[D];break}}return y}function s(p,v){return p.hasOwnProperty(v)}function c(p,v){return p[v]!=null&&p[v]!=="auto"}function f(p,v,y){M0(p,function(_){v[_]=y[_]})}}function Fg(e){return ice({},e)}function ice(e,t){return t&&e&&M0(nce,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var ace=Gn(),op=function(e){yt(t,e);function t(r,n,i){var a=e.call(this,r,n,i)||this;return a.uid=Ab("ec_cpt_model"),a}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=sg(this),a=i?Fg(r):{},o=n.getTheme();Ur(r,o.get(this.mainType)),Ur(r,this.getDefaultOption()),i&&Hd(r,a,i)},t.prototype.mergeOption=function(r,n){Ur(this.option,r,!0);var i=sg(this);i&&Hd(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!Sse(r))return r.defaultOption;var n=ace(this);if(!n.defaultOption){for(var i=[],a=r;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},c=i.length-1;c>=0;c--)s=Ur(s,i[c],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",a=r+"Id";return Rg(this.ecModel,r,{index:this.get(i,!0),id:this.get(a,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(sa);wF(op,sa);gb(op);Gue(op);Wue(op,oce);function oce(e){var t=[];return Te(op.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Qt(t,function(r){return Is(r).main}),e!=="dataset"&&Wr(t,"dataset")<=0&&t.unshift("dataset"),t}const xn=op;var k$="";typeof navigator<"u"&&(k$=navigator.platform||"");var jf="rgba(0, 0, 0, 0.2)";const sce={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:jf,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:jf,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:jf,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:jf,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:jf,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:jf,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:k$.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var R$=dr(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Bo="original",Ua="arrayRows",Hs="objectRows",Fl="keyedColumns",Ou="typedArray",O$="unknown",Al="column",sp="row",Qa={Must:1,Might:2,Not:3},z$=Gn();function lce(e){z$(e).datasetMap=dr()}function uce(e,t,r){var n={},i=B$(t);if(!i||!e)return n;var a=[],o=[],s=t.ecModel,c=z$(s).datasetMap,f=i.uid+"_"+r.seriesLayoutBy,p,v;e=e.slice(),Te(e,function(E,P){var I=or(E)?E:e[P]={name:E};I.type==="ordinal"&&p==null&&(p=P,v=S(I)),n[I.name]=[]});var y=c.get(f)||c.set(f,{categoryWayDim:v,valueWayDim:0});Te(e,function(E,P){var I=E.name,D=S(E);if(p==null){var L=y.valueWayDim;_(n[I],L,D),_(o,L,D),y.valueWayDim+=D}else if(p===P)_(n[I],0,D),_(a,0,D);else{var L=y.categoryWayDim;_(n[I],L,D),_(o,L,D),y.categoryWayDim+=D}});function _(E,P,I){for(var D=0;D<I;D++)E.push(P+D)}function S(E){var P=E.dimsDef;return P?P.length:1}return a.length&&(n.itemName=a),o.length&&(n.seriesName=o),n}function B$(e){var t=e.get("data",!0);if(!t)return Rg(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},$a).models[0]}function cce(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:Rg(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},$a).models}function F$(e,t){return hce(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function hce(e,t,r,n,i,a){var o,s=5;if(oo(e))return Qa.Not;var c,f;if(n){var p=n[a];or(p)?(c=p.name,f=p.type):Wt(p)&&(c=p)}if(f!=null)return f==="ordinal"?Qa.Must:Qa.Not;if(t===Ua){var v=e;if(r===sp){for(var y=v[a],_=0;_<(y||[]).length&&_<s;_++)if((o=B(y[i+_]))!=null)return o}else for(var _=0;_<v.length&&_<s;_++){var S=v[i+_];if(S&&(o=B(S[a]))!=null)return o}}else if(t===Hs){var E=e;if(!c)return Qa.Not;for(var _=0;_<E.length&&_<s;_++){var P=E[_];if(P&&(o=B(P[c]))!=null)return o}}else if(t===Fl){var I=e;if(!c)return Qa.Not;var y=I[c];if(!y||oo(y))return Qa.Not;for(var _=0;_<y.length&&_<s;_++)if((o=B(y[_]))!=null)return o}else if(t===Bo)for(var D=e,_=0;_<D.length&&_<s;_++){var P=D[_],L=kg(P);if(!Ft(L))return Qa.Not;if((o=B(L[a]))!=null)return o}function B(U){var V=Wt(U);if(U!=null&&isFinite(U)&&U!=="")return V?Qa.Might:Qa.Not;if(V&&U!=="-")return Qa.Must}return Qa.Not}var fce=dr();function dce(e,t,r){var n=fce.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var fR=Gn();Gn();var IM=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Ca(this.get("color",!0)),a=this.get("colorLayer",!0);return mce(this,fR,i,a,t,r,n)},e.prototype.clearColorPalette=function(){vce(this,fR)},e}();function pce(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function mce(e,t,r,n,i,a,o){a=a||e;var s=t(a),c=s.paletteIdx||0,f=s.paletteNameMap=s.paletteNameMap||{};if(f.hasOwnProperty(i))return f[i];var p=o==null||!n?r:pce(n,o);if(p=p||r,!(!p||!p.length)){var v=p[c];return i&&(f[i]=v),s.paletteIdx=(c+1)%p.length,v}}function vce(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var z_,Cm,dR,pR="\0_ec_inner",gce=1,DM=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,a,o,s){a=a||{},this.option=null,this._theme=new sa(a),this._locale=new sa(o),this._optionManager=s},t.prototype.setOption=function(r,n,i){var a=gR(n);this._optionManager.setOption(r,i,a),this._resetOption(null,a)},t.prototype.resetOption=function(r,n){return this._resetOption(r,gR(n))},t.prototype._resetOption=function(r,n){var i=!1,a=this._optionManager;if(!r||r==="recreate"){var o=a.mountOption(r==="recreate");!this.option||r==="recreate"?dR(this,o):(this.restoreData(),this._mergeOption(o,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var c=a.getMediaOption(this);c.length&&Te(c,function(f){i=!0,this._mergeOption(f,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],c=dr(),f=n&&n.replaceMergeMainTypeMap;lce(this),Te(r,function(v,y){v!=null&&(xn.hasClass(y)?y&&(s.push(y),c.set(y,!0)):i[y]=i[y]==null?Lr(v):Ur(i[y],v,!0))}),f&&f.each(function(v,y){xn.hasClass(y)&&!c.get(y)&&(s.push(y),c.set(y,!0))}),xn.topologicalTravel(s,xn.getAllClassMainTypes(),p,this);function p(v){var y=dce(this,v,Ca(r[v])),_=a.get(v),S=_?f&&f.get(v)?"replaceMerge":"normalMerge":"replaceAll",E=sse(_,y,S);pse(E,v,xn),i[v]=null,a.set(v,null),o.set(v,0);var P=[],I=[],D=0,L;Te(E,function(B,U){var V=B.existing,N=B.newOption;if(!N)V&&(V.mergeOption({},this),V.optionUpdated({},!1));else{var G=v==="series",Y=xn.getClass(v,B.keyInfo.subType,!G);if(!Y)return;if(v==="tooltip"){if(L)return;L=!0}if(V&&V.constructor===Y)V.name=B.keyInfo.name,V.mergeOption(N,this),V.optionUpdated(N,!1);else{var ee=At({componentIndex:U},B.keyInfo);V=new Y(N,this,this,ee),At(V,ee),B.brandNew&&(V.__requireNewView=!0),V.init(N,this,this),V.optionUpdated(null,!0)}}V?(P.push(V.option),I.push(V),D++):(P.push(void 0),I.push(void 0))},this),i[v]=P,a.set(v,I),o.set(v,D),v==="series"&&z_(this)}this._seriesIndices||z_(this)},t.prototype.getOption=function(){var r=Lr(this.option);return Te(r,function(n,i){if(xn.hasClass(i)){for(var a=Ca(n),o=a.length,s=!1,c=o-1;c>=0;c--)a[c]&&!Jv(a[c])?s=!0:(a[c]=null,!s&&o--);a.length=o,r[i]=a}}),delete r[pR],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var a=i[n||0];if(a)return a;if(n==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,a=r.id,o=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var c;return i!=null?(c=[],Te(Ca(i),function(f){s[f]&&c.push(s[f])})):a!=null?c=mR("id",a,s):o!=null?c=mR("name",o,s):c=Fi(s,function(f){return!!f}),vR(c,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,a=s(n),o=a?this.queryComponents(a):Fi(this._componentsMap.get(i),function(f){return!!f});return c(vR(o,r));function s(f){var p=i+"Index",v=i+"Id",y=i+"Name";return f&&(f[p]!=null||f[v]!=null||f[y]!=null)?{mainType:i,index:f[p],id:f[v],name:f[y]}:null}function c(f){return r.filter?Fi(f,r.filter):f}},t.prototype.eachComponent=function(r,n,i){var a=this._componentsMap;if(ir(r)){var o=n,s=r;a.each(function(v,y){for(var _=0;v&&_<v.length;_++){var S=v[_];S&&s.call(o,y,S,S.componentIndex)}})}else for(var c=Wt(r)?a.get(r):or(r)?this.findComponents(r):null,f=0;c&&f<c.length;f++){var p=c[f];p&&n.call(i,p,p.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=ks(r,null);return Fi(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Fi(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return Fi(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){Cm(this),Te(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];r.call(n,a,i)},this)},t.prototype.eachRawSeries=function(r,n){Te(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){Cm(this),Te(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===r&&n.call(i,o,a)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return Te(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return Cm(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){Cm(this);var i=[];Te(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];r.call(n,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=dr(i)},t.prototype.restoreData=function(r){z_(this);var n=this._componentsMap,i=[];n.each(function(a,o){xn.hasClass(o)&&i.push(o)}),xn.topologicalTravel(i,xn.getAllClassMainTypes(),function(a){Te(n.get(a),function(o){o&&(a!=="series"||!yce(o,r))&&o.restoreData()})})},t.internalField=function(){z_=function(r){var n=r._seriesIndices=[];Te(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=dr(n)},Cm=function(r){},dR=function(r,n){r.option={},r.option[pR]=gce,r._componentsMap=dr({series:[]}),r._componentsCount=dr();var i=n.aria;or(i)&&i.enabled==null&&(i.enabled=!0),_ce(n,r._theme.option),Ur(n,sce,!1),r._mergeOption(n,null)}}(),t}(sa);function yce(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function _ce(e,t){var r=e.color&&!e.colorLayer;Te(t,function(n,i){i==="colorLayer"&&r||xn.hasClass(i)||(typeof n=="object"?e[i]=e[i]?Ur(e[i],n,!1):Lr(n):e[i]==null&&(e[i]=n))})}function mR(e,t,r){if(Ft(t)){var n=dr();return Te(t,function(a){if(a!=null){var o=ks(a,null);o!=null&&n.set(a,!0)}}),Fi(r,function(a){return a&&n.get(a[e])})}else{var i=ks(t,null);return Fi(r,function(a){return a&&i!=null&&a[e]===i})}}function vR(e,t){return t.hasOwnProperty("subType")?Fi(e,function(r){return r&&r.subType===t.subType}):e}function gR(e){var t=dr();return e&&Te(Ca(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}as(DM,IM);var bce=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],xce=function(){function e(t){Te(bce,function(r){this[r]=vr(t[r],t)},this)}return e}();const $$=xce;var xS={},LM=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];Te(xS,function(i,a){var o=i.create(t,r);n=n.concat(o||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){Te(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){xS[t]=r},e.get=function(t){return xS[t]},e}(),wce=/^(min|max)?(.+)$/,Sce=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(Te(Ca(t.series),function(o){o&&o.data&&oo(o.data)&&cT(o.data)}),Te(Ca(t.dataset),function(o){o&&o.source&&oo(o.source)&&cT(o.source)})),t=Lr(t);var i=this._optionBackup,a=Tce(t,r,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Lr(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=Lr(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var c=0,f=i.length;c<f;c++)Cce(i[c].query,r,n)&&o.push(c);return!o.length&&a&&(o=[-1]),o.length&&!Mce(o,this._currentMediaIndices)&&(s=Qt(o,function(p){return Lr(p===-1?a.option:i[p].option)})),this._currentMediaIndices=o,s},e}();function Tce(e,t,r){var n=[],i,a,o=e.baseOption,s=e.timeline,c=e.options,f=e.media,p=!!e.media,v=!!(c||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((v||p)&&(e.options=e.media=null),a=e),p&&Ft(f)&&Te(f,function(_){_&&_.option&&(_.query?n.push(_):i||(i=_))}),y(a),Te(c,function(_){return y(_)}),Te(n,function(_){return y(_.option)});function y(_){Te(t,function(S){S(_,r)})}return{baseOption:a,timelineOptions:c||[],mediaDefault:i,mediaList:n}}function Cce(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return Te(e,function(a,o){var s=o.match(wce);if(!(!s||!s[1]||!s[2])){var c=s[1],f=s[2].toLowerCase();Ace(n[f],a,c)||(i=!1)}}),i}function Ace(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Mce(e,t){return e.join(",")===t.join(",")}const Ece=Sce;var Go=Te,lg=or,yR=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function wS(e){var t=e&&e.itemStyle;if(t)for(var r=0,n=yR.length;r<n;r++){var i=yR[r],a=t.normal,o=t.emphasis;a&&a[i]&&(e[i]=e[i]||{},e[i].normal?Ur(e[i].normal,a[i]):e[i].normal=a[i],a[i]=null),o&&o[i]&&(e[i]=e[i]||{},e[i].emphasis?Ur(e[i].emphasis,o[i]):e[i].emphasis=o[i],o[i]=null)}}function ia(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,rn(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Zm(e){ia(e,"itemStyle"),ia(e,"lineStyle"),ia(e,"areaStyle"),ia(e,"label"),ia(e,"labelLine"),ia(e,"upperLabel"),ia(e,"edgeLabel")}function ii(e,t){var r=lg(e)&&e[t],n=lg(r)&&r.textStyle;if(n)for(var i=0,a=vk.length;i<a;i++){var o=vk[i];n.hasOwnProperty(o)&&(r[o]=n[o])}}function _o(e){e&&(Zm(e),ii(e,"label"),e.emphasis&&ii(e.emphasis,"label"))}function Pce(e){if(lg(e)){wS(e),Zm(e),ii(e,"label"),ii(e,"upperLabel"),ii(e,"edgeLabel"),e.emphasis&&(ii(e.emphasis,"label"),ii(e.emphasis,"upperLabel"),ii(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(wS(t),_o(t));var r=e.markLine;r&&(wS(r),_o(r));var n=e.markArea;n&&_o(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var a=e.links||e.edges;if(a&&!oo(a))for(var o=0;o<a.length;o++)_o(a[o]);Te(e.categories,function(f){Zm(f)})}if(i&&!oo(i))for(var o=0;o<i.length;o++)_o(i[o]);if(t=e.markPoint,t&&t.data)for(var s=t.data,o=0;o<s.length;o++)_o(s[o]);if(r=e.markLine,r&&r.data)for(var c=r.data,o=0;o<c.length;o++)Ft(c[o])?(_o(c[o][0]),_o(c[o][1])):_o(c[o]);e.type==="gauge"?(ii(e,"axisLabel"),ii(e,"title"),ii(e,"detail")):e.type==="treemap"?(ia(e.breadcrumb,"itemStyle"),Te(e.levels,function(f){Zm(f)})):e.type==="tree"&&Zm(e.leaves)}}function pl(e){return Ft(e)?e:e?[e]:[]}function _R(e){return(Ft(e)?e[0]:e)||{}}function Ice(e,t){Go(pl(e.series),function(n){lg(n)&&Pce(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),Go(r,function(n){Go(pl(e[n]),function(i){i&&(ii(i,"axisLabel"),ii(i.axisPointer,"label"))})}),Go(pl(e.parallel),function(n){var i=n&&n.parallelAxisDefault;ii(i,"axisLabel"),ii(i&&i.axisPointer,"label")}),Go(pl(e.calendar),function(n){ia(n,"itemStyle"),ii(n,"dayLabel"),ii(n,"monthLabel"),ii(n,"yearLabel")}),Go(pl(e.radar),function(n){ii(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),Go(pl(e.geo),function(n){lg(n)&&(_o(n),Go(pl(n.regions),function(i){_o(i)}))}),Go(pl(e.timeline),function(n){_o(n),ia(n,"label"),ia(n,"itemStyle"),ia(n,"controlStyle",!0);var i=n.data;Ft(i)&&Te(i,function(a){or(a)&&(ia(a,"label"),ia(a,"itemStyle"))})}),Go(pl(e.toolbox),function(n){ia(n,"iconStyle"),Go(n.feature,function(i){ia(i,"iconStyle")})}),ii(_R(e.axisPointer),"label"),ii(_R(e.tooltip).axisPointer,"label")}function Dce(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function Lce(e,t,r,n){for(var i=t.split(","),a=e,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];(n||a[i[s]]==null)&&(a[i[s]]=r)}function bR(e){e&&Te(kce,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var kce=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Rce=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],SS=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Am(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<SS.length;r++){var n=SS[r][1],i=SS[r][0];t[n]!=null&&(t[i]=t[n])}}function xR(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function wR(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function Oce(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function N$(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&N$(e[r].children,t)}function V$(e,t){Ice(e,t),e.series=Ca(e.series),Te(e.series,function(r){if(or(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),xR(r.label);var i=r.data;if(i&&!oo(i))for(var a=0;a<i.length;a++)xR(i[a]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var o=Dce(r,"pointer.color");o!=null&&Lce(r,"itemStyle.color",o)}else if(n==="bar"){Am(r),Am(r.backgroundStyle),Am(r.emphasis);var i=r.data;if(i&&!oo(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(Am(i[a]),Am(i[a]&&i[a].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),wR(r),N$(r.data,wR)}else n==="graph"||n==="sankey"?Oce(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&rn(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),bR(r)}}),e.dataRange&&(e.visualMap=e.dataRange),Te(Rce,function(r){var n=e[r];n&&(Ft(n)||(n=[n]),Te(n,function(i){bR(i)}))})}function zce(e){var t=dr();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),a=r.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:r};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),t.each(Bce)}function Bce(e){Te(e,function(t,r){var n=[],i=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,c=t.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(f,p,v){var y=o.get(t.stackedDimension,v);if(isNaN(y))return i;var _,S;s?S=o.getRawIndex(v):_=o.get(t.stackedByDimension,v);for(var E=NaN,P=r-1;P>=0;P--){var I=e[P];if(s||(S=I.data.rawIndexOf(I.stackedByDimension,_)),S>=0){var D=I.data.getByRawIndex(I.stackResultDimension,S);if(c==="all"||c==="positive"&&D>0||c==="negative"&&D<0||c==="samesign"&&y>=0&&D>0||c==="samesign"&&y<=0&&D<0){y=tse(y,D),E=D;break}}}return n[0]=y,n[1]=E,n})})}var kb=function(){function e(t){this.data=t.data||(t.sourceFormat===Fl?{}:[]),this.sourceFormat=t.sourceFormat||O$,this.seriesLayoutBy=t.seriesLayoutBy||Al,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&F$(this,n)===Qa.Must&&(i.type="ordinal")}}return e}();function kM(e){return e instanceof kb}function VT(e,t,r){r=r||H$(e);var n=t.seriesLayoutBy,i=$ce(e,r,n,t.sourceHeader,t.dimensions),a=new kb({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Lr(t)});return a}function RM(e){return new kb({data:e,sourceFormat:oo(e)?Ou:Bo})}function Fce(e){return new kb({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:Lr(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function H$(e){var t=O$;if(oo(e))t=Ou;else if(Ft(e)){e.length===0&&(t=Ua);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(Ft(i)){t=Ua;break}else if(or(i)){t=Hs;break}}}}else if(or(e)){for(var a in e)if($d(e,a)&&Ha(e[a])){t=Fl;break}}return t}function $ce(e,t,r,n,i){var a,o;if(!e)return{dimensionsDefine:SR(i),startIndex:o,dimensionsDetectedCount:a};if(t===Ua){var s=e;n==="auto"||n==null?TR(function(f){f!=null&&f!=="-"&&(Wt(f)?o==null&&(o=1):o=0)},r,s,10):o=Tn(n)?n:n?1:0,!i&&o===1&&(i=[],TR(function(f,p){i[p]=f!=null?f+"":""},r,s,1/0)),a=i?i.length:r===sp?s.length:s[0]?s[0].length:null}else if(t===Hs)i||(i=Nce(e));else if(t===Fl)i||(i=[],Te(e,function(f,p){i.push(p)}));else if(t===Bo){var c=kg(e[0]);a=Ft(c)&&c.length||1}return{startIndex:o,dimensionsDefine:SR(i),dimensionsDetectedCount:a}}function Nce(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r)return Vr(r)}function SR(e){if(e){var t=dr();return Qt(e,function(r,n){r=or(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=t.get(i.name);return a?i.name+="-"+a.count++:t.set(i.name,{count:1}),i})}}function TR(e,t,r,n){if(t===sp)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var a=r[0]||[],i=0;i<a.length&&i<n;i++)e(a[i],i)}function U$(e){var t=e.sourceFormat;return t===Hs||t===Fl}var Vc,Hc,Uc,CR,AR,j$=function(){function e(t,r){var n=kM(t)?t:RM(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Ou&&(this._offset=0,this._dimSize=r,this._data=i),AR(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;AR=function(o,s,c){var f=c.sourceFormat,p=c.seriesLayoutBy,v=c.startIndex,y=c.dimensionsDefine,_=CR[OM(f,p)];if(At(o,_),f===Ou)o.getItem=r,o.count=i,o.fillStorage=n;else{var S=G$(f,p);o.getItem=vr(S,null,s,v,y);var E=W$(f,p);o.count=vr(E,null,s,v,y)}};var r=function(o,s){o=o-this._offset,s=s||[];for(var c=this._data,f=this._dimSize,p=f*o,v=0;v<f;v++)s[v]=c[p+v];return s},n=function(o,s,c,f){for(var p=this._data,v=this._dimSize,y=0;y<v;y++){for(var _=f[y],S=_[0]==null?1/0:_[0],E=_[1]==null?-1/0:_[1],P=s-o,I=c[y],D=0;D<P;D++){var L=p[D*v+y];I[o+D]=L,L<S&&(S=L),L>E&&(E=L)}_[0]=S,_[1]=E}},i=function(){return this._data?this._data.length/this._dimSize:0};CR=(t={},t[Ua+"_"+Al]={pure:!0,appendData:a},t[Ua+"_"+sp]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Hs]={pure:!0,appendData:a},t[Fl]={pure:!0,appendData:function(o){var s=this._data;Te(o,function(c,f){for(var p=s[f]||(s[f]=[]),v=0;v<(c||[]).length;v++)p.push(c[v])})}},t[Bo]={appendData:a},t[Ou]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),e}(),MR=function(e,t,r,n){return e[n]},Vce=(Vc={},Vc[Ua+"_"+Al]=function(e,t,r,n){return e[n+t]},Vc[Ua+"_"+sp]=function(e,t,r,n,i){n+=t;for(var a=i||[],o=e,s=0;s<o.length;s++){var c=o[s];a[s]=c?c[n]:null}return a},Vc[Hs]=MR,Vc[Fl]=function(e,t,r,n,i){for(var a=i||[],o=0;o<r.length;o++){var s=r[o].name,c=e[s];a[o]=c?c[n]:null}return a},Vc[Bo]=MR,Vc);function G$(e,t){var r=Vce[OM(e,t)];return r}var ER=function(e,t,r){return e.length},Hce=(Hc={},Hc[Ua+"_"+Al]=function(e,t,r){return Math.max(0,e.length-t)},Hc[Ua+"_"+sp]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},Hc[Hs]=ER,Hc[Fl]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},Hc[Bo]=ER,Hc);function W$(e,t){var r=Hce[OM(e,t)];return r}var TS=function(e,t,r){return e[t]},Uce=(Uc={},Uc[Ua]=TS,Uc[Hs]=function(e,t,r){return e[r]},Uc[Fl]=TS,Uc[Bo]=function(e,t,r){var n=kg(e);return n instanceof Array?n[t]:n},Uc[Ou]=TS,Uc);function q$(e){var t=Uce[e];return t}function OM(e,t){return e===Ua?e+"_"+t:e}function Ud(e,t,r){if(e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),a=i.getSource().sourceFormat;if(r!=null){var o=e.getDimensionIndex(r),s=i.getDimensionProperty(o);return q$(a)(n,o,s)}else{var c=n;return a===Bo&&(c=kg(n)),c}}}}var jce=/\{@(.+?)\}/g,Z$=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),a=n.getRawIndex(t),o=n.getName(t),s=n.getRawDataItem(t),c=n.getItemVisual(t,"style"),f=c&&c[n.getItemVisual(t,"drawType")||"fill"],p=c&&c.stroke,v=this.mainType,y=v==="series",_=n.userOutput&&n.userOutput.get();return{componentType:v,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:o,dataIndex:a,data:s,dataType:r,value:i,color:f,borderColor:p,dimensionNames:_?_.fullDimensions:null,encode:_?_.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,a,o){r=r||"normal";var s=this.getData(n),c=this.getDataParams(t,n);if(o&&(c.value=o.interpolatedValue),i!=null&&Ft(c.value)&&(c.value=c.value[i]),!a){var f=s.getItemModel(t);a=f.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(ir(a))return c.status=r,c.dimensionIndex=i,a(c);if(Wt(a)){var p=L$(a,c);return p.replace(jce,function(v,y){var _=y.length,S=y;S.charAt(0)==="["&&S.charAt(_-1)==="]"&&(S=+S.slice(1,_-1));var E=Ud(s,t,S);if(o&&Ft(o.interpolatedValue)){var P=s.getDimensionIndex(S);P>=0&&(E=o.interpolatedValue[P])}return E!=null?E+"":""})}},e.prototype.getRawValue=function(t,r){return Ud(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function PR(e){var t,r;return or(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function wv(e){return new Gce(e)}var Gce=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!n&&(a=this._plan(this.context));var o=p(this._modBy),s=this._modDataCount||0,c=p(t&&t.modBy),f=t&&t.modDataCount||0;(o!==c||s!==f)&&(a="reset");function p(D){return!(D>=1)&&(D=1),D}var v;(this._dirty||a==="reset")&&(this._dirty=!1,v=this._doReset(n)),this._modBy=c,this._modDataCount=f;var y=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var _=this._dueIndex,S=Math.min(y!=null?this._dueIndex+y:1/0,this._dueEnd);if(!n&&(v||_<S)){var E=this._progress;if(Ft(E))for(var P=0;P<E.length;P++)this._doProgress(E[P],_,S,c,f);else this._doProgress(E,_,S,c,f)}this._dueIndex=S;var I=this._settedOutputEnd!=null?this._settedOutputEnd:S;this._outputDueEnd=I}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,a){IR.reset(r,n,i,a),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:IR.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),Ft(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),IR=function(){var e,t,r,n,i,a={reset:function(c,f,p,v){t=c,e=f,r=p,n=v,i=Math.ceil(n/r),a.next=r>1&&n>0?s:o}};return a;function o(){return t<e?t++:null}function s(){var c=t%i*r+Math.ceil(t/i),f=t>=e?null:c<n?c:t;return t++,f}}();function Td(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!Tn(e)&&e!=null&&e!=="-"&&(e=+Il(e)),e==null||e===""?NaN:+e)}dr({number:function(e){return parseFloat(e)},time:function(e){return+Il(e)},trim:function(e){return Wt(e)?Es(e):e}});var Wce=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=Tn(t)?t:h1(t),i=Tn(r)?r:h1(r),a=isNaN(n),o=isNaN(i);if(a&&(n=this._incomparable),o&&(i=this._incomparable),a&&o){var s=Wt(t),c=Wt(r);s&&(n=c?t:0),c&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),qce=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Td(t,r)},e}();function Zce(e,t){var r=new qce,n=e.data,i=r.sourceFormat=e.sourceFormat,a=e.startIndex,o="";e.seriesLayoutBy!==Al&&Ba(o);var s=[],c={},f=e.dimensionsDefine;if(f)Te(f,function(E,P){var I=E.name,D={index:P,name:I,displayName:E.displayName};if(s.push(D),I!=null){var L="";$d(c,I)&&Ba(L),c[I]=D}});else for(var p=0;p<e.dimensionsDetectedCount;p++)s.push({index:p});var v=G$(i,Al);t.__isBuiltIn&&(r.getRawDataItem=function(E){return v(n,a,s,E)},r.getRawData=vr(Xce,null,e)),r.cloneRawData=vr(Yce,null,e);var y=W$(i,Al);r.count=vr(y,null,n,a,s);var _=q$(i);r.retrieveValue=function(E,P){var I=v(n,a,s,E);return S(I,P)};var S=r.retrieveValueFromItem=function(E,P){if(E!=null){var I=s[P];if(I)return _(E,P,I.name)}};return r.getDimensionInfo=vr(Kce,null,s,c),r.cloneAllDimensionInfo=vr(Jce,null,s),r}function Xce(e){var t=e.sourceFormat;if(!zM(t)){var r="";Ba(r)}return e.data}function Yce(e){var t=e.sourceFormat,r=e.data;if(!zM(t)){var n="";Ba(n)}if(t===Ua){for(var i=[],a=0,o=r.length;a<o;a++)i.push(r[a].slice());return i}else if(t===Hs){for(var i=[],a=0,o=r.length;a<o;a++)i.push(At({},r[a]));return i}}function Kce(e,t,r){if(r!=null){if(Tn(r)||!isNaN(r)&&!$d(t,r))return e[r];if($d(t,r))return t[r]}}function Jce(e){return Lr(e)}var X$=dr();function Qce(e){e=Lr(e);var t=e.type,r="";t||Ba(r);var n=t.split(":");n.length!==2&&Ba(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,X$.set(t,e)}function ehe(e,t,r){var n=Ca(e),i=n.length,a="";i||Ba(a);for(var o=0,s=i;o<s;o++){var c=n[o];t=the(c,t),o!==s-1&&(t.length=Math.max(t.length,1))}return t}function the(e,t,r,n){var i="";t.length||Ba(i),or(e)||Ba(i);var a=e.type,o=X$.get(a);o||Ba(i);var s=Qt(t,function(f){return Zce(f,o)}),c=Ca(o.transform({upstream:s[0],upstreamList:s,config:Lr(e.config)}));return Qt(c,function(f,p){var v="";or(f)||Ba(v),f.data||Ba(v);var y=H$(f.data);zM(y)||Ba(v);var _,S=t[0];if(S&&p===0&&!f.dimensions){var E=S.startIndex;E&&(f.data=S.data.slice(0,E).concat(f.data)),_={seriesLayoutBy:Al,sourceHeader:E,dimensions:S.metaRawOption.dimensions}}else _={seriesLayoutBy:Al,sourceHeader:0,dimensions:f.dimensions};return VT(f.data,_,null)})}function zM(e){return e===Ua||e===Hs}var Rb="undefined",rhe=typeof Uint32Array===Rb?Array:Uint32Array,nhe=typeof Uint16Array===Rb?Array:Uint16Array,Y$=typeof Int32Array===Rb?Array:Int32Array,DR=typeof Float64Array===Rb?Array:Float64Array,K$={float:DR,int:Y$,ordinal:Array,number:Array,time:DR},CS;function Mm(e){return e>65535?rhe:nhe}function Gf(){return[1/0,-1/0]}function ihe(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function LR(e,t,r,n,i){var a=K$[r||"float"];if(i){var o=e[t],s=o&&o.length;if(s!==n){for(var c=new a(n),f=0;f<s;f++)c[f]=o[f];e[t]=c}}else e[t]=new a(n)}var HT=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=dr()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),a=this.defaultDimValueGetter=CS[i.sourceFormat];this._dimValueGetter=n||a,this._rawExtent=[],U$(i),this._dimensions=Qt(r,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,a=n.get(t);if(a!=null){if(i[a].type===r)return a}else a=i.length;return i[a]={type:r},n.set(t,a),this._chunks[a]=new K$[r||"float"](this._rawCount),this._rawExtent[a]=Gf(),a},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],a=this._rawExtent,o=i.ordinalOffset||0,s=n.length;o===0&&(a[t]=Gf());for(var c=a[t],f=o;f<s;f++){var p=n[f]=r.parseAndCollect(n[f]);isNaN(p)||(c[0]=Math.min(p,c[0]),c[1]=Math.max(p,c[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),c=s+Math.max(t.length,r||0),f=0;f<a;f++){var p=i[f];LR(n,f,p.type,c,!0)}for(var v=[],y=s;y<c;y++)for(var _=y-s,S=0;S<a;S++){var p=i[S],E=CS.arrayRows.call(this,t[_]||v,p.property,_,S);n[S][y]=E;var P=o[S];E<P[0]&&(P[0]=E),E>P[1]&&(P[1]=E)}return this._rawCount=this._count=c,{start:s,end:c}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,c=this._rawExtent,f=Qt(o,function(D){return D.property}),p=0;p<s;p++){var v=o[p];c[p]||(c[p]=Gf()),LR(a,p,v.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,a,c);else for(var y=[],_=t;_<r;_++){y=i.getItem(_,y);for(var S=0;S<s;S++){var E=a[S],P=this._dimValueGetter(y,f[S],_,S);E[_]=P;var I=c[S];P<I[0]&&(I[0]=P),P>I[1]&&(I[1]=P)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=t;for(var a=0,o=i.length;a<o;a++)n.push(this.get(i[a],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,a=this.count();i<a;i++){var o=this.get(t,i);isNaN(o)||(n+=o)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(a){isNaN(a)||r.push(a)});var n=r.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(r[o]<t)i=o+1;else if(r[o]>t)a=o-1;else return o}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,a=i[t],o=[];if(!a)return o;n==null&&(n=1/0);for(var s=1/0,c=-1,f=0,p=0,v=this.count();p<v;p++){var y=this.getRawIndex(p),_=r-a[y],S=Math.abs(_);S<=n&&((S<s||S===s&&_>=0&&c<0)&&(s=S,c=_,f=0),_===c&&(o[f++]=p))}return o.length=f,o},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var a=0;a<i;a++)t[a]=r[a]}else t=new n(r.buffer,0,i)}else{var n=Mm(this._rawCount);t=new n(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),a=Mm(n._rawCount),o=new a(i),s=[],c=t.length,f=0,p=t[0],v=n._chunks,y=0;y<i;y++){var _=void 0,S=n.getRawIndex(y);if(c===0)_=r(y);else if(c===1){var E=v[p][S];_=r(E,y)}else{for(var P=0;P<c;P++)s[P]=v[t[P]][S];s[P]=y,_=r.apply(null,s)}_&&(o[f++]=S)}return f<i&&(n._indices=o),n._count=f,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=Vr(t),a=i.length;if(!a)return this;var o=r.count(),s=Mm(r._rawCount),c=new s(o),f=0,p=i[0],v=t[p][0],y=t[p][1],_=r._chunks,S=!1;if(!r._indices){var E=0;if(a===1){for(var P=_[i[0]],I=0;I<n;I++){var D=P[I];(D>=v&&D<=y||isNaN(D))&&(c[f++]=E),E++}S=!0}else if(a===2){for(var P=_[i[0]],L=_[i[1]],B=t[i[1]][0],U=t[i[1]][1],I=0;I<n;I++){var D=P[I],V=L[I];(D>=v&&D<=y||isNaN(D))&&(V>=B&&V<=U||isNaN(V))&&(c[f++]=E),E++}S=!0}}if(!S)if(a===1)for(var I=0;I<o;I++){var N=r.getRawIndex(I),D=_[i[0]][N];(D>=v&&D<=y||isNaN(D))&&(c[f++]=N)}else for(var I=0;I<o;I++){for(var G=!0,N=r.getRawIndex(I),Y=0;Y<a;Y++){var ee=i[Y],D=_[ee][N];(D<t[ee][0]||D>t[ee][1])&&(G=!1)}G&&(c[f++]=r.getRawIndex(I))}return f<o&&(r._indices=c),r._count=f,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,a=[],o=r.length,s=t.count(),c=[],f=t._rawExtent,p=0;p<r.length;p++)f[r[p]]=Gf();for(var v=0;v<s;v++){for(var y=t.getRawIndex(v),_=0;_<o;_++)c[_]=i[r[_]][y];c[o]=v;var S=n&&n.apply(null,c);if(S!=null){typeof S!="object"&&(a[0]=S,S=a);for(var p=0;p<S.length;p++){var E=r[p],P=S[p],I=f[E],D=i[E];D&&(D[y]=P),P<I[0]&&(I[0]=P),P>I[1]&&(I[1]=P)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,a=i[t],o=this.count(),s=0,c=Math.floor(1/r),f=this.getRawIndex(0),p,v,y,_=new(Mm(this._rawCount))(Math.min((Math.ceil(o/c)+2)*2,o));_[s++]=f;for(var S=1;S<o-1;S+=c){for(var E=Math.min(S+c,o-1),P=Math.min(S+c*2,o),I=(P+E)/2,D=0,L=E;L<P;L++){var B=this.getRawIndex(L),U=a[B];isNaN(U)||(D+=U)}D/=P-E;var V=S,N=Math.min(S+c,o),G=S-1,Y=a[f];p=-1,y=V;for(var ee=-1,J=0,L=V;L<N;L++){var B=this.getRawIndex(L),U=a[B];if(isNaN(U)){J++,ee<0&&(ee=B);continue}v=Math.abs((G-I)*(U-Y)-(G-L)*(D-Y)),v>p&&(p=v,y=B)}J>0&&J<N-V&&(_[s++]=Math.min(ee,y),y=Math.max(ee,y)),_[s++]=y,f=y}return _[s++]=this.getRawIndex(o-1),n._count=s,n._indices=_,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var a=this.clone([t],!0),o=a._chunks,s=[],c=Math.floor(1/r),f=o[t],p=this.count(),v=a._rawExtent[t]=Gf(),y=new(Mm(this._rawCount))(Math.ceil(p/c)),_=0,S=0;S<p;S+=c){c>p-S&&(c=p-S,s.length=c);for(var E=0;E<c;E++){var P=this.getRawIndex(S+E);s[E]=f[P]}var I=n(s),D=this.getRawIndex(Math.min(S+i(s,I)||0,p-1));f[D]=I,I<v[0]&&(v[0]=I),I>v[1]&&(v[1]=I),y[_++]=D}return a._count=_,a._indices=y,a._updateGetRawIdx(),a},e.prototype.each=function(t,r){if(this._count)for(var n=t.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(n){case 0:r(a);break;case 1:r(i[t[0]][s],a);break;case 2:r(i[t[0]][s],i[t[1]][s],a);break;default:for(var c=0,f=[];c<n;c++)f[c]=i[t[c]][s];f[c]=a,r.apply(null,f)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=Gf();if(!r)return n;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[t].slice();if(o=this._extent[t],o)return o.slice();o=n;for(var s=o[0],c=o[1],f=0;f<i;f++){var p=this.getRawIndex(f),v=r[p];v<s&&(s=v),v>c&&(c=v)}return o=[s,c],this._extent[t]=o,o},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,a=0;a<i.length;a++)n.push(i[a][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,a=t&&np(t,function(s,c){return s[c]=!0,s},{});if(a)for(var o=0;o<i.length;o++)n._chunks[o]=a[o]?ihe(i[o]):i[o];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Lr(this._extent),t._rawExtent=Lr(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,a){return Td(r[a],this._dimensions[a])}CS={arrayRows:t,objectRows:function(r,n,i,a){return Td(r[n],this._dimensions[a])},keyedColumns:t,original:function(r,n,i,a){var o=r&&(r.value==null?r:r.value);return Td(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(r,n,i,a){return r[a]}}}(),e}(),ahe=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,a;if(B_(t)){var o=t,s=void 0,c=void 0,f=void 0;if(n){var p=r[0];p.prepareSource(),f=p.getSource(),s=f.data,c=f.sourceFormat,a=[p._getVersionSign()]}else s=o.get("data",!0),c=oo(s)?Ou:Bo,a=[];var v=this._getSourceMetaRawOption()||{},y=f&&f.metaRawOption||{},_=Er(v.seriesLayoutBy,y.seriesLayoutBy)||null,S=Er(v.sourceHeader,y.sourceHeader),E=Er(v.dimensions,y.dimensions),P=_!==y.seriesLayoutBy||!!S!=!!y.sourceHeader||E;i=P?[VT(s,{seriesLayoutBy:_,sourceHeader:S,dimensions:E},c)]:[]}else{var I=t;if(n){var D=this._applyTransform(r);i=D.sourceList,a=D.upstreamSignList}else{var L=I.get("source",!0);i=[VT(L,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var a="";t.length!==1&&kR(a)}var o,s=[],c=[];return Te(t,function(f){f.prepareSource();var p=f.getSource(i||0),v="";i!=null&&!p&&kR(v),s.push(p),c.push(f._getVersionSign())}),n?o=ehe(n,s,{datasetIndex:r.componentIndex}):i!=null&&(o=[Fce(s[0])]),{sourceList:o,upstreamSignList:c}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[n];if(!s){var c=this._getUpstreamSourceManagers()[0];B_(this._sourceHost)&&c?s=c._innerGetDataStore(t,r,n):(s=new HT,s.initData(new j$(r,t.length),t)),o[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(B_(t)){var r=B$(t);return r?[r.getSourceManager()]:[]}else return Qt(cce(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(B_(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;r=a.get("seriesLayoutBy",!0),n=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function B_(e){return e.mainType==="series"}function kR(e){throw new Error(e)}var J$="line-height:1";function Q$(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",a=e.color||"#464646",o=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+to(n+"")+"px;color:"+to(r)+";font-weight:"+to(i+""),valueStyle:"font-size:"+to(o+"")+"px;color:"+to(a)+";font-weight:"+to(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var ohe=[0,10,20,30],she=["",`
`,`

`,`


`];function Uu(e,t){return t.type=e,t}function UT(e){return e.type==="section"}function eN(e){return UT(e)?lhe:uhe}function tN(e){if(UT(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return Te(e.blocks,function(i){var a=tN(i);a>=t&&(t=a+ +(n&&(!a||UT(i)&&!i.noHeader)))}),t}return 0}function lhe(e,t,r,n){var i=t.noHeader,a=che(tN(t)),o=[],s=t.blocks||[];rs(!s||Ft(s)),s=s||[];var c=e.orderMode;if(t.sortBlocks&&c){s=s.slice();var f={valueAsc:"asc",valueDesc:"desc"};if($d(f,c)){var p=new Wce(f[c],null);s.sort(function(S,E){return p.evaluate(S.sortParam,E.sortParam)})}else c==="seriesDesc"&&s.reverse()}Te(s,function(S,E){var P=t.valueFormatter,I=eN(S)(P?At(At({},e),{valueFormatter:P}):e,S,E>0?a.html:0,n);I!=null&&o.push(I)});var v=e.renderMode==="richText"?o.join(a.richText):jT(o.join(""),i?r:a.html);if(i)return v;var y=NT(t.header,"ordinal",e.useUTC),_=Q$(n,e.renderMode).nameStyle;return e.renderMode==="richText"?rN(e,y,_)+a.richText+v:jT('<div style="'+_+";"+J$+';">'+to(y)+"</div>"+v,r)}function uhe(e,t,r,n){var i=e.renderMode,a=t.noName,o=t.noValue,s=!t.markerType,c=t.name,f=e.useUTC,p=t.valueFormatter||e.valueFormatter||function(B){return B=Ft(B)?B:[B],Qt(B,function(U,V){return NT(U,Ft(_)?_[V]:_,f)})};if(!(a&&o)){var v=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),y=a?"":NT(c,"ordinal",f),_=t.valueType,S=o?[]:p(t.value),E=!s||!a,P=!s&&a,I=Q$(n,i),D=I.nameStyle,L=I.valueStyle;return i==="richText"?(s?"":v)+(a?"":rN(e,y,D))+(o?"":dhe(e,S,E,P,L)):jT((s?"":v)+(a?"":hhe(y,!s,D))+(o?"":fhe(S,E,P,L)),r)}}function RR(e,t,r,n,i,a){if(e){var o=eN(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return o(s,e,0,a)}}function che(e){return{html:ohe[e],richText:she[e]}}function jT(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+J$+';">'+e+r+"</div>"}function hhe(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+to(e)+"</span>"}function fhe(e,t,r,n){var i=r?"10px":"20px",a=t?"float:right;margin-left:"+i:"";return e=Ft(e)?e:[e],'<span style="'+a+";"+n+'">'+Qt(e,function(o){return to(o)}).join("&nbsp;&nbsp;")+"</span>"}function rN(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function dhe(e,t,r,n,i){var a=[i],o=n?10:20;return r&&a.push({padding:[0,0,0,o],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(Ft(t)?t.join("  "):t,a)}function phe(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return Ah(n)}function nN(e,t){var r=e.get("padding");return r??(t==="richText"?[8,10]:10)}var AS=function(){function e(){this.richTextStyles={},this._nextStyleNameId=vF()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,a=rce({color:r,type:t,renderMode:n,markerId:i});return Wt(a)?a:(this.richTextStyles[i]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};Ft(r)?Te(r,function(a){return At(n,a)}):At(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function mhe(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=t.getRawValue(r),c=Ft(s),f=phe(t,r),p,v,y,_;if(o>1||c&&!o){var S=vhe(s,t,r,a,f);p=S.inlineValues,v=S.inlineValueTypes,y=S.blocks,_=S.inlineValues[0]}else if(o){var E=i.getDimensionInfo(a[0]);_=p=Ud(i,r,a[0]),v=E.type}else _=p=c?s[0]:s;var P=aM(t),I=P&&t.name||"",D=i.getName(r),L=n?I:D;return Uu("section",{header:I,noHeader:n||!P,sortParam:_,blocks:[Uu("nameValue",{markerType:"item",markerColor:f,name:L,noName:!Es(L),value:p,valueType:v})].concat(y||[])})}function vhe(e,t,r,n,i){var a=t.getData(),o=np(e,function(v,y,_){var S=a.getDimensionInfo(_);return v=v||S&&S.tooltip!==!1&&S.displayName!=null},!1),s=[],c=[],f=[];n.length?Te(n,function(v){p(Ud(a,r,v),v)}):Te(e,p);function p(v,y){var _=a.getDimensionInfo(y);!_||_.otherDims.tooltip===!1||(o?f.push(Uu("nameValue",{markerType:"subItem",markerColor:i,name:_.displayName,value:v,valueType:_.type})):(s.push(v),c.push(_.type)))}return{inlineValues:s,inlineValueTypes:c,blocks:f}}var hu=Gn();function F_(e,t){return e.getName(t)||e.getId(t)}var ghe="__universalTransitionEnabled",Ob=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=wv({count:_he,reset:bhe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var a=hu(this).sourceManager=new ahe(this);a.prepareSource();var o=this.getInitialData(r,i);zR(o,this),this.dataTask.context.data=o,hu(this).dataBeforeProcessed=o,OR(this),this._initSelectedMapFromData(o)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=sg(this),a=i?Fg(r):{},o=this.subType;xn.hasClass(o)&&(o+="Series"),Ur(r,n.getTheme().get(this.subType)),Ur(r,this.getDefaultOption()),IT(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Hd(r,a,i)},t.prototype.mergeOption=function(r,n){r=Ur(this.option,r,!0),this.fillDataTextStyle(r.data);var i=sg(this);i&&Hd(this.option,r,i);var a=hu(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(r,n);zR(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,hu(this).dataBeforeProcessed=o,OR(this),this._initSelectedMapFromData(o)},t.prototype.fillDataTextStyle=function(r){if(r&&!oo(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&IT(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=GT(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return hu(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=GT(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}hu(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return dr(r)},t.prototype.getSourceManager=function(){return hu(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return hu(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return mhe({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(pr.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var a=this.ecModel,o=IM.prototype.getColorFromPalette.call(this,r,n,i);return o||(o=a.getColorFromPalette(r,n,i)),o},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(n);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var c=r[s],f=F_(o,c);i[f]=!1,this._selectedDataIndicesMap[f]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],a=0;a<r.length;a++)i[0]=r[a],this.isSelected(r[a],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=Vr(r),i=[],a=0;a<n.length;a++){var o=r[n[a]];o>=0&&i.push(o)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(n);return(i==="all"||i[F_(a,r)])&&!a.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[ghe])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,a,o=this.option,s=o.selectedMode,c=n.length;if(!(!s||!c)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){or(o.selectedMap)||(o.selectedMap={});for(var f=o.selectedMap,p=0;p<c;p++){var v=n[p],y=F_(r,v);f[y]=!0,this._selectedDataIndicesMap[y]=r.getRawIndex(v)}}else if(s==="single"||s===!0){var _=n[c-1],y=F_(r,_);o.selectedMap=(i={},i[y]=!0,i),this._selectedDataIndicesMap=(a={},a[y]=r.getRawIndex(_),a)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var a=r.getRawDataItem(i);a&&a.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return xn.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(xn);as(Ob,Z$);as(Ob,IM);wF(Ob,xn);function OR(e){var t=e.name;aM(e)||(e.name=yhe(e)||t)}function yhe(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return Te(r,function(i){var a=t.getDimensionInfo(i);a.displayName&&n.push(a.displayName)}),n.join(" ")}function _he(e){return e.model.getRawData().count()}function bhe(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),xhe}function xhe(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function zR(e,t){Te(hT(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,wn(whe,t))})}function whe(e,t){var r=GT(e);return r&&r.setOutputEnd((t||this).count()),t}function GT(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Mh=Ob;var BM=function(){function e(){this.group=new Rn,this.uid=Ab("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();sM(BM);gb(BM);const ns=BM;function FM(){var e=Gn();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,a=!!r.progressiveRender,o=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==o||a!==s)&&"reset"}}var iN=Gn(),She=FM(),$M=function(){function e(){this.group=new Rn,this.uid=Ab("viewChart"),this.renderTask=wv({plan:The,reset:Che}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var a=t.getData(i&&i.dataType);a&&FR(a,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var a=t.getData(i&&i.dataType);a&&FR(a,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){Sb(this.group,t)},e.markUpdateMethod=function(t,r){iN(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function BR(e,t,r){e&&zT(e)&&(t==="emphasis"?eg:tg)(e,r)}function FR(e,t,r){var n=Ch(e,t),i=t&&t.highlightKey!=null?zle(t.highlightKey):null;n!=null?Te(Ca(n),function(a){BR(e.getItemGraphicEl(a),r,i)}):e.eachItemGraphicEl(function(a){BR(a,r,i)})}sM($M);gb($M);function The(e){return She(e.model)}function Che(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,a=t.pipelineContext.progressiveRender,o=e.view,s=i&&iN(i).updateMethod,c=a?"incrementalPrepareRender":s&&o[s]?s:"render";return c!=="render"&&o[c](t,r,n,i),Ahe[c]}var Ahe={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const Rs=$M;var b1="\0__throttleOriginMethod",$R="\0__throttleRate",NR="\0__throttleType";function NM(e,t,r){var n,i=0,a=0,o=null,s,c,f,p;t=t||0;function v(){a=new Date().getTime(),o=null,e.apply(c,f||[])}var y=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];n=new Date().getTime(),c=this,f=_;var E=p||t,P=p||r;p=null,s=n-(P?i:a)-E,clearTimeout(o),P?o=setTimeout(v,E):s>=0?v():o=setTimeout(v,-s),i=n};return y.clear=function(){o&&(clearTimeout(o),o=null)},y.debounceNextCall=function(_){p=_},y}function zb(e,t,r,n){var i=e[t];if(i){var a=i[b1]||i,o=i[NR],s=i[$R];if(s!==r||o!==n){if(r==null||!n)return e[t]=a;i=e[t]=NM(a,r,n==="debounce"),i[b1]=a,i[NR]=n,i[$R]=r}return i}}function x1(e,t){var r=e[t];r&&r[b1]&&(r.clear&&r.clear(),e[t]=r[b1])}var VR=Gn(),HR={itemStyle:Qv(_$,!0),lineStyle:Qv(y$,!0)},Mhe={lineStyle:"stroke",itemStyle:"fill"};function aN(e,t){var r=e.visualStyleMapper||HR[t];return r||(console.warn("Unknown style type '"+t+"'."),HR.itemStyle)}function oN(e,t){var r=e.visualDrawType||Mhe[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var Ehe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),a=aN(e,n),o=a(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var c=oN(e,n),f=o[c],p=ir(f)?f:null,v=o.fill==="auto"||o.stroke==="auto";if(!o[c]||p||v){var y=e.getColorFromPalette(e.name,null,t.getSeriesCount());o[c]||(o[c]=y,r.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||ir(o.fill)?y:o.fill,o.stroke=o.stroke==="auto"||ir(o.stroke)?y:o.stroke}if(r.setVisual("style",o),r.setVisual("drawType",c),!t.isSeriesFiltered(e)&&p)return r.setVisual("colorFromPalette",!1),{dataEach:function(_,S){var E=e.getDataParams(S),P=At({},o);P[c]=p(E),_.setItemVisual(S,"style",P)}}}},Em=new sa,Phe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=aN(e,n),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(o,s){var c=o.getRawDataItem(s);if(c&&c[n]){Em.option=c[n];var f=i(Em),p=o.ensureUniqueItemVisual(s,"style");At(p,f),Em.option.decal&&(o.setItemVisual(s,"decal",Em.option.decal),Em.option.decal.dirty=!0),a in f&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Ihe={performRawSeries:!0,overallReset:function(e){var t=dr();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,a=t.get(i);a||(a={},t.set(i,a)),VR(r).scope=a}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},a=r.getData(),o=VR(r).scope,s=r.visualStyleAccessPath||"itemStyle",c=oN(r,s);a.each(function(f){var p=a.getRawIndex(f);i[p]=f}),n.each(function(f){var p=i[f],v=a.getItemVisual(p,"colorFromPalette");if(v){var y=a.ensureUniqueItemVisual(p,"style"),_=n.getName(f)||f+"",S=n.count();y[c]=r.getColorFromPalette(_,o,S)}})}})}},$_=Math.PI;function Dhe(e,t){t=t||{},rn(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Rn,n=new oi({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new ca({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new oi({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(a);var o;return t.showSpinner&&(o=new yM({shape:{startAngle:-$_/2,endAngle:-$_/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:$_*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:$_*3/2}).delay(300).start("circularInOut"),r.add(o)),r.resize=function(){var s=i.getBoundingRect().width,c=t.showSpinner?t.spinnerRadius:0,f=(e.getWidth()-c*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:c),p=e.getHeight()/2;t.showSpinner&&o.setShape({cx:f,cy:p}),a.setShape({x:f-c,y:p-c,width:c*2,height:c*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var sN=function(){function e(t,r,n,i){this._stageTaskMap=dr(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,a=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,o=a?n.step:null,s=i&&i.modDataCount,c=s!=null?Math.ceil(s/o):null;return{step:o,modBy:c,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),a=i.count(),o=n.progressiveEnabled&&r.incrementalPrepareRender&&a>=n.threshold,s=t.get("large")&&a>=t.get("largeThreshold"),c=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=n.context={progressiveRender:o,modDataCount:c,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=dr();t.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;n.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;Te(this._allHandlers,function(i){var a=t.get(i.uid)||t.set(i.uid,{}),o="";rs(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,r,n),i.overallReset&&this._createOverallStageTask(i,a,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var a=t.renderTask,o=a.context;o.model=r,o.ecModel=n,o.api=i,a.__block=!t.incrementalPrepareRender,this._pipe(r,a)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var a=!1,o=this;Te(t,function(c,f){if(!(i.visualType&&i.visualType!==c.visualType)){var p=o._stageTaskMap.get(c.uid),v=p.seriesTaskMap,y=p.overallTask;if(y){var _,S=y.agentStubMap;S.each(function(P){s(i,P)&&(P.dirty(),_=!0)}),_&&y.dirty(),o.updatePayload(y,n);var E=o.getPerformArgs(y,i.block);S.each(function(P){P.perform(E)}),y.perform(E)&&(a=!0)}else v&&v.each(function(P,I){s(i,P)&&P.dirty();var D=o.getPerformArgs(P,i.block);D.skip=!c.performRawSeries&&r.isSeriesFiltered(P.context.model),o.updatePayload(P,n),P.perform(D)&&(a=!0)})}});function s(c,f){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(f.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var a=this,o=r.seriesTaskMap,s=r.seriesTaskMap=dr(),c=t.seriesType,f=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(p):c?n.eachRawSeriesByType(c,p):f&&f(n,i).each(p);function p(v){var y=v.uid,_=s.set(y,o&&o.get(y)||wv({plan:zhe,reset:Bhe,count:$he}));_.context={model:v,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(v,_)}},e.prototype._createOverallStageTask=function(t,r,n,i){var a=this,o=r.overallTask=r.overallTask||wv({reset:Lhe});o.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:a};var s=o.agentStubMap,c=o.agentStubMap=dr(),f=t.seriesType,p=t.getTargetSeries,v=!0,y=!1,_="";rs(!t.createOnAllSeries,_),f?n.eachRawSeriesByType(f,S):p?p(n,i).each(S):(v=!1,Te(n.getSeries(),S));function S(E){var P=E.uid,I=c.set(P,s&&s.get(P)||(y=!0,wv({reset:khe,onDirty:Ohe})));I.context={model:E,overallProgress:v},I.agent=o,I.__block=v,a._pipe(E,I)}y&&o.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return ir(t)&&(t={overallReset:t,seriesType:Nhe(t)}),t.uid=Ab("stageHandler"),r&&(t.visualType=r),t},e}();function Lhe(e){e.overallReset(e.ecModel,e.api,e.payload)}function khe(e){return e.overallProgress&&Rhe}function Rhe(){this.agent.dirty(),this.getDownstream().dirty()}function Ohe(){this.agent&&this.agent.dirty()}function zhe(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function Bhe(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ca(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Qt(t,function(r,n){return lN(n)}):Fhe}var Fhe=lN(0);function lN(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var a=t.start;a<t.end;a++)i.dataEach(n,a);else i&&i.progress&&i.progress(t,n)}}function $he(e){return e.data.count()}function Nhe(e){w1=null;try{e(ug,uN)}catch{}return w1}var ug={},uN={},w1;cN(ug,DM);cN(uN,$$);ug.eachSeriesByType=ug.eachRawSeriesByType=function(e){w1=e};ug.eachComponent=function(e){e.mainType==="series"&&e.subType&&(w1=e.subType)};function cN(e,t){for(var r in t.prototype)e[r]=la}var UR=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Vhe={color:UR,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],UR]};var ba="#B9B8CE",jR="#100C2A",N_=function(){return{axisLine:{lineStyle:{color:ba}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},GR=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],hN={darkMode:!0,color:GR,backgroundColor:jR,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ba}},textStyle:{color:ba},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ba}},dataZoom:{borderColor:"#71708A",textStyle:{color:ba},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ba}},timeline:{lineStyle:{color:ba},label:{color:ba},controlStyle:{color:ba,borderColor:ba}},calendar:{itemStyle:{color:jR},dayLabel:{color:ba},monthLabel:{color:ba},yearLabel:{color:ba}},timeAxis:N_(),logAxis:N_(),valueAxis:N_(),categoryAxis:N_(),line:{symbol:"circle"},graph:{color:GR},gauge:{title:{color:ba},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ba},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};hN.categoryAxis.splitLine.show=!1;const Hhe=hN;var Uhe=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Wt(t)){var a=Is(t);r.mainType=a.main||null,r.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};Te(t,function(c,f){for(var p=!1,v=0;v<o.length;v++){var y=o[v],_=f.lastIndexOf(y);if(_>0&&_===f.length-y.length){var S=f.slice(0,_);S!=="data"&&(r.mainType=S,r[y.toLowerCase()]=c,p=!0)}}s.hasOwnProperty(f)&&(n[f]=c,p=!0),p||(i[f]=c)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,a=n.packedEvent,o=n.model,s=n.view;if(!o||!s)return!0;var c=r.cptQuery,f=r.dataQuery;return p(c,o,"mainType")&&p(c,o,"subType")&&p(c,o,"index","componentIndex")&&p(c,o,"name")&&p(c,o,"id")&&p(f,a,"name")&&p(f,a,"dataIndex")&&p(f,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,a));function p(v,y,_,S){return v[_]==null||y[S||_]===v[_]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),WT=["symbol","symbolSize","symbolRotate","symbolOffset"],WR=WT.concat(["symbolKeepAspect"]),jhe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},a=!1,o=0;o<WT.length;o++){var s=WT[o],c=e.get(s);ir(c)?(a=!0,i[s]=c):n[s]=c}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(At({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var f=Vr(i);function p(v,y){for(var _=e.getRawValue(y),S=e.getDataParams(y),E=0;E<f.length;E++){var P=f[E];v.setItemVisual(y,P,i[P](_,S))}}return{dataEach:a?p:null}}},Ghe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,a){for(var o=i.getItemModel(a),s=0;s<WR.length;s++){var c=WR[s],f=o.getShallow(c,!0);f!=null&&i.setItemVisual(a,c,f)}}return{dataEach:r.hasItemOption?n:null}}};function Whe(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function fN(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Wf(e,t,r,n,i){var a=e+t;r.isSilent(a)||n.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,c=o.option.selectedMap,f=i.selected,p=0;p<f.length;p++)if(f[p].seriesIndex===s){var v=o.getData(),y=Ch(v,i.fromActionPayload);r.trigger(a,{type:a,seriesId:o.id,name:Ft(y)?v.getName(y[0]):v.getName(y),selected:Wt(c)?c:At({},c)})}})}function qhe(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(Wf("map","selectchanged",t,i,n),Wf("pie","selectchanged",t,i,n)):n.fromAction==="select"?(Wf("map","selected",t,i,n),Wf("pie","selected",t,i,n)):n.fromAction==="unselect"&&(Wf("map","unselected",t,i,n),Wf("pie","unselected",t,i,n))})}function Xm(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var Zhe=Math.round(Math.random()*9),Xhe=typeof Object.defineProperty=="function",Yhe=function(){function e(){this._id="__ec_inner_"+Zhe++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return Xhe?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}(),Khe=Qr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,a=t.height/2;e.moveTo(r,n-a),e.lineTo(r+i,n+a),e.lineTo(r-i,n+a),e.closePath()}}),Jhe=Qr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,a=t.height/2;e.moveTo(r,n-a),e.lineTo(r+i,n),e.lineTo(r,n+a),e.lineTo(r-i,n),e.closePath()}}),Qhe=Qr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,a=Math.max(i,t.height),o=i/2,s=o*o/(a-o),c=n-a+o+s,f=Math.asin(s/o),p=Math.cos(f)*o,v=Math.sin(f),y=Math.cos(f),_=o*.6,S=o*.7;e.moveTo(r-p,c+s),e.arc(r,c,o,Math.PI-f,Math.PI*2+f),e.bezierCurveTo(r+p-v*_,c+s+y*_,r,n-S,r,n),e.bezierCurveTo(r,n-S,r-p+v*_,c+s+y*_,r-p,c+s),e.closePath()}}),efe=Qr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,a=t.y,o=n/3*2;e.moveTo(i,a),e.lineTo(i+o,a+r),e.lineTo(i,a+r/4*3),e.lineTo(i-o,a+r),e.lineTo(i,a),e.closePath()}}),tfe={line:Hu,rect:oi,roundRect:oi,square:oi,circle:pM,diamond:Jhe,pin:Qhe,arrow:efe,triangle:Khe},rfe={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var a=Math.min(r,n);i.x=e,i.y=t,i.width=a,i.height=a},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},S1={};Te(tfe,function(e,t){S1[t]=new e});var nfe=Qr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=lF(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=S1[n];i||(n="rect",i=S1[n]),rfe[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function ife(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function is(e,t,r,n,i,a,o){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var c;return e.indexOf("image://")===0?c=c$(e.slice(8),new qr(t,r,n,i),o?"center":"cover"):e.indexOf("path://")===0?c=bM(e.slice(7),{},new qr(t,r,n,i),o?"center":"cover"):c=new nfe({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),c.__isEmptyBrush=s,c.setColor=ife,a&&c.setColor(a),c}function VM(e){return Ft(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function Bb(e,t){if(e!=null)return Ft(e)||(e=[e,e]),[pi(e[0],t[0])||0,pi(Er(e[1],e[0]),t[1])||0]}function sh(e){return isFinite(e)}function afe(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,a=t.y==null?0:t.y,o=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,a=a*r.height+r.y,o=o*r.height+r.y),n=sh(n)?n:0,i=sh(i)?i:1,a=sh(a)?a:0,o=sh(o)?o:0;var s=e.createLinearGradient(n,a,i,o);return s}function ofe(e,t,r){var n=r.width,i=r.height,a=Math.min(n,i),o=t.x==null?.5:t.x,s=t.y==null?.5:t.y,c=t.r==null?.5:t.r;t.global||(o=o*n+r.x,s=s*i+r.y,c=c*a),o=sh(o)?o:.5,s=sh(s)?s:.5,c=c>=0&&sh(c)?c:.5;var f=e.createRadialGradient(o,s,0,o,s,c);return f}function qT(e,t,r){for(var n=t.type==="radial"?ofe(e,t,r):afe(e,t,r),i=t.colorStops,a=0;a<i.length;a++)n.addColorStop(i[a].offset,i[a].color);return n}function sfe(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function V_(e){return parseInt(e,10)}function cd(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||V_(s[n])||V_(e.style[n]))-(V_(s[a])||0)-(V_(s[o])||0)|0}function lfe(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Tn(e)?[e]:Ft(e)?e:null}function HM(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&lfe(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Qt(r,function(a){return a/i}),n/=i)}return[r,n]}var ufe=new Vu(!0);function T1(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function qR(e){return typeof e=="string"&&e!=="none"}function C1(e){var t=e.fill;return t!=null&&t!=="none"}function ZR(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function XR(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function ZT(e,t,r){var n=lM(t.image,t.__image,r);if(yb(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*g0),a.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(a)}return i}}function cfe(e,t,r,n){var i,a=T1(r),o=C1(r),s=r.strokePercent,c=s<1,f=!t.path;(!t.silent||c)&&f&&t.createPathProxy();var p=t.path||ufe,v=t.__dirty;if(!n){var y=r.fill,_=r.stroke,S=o&&!!y.colorStops,E=a&&!!_.colorStops,P=o&&!!y.image,I=a&&!!_.image,D=void 0,L=void 0,B=void 0,U=void 0,V=void 0;(S||E)&&(V=t.getBoundingRect()),S&&(D=v?qT(e,y,V):t.__canvasFillGradient,t.__canvasFillGradient=D),E&&(L=v?qT(e,_,V):t.__canvasStrokeGradient,t.__canvasStrokeGradient=L),P&&(B=v||!t.__canvasFillPattern?ZT(e,y,t):t.__canvasFillPattern,t.__canvasFillPattern=B),I&&(U=v||!t.__canvasStrokePattern?ZT(e,_,t):t.__canvasStrokePattern,t.__canvasStrokePattern=B),S?e.fillStyle=D:P&&(B?e.fillStyle=B:o=!1),E?e.strokeStyle=L:I&&(U?e.strokeStyle=U:a=!1)}var N=t.getGlobalScale();p.setScale(N[0],N[1],t.segmentIgnoreThreshold);var G,Y;e.setLineDash&&r.lineDash&&(i=HM(t),G=i[0],Y=i[1]);var ee=!0;(f||v&Qf)&&(p.setDPR(e.dpr),c?p.setContext(null):(p.setContext(e),ee=!1),p.reset(),t.buildPath(p,t.shape,n),p.toStatic(),t.pathUpdated()),ee&&p.rebuildPath(e,c?s:1),G&&(e.setLineDash(G),e.lineDashOffset=Y),n||(r.strokeFirst?(a&&XR(e,r),o&&ZR(e,r)):(o&&ZR(e,r),a&&XR(e,r))),G&&e.setLineDash([])}function hfe(e,t,r){var n=t.__image=lM(r.image,t.__image,t,t.onload);if(!(!n||!yb(n))){var i=r.x||0,a=r.y||0,o=t.getWidth(),s=t.getHeight(),c=n.width/n.height;if(o==null&&s!=null?o=s*c:s==null&&o!=null?s=o/c:o==null&&s==null&&(o=n.width,s=n.height),r.sWidth&&r.sHeight){var f=r.sx||0,p=r.sy||0;e.drawImage(n,f,p,r.sWidth,r.sHeight,i,a,o,s)}else if(r.sx&&r.sy){var f=r.sx,p=r.sy,v=o-f,y=s-p;e.drawImage(n,f,p,v,y,i,a,o,s)}else e.drawImage(n,i,a,o,s)}}function ffe(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||Nu,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var a=void 0,o=void 0;e.setLineDash&&r.lineDash&&(n=HM(t),a=n[0],o=n[1]),a&&(e.setLineDash(a),e.lineDashOffset=o),r.strokeFirst?(T1(r)&&e.strokeText(i,r.x,r.y),C1(r)&&e.fillText(i,r.x,r.y)):(C1(r)&&e.fillText(i,r.x,r.y),T1(r)&&e.strokeText(i,r.x,r.y)),a&&e.setLineDash([])}}var YR=["shadowBlur","shadowOffsetX","shadowOffsetY"],KR=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function dN(e,t,r,n,i){var a=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){Fa(e,i),a=!0;var o=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(o)?gh.opacity:o}(n||t.blend!==r.blend)&&(a||(Fa(e,i),a=!0),e.globalCompositeOperation=t.blend||gh.blend);for(var s=0;s<YR.length;s++){var c=YR[s];(n||t[c]!==r[c])&&(a||(Fa(e,i),a=!0),e[c]=e.dpr*(t[c]||0))}return(n||t.shadowColor!==r.shadowColor)&&(a||(Fa(e,i),a=!0),e.shadowColor=t.shadowColor||gh.shadowColor),a}function JR(e,t,r,n,i){var a=cg(t,i.inHover),o=n?null:r&&cg(r,i.inHover)||{};if(a===o)return!1;var s=dN(e,a,o,n,i);if((n||a.fill!==o.fill)&&(s||(Fa(e,i),s=!0),qR(a.fill)&&(e.fillStyle=a.fill)),(n||a.stroke!==o.stroke)&&(s||(Fa(e,i),s=!0),qR(a.stroke)&&(e.strokeStyle=a.stroke)),(n||a.opacity!==o.opacity)&&(s||(Fa(e,i),s=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var c=a.lineWidth,f=c/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==f&&(s||(Fa(e,i),s=!0),e.lineWidth=f)}for(var p=0;p<KR.length;p++){var v=KR[p],y=v[0];(n||a[y]!==o[y])&&(s||(Fa(e,i),s=!0),e[y]=a[y]||v[1])}return s}function dfe(e,t,r,n,i){return dN(e,cg(t,i.inHover),r&&cg(r,i.inHover),n,i)}function pN(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function pfe(e,t,r){for(var n=!1,i=0;i<e.length;i++){var a=e[i];n=n||a.isZeroArea(),pN(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}r.allClipped=n}function mfe(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var QR=1,eO=2,tO=3,rO=4;function vfe(e){var t=C1(e),r=T1(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function Fa(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function cg(e,t){return t&&e.__hoverStyle||e.style}function mN(e,t){lh(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function lh(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~ro,t.__isRendered=!1;return}var a=t.__clipPaths,o=r.prevElClipPaths,s=!1,c=!1;if((!o||sfe(a,o))&&(o&&o.length&&(Fa(e,r),e.restore(),c=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(Fa(e,r),e.save(),pfe(a,e,r),s=!0),r.prevElClipPaths=a),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var f=r.prevEl;f||(c=s=!0);var p=t instanceof Qr&&t.autoBatch&&vfe(t.style);s||mfe(i,f.transform)?(Fa(e,r),pN(e,t)):p||Fa(e,r);var v=cg(t,r.inHover);t instanceof Qr?(r.lastDrawType!==QR&&(c=!0,r.lastDrawType=QR),JR(e,t,f,c,r),(!p||!r.batchFill&&!r.batchStroke)&&e.beginPath(),cfe(e,t,v,p),p&&(r.batchFill=v.fill||"",r.batchStroke=v.stroke||"")):t instanceof d1?(r.lastDrawType!==tO&&(c=!0,r.lastDrawType=tO),JR(e,t,f,c,r),ffe(e,t,v)):t instanceof zl?(r.lastDrawType!==eO&&(c=!0,r.lastDrawType=eO),dfe(e,t,f,c,r),hfe(e,t,v)):t.getTemporalDisplayables&&(r.lastDrawType!==rO&&(c=!0,r.lastDrawType=rO),gfe(e,t,r)),p&&n&&Fa(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function gfe(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},o,s;for(o=t.getCursor(),s=n.length;o<s;o++){var c=n[o];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),lh(e,c,a,o===s-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),a.prevEl=c}for(var f=0,p=i.length;f<p;f++){var c=i[f];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),lh(e,c,a,f===p-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),a.prevEl=c}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var MS=new Yhe,nO=new Lg(100),iO=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function XT(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&MS.delete(e);var a=MS.get(e);if(a)return a;var o=rn(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return c(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/r,MS.set(e,s),e.dirty=!1,s;function c(f){for(var p=[r],v=!0,y=0;y<iO.length;++y){var _=o[iO[y]];if(_!=null&&!Ft(_)&&!Wt(_)&&!Tn(_)&&typeof _!="boolean"){v=!1;break}p.push(_)}var S;if(v){S=p.join(",")+(i?"-svg":"");var E=nO.get(S);E&&(i?f.svgElement=E:f.image=E)}var P=gN(o.dashArrayX),I=yfe(o.dashArrayY),D=vN(o.symbol),L=_fe(P),B=yN(I),U=!i&&rp.createCanvas(),V=i&&{tag:"g",attrs:{},key:"dcl",children:[]},N=Y(),G;U&&(U.width=N.width*r,U.height=N.height*r,G=U.getContext("2d")),ee(),v&&nO.put(S,U||V),f.image=U,f.svgElement=V,f.svgWidth=N.width,f.svgHeight=N.height;function Y(){for(var J=1,X=0,ne=L.length;X<ne;++X)J=pk(J,L[X]);for(var we=1,X=0,ne=D.length;X<ne;++X)we=pk(we,D[X].length);J*=we;var fe=B*L.length*D.length;return{width:Math.max(1,Math.min(J,o.maxTileWidth)),height:Math.max(1,Math.min(fe,o.maxTileHeight))}}function ee(){G&&(G.clearRect(0,0,U.width,U.height),o.backgroundColor&&(G.fillStyle=o.backgroundColor,G.fillRect(0,0,U.width,U.height)));for(var J=0,X=0;X<I.length;++X)J+=I[X];if(J<=0)return;for(var ne=-B,we=0,fe=0,me=0;ne<N.height;){if(we%2===0){for(var Ve=fe/2%D.length,Oe=0,ct=0,_t=0;Oe<N.width*2;){for(var zt=0,X=0;X<P[me].length;++X)zt+=P[me][X];if(zt<=0)break;if(ct%2===0){var Mt=(1-o.symbolSize)*.5,ar=Oe+P[me][ct]*Mt,rr=ne+I[we]*Mt,wr=P[me][ct]*o.symbolSize,Xt=I[we]*o.symbolSize,Ue=_t/2%D[Ve].length;st(ar,rr,wr,Xt,D[Ve][Ue])}Oe+=P[me][ct],++_t,++ct,ct===P[me].length&&(ct=0)}++me,me===P.length&&(me=0)}ne+=I[we],++fe,++we,we===I.length&&(we=0)}function st(at,dt,vt,It,de){var be=i?1:r,Be=is(de,at*be,dt*be,vt*be,It*be,o.color,o.symbolKeepAspect);if(i){var Xe=n.painter.renderOneToVNode(Be);Xe&&V.children.push(Xe)}else mN(G,Be)}}}}function vN(e){if(!e||e.length===0)return[["rect"]];if(Wt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Wt(e[r])){t=!1;break}if(t)return vN([e]);for(var n=[],r=0;r<e.length;++r)Wt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function gN(e){if(!e||e.length===0)return[[0,0]];if(Tn(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!Tn(e[n])){r=!1;break}if(r)return gN([e]);for(var i=[],n=0;n<e.length;++n)if(Tn(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Qt(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function yfe(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Tn(e)){var t=Math.ceil(e);return[t,t]}var r=Qt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function _fe(e){return Qt(e,function(t){return yN(t)})}function yN(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function bfe(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(o){var s=n.getItemVisual(o,"decal");if(s){var c=n.ensureUniqueItemVisual(o,"style");c.decal=XT(s,t)}});var i=n.getVisual("decal");if(i){var a=n.getVisual("style");a.decal=XT(i,t)}}})}var Yo=new os,_N={};function xfe(e,t){_N[e]=t}function wfe(e){return _N[e]}var Sfe=1,Tfe=800,Cfe=900,Afe=1e3,Mfe=2e3,Efe=5e3,bN=1e3,Pfe=1100,UM=2e3,xN=3e3,Ife=4e3,Fb=4500,Dfe=4600,Lfe=5e3,kfe=6e3,wN=7e3,Rfe={PROCESSOR:{FILTER:Afe,SERIES_FILTER:Tfe,STATISTIC:Efe},VISUAL:{LAYOUT:bN,PROGRESSIVE_LAYOUT:Pfe,GLOBAL:UM,CHART:xN,POST_CHART_LAYOUT:Dfe,COMPONENT:Ife,BRUSH:Lfe,CHART_ITEM:Fb,ARIA:kfe,DECAL:wN}},ea="__flagInMainProcess",Ra="__pendingUpdate",ES="__needsUpdateStatus",aO=/^[a-zA-Z0-9_]+$/,PS="__connectUpdateStatus",oO=0,Ofe=1,zfe=2;function SN(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return CN(this,e,t)}}function TN(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return CN(this,e,t)}}function CN(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),os.prototype[t].apply(e,r)}var AN=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(os),MN=AN.prototype;MN.on=TN("on");MN.off=TN("off");var qf,IS,H_,fu,DS,LS,kS,Pm,Im,sO,lO,RS,uO,U_,cO,EN,po,hO,PN=function(e){yt(t,e);function t(r,n,i){var a=e.call(this,new Uhe)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Wt(n)&&(n=IN[n]),a._dom=r;var o="canvas",s="auto",c=!1,f=a._zr=fk(r,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Er(i.useDirtyRect,c),useCoarsePointer:Er(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=NM(vr(f.flush,f),17),n=Lr(n),n&&V$(n,!0),a._theme=n,a._locale=Xue(i.locale||b$),a._coordSysMgr=new LM;var p=a._api=cO(a);function v(y,_){return y.__prio-_.__prio}return y0(M1,v),y0(YT,v),a._scheduler=new sN(a,p,YT,M1),a._messageCenter=new AN,a._initEvents(),a.resize=vr(a.resize,a),f.animation.on("frame",a._onframe,a),sO(f,a),lO(f,a),cT(a),a}return t.prototype._onframe=function(){if(!this._disposed){hO(this);var r=this._scheduler;if(this[Ra]){var n=this[Ra].silent;this[ea]=!0;try{qf(this),fu.update.call(this,null,this[Ra].updateParams)}catch(c){throw this[ea]=!1,this[Ra]=null,c}this._zr.flush(),this[ea]=!1,this[Ra]=null,Pm.call(this,n),Im.call(this,n)}else if(r.unfinished){var i=Sfe,a=this._model,o=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(a),r.performDataProcessorTasks(a),LS(this,a),r.performVisualTasks(a),U_(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[ea]){if(this._disposed){this.id;return}var a,o,s;if(or(n)&&(i=n.lazyUpdate,a=n.silent,o=n.replaceMerge,s=n.transition,n=n.notMerge),this[ea]=!0,!this._model||n){var c=new Ece(this._api),f=this._theme,p=this._model=new DM;p.scheduler=this._scheduler,p.ssr=this._ssr,p.init(null,null,null,f,this._locale,c)}this._model.setOption(r,{replaceMerge:o},KT);var v={seriesTransition:s,optionChanged:!0};if(i)this[Ra]={silent:a,updateParams:v},this[ea]=!1,this.getZr().wakeUp();else{try{qf(this),fu.update.call(this,null,v)}catch(y){throw this[Ra]=null,this[ea]=!1,y}this._ssr||this._zr.flush(),this[Ra]=null,this[ea]=!1,Pm.call(this,a),Im.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||pr.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(pr.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return Te(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,a=[],o=this;Te(n,function(c){i.eachComponent({mainType:c},function(f){var p=o._componentsMap[f.__viewId];p.group.ignore||(a.push(p),p.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return Te(a,function(c){c.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(fO[i]){var c=s,f=s,p=-s,v=-s,y=[],_=r&&r.pixelRatio||this.getDevicePixelRatio();Te(Tv,function(L,B){if(L.group===i){var U=n?L.getZr().painter.getSvgDom().innerHTML:L.renderToCanvas(Lr(r)),V=L.getDom().getBoundingClientRect();c=a(V.left,c),f=a(V.top,f),p=o(V.right,p),v=o(V.bottom,v),y.push({dom:U,left:V.left,top:V.top})}}),c*=_,f*=_,p*=_,v*=_;var S=p-c,E=v-f,P=rp.createCanvas(),I=fk(P,{renderer:n?"svg":"canvas"});if(I.resize({width:S,height:E}),n){var D="";return Te(y,function(L){var B=L.left-c,U=L.top-f;D+='<g transform="translate('+B+","+U+')">'+L.dom+"</g>"}),I.painter.getSvgRoot().innerHTML=D,r.connectedBackgroundColor&&I.painter.setBackgroundColor(r.connectedBackgroundColor),I.refreshImmediately(),I.painter.toDataURL()}else return r.connectedBackgroundColor&&I.add(new oi({shape:{x:0,y:0,width:S,height:E},style:{fill:r.connectedBackgroundColor}})),Te(y,function(L){var B=new zl({style:{x:L.left*_-c,y:L.top*_-f,image:L.dom}});I.add(B)}),I.refreshImmediately(),P.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return DS(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return DS(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,a,o=eS(i,r);return Te(o,function(s,c){c.indexOf("Models")>=0&&Te(s,function(f){var p=f.coordinateSystem;if(p&&p.containPoint)a=a||!!p.containPoint(n);else if(c==="seriesModels"){var v=this._chartsMap[f.__viewId];v&&v.containPoint&&(a=a||v.containPoint(n,f))}},this)},this),!!a},t.prototype.getVisual=function(r,n){var i=this._model,a=eS(i,r,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),c=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return c!=null?Whe(s,c,n):fN(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;Te(Bfe,function(n){var i=function(a){var o=r.getModel(),s=a.target,c,f=n==="globalout";if(f?c={}:s&&Xm(s,function(S){var E=an(S);if(E&&E.dataIndex!=null){var P=E.dataModel||o.getSeriesByIndex(E.seriesIndex);return c=P&&P.getDataParams(E.dataIndex,E.dataType,s)||{},!0}else if(E.eventData)return c=At({},E.eventData),!0},!0),c){var p=c.componentType,v=c.componentIndex;(p==="markLine"||p==="markPoint"||p==="markArea")&&(p="series",v=c.seriesIndex);var y=p&&v!=null&&o.getComponent(p,v),_=y&&r[y.mainType==="series"?"_chartsMap":"_componentsMap"][y.__viewId];c.event=a,c.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:c,model:y,view:_},r.trigger(n,c)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),Te(Sv,function(n,i){r._messageCenter.on(i,function(a){this.trigger(i,a)},r)}),Te(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),qhe(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&bF(this.getDom(),GM,"");var n=this,i=n._api,a=n._model;Te(n._componentsViews,function(o){o.dispose(a,i)}),Te(n._chartsViews,function(o){o.dispose(a,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Tv[n.id]},t.prototype.resize=function(r){if(!this[ea]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),a=r&&r.silent;this[Ra]&&(a==null&&(a=this[Ra].silent),i=!0,this[Ra]=null),this[ea]=!0;try{i&&qf(this),fu.update.call(this,{type:"resize",animation:At({duration:0},r&&r.animation)})}catch(o){throw this[ea]=!1,o}this[ea]=!1,Pm.call(this,a),Im.call(this,a)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(or(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!JT[r]){var i=JT[r](this._api,n),a=this._zr;this._loadingFX=i,a.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=At({},r);return n.type=Sv[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(or(n)||(n={silent:!!n}),!!A1[r.type]&&this._model){if(this[ea]){this._pendingActions.push(r);return}var i=n.silent;kS.call(this,r,i);var a=n.flush;a?this._zr.flush():a!==!1&&pr.browser.weChat&&this._throttledZrFlush(),Pm.call(this,i),Im.call(this,i)}},t.prototype.updateLabelLayout=function(){Yo.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(n);a.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){qf=function(v){var y=v._scheduler;y.restorePipelines(v._model),y.prepareStageTasks(),IS(v,!0),IS(v,!1),y.plan()},IS=function(v,y){for(var _=v._model,S=v._scheduler,E=y?v._componentsViews:v._chartsViews,P=y?v._componentsMap:v._chartsMap,I=v._zr,D=v._api,L=0;L<E.length;L++)E[L].__alive=!1;y?_.eachComponent(function(V,N){V!=="series"&&B(N)}):_.eachSeries(B);function B(V){var N=V.__requireNewView;V.__requireNewView=!1;var G="_ec_"+V.id+"_"+V.type,Y=!N&&P[G];if(!Y){var ee=Is(V.type),J=y?ns.getClass(ee.main,ee.sub):Rs.getClass(ee.sub);Y=new J,Y.init(_,D),P[G]=Y,E.push(Y),I.add(Y.group)}V.__viewId=Y.__id=G,Y.__alive=!0,Y.__model=V,Y.group.__ecComponentInfo={mainType:V.mainType,index:V.componentIndex},!y&&S.prepareView(Y,V,_,D)}for(var L=0;L<E.length;){var U=E[L];U.__alive?L++:(!y&&U.renderTask.dispose(),I.remove(U.group),U.dispose(_,D),E.splice(L,1),P[U.__id]===U&&delete P[U.__id],U.__id=U.group.__ecComponentInfo=null)}},H_=function(v,y,_,S,E){var P=v._model;if(P.setUpdatePayload(_),!S){Te([].concat(v._componentsViews).concat(v._chartsViews),U);return}var I={};I[S+"Id"]=_[S+"Id"],I[S+"Index"]=_[S+"Index"],I[S+"Name"]=_[S+"Name"];var D={mainType:S,query:I};E&&(D.subType=E);var L=_.excludeSeriesId,B;L!=null&&(B=dr(),Te(Ca(L),function(V){var N=ks(V,null);N!=null&&B.set(N,!0)})),P&&P.eachComponent(D,function(V){var N=B&&B.get(V.id)!=null;if(!N)if(Gk(_))if(V instanceof Mh)_.type===yh&&!_.notBlur&&!V.get(["emphasis","disabled"])&&Ele(V,_,v._api);else{var G=dM(V.mainType,V.componentIndex,_.name,v._api),Y=G.focusSelf,ee=G.dispatchers;_.type===yh&&Y&&!_.notBlur&&OT(V.mainType,V.componentIndex,v._api),ee&&Te(ee,function(J){_.type===yh?eg(J):tg(J)})}else BT(_)&&V instanceof Mh&&(Dle(V,_,v._api),Hk(V),po(v))},v),P&&P.eachComponent(D,function(V){var N=B&&B.get(V.id)!=null;N||U(v[S==="series"?"_chartsMap":"_componentsMap"][V.__viewId])},v);function U(V){V&&V.__alive&&V[y]&&V[y](V.__model,P,v._api,_)}},fu={prepareAndUpdate:function(v){qf(this),fu.update.call(this,v,{optionChanged:v.newOption!=null})},update:function(v,y){var _=this._model,S=this._api,E=this._zr,P=this._coordSysMgr,I=this._scheduler;if(_){_.setUpdatePayload(v),I.restoreData(_,v),I.performSeriesTasks(_),P.create(_,S),I.performDataProcessorTasks(_,v),LS(this,_),P.update(_,S),r(_),I.performVisualTasks(_,v),RS(this,_,S,v,y);var D=_.get("backgroundColor")||"transparent",L=_.get("darkMode");E.setBackgroundColor(D),L!=null&&L!=="auto"&&E.setDarkMode(L),Yo.trigger("afterupdate",_,S)}},updateTransform:function(v){var y=this,_=this._model,S=this._api;if(_){_.setUpdatePayload(v);var E=[];_.eachComponent(function(I,D){if(I!=="series"){var L=y.getViewOfComponentModel(D);if(L&&L.__alive)if(L.updateTransform){var B=L.updateTransform(D,_,S,v);B&&B.update&&E.push(L)}else E.push(L)}});var P=dr();_.eachSeries(function(I){var D=y._chartsMap[I.__viewId];if(D.updateTransform){var L=D.updateTransform(I,_,S,v);L&&L.update&&P.set(I.uid,1)}else P.set(I.uid,1)}),r(_),this._scheduler.performVisualTasks(_,v,{setDirty:!0,dirtyMap:P}),U_(this,_,S,v,{},P),Yo.trigger("afterupdate",_,S)}},updateView:function(v){var y=this._model;y&&(y.setUpdatePayload(v),Rs.markUpdateMethod(v,"updateView"),r(y),this._scheduler.performVisualTasks(y,v,{setDirty:!0}),RS(this,y,this._api,v,{}),Yo.trigger("afterupdate",y,this._api))},updateVisual:function(v){var y=this,_=this._model;_&&(_.setUpdatePayload(v),_.eachSeries(function(S){S.getData().clearAllVisual()}),Rs.markUpdateMethod(v,"updateVisual"),r(_),this._scheduler.performVisualTasks(_,v,{visualType:"visual",setDirty:!0}),_.eachComponent(function(S,E){if(S!=="series"){var P=y.getViewOfComponentModel(E);P&&P.__alive&&P.updateVisual(E,_,y._api,v)}}),_.eachSeries(function(S){var E=y._chartsMap[S.__viewId];E.updateVisual(S,_,y._api,v)}),Yo.trigger("afterupdate",_,this._api))},updateLayout:function(v){fu.update.call(this,v)}},DS=function(v,y,_,S){if(v._disposed){v.id;return}for(var E=v._model,P=v._coordSysMgr.getCoordinateSystems(),I,D=eS(E,_),L=0;L<P.length;L++){var B=P[L];if(B[y]&&(I=B[y](E,D,S))!=null)return I}},LS=function(v,y){var _=v._chartsMap,S=v._scheduler;y.eachSeries(function(E){S.updateStreamModes(E,_[E.__viewId])})},kS=function(v,y){var _=this,S=this.getModel(),E=v.type,P=v.escapeConnect,I=A1[E],D=I.actionInfo,L=(D.update||"update").split(":"),B=L.pop(),U=L[0]!=null&&Is(L[0]);this[ea]=!0;var V=[v],N=!1;v.batch&&(N=!0,V=Qt(v.batch,function(we){return we=rn(At({},we),v),we.batch=null,we}));var G=[],Y,ee=BT(v),J=Gk(v);if(J&&jF(this._api),Te(V,function(we){if(Y=I.action(we,_._model,_._api),Y=Y||At({},we),Y.type=D.event||Y.type,G.push(Y),J){var fe=oM(v),me=fe.queryOptionMap,Ve=fe.mainTypeSpecified,Oe=Ve?me.keys()[0]:"series";H_(_,B,we,Oe),po(_)}else ee?(H_(_,B,we,"series"),po(_)):U&&H_(_,B,we,U.main,U.sub)}),B!=="none"&&!J&&!ee&&!U)try{this[Ra]?(qf(this),fu.update.call(this,v),this[Ra]=null):fu[B].call(this,v)}catch(we){throw this[ea]=!1,we}if(N?Y={type:D.event||E,escapeConnect:P,batch:G}:Y=G[0],this[ea]=!1,!y){var X=this._messageCenter;if(X.trigger(Y.type,Y),ee){var ne={type:"selectchanged",escapeConnect:P,selected:Lle(S),isFromClick:v.isFromClick||!1,fromAction:v.type,fromActionPayload:v};X.trigger(ne.type,ne)}}},Pm=function(v){for(var y=this._pendingActions;y.length;){var _=y.shift();kS.call(this,_,v)}},Im=function(v){!v&&this.trigger("updated")},sO=function(v,y){v.on("rendered",function(_){y.trigger("rendered",_),v.animation.isFinished()&&!y[Ra]&&!y._scheduler.unfinished&&!y._pendingActions.length&&y.trigger("finished")})},lO=function(v,y){v.on("mouseover",function(_){var S=_.target,E=Xm(S,zT);E&&(Ple(E,_,y._api),po(y))}).on("mouseout",function(_){var S=_.target,E=Xm(S,zT);E&&(Ile(E,_,y._api),po(y))}).on("click",function(_){var S=_.target,E=Xm(S,function(D){return an(D).dataIndex!=null},!0);if(E){var P=E.selected?"unselect":"select",I=an(E);y._api.dispatchAction({type:P,dataType:I.dataType,dataIndexInside:I.dataIndex,seriesIndex:I.seriesIndex,isFromClick:!0})}})};function r(v){v.clearColorPalette(),v.eachSeries(function(y){y.clearColorPalette()})}function n(v){var y=[],_=[],S=!1;if(v.eachComponent(function(D,L){var B=L.get("zlevel")||0,U=L.get("z")||0,V=L.getZLevelKey();S=S||!!V,(D==="series"?_:y).push({zlevel:B,z:U,idx:L.componentIndex,type:D,key:V})}),S){var E=y.concat(_),P,I;y0(E,function(D,L){return D.zlevel===L.zlevel?D.z-L.z:D.zlevel-L.zlevel}),Te(E,function(D){var L=v.getComponent(D.type,D.idx),B=D.zlevel,U=D.key;P!=null&&(B=Math.max(P,B)),U?(B===P&&U!==I&&B++,I=U):I&&(B===P&&B++,I=""),P=B,L.setZLevel(B)})}}RS=function(v,y,_,S,E){n(y),uO(v,y,_,S,E),Te(v._chartsViews,function(P){P.__alive=!1}),U_(v,y,_,S,E),Te(v._chartsViews,function(P){P.__alive||P.remove(y,_)})},uO=function(v,y,_,S,E,P){Te(P||v._componentsViews,function(I){var D=I.__model;f(D,I),I.render(D,y,_,S),s(D,I),p(D,I)})},U_=function(v,y,_,S,E,P){var I=v._scheduler;E=At(E||{},{updatedSeries:y.getSeries()}),Yo.trigger("series:beforeupdate",y,_,E);var D=!1;y.eachSeries(function(L){var B=v._chartsMap[L.__viewId];B.__alive=!0;var U=B.renderTask;I.updatePayload(U,S),f(L,B),P&&P.get(L.uid)&&U.dirty(),U.perform(I.getPerformArgs(U))&&(D=!0),B.group.silent=!!L.get("silent"),o(L,B),Hk(L)}),I.unfinished=D||I.unfinished,Yo.trigger("series:layoutlabels",y,_,E),Yo.trigger("series:transition",y,_,E),y.eachSeries(function(L){var B=v._chartsMap[L.__viewId];s(L,B),p(L,B)}),a(v,y),Yo.trigger("series:afterupdate",y,_,E)},po=function(v){v[ES]=!0,v.getZr().wakeUp()},hO=function(v){v[ES]&&(v.getZr().storage.traverse(function(y){_v(y)||i(y)}),v[ES]=!1)};function i(v){for(var y=[],_=v.currentStates,S=0;S<_.length;S++){var E=_[S];E==="emphasis"||E==="blur"||E==="select"||y.push(E)}v.selected&&v.states.select&&y.push("select"),v.hoverState===xb&&v.states.emphasis?y.push("emphasis"):v.hoverState===bb&&v.states.blur&&y.push("blur"),v.useStates(y)}function a(v,y){var _=v._zr,S=_.storage,E=0;S.traverse(function(P){P.isGroup||E++}),E>y.get("hoverLayerThreshold")&&!pr.node&&!pr.worker&&y.eachSeries(function(P){if(!P.preventUsingHoverLayer){var I=v._chartsMap[P.__viewId];I.__alive&&I.eachRendered(function(D){D.states.emphasis&&(D.states.emphasis.hoverLayer=!0)})}})}function o(v,y){var _=v.get("blendMode")||null;y.eachRendered(function(S){S.isGroup||(S.style.blend=_)})}function s(v,y){if(!v.preventAutoZ){var _=v.get("z")||0,S=v.get("zlevel")||0;y.eachRendered(function(E){return c(E,_,S,-1/0),!0})}}function c(v,y,_,S){var E=v.getTextContent(),P=v.getTextGuideLine(),I=v.isGroup;if(I)for(var D=v.childrenRef(),L=0;L<D.length;L++)S=Math.max(c(D[L],y,_,S),S);else v.z=y,v.zlevel=_,S=Math.max(v.z2,S);if(E&&(E.z=y,E.zlevel=_,isFinite(S)&&(E.z2=S+2)),P){var B=v.textGuideLineConfig;P.z=y,P.zlevel=_,isFinite(S)&&(P.z2=S+(B&&B.showAbove?1:-1))}return S}function f(v,y){y.eachRendered(function(_){if(!_v(_)){var S=_.getTextContent(),E=_.getTextGuideLine();_.stateTransition&&(_.stateTransition=null),S&&S.stateTransition&&(S.stateTransition=null),E&&E.stateTransition&&(E.stateTransition=null),_.hasState()?(_.prevStates=_.currentStates,_.clearStates()):_.prevStates&&(_.prevStates=null)}})}function p(v,y){var _=v.getModel("stateAnimation"),S=v.isAnimationEnabled(),E=_.get("duration"),P=E>0?{duration:E,delay:_.get("delay"),easing:_.get("easing")}:null;y.eachRendered(function(I){if(I.states&&I.states.emphasis){if(_v(I))return;if(I instanceof Qr&&Ble(I),I.__dirty){var D=I.prevStates;D&&I.useStates(D)}if(S){I.stateTransition=P;var L=I.getTextContent(),B=I.getTextGuideLine();L&&(L.stateTransition=P),B&&(B.stateTransition=P)}I.__dirty&&i(I)}})}cO=function(v){return new(function(y){yt(_,y);function _(){return y!==null&&y.apply(this,arguments)||this}return _.prototype.getCoordinateSystems=function(){return v._coordSysMgr.getCoordinateSystems()},_.prototype.getComponentByElement=function(S){for(;S;){var E=S.__ecComponentInfo;if(E!=null)return v._model.getComponent(E.mainType,E.index);S=S.parent}},_.prototype.enterEmphasis=function(S,E){eg(S,E),po(v)},_.prototype.leaveEmphasis=function(S,E){tg(S,E),po(v)},_.prototype.enterBlur=function(S){NF(S),po(v)},_.prototype.leaveBlur=function(S){fM(S),po(v)},_.prototype.enterSelect=function(S){VF(S),po(v)},_.prototype.leaveSelect=function(S){HF(S),po(v)},_.prototype.getModel=function(){return v.getModel()},_.prototype.getViewOfComponentModel=function(S){return v.getViewOfComponentModel(S)},_.prototype.getViewOfSeriesModel=function(S){return v.getViewOfSeriesModel(S)},_}($$))(v)},EN=function(v){function y(_,S){for(var E=0;E<_.length;E++){var P=_[E];P[PS]=S}}Te(Sv,function(_,S){v._messageCenter.on(S,function(E){if(fO[v.group]&&v[PS]!==oO){if(E&&E.escapeConnect)return;var P=v.makeActionFromEvent(E),I=[];Te(Tv,function(D){D!==v&&D.group===v.group&&I.push(D)}),y(I,oO),Te(I,function(D){D[PS]!==Ofe&&D.dispatchAction(P)}),y(I,zfe)}})})}}(),t}(os),jM=PN.prototype;jM.on=SN("on");jM.off=SN("off");jM.one=function(e,t,r){var n=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];t&&t.apply&&t.apply(this,a),n.off(e,i)}this.on.call(this,e,i,r)};var Bfe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var A1={},Sv={},YT=[],KT=[],M1=[],IN={},JT={},Tv={},fO={},Ffe=+new Date-0,GM="_echarts_instance_";function $fe(e,t,r){var n=!(r&&r.ssr);if(n){var i=Nfe(e);if(i)return i}var a=new PN(e,t,r);return a.id="ec_"+Ffe++,Tv[a.id]=a,n&&bF(e,GM,a.id),EN(a),Yo.trigger("afterinit",a),a}function Nfe(e){return Tv[yse(e,GM)]}function DN(e,t){IN[e]=t}function LN(e){Wr(KT,e)<0&&KT.push(e)}function kN(e,t){qM(YT,e,t,Mfe)}function Vfe(e){WM("afterinit",e)}function Hfe(e){WM("afterupdate",e)}function WM(e,t){Yo.on(e,t)}function zh(e,t,r){ir(t)&&(r=t,t="");var n=or(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Sv[t]&&(rs(aO.test(n)&&aO.test(t)),A1[n]||(A1[n]={action:r,actionInfo:e}),Sv[t]=n)}function Ufe(e,t){LM.register(e,t)}function jfe(e,t){qM(M1,e,t,bN,"layout")}function Bh(e,t){qM(M1,e,t,xN,"visual")}var dO=[];function qM(e,t,r,n,i){if((ir(t)||or(t))&&(r=t,t=n),!(Wr(dO,r)>=0)){dO.push(r);var a=sN.wrapStageHandler(r,i);a.__prio=t,a.__raw=r,e.push(a)}}function RN(e,t){JT[e]=t}function Gfe(e,t,r){var n=wfe("registerMap");n&&n(e,t,r)}var Wfe=Qce;Bh(UM,Ehe);Bh(Fb,Phe);Bh(Fb,Ihe);Bh(UM,jhe);Bh(Fb,Ghe);Bh(wN,bfe);LN(V$);kN(Cfe,zce);RN("default",Dhe);zh({type:yh,event:yh,update:yh},la);zh({type:T0,event:T0,update:T0},la);zh({type:vv,event:vv,update:vv},la);zh({type:C0,event:C0,update:C0},la);zh({type:gv,event:gv,update:gv},la);DN("light",Vhe);DN("dark",Hhe);function Dm(e){return e==null?0:e.length||1}function pO(e){return e}var qfe=function(){function e(t,r,n,i,a,o){this._old=t,this._new=r,this._oldKeyGetter=n||pO,this._newKeyGetter=i||pO,this.context=a,this._diffModeMultiple=o==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),a=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=i[o],c=n[s],f=Dm(c);if(f>1){var p=c.shift();c.length===1&&(n[s]=c[0]),this._update&&this._update(p,o)}else f===1?(n[s]=null,this._update&&this._update(c,o)):this._remove&&this._remove(o)}this._performRestAdd(a,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},a=[],o=[];this._initIndexMap(t,n,a,"_oldKeyGetter"),this._initIndexMap(r,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var c=a[s],f=n[c],p=i[c],v=Dm(f),y=Dm(p);if(v>1&&y===1)this._updateManyToOne&&this._updateManyToOne(p,f),i[c]=null;else if(v===1&&y>1)this._updateOneToMany&&this._updateOneToMany(p,f),i[c]=null;else if(v===1&&y===1)this._update&&this._update(p,f),i[c]=null;else if(v>1&&y>1)this._updateManyToMany&&this._updateManyToMany(p,f),i[c]=null;else if(v>1)for(var _=0;_<v;_++)this._remove&&this._remove(f[_]);else this._remove&&this._remove(f)}this._performRestAdd(o,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],a=r[i],o=Dm(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[i](t[o],o);if(a||(n[o]=s),!!r){var c=r[s],f=Dm(c);f===0?(r[s]=o,a&&n.push(s)):f===1?r[s]=[c,o]:c.push(o)}}},e}();const Zfe=qfe;var Xfe=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function Yfe(e,t){var r={},n=r.encode={},i=dr(),a=[],o=[],s={};Te(e.dimensions,function(y){var _=e.getDimensionInfo(y),S=_.coordDim;if(S){var E=_.coordDimIndex;OS(n,S)[E]=y,_.isExtraCoord||(i.set(S,1),Jfe(_.type)&&(a[0]=y),OS(s,S)[E]=e.getDimensionIndex(_.name)),_.defaultTooltip&&o.push(y)}R$.each(function(P,I){var D=OS(n,I),L=_.otherDims[I];L!=null&&L!==!1&&(D[L]=_.name)})});var c=[],f={};i.each(function(y,_){var S=n[_];f[_]=S[0],c=c.concat(S)}),r.dataDimsOnCoord=c,r.dataDimIndicesOnCoord=Qt(c,function(y){return e.getDimensionInfo(y).storeDimIndex}),r.encodeFirstDimNotExtra=f;var p=n.label;p&&p.length&&(a=p.slice());var v=n.tooltip;return v&&v.length?o=v.slice():o.length||(o=a.slice()),n.defaultedLabel=a,n.defaultedTooltip=o,r.userOutput=new Xfe(s,t),r}function OS(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Kfe(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Jfe(e){return!(e==="ordinal"||e==="time")}var E0=function(){function e(t){this.otherDims={},t!=null&&At(this,t)}return e}(),Qfe=Gn(),ede={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},ON=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=FN(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Er(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=U$(this.source),n=!$N(t),i="",a=[],o=0,s=0;o<t;o++){var c=void 0,f=void 0,p=void 0,v=this.dimensions[s];if(v&&v.storeDimIndex===o)c=r?v.name:null,f=v.type,p=v.ordinalMeta,s++;else{var y=this.getSourceDimension(o);y&&(c=r?y.name:null,f=y.type)}a.push({property:c,type:f,ordinalMeta:p}),r&&c!=null&&(!v||!v.isCalculationCoord)&&(i+=n?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),i+="$",i+=ede[f]||"f",p&&(i+=p.uid),i+="$"}var _=this.source,S=[_.seriesLayoutBy,_.startIndex,i].join("$$");return{dimensions:a,hash:S}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,a=this.dimensions[n];if(a&&a.storeDimIndex===r)a.isCalculationCoord||(i=a.name),n++;else{var o=this.getSourceDimension(r);o&&(i=o.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function zN(e){return e instanceof ON}function BN(e){for(var t=dr(),r=0;r<(e||[]).length;r++){var n=e[r],i=or(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function FN(e){var t=Qfe(e);return t.dimNameMap||(t.dimNameMap=BN(e.dimensionsDefine))}function $N(e){return e>30}var Lm=or,du=Qt,tde=typeof Int32Array>"u"?Array:Int32Array,rde="e\0\0",mO=-1,nde=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],ide=["_approximateExtent"],vO,j_,km,Rm,zS,G_,BS,ZM=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;zN(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var a={},o=[],s={},c=!1,f={},p=0;p<n.length;p++){var v=n[p],y=Wt(v)?new E0({name:v}):v instanceof E0?v:new E0(v),_=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=_,y.coordDimIndex=0);var S=y.otherDims=y.otherDims||{};o.push(_),a[_]=y,f[_]!=null&&(c=!0),y.createInvertedIndices&&(s[_]=[]),S.itemName===0&&(this._nameDimIdx=p),S.itemId===0&&(this._idDimIdx=p),i&&(y.storeDimIndex=p)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(c),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var E=this._dimIdxToName=dr();Te(o,function(P){E.set(a[P].storeDimIndex,P)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Tn(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,a;if(t instanceof HT&&(a=t),!a){var o=this.dimensions,s=kM(t)||Ha(t)?new j$(t,o.length):t;a=new HT;var c=du(o,function(f){return{type:i._dimInfos[f].type,property:f}});a.initData(s,c,n)}this._store=a,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Yfe(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,a=n.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<a;s++){var c=s-i;this._nameList[s]=r[c],o&&BS(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Ou&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,c=s===Bo;if(c&&!i.pure)for(var f=[],p=t;p<r;p++){var v=i.getItem(p,f);if(!this.hasItemOption&&ose(v)&&(this.hasItemOption=!0),v){var y=v.name;a[p]==null&&y!=null&&(a[p]=ks(y,null));var _=v.id;o[p]==null&&_!=null&&(o[p]=ks(_,null))}}if(this._shouldMakeIdFromName())for(var p=t;p<r;p++)BS(this,p);vO(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){Lm(t)?At(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=km(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return j_(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return Ft(t)?i.getValues(du(t,function(a){return n._getStoreDimIndex(a)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?mO:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){ir(t)&&(n=r,r=t,t=[]);var i=n||this,a=du(Rm(t),this._getStoreDimIndex,this);this._store.each(a,i?vr(r,i):r)},e.prototype.filterSelf=function(t,r,n){ir(t)&&(n=r,r=t,t=[]);var i=n||this,a=du(Rm(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?vr(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=Vr(t);return Te(i,function(a){var o=r._getStoreDimIndex(a);n[o]=t[a]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){ir(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var a=n||i||this,o=du(Rm(t),this._getStoreDimIndex,this),s=G_(this);return s._store=this._store.map(o,a?vr(r,a):r),s},e.prototype.modify=function(t,r,n,i){var a=n||i||this,o=du(Rm(t),this._getStoreDimIndex,this);this._store.modify(o,a?vr(r,a):r)},e.prototype.downSample=function(t,r,n,i){var a=G_(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),a},e.prototype.lttbDownSample=function(t,r){var n=G_(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new sa(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new Zfe(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return j_(t,n)},function(n){return j_(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},Lm(t)?At(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i??this.getVisual(r)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var a=i[r];return a==null&&(a=this.getVisual(r),Ft(a)?a=a.slice():Lm(a)&&(a=At({},a)),i[r]=a),a},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Lm(r)?At(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){Lm(t)?At(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?At(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;yle(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){Te(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:du(this.dimensions,this._getDimInfo,this),this.hostModel)),zS(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];ir(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(WA(arguments)))})},e.internalField=function(){vO=function(t){var r=t._invertedIndicesMap;Te(r,function(n,i){var a=t._dimInfos[i],o=a.ordinalMeta,s=t._store;if(o){n=r[i]=new tde(o.categories.length);for(var c=0;c<n.length;c++)n[c]=mO;for(var c=0;c<s.count();c++)n[s.get(a.storeDimIndex,c)]=c}})},km=function(t,r,n){return ks(t._getCategory(r,n),null)},j_=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=km(t,t._idDimIdx,r)),n==null&&(n=rde+r),n},Rm=function(t){return Ft(t)||(t=t!=null?[t]:[]),t},G_=function(t){var r=new e(t._schema?t._schema:du(t.dimensions,t._getDimInfo,t),t.hostModel);return zS(r,t),r},zS=function(t,r){Te(nde.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,Te(ide,function(n){t[n]=Lr(r[n])}),t._calculationInfo=At({},r._calculationInfo)},BS=function(t,r){var n=t._nameList,i=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=n[r],c=i[r];if(s==null&&a!=null&&(n[r]=s=km(t,a,r)),c==null&&o!=null&&(i[r]=c=km(t,o,r)),c==null&&s!=null){var f=t._nameRepeatCount,p=f[s]=(f[s]||0)+1;c=s,p>1&&(c+="__ec__"+p),i[r]=c}}}(),e}();function ade(e,t){kM(e)||(e=RM(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=dr(),a=[],o=sde(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&$N(o),c=n===e.dimensionsDefine,f=c?FN(e):BN(n),p=t.encodeDefine;!p&&t.encodeDefaulter&&(p=t.encodeDefaulter(e,o));for(var v=dr(p),y=new Y$(o),_=0;_<y.length;_++)y[_]=-1;function S(Y){var ee=y[Y];if(ee<0){var J=n[Y],X=or(J)?J:{name:J},ne=new E0,we=X.name;we!=null&&f.get(we)!=null&&(ne.name=ne.displayName=we),X.type!=null&&(ne.type=X.type),X.displayName!=null&&(ne.displayName=X.displayName);var fe=a.length;return y[Y]=fe,ne.storeDimIndex=Y,a.push(ne),ne}return a[ee]}if(!s)for(var _=0;_<o;_++)S(_);v.each(function(Y,ee){var J=Ca(Y).slice();if(J.length===1&&!Wt(J[0])&&J[0]<0){v.set(ee,!1);return}var X=v.set(ee,[]);Te(J,function(ne,we){var fe=Wt(ne)?f.get(ne):ne;fe!=null&&fe<o&&(X[we]=fe,P(S(fe),ee,we))})});var E=0;Te(r,function(Y){var ee,J,X,ne;if(Wt(Y))ee=Y,ne={};else{ne=Y,ee=ne.name;var we=ne.ordinalMeta;ne.ordinalMeta=null,ne=At({},ne),ne.ordinalMeta=we,J=ne.dimsDef,X=ne.otherDims,ne.name=ne.coordDim=ne.coordDimIndex=ne.dimsDef=ne.otherDims=null}var fe=v.get(ee);if(fe!==!1){if(fe=Ca(fe),!fe.length)for(var me=0;me<(J&&J.length||1);me++){for(;E<o&&S(E).coordDim!=null;)E++;E<o&&fe.push(E++)}Te(fe,function(Ve,Oe){var ct=S(Ve);if(c&&ne.type!=null&&(ct.type=ne.type),P(rn(ct,ne),ee,Oe),ct.name==null&&J){var _t=J[Oe];!or(_t)&&(_t={name:_t}),ct.name=ct.displayName=_t.name,ct.defaultTooltip=_t.defaultTooltip}X&&rn(ct.otherDims,X)})}});function P(Y,ee,J){R$.get(ee)!=null?Y.otherDims[ee]=J:(Y.coordDim=ee,Y.coordDimIndex=J,i.set(ee,!0))}var I=t.generateCoord,D=t.generateCoordCount,L=D!=null;D=I?D||1:0;var B=I||"value";function U(Y){Y.name==null&&(Y.name=Y.coordDim)}if(s)Te(a,function(Y){U(Y)}),a.sort(function(Y,ee){return Y.storeDimIndex-ee.storeDimIndex});else for(var V=0;V<o;V++){var N=S(V),G=N.coordDim;G==null&&(N.coordDim=lde(B,i,L),N.coordDimIndex=0,(!I||D<=0)&&(N.isExtraCoord=!0),D--),U(N),N.type==null&&(F$(e,V)===Qa.Must||N.isExtraCoord&&(N.otherDims.itemName!=null||N.otherDims.seriesName!=null))&&(N.type="ordinal")}return ode(a),new ON({source:e,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function ode(e){for(var t=dr(),r=0;r<e.length;r++){var n=e[r],i=n.name,a=t.get(i)||0;a>0&&(n.name=i+(a-1)),a++,t.set(i,a)}}function sde(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return Te(t,function(a){var o;or(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function lde(e,t,r){if(r||t.hasKey(e)){for(var n=0;t.hasKey(e+n);)n++;e+=n}return t.set(e,!0),e}var ude=function(){function e(t){this.coordSysDims=[],this.axisMap=dr(),this.categoryAxisMap=dr(),this.coordSysName=t}return e}();function cde(e){var t=e.get("coordinateSystem"),r=new ude(t),n=hde[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var hde={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",$a).models[0],a=e.getReferringComponents("yAxis",$a).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",a),Zf(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),Zf(a)&&(n.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",$a).models[0];t.coordSysDims=["single"],r.set("single",i),Zf(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",$a).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",o),Zf(a)&&(n.set("radius",a),t.firstCategoryDimIndex=0),Zf(o)&&(n.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,a=i.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();Te(a.parallelAxisIndex,function(s,c){var f=i.getComponent("parallelAxis",s),p=o[c];r.set(p,f),Zf(f)&&(n.set(p,f),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=c))})}};function Zf(e){return e.get("type")==="category"}function fde(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,a,o,s;dde(t)?a=t:(o=t.schema,a=o.dimensions,s=t.store);var c=!!(e&&e.get("stack")),f,p,v,y;if(Te(a,function(D,L){Wt(D)&&(a[L]=D={name:D}),c&&!D.isExtraCoord&&(!n&&!f&&D.ordinalMeta&&(f=D),!p&&D.type!=="ordinal"&&D.type!=="time"&&(!i||i===D.coordDim)&&(p=D))}),p&&!n&&!f&&(n=!0),p){v="__\0ecstackresult_"+e.id,y="__\0ecstackedover_"+e.id,f&&(f.createInvertedIndices=!0);var _=p.coordDim,S=p.type,E=0;Te(a,function(D){D.coordDim===_&&E++});var P={name:v,coordDim:_,coordDimIndex:E,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},I={name:y,coordDim:y,coordDimIndex:E+1,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(P.storeDimIndex=s.ensureCalculationDimension(y,S),I.storeDimIndex=s.ensureCalculationDimension(v,S)),o.appendCalculationDimension(P),o.appendCalculationDimension(I)):(a.push(P),a.push(I))}return{stackedDimension:p&&p.name,stackedByDimension:f&&f.name,isStackedByIndex:n,stackedOverDimension:y,stackResultDimension:v}}function dde(e){return!zN(e.schema)}function jd(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function pde(e,t){return jd(e,t)?e.getCalculationInfo("stackResultDimension"):t}function mde(e,t){var r=e.get("coordinateSystem"),n=LM.get(r),i;return t&&t.coordSysDims&&(i=Qt(t.coordSysDims,function(a){var o={name:a},s=t.axisMap.get(a);if(s){var c=s.get("type");o.type=Kfe(c)}return o})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function vde(e,t,r){var n,i;return r&&Te(e,function(a,o){var s=a.coordDim,c=r.categoryAxisMap.get(s);c&&(n==null&&(n=o),a.ordinalMeta=c.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function NN(e,t,r){r=r||{};var n=t.getSourceManager(),i,a=!1;e?(a=!0,i=RM(e)):(i=n.getSource(),a=i.sourceFormat===Bo);var o=cde(t),s=mde(t,o),c=r.useEncodeDefaulter,f=ir(c)?c:c?wn(uce,s,t):null,p={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:f,canOmitUnusedDimensions:!a},v=ade(i,p),y=vde(v.dimensions,r.createInvertedIndices,o),_=a?null:n.getSharedDataStore(v),S=fde(t,{schema:v,store:_}),E=new ZM(v,t);E.setCalculationInfo(S);var P=y!=null&&gde(i)?function(I,D,L,B){return B===y?L:this.defaultDimValueGetter(I,D,L,B)}:null;return E.hasItemOption=!1,E.initData(a?i:_,null,P),E}function gde(e){if(e.sourceFormat===Bo){var t=yde(e.data||[]);return!Ft(kg(t))}}function yde(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var Us=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();gb(Us);var _de=0,QT=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++_de}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Qt(n,bde);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Wt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=dr(this.categories))},e}();function bde(e){return or(e)&&e.value!=null?e.value:e+""}function eC(e){return e.type==="interval"||e.type==="log"}function xde(e,t,r,n){var i={},a=e[1]-e[0],o=i.interval=mF(a/t,!0);r!=null&&o<r&&(o=i.interval=r),n!=null&&o>n&&(o=i.interval=n);var s=i.intervalPrecision=VN(o),c=i.niceTickExtent=[ai(Math.ceil(e[0]/o)*o,s),ai(Math.floor(e[1]/o)*o,s)];return wde(c,e),i}function FS(e){var t=Math.pow(10,iM(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,ai(r*t)}function VN(e){return Ps(e)+2}function gO(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function wde(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),gO(e,0,t),gO(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function $b(e,t){return e>=t[0]&&e<=t[1]}function Nb(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function Vb(e,t){return e*(t[1]-t[0])+t[0]}var HN=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new QT({})),Ft(i)&&(i=new QT({categories:Qt(i,function(a){return or(a)?a.value:a})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Wt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),$b(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),Nb(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(Vb(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,c=Math.min(s,n.length);o<c;++o){var f=n[o];i[o]=f,a[f]=o}for(var p=0;o<s;++o){for(;a[p]!=null;)p++;i.push(p),a[p]=o}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Us);Us.registerClass(HN);const UN=HN;var jc=ai,jN=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return $b(r,this._extent)},t.prototype.normalize=function(r){return Nb(r,this._extent)},t.prototype.scale=function(r){return Vb(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=VN(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!n)return s;var c=1e4;i[0]<a[0]&&(r?s.push({value:jc(a[0]-n,o)}):s.push({value:i[0]}));for(var f=a[0];f<=a[1]&&(s.push({value:f}),f=jc(f+n,o),f!==s[s.length-1].value);)if(s.length>c)return[];var p=s.length?s[s.length-1].value:a[1];return i[1]>p&&(r?s.push({value:jc(p+n,o)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<n.length;o++){for(var s=n[o],c=n[o-1],f=0,p=[],v=s.value-c.value,y=v/r;f<r-1;){var _=jc(c.value+(f+1)*y);_>a[0]&&_<a[1]&&p.push(_),f++}i.push(p)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=Ps(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=jc(r.value,i,!0);return I$(a)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=xde(a,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var a=n[1]-n[0];isFinite(a)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var o=this._interval;r.fixMin||(n[0]=jc(Math.floor(n[0]/o)*o)),r.fixMax||(n[1]=jc(Math.ceil(n[1]/o)*o))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Us);Us.registerClass(jN);const $g=jN;var GN=typeof Float32Array<"u",Sde=GN?Float32Array:Array;function hd(e){return Ft(e)?GN?new Float32Array(e):e:new Sde(e)}var Tde="__ec_stack_";function WN(e){return e.get("stack")||Tde+e.seriesIndex}function qN(e){return e.dim+e.index}function Cde(e,t){var r=[];return t.eachSeriesByType(e,function(n){Ide(n)&&r.push(n)}),r}function Ade(e){var t={};Te(e,function(c){var f=c.coordinateSystem,p=f.getBaseAxis();if(!(p.type!=="time"&&p.type!=="value"))for(var v=c.getData(),y=p.dim+"_"+p.index,_=v.getDimensionIndex(v.mapDimension(p.dim)),S=v.getStore(),E=0,P=S.count();E<P;++E){var I=S.get(_,E);t[y]?t[y].push(I):t[y]=[I]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(c,f){return c-f});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}r[n]=a}}return r}function Mde(e){var t=Ade(e),r=[];return Te(e,function(n){var i=n.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var c=a.dim+"_"+a.index,f=t[c],p=Math.abs(o[1]-o[0]),v=a.scale.getExtent(),y=Math.abs(v[1]-v[0]);s=f?p/y*f:p}else{var _=n.getData();s=Math.abs(o[1]-o[0])/_.count()}var S=pi(n.get("barWidth"),s),E=pi(n.get("barMaxWidth"),s),P=pi(n.get("barMinWidth")||(Dde(n)?.5:1),s),I=n.get("barGap"),D=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:S,barMaxWidth:E,barMinWidth:P,barGap:I,barCategoryGap:D,axisKey:qN(a),stackId:WN(n)})}),Ede(r)}function Ede(e){var t={};Te(e,function(n,i){var a=n.axisKey,o=n.bandWidth,s=t[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},c=s.stacks;t[a]=s;var f=n.stackId;c[f]||s.autoWidthCount++,c[f]=c[f]||{width:0,maxWidth:0};var p=n.barWidth;p&&!c[f].width&&(c[f].width=p,p=Math.min(s.remainedWidth,p),s.remainedWidth-=p);var v=n.barMaxWidth;v&&(c[f].maxWidth=v);var y=n.barMinWidth;y&&(c[f].minWidth=y);var _=n.barGap;_!=null&&(s.gap=_);var S=n.barCategoryGap;S!=null&&(s.categoryGap=S)});var r={};return Te(t,function(n,i){r[i]={};var a=n.stacks,o=n.bandWidth,s=n.categoryGap;if(s==null){var c=Vr(a).length;s=Math.max(35-c*4,15)+"%"}var f=pi(s,o),p=pi(n.gap,1),v=n.remainedWidth,y=n.autoWidthCount,_=(v-f)/(y+(y-1)*p);_=Math.max(_,0),Te(a,function(I){var D=I.maxWidth,L=I.minWidth;if(I.width){var B=I.width;D&&(B=Math.min(B,D)),L&&(B=Math.max(B,L)),I.width=B,v-=B+p*B,y--}else{var B=_;D&&D<B&&(B=Math.min(D,v)),L&&L>B&&(B=L),B!==_&&(I.width=B,v-=B+p*B,y--)}}),_=(v-f)/(y+(y-1)*p),_=Math.max(_,0);var S=0,E;Te(a,function(I,D){I.width||(I.width=_),E=I,S+=I.width*(1+p)}),E&&(S-=E.width*p);var P=-S/2;Te(a,function(I,D){r[i][D]=r[i][D]||{bandWidth:o,offset:P,width:I.width},P+=I.width*(1+p)})}),r}function Pde(e,t,r){if(e&&t){var n=e[qN(t)];return n!=null&&r!=null?n[WN(r)]:n}}function Ide(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function Dde(e){return e.pipelineContext&&e.pipelineContext.large}var Lde=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},ZN=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return Mb(r.value,lR[Que(wd(this._minLevelUnit))]||lR.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return ece(r,n,i,o,a)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var a=this.getSetting("useUTC"),o=$de(this._minLevelUnit,this._approxInterval,a,n);return i=i.concat(o),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=To,n[1]+=To),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-To}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=W_.length,c=Math.min(Lde(W_,this._approxInterval,0,s),s-1);this._interval=W_[c][1],this._minLevelUnit=W_[Math.max(c-1,0)][0]},t.prototype.parse=function(r){return Tn(r)?r:+Il(r)},t.prototype.contain=function(r){return $b(this.parse(r),this._extent)},t.prototype.normalize=function(r){return Nb(this.parse(r),this._extent)},t.prototype.scale=function(r){return Vb(r,this._extent)},t.type="time",t}($g),W_=[["second",AM],["minute",MM],["hour",bv],["quarter-day",bv*6],["half-day",bv*12],["day",To*1.2],["half-week",To*3.5],["week",To*7],["month",To*31],["quarter",To*95],["half-year",sR/2],["year",sR]];function kde(e,t,r,n){var i=Il(t),a=Il(r),o=function(S){return uR(i,S,n)===uR(a,S,n)},s=function(){return o("year")},c=function(){return s()&&o("month")},f=function(){return c()&&o("day")},p=function(){return f()&&o("hour")},v=function(){return p()&&o("minute")},y=function(){return v()&&o("second")},_=function(){return y()&&o("millisecond")};switch(e){case"year":return s();case"month":return c();case"day":return f();case"hour":return p();case"minute":return v();case"second":return y();case"millisecond":return _()}}function Rde(e,t){return e/=To,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Ode(e){var t=30*To;return e/=t,e>6?6:e>3?3:e>2?2:1}function zde(e){return e/=bv,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function yO(e,t){return e/=t?MM:AM,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Bde(e){return mF(e,!0)}function Fde(e,t,r){var n=new Date(e);switch(wd(t)){case"year":case"month":n[T$(r)](0);case"day":n[C$(r)](1);case"hour":n[A$(r)](0);case"minute":n[M$(r)](0);case"second":n[E$(r)](0),n[P$(r)](0)}return n.getTime()}function $de(e,t,r,n){var i=1e4,a=w$,o=0;function s(ee,J,X,ne,we,fe,me){for(var Ve=new Date(J),Oe=J,ct=Ve[ne]();Oe<X&&Oe<=n[1];)me.push({value:Oe}),ct+=ee,Ve[we](ct),Oe=Ve.getTime();me.push({value:Oe,notAdd:!0})}function c(ee,J,X){var ne=[],we=!J.length;if(!kde(wd(ee),n[0],n[1],r)){we&&(J=[{value:Fde(new Date(n[0]),ee,r)},{value:n[1]}]);for(var fe=0;fe<J.length-1;fe++){var me=J[fe].value,Ve=J[fe+1].value;if(me!==Ve){var Oe=void 0,ct=void 0,_t=void 0,zt=!1;switch(ee){case"year":Oe=Math.max(1,Math.round(t/To/365)),ct=EM(r),_t=tce(r);break;case"half-year":case"quarter":case"month":Oe=Ode(t),ct=Sd(r),_t=T$(r);break;case"week":case"half-week":case"day":Oe=Rde(t),ct=Eb(r),_t=C$(r),zt=!0;break;case"half-day":case"quarter-day":case"hour":Oe=zde(t),ct=og(r),_t=A$(r);break;case"minute":Oe=yO(t,!0),ct=Pb(r),_t=M$(r);break;case"second":Oe=yO(t,!1),ct=Ib(r),_t=E$(r);break;case"millisecond":Oe=Bde(t),ct=Db(r),_t=P$(r);break}s(Oe,me,Ve,ct,_t,zt,ne),ee==="year"&&X.length>1&&fe===0&&X.unshift({value:X[0].value-Oe})}}for(var fe=0;fe<ne.length;fe++)X.push(ne[fe]);return ne}}for(var f=[],p=[],v=0,y=0,_=0;_<a.length&&o++<i;++_){var S=wd(a[_]);if(Jue(a[_])){c(a[_],f[f.length-1]||[],p);var E=a[_+1]?wd(a[_+1]):null;if(S!==E){if(p.length){y=v,p.sort(function(ee,J){return ee.value-J.value});for(var P=[],I=0;I<p.length;++I){var D=p[I].value;(I===0||p[I-1].value!==D)&&(P.push(p[I]),D>=n[0]&&D<=n[1]&&v++)}var L=(n[1]-n[0])/t;if(v>L*1.5&&y>L/1.5||(f.push(P),v>L||e===a[_]))break}p=[]}}}for(var B=Fi(Qt(f,function(ee){return Fi(ee,function(J){return J.value>=n[0]&&J.value<=n[1]&&!J.notAdd})}),function(ee){return ee.length>0}),U=[],V=B.length-1,_=0;_<B.length;++_)for(var N=B[_],G=0;G<N.length;++G)U.push({value:N[G].value,level:V-_});U.sort(function(ee,J){return ee.value-J.value});for(var Y=[],_=0;_<U.length;++_)(_===0||U[_].value!==U[_-1].value)&&Y.push(U[_]);return Y}Us.registerClass(ZN);const Nde=ZN;var _O=Us.prototype,Cv=$g.prototype,Vde=ai,Hde=Math.floor,Ude=Math.ceil,q_=Math.pow,Wo=Math.log,XM=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new $g,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,a=n.getExtent(),o=Cv.getTicks.call(this,r);return Qt(o,function(s){var c=s.value,f=ai(q_(this.base,c));return f=c===i[0]&&this._fixMin?Z_(f,a[0]):f,f=c===i[1]&&this._fixMax?Z_(f,a[1]):f,{value:f}},this)},t.prototype.setExtent=function(r,n){var i=Wo(this.base);r=Wo(Math.max(0,r))/i,n=Wo(Math.max(0,n))/i,Cv.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=_O.getExtent.call(this);n[0]=q_(r,n[0]),n[1]=q_(r,n[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(n[0]=Z_(n[0],a[0])),this._fixMax&&(n[1]=Z_(n[1],a[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=Wo(r[0])/Wo(n),r[1]=Wo(r[1])/Wo(n),_O.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var a=nse(i),o=r/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[ai(Ude(n[0]/a)*a),ai(Hde(n[1]/a)*a)];this._interval=a,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Cv.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=Wo(r)/Wo(this.base),$b(r,this._extent)},t.prototype.normalize=function(r){return r=Wo(r)/Wo(this.base),Nb(r,this._extent)},t.prototype.scale=function(r){return r=Vb(r,this._extent),q_(this.base,r)},t.type="log",t}(Us),XN=XM.prototype;XN.getMinorTicks=Cv.getMinorTicks;XN.getLabel=Cv.getLabel;function Z_(e,t){return Vde(e,Ps(t))}Us.registerClass(XM);const jde=XM;var Gde=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var a=this._modelMinRaw=r.get("min",!0);ir(a)?this._modelMinNum=X_(t,a({min:n[0],max:n[1]})):a!=="dataMin"&&(this._modelMinNum=X_(t,a));var o=this._modelMaxRaw=r.get("max",!0);if(ir(o)?this._modelMaxNum=X_(t,o({min:n[0],max:n[1]})):o!=="dataMax"&&(this._modelMaxNum=X_(t,o)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),c=Ft(s)?s:[s||0,s||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Th(c[0],1),Th(c[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,c=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,f=s!=null,p=c!=null;s==null&&(s=t?i?0:NaN:r-a[0]*o),c==null&&(c=t?i?i-1:NaN:n+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(c==null||!isFinite(c))&&(c=NaN);var v=r1(s)||r1(c)||t&&!i;this._needCrossZero&&(s>0&&c>0&&!f&&(s=0),s<0&&c<0&&!p&&(c=0));var y=this._determinedMin,_=this._determinedMax;return y!=null&&(s=y,f=!0),_!=null&&(c=_,p=!0),{min:s,max:c,minFixed:f,maxFixed:p,isBlank:v}},e.prototype.modifyDataMinMax=function(t,r){this[qde[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Wde[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Wde={min:"_determinedMin",max:"_determinedMax"},qde={min:"_dataMin",max:"_dataMax"};function YN(e,t,r){var n=e.rawExtentInfo;return n||(n=new Gde(e,t,r),e.rawExtentInfo=n,n)}function X_(e,t){return t==null?null:r1(t)?NaN:e.parse(t)}function KN(e,t){var r=e.type,n=YN(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,a=n.max,o=t.ecModel;if(o&&r==="time"){var s=Cde("bar",o),c=!1;if(Te(s,function(v){c=c||v.getBaseAxis()===t.axis}),c){var f=Mde(s),p=Zde(i,a,t,f);i=p.min,a=p.max}}return{extent:[i,a],fixMin:n.minFixed,fixMax:n.maxFixed}}function Zde(e,t,r,n){var i=r.axis.getExtent(),a=i[1]-i[0],o=Pde(n,r.axis);if(o===void 0)return{min:e,max:t};var s=1/0;Te(o,function(_){s=Math.min(_.offset,s)});var c=-1/0;Te(o,function(_){c=Math.max(_.offset+_.width,c)}),s=Math.abs(s),c=Math.abs(c);var f=s+c,p=t-e,v=1-(s+c)/a,y=p/v-p;return t+=y*(c/f),e-=y*(s/f),{min:e,max:t}}function bO(e,t){var r=t,n=KN(e,r),i=n.extent,a=r.get("splitNumber");e instanceof jde&&(e.base=r.get("logBase"));var o=e.type,s=r.get("interval"),c=o==="interval"||o==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:c?r.get("minInterval"):null,maxInterval:c?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function Xde(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new UN({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Nde({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Us.getClass(t)||$g)}}function Yde(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function Ng(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,a){return e.scale.getFormattedLabel(i,a,n)}}(t):Wt(t)?function(n){return function(i){var a=e.scale.getLabel(i),o=n.replace("{value}",a??"");return o}}(t):ir(t)?function(n){return function(i,a){return r!=null&&(a=i.value-r),n(YM(e,i),a,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function YM(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function Kde(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,a=r.getExtent();r instanceof UN?i=r.count():(n=r.getTicks(),i=n.length);var o=e.getLabelModel(),s=Ng(e),c,f=1;i>40&&(f=Math.ceil(i/40));for(var p=0;p<i;p+=f){var v=n?n[p]:{value:a[0]+p},y=s(v,p),_=o.getTextRect(y),S=Jde(_,o.get("rotate")||0);c?c.union(S):c=S}return c}}function Jde(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,a=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),o=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new qr(e.x,e.y,a,o);return s}function KM(e){var t=e.get("interval");return t??"auto"}function JN(e){return e.type==="category"&&KM(e.getLabelModel())===0}function QN(e,t){var r={};return Te(e.mapDimensionsAll(t),function(n){r[pde(e,n)]=!0}),Vr(r)}function Qde(e,t,r){t&&Te(QN(t,r),function(n){var i=t.getApproximateExtent(n);i[0]<e[0]&&(e[0]=i[0]),i[1]>e[1]&&(e[1]=i[1])})}var epe=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),xO=[],tpe={registerPreprocessor:LN,registerProcessor:kN,registerPostInit:Vfe,registerPostUpdate:Hfe,registerUpdateLifecycle:WM,registerAction:zh,registerCoordinateSystem:Ufe,registerLayout:jfe,registerVisual:Bh,registerTransform:Wfe,registerLoading:RN,registerMap:Gfe,registerImpl:xfe,PRIORITY:Rfe,ComponentModel:xn,ComponentView:ns,SeriesModel:Mh,ChartView:Rs,registerComponentModel:function(e){xn.registerClass(e)},registerComponentView:function(e){ns.registerClass(e)},registerSeriesModel:function(e){Mh.registerClass(e)},registerChartView:function(e){Rs.registerClass(e)},registerSubTypeDefaulter:function(e,t){xn.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){Joe(e,t)}};function Ro(e){if(Ft(e)){Te(e,function(t){Ro(t)});return}Wr(xO,e)>=0||(xO.push(e),ir(e)&&(e={install:e}),e.install(tpe))}var hg=Gn();function rpe(e){return e.type==="category"?ipe(e):ope(e)}function npe(e,t){return e.type==="category"?ape(e,t):{ticks:Qt(e.scale.getTicks(),function(r){return r.value})}}function ipe(e){var t=e.getLabelModel(),r=e8(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function e8(e,t){var r=t8(e,"labels"),n=KM(t),i=r8(r,n);if(i)return i;var a,o;return ir(n)?a=a8(e,n):(o=n==="auto"?spe(e):n,a=i8(e,o)),n8(r,n,{labels:a,labelCategoryInterval:o})}function ape(e,t){var r=t8(e,"ticks"),n=KM(t),i=r8(r,n);if(i)return i;var a,o;if((!t.get("show")||e.scale.isBlank())&&(a=[]),ir(n))a=a8(e,n,!0);else if(n==="auto"){var s=e8(e,e.getLabelModel());o=s.labelCategoryInterval,a=Qt(s.labels,function(c){return c.tickValue})}else o=n,a=i8(e,o,!0);return n8(r,n,{ticks:a,tickCategoryInterval:o})}function ope(e){var t=e.scale.getTicks(),r=Ng(e);return{labels:Qt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function t8(e,t){return hg(e)[t]||(hg(e)[t]=[])}function r8(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function n8(e,t,r){return e.push({key:t,value:r}),r}function spe(e){var t=hg(e).autoInterval;return t??(hg(e).autoInterval=e.calculateCategoryInterval())}function lpe(e){var t=upe(e),r=Ng(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var c=a[0],f=e.dataToCoord(c+1)-e.dataToCoord(c),p=Math.abs(f*Math.cos(n)),v=Math.abs(f*Math.sin(n)),y=0,_=0;c<=a[1];c+=s){var S=0,E=0,P=rM(r({value:c}),t.font,"center","top");S=P.width*1.3,E=P.height*1.3,y=Math.max(y,S,7),_=Math.max(_,E,7)}var I=y/p,D=_/v;isNaN(I)&&(I=1/0),isNaN(D)&&(D=1/0);var L=Math.max(0,Math.floor(Math.min(I,D))),B=hg(e.model),U=e.getExtent(),V=B.lastAutoInterval,N=B.lastTickCount;return V!=null&&N!=null&&Math.abs(V-L)<=1&&Math.abs(N-o)<=1&&V>L&&B.axisExtent0===U[0]&&B.axisExtent1===U[1]?L=V:(B.lastTickCount=o,B.lastAutoInterval=L,B.axisExtent0=U[0],B.axisExtent1=U[1]),L}function upe(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function i8(e,t,r){var n=Ng(e),i=e.scale,a=i.getExtent(),o=e.getLabelModel(),s=[],c=Math.max((t||0)+1,1),f=a[0],p=i.count();f!==0&&c>1&&p/c>2&&(f=Math.round(Math.ceil(f/c)*c));var v=JN(e),y=o.get("showMinLabel")||v,_=o.get("showMaxLabel")||v;y&&f!==a[0]&&E(a[0]);for(var S=f;S<=a[1];S+=c)E(S);_&&S-c!==a[1]&&E(a[1]);function E(P){var I={value:P};s.push(r?P:{formattedLabel:n(I),rawLabel:i.getLabel(I),tickValue:P})}return s}function a8(e,t,r){var n=e.scale,i=Ng(e),a=[];return Te(n.getTicks(),function(o){var s=n.getLabel(o),c=o.value;t(o.value,s)&&a.push(r?c:{formattedLabel:i(o),rawLabel:s,tickValue:c})}),a}var wO=[0,1],cpe=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return dF(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),SO(n,i.count())),na(t,wO,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),SO(n,i.count()));var a=na(t,n,wO,r);return this.scale.scale(a)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=npe(this,r),i=n.ticks,a=Qt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=r.get("alignWithLabel");return hpe(this,a,o,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Qt(n,function(a){return Qt(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},e.prototype.getViewLabels=function(){return rpe(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return lpe(this)},e}();function SO(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function hpe(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var a=e.getExtent(),o,s;if(i===1)t[0].coord=a[0],o=t[1]={coord:a[1]};else{var c=t[i-1].tickValue-t[0].tickValue,f=(t[i-1].coord-t[0].coord)/c;Te(t,function(_){_.coord-=f/2});var p=e.scale.getExtent();s=1+p[1]-t[i-1].tickValue,o={coord:t[i-1].coord+f*s},t.push(o)}var v=a[0]>a[1];y(t[0].coord,a[0])&&(n?t[0].coord=a[0]:t.shift()),n&&y(a[0],t[0].coord)&&t.unshift({coord:a[0]}),y(a[1],o.coord)&&(n?o.coord=a[1]:t.pop()),n&&y(o.coord,a[1])&&t.push({coord:a[1]});function y(_,S){return _=ai(_),S=ai(S),v?_>S:_<S}}const fpe=cpe;function dpe(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,c=i.style.margin||0,f=o.clone();f.applyTransform(a),f.x-=c/2,f.y-=c/2,f.width+=c,f.height+=c;var p=s?new m1(o,a):null;t.push({label:i,labelLine:n.labelLine,rect:f,localRect:o,obb:p,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:a})}}return t}function ppe(e){var t=[];e.sort(function(E,P){return P.priority-E.priority});var r=new qr(0,0,0,0);function n(E){if(!E.ignore){var P=E.ensureState("emphasis");P.ignore==null&&(P.ignore=!1)}E.ignore=!0}for(var i=0;i<e.length;i++){var a=e[i],o=a.axisAligned,s=a.localRect,c=a.transform,f=a.label,p=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var v=a.obb,y=!1,_=0;_<t.length;_++){var S=t[_];if(r.intersect(S.rect)){if(o&&S.axisAligned){y=!0;break}if(S.obb||(S.obb=new m1(S.localRect,S.transform)),v||(v=new m1(s,c)),v.intersect(S.obb)){y=!0;break}}}y?(n(f),p&&n(p)):(f.attr("ignore",a.defaultAttr.ignore),p&&p.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}var $S=null;function mpe(e){return $S||($S=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),$S(e)}var NS=null;function vpe(e){NS||(NS=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),NS(e)}function gpe(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Y_(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function o8(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function tC(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(o8(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var ype='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',rC=0,P0=null;function _pe(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=wpe.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,a=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||E1(e)}),o=tC(e),s=o.detached,c=o.rendered;e.__resize_observer_triggered__=s===!1&&c===!1,e.__resize_observer__=a,a.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){E1(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(rC||(P0=gpe(ype)),Spe(e),e.__resize_rendered__=tC(e).rendered,window.MutationObserver){var f=new MutationObserver(e.__resize_mutation_handler__);f.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=f}}e.__resize_listeners__.push(t),rC++}function bpe(e,t){var r=e.__resize_listeners__;if(r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",JM),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--rC&&P0&&P0.parentNode.removeChild(P0)}}function xpe(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,a=e.offsetHeight;return i!==r||a!==n?{width:i,height:a}:null}function wpe(){var e=tC(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(QM(this),this.addEventListener("scroll",JM,!0)),this.__resize_rendered__=t,E1(this))}function JM(){var e=this;QM(this),this.__resize_raf__&&vpe(this.__resize_raf__),this.__resize_raf__=mpe(function(){var t=xpe(e);t&&(e.__resize_last__=t,E1(e))})}function E1(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Spe(e){var t=o8(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Y_("div",{className:"resize-triggers"}),n=Y_("div",{className:"resize-expand-trigger"}),i=Y_("div"),a=Y_("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(a),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:a},QM(e),e.addEventListener("scroll",JM,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function QM(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,a=i.scrollWidth,o=i.scrollHeight,s=r.offsetWidth,c=r.offsetHeight,f=r.scrollWidth,p=r.scrollHeight;i.scrollLeft=a,i.scrollTop=o,n.style.width=s+1+"px",n.style.height=c+1+"px",r.scrollLeft=f,r.scrollTop=p}var yl=function(){return yl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yl.apply(this,arguments)},Tpe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Cpe(e){return t=Object.create(null),Tpe.forEach(function(r){t[r]=function(n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var Ape={autoresize:Boolean},Mpe={loading:Boolean,loadingOptions:Object},Epe=/^on[^a-z]/,Ppe=function(e){return Epe.test(e)},TO=[],Om=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,a=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=TO.indexOf(a);o===-1&&(o=TO.push(a)-1,Om[o]={}),r=Om[o]&&Om[o][n]?Om[o][n]:Om[o][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var c=document.createElement("style");if(c.setAttribute("type","text/css"),t.attributes)for(var f=Object.keys(t.attributes),p=0;p<f.length;p++)c.setAttribute(f[p],t.attributes[f[p]]);var v=n==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(v,c),c}})(`x-vue-echarts{display:block;width:100%;height:100%}
`,{});var s8=Jt({name:"echarts",props:yl(yl({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Ape),Mpe),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=yn(),i=yn(),a=yn(),o=on("ecTheme",null),s=on("ecInitOptions",null),c=on("ecUpdateOptions",null),f=gg(e),p=f.autoresize,v=f.manualUpdate,y=f.loading,_=f.loadingOptions,S=ke(function(){return a.value||e.option||null}),E=ke(function(){return e.theme||Kt(o)||{}}),P=ke(function(){return e.initOptions||Kt(s)||{}}),I=ke(function(){return e.updateOptions||Kt(c)||{}}),D=ke(function(){return function(G){var Y={};for(var ee in G)Ppe(ee)||(Y[ee]=G[ee]);return Y}(r)}),L=kl().proxy.$listeners;function B(G){if(n.value){var Y=i.value=$fe(n.value,E.value,P.value);e.group&&(Y.group=e.group);var ee=L;ee||(ee={},Object.keys(r).filter(function(X){return X.indexOf("on")===0&&X.length>2}).forEach(function(X){var ne=X.charAt(2).toLowerCase()+X.slice(3);ne.substring(ne.length-4)==="Once"&&(ne="~".concat(ne.substring(0,ne.length-4))),ee[ne]=r[X]})),Object.keys(ee).forEach(function(X){var ne=ee[X];if(ne){var we=X.toLowerCase();we.charAt(0)==="~"&&(we=we.substring(1),ne.__once__=!0);var fe=Y;if(we.indexOf("zr:")===0&&(fe=Y.getZr(),we=we.substring(3)),ne.__once__){delete ne.__once__;var me=ne;ne=function(){for(var Ve=[],Oe=0;Oe<arguments.length;Oe++)Ve[Oe]=arguments[Oe];me.apply(void 0,Ve),fe.off(we,ne)}}fe.on(we,ne)}}),p.value?Oo(function(){Y&&!Y.isDisposed()&&Y.resize(),J()}):J()}function J(){var X=G||S.value;X&&Y.setOption(X,I.value)}}function U(){i.value&&(i.value.dispose(),i.value=void 0)}var V=null;zr(v,function(G){typeof V=="function"&&(V(),V=null),G||(V=zr(function(){return e.option},function(Y,ee){Y&&(i.value?i.value.setOption(Y,yl({notMerge:Y.value!==(ee==null?void 0:ee.value)},I.value)):B())},{deep:!0}))},{immediate:!0}),zr([E,P],function(){U(),B()},{deep:!0}),Ml(function(){e.group&&i.value&&(i.value.group=e.group)});var N=Cpe(i);return function(G,Y,ee){var J=on("ecLoadingOptions",{}),X=ke(function(){return yl(yl({},Kt(J)),ee==null?void 0:ee.value)});Ml(function(){var ne=G.value;ne&&(Y.value?ne.showLoading(X.value):ne.hideLoading())})}(i,y,_),function(G,Y,ee){var J=null;zr([ee,G,Y],function(X,ne,we){var fe=X[0],me=X[1],Ve=X[2];fe&&me&&Ve&&(J=NM(function(){me.resize()},100),_pe(fe,J)),we(function(){J&&fe&&bpe(fe,J)})})}(i,p,n),On(function(){B()}),qd(U),yl({chart:i,root:n,setOption:function(G,Y){e.manualUpdate&&(a.value=G),i.value?i.value.setOption(G,Y||{}):B(G)},nonEventAttrs:D},N)},render:function(){var e=yl({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Tr("x-vue-echarts",e)}}),VS=Math.sin,HS=Math.cos,l8=Math.PI,Gc=Math.PI*2,Ipe=180/l8,u8=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,n,i,a,o){this._add("C",t,r,n,i,a,o)},e.prototype.quadraticCurveTo=function(t,r,n,i){this._add("Q",t,r,n,i)},e.prototype.arc=function(t,r,n,i,a,o){this.ellipse(t,r,n,n,0,i,a,o)},e.prototype.ellipse=function(t,r,n,i,a,o,s,c){var f=s-o,p=!c,v=Math.abs(f),y=Eu(v-Gc)||(p?f>=Gc:-f>=Gc),_=f>0?f%Gc:f%Gc+Gc,S=!1;y?S=!0:Eu(v)?S=!1:S=_>=l8==!!p;var E=t+n*HS(o),P=r+i*VS(o);this._start&&this._add("M",E,P);var I=Math.round(a*Ipe);if(y){var D=1/this._p,L=(p?1:-1)*(Gc-D);this._add("A",n,i,I,1,+p,t+n*HS(o+L),r+i*VS(o+L)),D>.01&&this._add("A",n,i,I,0,+p,E,P)}else{var B=t+n*HS(s),U=r+i*VS(s);this._add("A",n,i,I,+S,+p,B,U)}},e.prototype.rect=function(t,r,n,i){this._add("M",t,r),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,n,i,a,o,s,c,f){for(var p=[],v=this._p,y=1;y<arguments.length;y++){var _=arguments[y];if(isNaN(_)){this._invalid=!0;return}p.push(Math.round(_*v)/v)}this._d.push(t+p.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),Av="none",Dpe=Math.round;function Lpe(e){var t=e.fill;return t!=null&&t!==Av}function kpe(e){var t=e.stroke;return t!=null&&t!==Av}var nC=["lineCap","miterLimit","lineJoin"],Rpe=Qt(nC,function(e){return"stroke-"+e.toLowerCase()});function Ope(e,t,r,n){var i=t.opacity==null?1:t.opacity;if(r instanceof zl){e("opacity",i);return}if(Lpe(t)){var a=Yv(t.fill);e("fill",a.color);var o=t.fillOpacity!=null?t.fillOpacity*a.opacity*i:a.opacity*i;(n||o<1)&&e("fill-opacity",o)}else e("fill",Av);if(kpe(t)){var s=Yv(t.stroke);e("stroke",s.color);var c=t.strokeNoScale?r.getLineScale():1,f=c?(t.lineWidth||0)/c:0,p=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*i:s.opacity*i,v=t.strokeFirst;if((n||f!==1)&&e("stroke-width",f),(n||v)&&e("paint-order",v?"stroke":"fill"),(n||p<1)&&e("stroke-opacity",p),t.lineDash){var y=HM(r),_=y[0],S=y[1];_&&(S=Dpe(S||0),e("stroke-dasharray",_.join(",")),(S||n)&&e("stroke-dashoffset",S))}else n&&e("stroke-dasharray",Av);for(var E=0;E<nC.length;E++){var P=nC[E];if(n||t[P]!==f1[P]){var I=t[P]||f1[P];I&&e(Rpe[E],I)}}}else n&&e("stroke",Av)}var c8="http://www.w3.org/2000/svg",h8="http://www.w3.org/1999/xlink",zpe="http://www.w3.org/2000/xmlns/",Bpe="http://www.w3.org/XML/1998/namespace";function f8(e){return document.createElementNS(c8,e)}function vi(e,t,r,n,i){return{tag:e,attrs:r||{},children:n,text:i,key:t}}function Fpe(e,t){var r=[];if(t)for(var n in t){var i=t[n],a=n;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),r.push(a))}return"<"+e+" "+r.join(" ")+">"}function $pe(e){return"</"+e+">"}function eE(e,t){t=t||{};var r=t.newline?`
`:"";function n(i){var a=i.children,o=i.tag,s=i.attrs,c=i.text;return Fpe(o,s)+(o!=="style"?to(c):c||"")+(a?""+r+Qt(a,function(f){return n(f)}).join(r)+r:"")+$pe(o)}return n(e)}function Npe(e,t,r){r=r||{};var n=r.newline?`
`:"",i=" {"+n,a=n+"}",o=Qt(Vr(e),function(c){return c+i+Qt(Vr(e[c]),function(f){return f+":"+e[c][f]+";"}).join(n)+a}).join(n),s=Qt(Vr(t),function(c){return"@keyframes "+c+i+Qt(Vr(t[c]),function(f){return f+i+Qt(Vr(t[c][f]),function(p){var v=t[c][f][p];return p==="d"&&(v='path("'+v+'")'),p+":"+v+";"}).join(n)+a}).join(n)+a}).join(n);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(n)}function iC(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function CO(e,t,r,n){return vi("svg","root",{width:e,height:t,xmlns:c8,"xmlns:xlink":h8,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+e+" "+t:!1},r)}var AO={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Xc="transform-origin";function Vpe(e,t,r){var n=At({},e.shape);At(n,t),e.buildPath(r,n);var i=new u8;return i.reset(rF(e)),r.rebuildPath(i,1),i.generateStr(),i.getStr()}function Hpe(e,t){var r=t.originX,n=t.originY;(r||n)&&(e[Xc]=r+"px "+n+"px")}var Upe={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function d8(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function jpe(e,t,r){var n=e.shape.paths,i={},a,o;if(Te(n,function(c){var f=iC(r.zrId);f.animation=!0,Hb(c,{},f,!0);var p=f.cssAnims,v=f.cssNodes,y=Vr(p),_=y.length;if(_){o=y[_-1];var S=p[o];for(var E in S){var P=S[E];i[E]=i[E]||{d:""},i[E].d+=P.d||""}for(var I in v){var D=v[I].animation;D.indexOf(o)>=0&&(a=D)}}}),!!a){t.d=!1;var s=d8(i,r);return a.replace(o,s)}}function MO(e){return Wt(e)?AO[e]?"cubic-bezier("+AO[e]+")":JA(e)?e:"":""}function Hb(e,t,r,n){var i=e.animators,a=i.length,o=[];if(e instanceof s$){var s=jpe(e,t,r);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var c={},f=0;f<a;f++){var p=i[f],v=[p.getMaxTime()/1e3+"s"],y=MO(p.getClip().easing),_=p.getDelay();y?v.push(y):v.push("linear"),_&&v.push(_/1e3+"s"),p.getLoop()&&v.push("infinite");var S=v.join(" ");c[S]=c[S]||[S,[]],c[S][1].push(p)}function E(D){var L=D[1],B=L.length,U={},V={},N={},G="animation-timing-function";function Y(st,at,dt){for(var vt=st.getTracks(),It=st.getMaxTime(),de=0;de<vt.length;de++){var be=vt[de];if(be.needsAnimate()){var Be=be.keyframes,Xe=be.propName;if(dt&&(Xe=dt(Xe)),Xe)for(var ye=0;ye<Be.length;ye++){var lt=Be[ye],xt=Math.round(lt.time/It*100)+"%",Ze=MO(lt.easing),ut=lt.rawValue;(Wt(ut)||Tn(ut))&&(at[xt]=at[xt]||{},at[xt][Xe]=lt.rawValue,Ze&&(at[xt][G]=Ze))}}}}for(var ee=0;ee<B;ee++){var J=L[ee],X=J.targetName;X?X==="shape"&&Y(J,V):!n&&Y(J,U)}for(var ne in U){var we={};sF(we,e),At(we,U[ne]);var fe=nF(we),me=U[ne][G];N[ne]=fe?{transform:fe}:{},Hpe(N[ne],we),me&&(N[ne][G]=me)}var Ve,Oe=!0;for(var ne in V){N[ne]=N[ne]||{};var ct=!Ve,me=V[ne][G];ct&&(Ve=new Vu);var _t=Ve.len();Ve.reset(),N[ne].d=Vpe(e,V[ne],Ve);var zt=Ve.len();if(!ct&&_t!==zt){Oe=!1;break}me&&(N[ne][G]=me)}if(!Oe)for(var ne in N)delete N[ne].d;if(!n)for(var ee=0;ee<B;ee++){var J=L[ee],X=J.targetName;X==="style"&&Y(J,N,function(vt){return Upe[vt]})}for(var Mt=Vr(N),ar=!0,rr,ee=1;ee<Mt.length;ee++){var wr=Mt[ee-1],Xt=Mt[ee];if(N[wr][Xc]!==N[Xt][Xc]){ar=!1;break}rr=N[wr][Xc]}if(ar&&rr){for(var ne in N)N[ne][Xc]&&delete N[ne][Xc];t[Xc]=rr}if(Fi(Mt,function(st){return Vr(N[st]).length>0}).length){var Ue=d8(N,r);return Ue+" "+D[0]+" both"}}for(var P in c){var s=E(c[P]);s&&o.push(s)}if(o.length){var I=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+I]={animation:o.join(",")},t.class=I}}var fg=Math.round;function p8(e){return e&&Wt(e.src)}function m8(e){return e&&ir(e.toDataURL)}function tE(e,t,r,n){Ope(function(i,a){var o=i==="fill"||i==="stroke";o&&tF(a)?g8(t,e,i,n):o&&QA(a)?y8(r,e,i,n):e[i]=a},t,r,!1),Kpe(r,e,n)}function EO(e){return Eu(e[0]-1)&&Eu(e[1])&&Eu(e[2])&&Eu(e[3]-1)}function Gpe(e){return Eu(e[4])&&Eu(e[5])}function rE(e,t,r){if(t&&!(Gpe(t)&&EO(t))){var n=r?10:1e4;e.transform=EO(t)?"translate("+fg(t[4]*n)/n+" "+fg(t[5]*n)/n+")":boe(t)}}function PO(e,t,r){for(var n=e.points,i=[],a=0;a<n.length;a++)i.push(fg(n[a][0]*r)/r),i.push(fg(n[a][1]*r)/r);t.points=i.join(" ")}function IO(e){return!e.smooth}function Wpe(e){var t=Qt(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,n,i){for(var a=0;a<t.length;a++){var o=t[a],s=r[o[0]];s!=null&&(n[o[1]]=fg(s*i)/i)}}}var qpe={circle:[Wpe(["cx","cy","r"])],polyline:[PO,IO],polygon:[PO,IO]};function Zpe(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function v8(e,t){var r=e.style,n=e.shape,i=qpe[e.type],a={},o=t.animation,s="path",c=e.style.strokePercent,f=t.compress&&rF(e)||4;if(i&&!t.willUpdate&&!(i[1]&&!i[1](n))&&!(o&&Zpe(e))&&!(c<1)){s=e.type;var p=Math.pow(10,f);i[0](n,a,p)}else{var v=!e.path||e.shapeChanged();e.path||e.createPathProxy();var y=e.path;v&&(y.beginPath(),e.buildPath(y,e.shape),e.pathUpdated());var _=y.getVersion(),S=e,E=S.__svgPathBuilder;(S.__svgPathVersion!==_||!E||c!==S.__svgPathStrokePercent)&&(E||(E=S.__svgPathBuilder=new u8),E.reset(f),y.rebuildPath(E,c),E.generateStr(),S.__svgPathVersion=_,S.__svgPathStrokePercent=c),a.d=E.getStr()}return rE(a,e.transform),tE(a,r,e,t),t.animation&&Hb(e,a,t),vi(s,e.id+"",a)}function Xpe(e,t){var r=e.style,n=r.image;if(n&&!Wt(n)&&(p8(n)?n=n.src:m8(n)&&(n=n.toDataURL())),!!n){var i=r.x||0,a=r.y||0,o=r.width,s=r.height,c={href:n,width:o,height:s};return i&&(c.x=i),a&&(c.y=a),rE(c,e.transform),tE(c,r,e,t),t.animation&&Hb(e,c,t),vi("image",e.id+"",c)}}function Ype(e,t){var r=e.style,n=r.text;if(n!=null&&(n+=""),!(!n||isNaN(r.x)||isNaN(r.y))){var i=r.font||Nu,a=r.x||0,o=woe(r.y||0,vb(i),r.textBaseline),s=xoe[r.textAlign]||r.textAlign,c={"dominant-baseline":"central","text-anchor":s};if(OF(r)){var f="",p=r.fontStyle,v=RF(r.fontSize);if(!parseFloat(v))return;var y=r.fontFamily||D6,_=r.fontWeight;f+="font-size:"+v+";font-family:"+y+";",p&&p!=="normal"&&(f+="font-style:"+p+";"),_&&_!=="normal"&&(f+="font-weight:"+_+";"),c.style=f}else c.style="font: "+i;return n.match(/\s/)&&(c["xml:space"]="preserve"),a&&(c.x=a),o&&(c.y=o),rE(c,e.transform),tE(c,r,e,t),t.animation&&Hb(e,c,t),vi("text",e.id+"",c,void 0,n)}}function DO(e,t){if(e instanceof Qr)return v8(e,t);if(e instanceof zl)return Xpe(e,t);if(e instanceof d1)return Ype(e,t)}function Kpe(e,t,r){var n=e.style;if(Soe(n)){var i=Toe(e),a=r.shadowCache,o=a[i];if(!o){var s=e.getGlobalScale(),c=s[0],f=s[1];if(!c||!f)return;var p=n.shadowOffsetX||0,v=n.shadowOffsetY||0,y=n.shadowBlur,_=Yv(n.shadowColor),S=_.opacity,E=_.color,P=y/2/c,I=y/2/f,D=P+" "+I;o=r.zrId+"-s"+r.shadowIdx++,r.defs[o]=vi("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[vi("feDropShadow","",{dx:p/c,dy:v/f,stdDeviation:D,"flood-color":E,"flood-opacity":S})]),a[i]=o}t.filter=mb(o)}}function g8(e,t,r,n){var i=e[r],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(Q6(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(eF(i))a="radialGradient",o.cx=Er(i.x,.5),o.cy=Er(i.y,.5),o.r=Er(i.r,.5);else return;for(var s=i.colorStops,c=[],f=0,p=s.length;f<p;++f){var v=xT(s[f].offset)*100+"%",y=s[f].color,_=Yv(y),S=_.color,E=_.opacity,P={offset:v};P["stop-color"]=S,E<1&&(P["stop-opacity"]=E),c.push(vi("stop",f+"",P))}var I=vi(a,"",o,c),D=eE(I),L=n.gradientCache,B=L[D];B||(B=n.zrId+"-g"+n.gradientIdx++,L[D]=B,o.id=B,n.defs[B]=vi(a,B,o,c)),t[r]=mb(B)}function y8(e,t,r,n){var i=e.style[r],a=e.getBoundingRect(),o={},s=i.repeat,c=s==="no-repeat",f=s==="repeat-x",p=s==="repeat-y",v;if(J6(i)){var y=i.imageWidth,_=i.imageHeight,S=void 0,E=i.image;if(Wt(E)?S=E:p8(E)?S=E.src:m8(E)&&(S=E.toDataURL()),typeof Image>"u"){var P="Image width/height must been given explictly in svg-ssr renderer.";rs(y,P),rs(_,P)}else if(y==null||_==null){var I=function(ee,J){if(ee){var X=ee.elm,ne=y||J.width,we=_||J.height;ee.tag==="pattern"&&(f?(we=1,ne/=a.width):p&&(ne=1,we/=a.height)),ee.attrs.width=ne,ee.attrs.height=we,X&&(X.setAttribute("width",ne),X.setAttribute("height",we))}},D=lM(S,null,e,function(ee){c||I(V,ee),I(v,ee)});D&&D.width&&D.height&&(y=y||D.width,_=_||D.height)}v=vi("image","img",{href:S,width:y,height:_}),o.width=y,o.height=_}else i.svgElement&&(v=Lr(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(v){var L,B;c?L=B=1:f?(B=1,L=o.width/a.width):p?(L=1,B=o.height/a.height):o.patternUnits="userSpaceOnUse",L!=null&&!isNaN(L)&&(o.width=L),B!=null&&!isNaN(B)&&(o.height=B);var U=nF(i);U&&(o.patternTransform=U);var V=vi("pattern","",o,[v]),N=eE(V),G=n.patternCache,Y=G[N];Y||(Y=n.zrId+"-p"+n.patternIdx++,G[N]=Y,o.id=Y,V=n.defs[Y]=vi("pattern",Y,o,[v])),t[r]=mb(Y)}}function Jpe(e,t,r){var n=r.clipPathCache,i=r.defs,a=n[e.id];if(!a){a=r.zrId+"-c"+r.clipPathIdx++;var o={id:a};n[e.id]=a,i[a]=vi("clipPath",a,o,[v8(e,r)])}t["clip-path"]=mb(a)}function LO(e){return document.createTextNode(e)}function th(e,t,r){e.insertBefore(t,r)}function kO(e,t){e.removeChild(t)}function RO(e,t){e.appendChild(t)}function _8(e){return e.parentNode}function b8(e){return e.nextSibling}function US(e,t){e.textContent=t}var OO=58,Qpe=120,eme=vi("","");function aC(e){return e===void 0}function Ts(e){return e!==void 0}function tme(e,t,r){for(var n={},i=t;i<=r;++i){var a=e[i].key;a!==void 0&&(n[a]=i)}return n}function Ym(e,t){var r=e.key===t.key,n=e.tag===t.tag;return n&&r}function dg(e){var t,r=e.children,n=e.tag;if(Ts(n)){var i=e.elm=f8(n);if(nE(eme,e),Ft(r))for(t=0;t<r.length;++t){var a=r[t];a!=null&&RO(i,dg(a))}else Ts(e.text)&&!or(e.text)&&RO(i,LO(e.text))}else e.elm=LO(e.text);return e.elm}function x8(e,t,r,n,i){for(;n<=i;++n){var a=r[n];a!=null&&th(e,dg(a),t)}}function P1(e,t,r,n){for(;r<=n;++r){var i=t[r];if(i!=null)if(Ts(i.tag)){var a=_8(i.elm);kO(a,i.elm)}else kO(e,i.elm)}}function nE(e,t){var r,n=t.elm,i=e&&e.attrs||{},a=t.attrs||{};if(i!==a){for(r in a){var o=a[r],s=i[r];s!==o&&(o===!0?n.setAttribute(r,""):o===!1?n.removeAttribute(r):r.charCodeAt(0)!==Qpe?n.setAttribute(r,o):r==="xmlns:xlink"||r==="xmlns"?n.setAttributeNS(zpe,r,o):r.charCodeAt(3)===OO?n.setAttributeNS(Bpe,r,o):r.charCodeAt(5)===OO?n.setAttributeNS(h8,r,o):n.setAttribute(r,o))}for(r in i)r in a||n.removeAttribute(r)}}function rme(e,t,r){for(var n=0,i=0,a=t.length-1,o=t[0],s=t[a],c=r.length-1,f=r[0],p=r[c],v,y,_,S;n<=a&&i<=c;)o==null?o=t[++n]:s==null?s=t[--a]:f==null?f=r[++i]:p==null?p=r[--c]:Ym(o,f)?(td(o,f),o=t[++n],f=r[++i]):Ym(s,p)?(td(s,p),s=t[--a],p=r[--c]):Ym(o,p)?(td(o,p),th(e,o.elm,b8(s.elm)),o=t[++n],p=r[--c]):Ym(s,f)?(td(s,f),th(e,s.elm,o.elm),s=t[--a],f=r[++i]):(aC(v)&&(v=tme(t,n,a)),y=v[f.key],aC(y)?th(e,dg(f),o.elm):(_=t[y],_.tag!==f.tag?th(e,dg(f),o.elm):(td(_,f),t[y]=void 0,th(e,_.elm,o.elm))),f=r[++i]);(n<=a||i<=c)&&(n>a?(S=r[c+1]==null?null:r[c+1].elm,x8(e,S,r,i,c)):P1(e,t,n,a))}function td(e,t){var r=t.elm=e.elm,n=e.children,i=t.children;e!==t&&(nE(e,t),aC(t.text)?Ts(n)&&Ts(i)?n!==i&&rme(r,n,i):Ts(i)?(Ts(e.text)&&US(r,""),x8(r,null,i,0,i.length-1)):Ts(n)?P1(r,n,0,n.length-1):Ts(e.text)&&US(r,""):e.text!==t.text&&(Ts(n)&&P1(r,n,0,n.length-1),US(r,t.text)))}function nme(e,t){if(Ym(e,t))td(e,t);else{var r=e.elm,n=_8(r);dg(t),n!==null&&(th(n,t.elm,b8(r)),P1(n,[e],0,0))}return t}var ime=0,ame=function(){function e(t,r,n){if(this.type="svg",this.refreshHover=zO(),this.configLayer=zO(),this.storage=r,this._opts=n=At({},n),this.root=t,this._id="zr"+ime++,this._oldVNode=CO(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=f8("svg");nE(null,this._oldVNode),i.appendChild(a),t.appendChild(i)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",nme(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return DO(t,iC(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),n=this._width,i=this._height,a=iC(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress;var o=[],s=this._bgVNode=ome(n,i,this._backgroundColor,a);s&&o.push(s);var c=t.compress?null:this._mainVNode=vi("g","main",{},[]);this._paintList(r,a,c?c.children:o),c&&o.push(c);var f=Qt(Vr(a.defs),function(y){return a.defs[y]});if(f.length&&o.push(vi("defs","defs",{},f)),t.animation){var p=Npe(a.cssNodes,a.cssAnims,{newline:!0});if(p){var v=vi("style","stl",{},[],p);o.push(v)}}return CO(n,i,o,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},eE(this.renderToVNode({animation:Er(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:Er(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,n){for(var i=t.length,a=[],o=0,s,c,f=0,p=0;p<i;p++){var v=t[p];if(!v.invisible){var y=v.__clipPaths,_=y&&y.length||0,S=c&&c.length||0,E=void 0;for(E=Math.max(_-1,S-1);E>=0&&!(y&&c&&y[E]===c[E]);E--);for(var P=S-1;P>E;P--)o--,s=a[o-1];for(var I=E+1;I<_;I++){var D={};Jpe(y[I],D,r);var L=vi("g","clip-g-"+f++,D,[]);(s?s.children:n).push(L),a[o++]=L,s=L}c=y;var B=DO(v,r);B&&(s?s.children:n).push(B)}}},e.prototype.resize=function(t,r){var n=this._opts,i=this.root,a=this._viewport;if(t!=null&&(n.width=t),r!=null&&(n.height=r),i&&a&&(a.style.display="none",t=cd(i,0,n),r=cd(i,1,n),a.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,a){var o=a.style;o.width=t+"px",o.height=r+"px"}if(QA(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",r));var c=this._bgVNode&&this._bgVNode.elm;c&&(c.setAttribute("width",t),c.setAttribute("height",r))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=this.renderToString(),n="data:image/svg+xml;";return t?(r=Aoe(r),r&&n+"base64,"+r):n+"charset=UTF-8,"+encodeURIComponent(r)},e}();function zO(e){return function(){}}function ome(e,t,r,n){var i;if(r&&r!=="none")if(i=vi("rect","bg",{width:e,height:t,x:"0",y:"0",id:"0"}),tF(r))g8({fill:r},i.attrs,"fill",n);else if(QA(r))y8({style:{fill:r},dirty:la,getBoundingRect:function(){return{width:e,height:t}}},i.attrs,"fill",n);else{var a=Yv(r),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}const sme=ame;function lme(e){e.registerPainter("svg",sme)}function BO(e,t,r){var n=rp.createCanvas(),i=t.getWidth(),a=t.getHeight(),o=n.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=a*r,n}var ume=function(e){yt(t,e);function t(r,n,i){var a=e.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||u1,typeof r=="string"?o=BO(r,n,i):or(r)&&(o=r,r=o.id),a.id=r,a.dom=o;var s=o.style;return s&&(F6(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=n,a.dpr=i,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=BO("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,c=!1,f=new qr(0,0,0,0);function p(D){if(!(!D.isFinite()||D.isZero()))if(o.length===0){var L=new qr(0,0,0,0);L.copy(D),o.push(L)}else{for(var B=!1,U=1/0,V=0,N=0;N<o.length;++N){var G=o[N];if(G.intersect(D)){var Y=new qr(0,0,0,0);Y.copy(G),Y.union(D),o[N]=Y,B=!0;break}else if(c){f.copy(D),f.union(G);var ee=D.width*D.height,J=G.width*G.height,X=f.width*f.height,ne=X-ee-J;ne<U&&(U=ne,V=N)}}if(c&&(o[V].union(D),B=!0),!B){var L=new qr(0,0,0,0);L.copy(D),o.push(L)}c||(c=o.length>=s)}}for(var v=this.__startIndex;v<this.__endIndex;++v){var y=r[v];if(y){var _=y.shouldBePainted(i,a,!0,!0),S=y.__isRendered&&(y.__dirty&ro||!_)?y.getPrevPaintRect():null;S&&p(S);var E=_&&(y.__dirty&ro||!y.__isRendered)?y.getPaintRect():null;E&&p(E)}}for(var v=this.__prevStartIndex;v<this.__prevEndIndex;++v){var y=n[v],_=y.shouldBePainted(i,a,!0,!0);if(y&&(!_||!y.__zr)&&y.__isRendered){var S=y.getPrevPaintRect();S&&p(S)}}var P;do{P=!1;for(var v=0;v<o.length;){if(o[v].isZero()){o.splice(v,1);continue}for(var I=v+1;I<o.length;)o[v].intersect(o[I])?(P=!0,o[v].union(o[I]),o.splice(I,1)):I++;v++}}while(P);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=r+"px",o.height=n+"px"),a.width=r*i,a.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var a=this.dom,o=this.ctx,s=a.width,c=a.height;n=n||this.clearColor;var f=this.motionBlur&&!r,p=this.lastFrameAlpha,v=this.dpr,y=this;f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/v,c/v));var _=this.domBack;function S(E,P,I,D){if(o.clearRect(E,P,I,D),n&&n!=="transparent"){var L=void 0;if(fb(n)){var B=n.global||n.__width===I&&n.__height===D;L=B&&n.__canvasGradient||qT(o,n,{x:0,y:0,width:I,height:D}),n.__canvasGradient=L,n.__width=I,n.__height=D}else Iae(n)&&(n.scaleX=n.scaleX||v,n.scaleY=n.scaleY||v,L=ZT(o,n,{dirty:function(){y.setUnpainted(),y.__painter.refresh()}}));o.save(),o.fillStyle=L||n,o.fillRect(E,P,I,D),o.restore()}f&&(o.save(),o.globalAlpha=p,o.drawImage(_,E,P,I,D),o.restore())}!i||f?S(0,0,s,c):i.length&&Te(i,function(E){S(E.x*v,E.y*v,E.width*v,E.height*v)})},t}(os);const jS=ume;var FO=1e5,Wc=314159,K_=.01,cme=.001;function hme(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function fme(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var dme=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=At({},n||{}),this.dpr=n.devicePixelRatio||u1,this._singleCanvas=a,this.root=t;var o=t.style;o&&(F6(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var c=this._layers;if(a){var p=t,v=p.width,y=p.height;n.width!=null&&(v=n.width),n.height!=null&&(y=n.height),this.dpr=n.devicePixelRatio||1,p.width=v*this.dpr,p.height=y*this.dpr,this._width=v,this._height=y;var _=new jS(p,this,this.dpr);_.__builtin__=!0,_.initContext(),c[Wc]=_,_.zlevel=Wc,s.push(Wc),this._domRoot=t}else{this._width=cd(t,0,n),this._height=cd(t,1,n);var f=this._domRoot=fme(this._width,this._height);t.appendChild(f)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var c=a===0?this._backgroundColor:null;s.refresh(c)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<r;o++){var s=t[o];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(FO)),a||(a=n.ctx,a.save()),lh(a,s,i,o===r-1))}a&&a.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(FO)},e.prototype.paintOne=function(t,r){mN(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,r,n),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(f){f.afterBrush&&f.afterBrush()});else{var c=this;gT(function(){c._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Wc).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var c=this._zlevelList[s],f=this._layers[c];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||n)&&a.push(f)}for(var p=!0,v=!1,y=function(E){var P=a[E],I=P.ctx,D=o&&P.createRepaintRects(t,r,_._width,_._height),L=n?P.__startIndex:P.__drawIndex,B=!n&&P.incremental&&Date.now,U=B&&Date.now(),V=P.zlevel===_._zlevelList[0]?_._backgroundColor:null;if(P.__startIndex===P.__endIndex)P.clear(!1,V,D);else if(L===P.__startIndex){var N=t[L];(!N.incremental||!N.notClear||n)&&P.clear(!1,V,D)}L===-1&&(console.error("For some unknown reason. drawIndex is -1"),L=P.__startIndex);var G,Y=function(ne){var we={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(G=L;G<P.__endIndex;G++){var fe=t[G];if(fe.__inHover&&(v=!0),i._doPaintEl(fe,P,o,ne,we,G===P.__endIndex-1),B){var me=Date.now()-U;if(me>15)break}}we.prevElClipPaths&&I.restore()};if(D)if(D.length===0)G=P.__endIndex;else for(var ee=_.dpr,J=0;J<D.length;++J){var X=D[J];I.save(),I.beginPath(),I.rect(X.x*ee,X.y*ee,X.width*ee,X.height*ee),I.clip(),Y(X),I.restore()}else I.save(),Y(),I.restore();P.__drawIndex=G,P.__drawIndex<P.__endIndex&&(p=!1)},_=this,S=0;S<a.length;S++)y(S);return pr.wxa&&Te(this._layers,function(E){E&&E.ctx&&E.ctx.draw&&E.ctx.draw()}),{finished:p,needsRefreshHover:v}},e.prototype._doPaintEl=function(t,r,n,i,a,o){var s=r.ctx;if(n){var c=t.getPaintRect();(!i||c&&c.intersect(i))&&(lh(s,t,a,o),t.setPrevPaintRect(c))}else lh(s,t,a,o)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Wc);var n=this._layers[t];return n||(n=new jS("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?Ur(n,this._layerConfig[t],!0):this._layerConfig[t-K_]&&Ur(n,this._layerConfig[t-K_],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,c=-1;if(!n[t]&&hme(r)){if(a>0&&t>i[0]){for(c=0;c<a-1&&!(i[c]<t&&i[c+1]>t);c++);s=n[i[c]]}if(i.splice(c+1,0,t),n[t]=r,!r.virtual)if(s){var f=s.dom;f.nextSibling?o.insertBefore(r.dom,f.nextSibling):o.appendChild(r.dom)}else o.firstChild?o.insertBefore(r.dom,o.firstChild):o.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i];t.call(r,this._layers[a],a)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i],o=this._layers[a];o.__builtin__&&t.call(r,o,a)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i],o=this._layers[a];o.__builtin__||t.call(r,o,a)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(v,y){v.__dirty=v.__used=!1});function r(v){a&&(a.__endIndex!==v&&(a.__dirty=!0),a.__endIndex=v)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,c;for(c=0;c<t.length;c++){var i=t[c],f=i.zlevel,p=void 0;s!==f&&(s=f,o=0),i.incremental?(p=this.getLayer(f+cme,this._needsManuallyCompositing),p.incremental=!0,o=1):p=this.getLayer(f+(o>0?K_:0),this._needsManuallyCompositing),p.__builtin__||GA("ZLevel "+f+" has been used by unkown layer "+p.id),p!==a&&(p.__used=!0,p.__startIndex!==c&&(p.__dirty=!0),p.__startIndex=c,p.incremental?p.__drawIndex=-1:p.__drawIndex=c,r(c),a=p),i.__dirty&ro&&!i.__inHover&&(p.__dirty=!0,p.incremental&&p.__drawIndex<0&&(p.__drawIndex=c))}r(c),this.eachBuiltinLayer(function(v,y){!v.__used&&v.getElementCount()>0&&(v.__dirty=!0,v.__startIndex=v.__endIndex=v.__drawIndex=0),v.__dirty&&v.__drawIndex<0&&(v.__drawIndex=v.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,Te(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?Ur(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===t||a===t+K_){var o=this._layers[a];Ur(o,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];i&&(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(Wr(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,a=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=cd(a,0,i),r=cd(a,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(Wc).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Wc].dom;var r=new jS("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,a=r.dom.height;this.eachLayer(function(v){v.__builtin__?n.drawImage(v.dom,0,0,i,a):v.renderToCanvas&&(n.save(),v.renderToCanvas(n),n.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),c=0,f=s.length;c<f;c++){var p=s[c];lh(n,p,o,c===f-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const pme=dme;function mme(e){e.registerPainter("canvas",pme)}var vme=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return NN(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new Rn,i=is("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,c=r.itemHeight*.8,f=is(s,(r.itemWidth-c)/2,(r.itemHeight-c)/2,c,c,r.itemStyle.fill);n.add(f),f.setStyle(r.itemStyle);var p=r.iconRotate==="inherit"?o:r.iconRotate||0;return f.rotation=p*Math.PI/180,f.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(f.style.stroke=f.style.fill,f.style.fill="#fff",f.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Mh);const gme=vme;function w8(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Ud(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var a=[],o=0;o<r.length;o++)a.push(Ud(e,t,r[o]));return a.join(" ")}}function yme(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!Ft(t))return t+"";for(var n=[],i=0;i<r.length;i++){var a=e.getDimensionIndex(r[i]);a>=0&&n.push(t[a])}return n.join(" ")}var iE=function(e){yt(t,e);function t(r,n,i,a){var o=e.call(this)||this;return o.updateData(r,n,i,a),o}return t.prototype._createSymbol=function(r,n,i,a,o){this.removeAll();var s=is(r,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=_me,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){eg(this.childAt(0))},t.prototype.downplay=function(){tg(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,a){this.silent=!1;var o=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,c=t.getSymbolSize(r,n),f=o!==this._symbolType,p=a&&a.disableAnimation;if(f){var v=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(o,r,n,c,v)}else{var y=this.childAt(0);y.silent=!1;var _={scaleX:c[0]/2,scaleY:c[1]/2};p?y.attr(_):Fs(y,_,s,n),_ue(y)}if(this._updateCommon(r,n,c,i,a),f){var y=this.childAt(0);if(!p){var _={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,ap(y,_,s,n)}}p&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,a,o){var s=this.childAt(0),c=r.hostModel,f,p,v,y,_,S,E,P,I;if(a&&(f=a.emphasisItemStyle,p=a.blurItemStyle,v=a.selectItemStyle,y=a.focus,_=a.blurScope,E=a.labelStatesModels,P=a.hoverScale,I=a.cursorStyle,S=a.emphasisDisabled),!a||r.hasItemOption){var D=a&&a.itemModel?a.itemModel:r.getItemModel(n),L=D.getModel("emphasis");f=L.getModel("itemStyle").getItemStyle(),v=D.getModel(["select","itemStyle"]).getItemStyle(),p=D.getModel(["blur","itemStyle"]).getItemStyle(),y=L.get("focus"),_=L.get("blurScope"),S=L.get("disabled"),E=Bg(D),P=L.getShallow("scale"),I=D.getShallow("cursor")}var B=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(B||0)*Math.PI/180||0);var U=Bb(r.getItemVisual(n,"symbolOffset"),i);U&&(s.x=U[0],s.y=U[1]),I&&s.attr("cursor",I);var V=r.getItemVisual(n,"style"),N=V.fill;if(s instanceof zl){var G=s.style;s.useStyle(At({image:G.image,x:G.x,y:G.y,width:G.width,height:G.height},V))}else s.__isEmptyBrush?s.useStyle(At({},V)):s.useStyle(V),s.style.decal=null,s.setColor(N,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var Y=r.getItemVisual(n,"liftZ"),ee=this._z2;Y!=null?ee==null&&(this._z2=s.z2,s.z2+=Y):ee!=null&&(s.z2=ee,this._z2=null);var J=o&&o.useNameLabel;Cb(s,E,{labelFetcher:c,labelDataIndex:n,defaultText:X,inheritColor:N,defaultOpacity:V.opacity});function X(fe){return J?r.getName(fe):w8(r,fe)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var ne=s.ensureState("emphasis");ne.style=f,s.ensureState("select").style=v,s.ensureState("blur").style=p;var we=P==null||P===!0?Math.max(1.1,3/this._sizeY):isFinite(P)&&P>0?+P:1;ne.scaleX=this._sizeX*we,ne.scaleY=this._sizeY*we,this.setSymbolScale(1),rg(this,y,_,S)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var a=this.childAt(0),o=an(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var c=a.getTextContent();c&&v1(c,{style:{opacity:0}},n,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();v1(a,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:o,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return VM(r.getItemVisual(n,"symbolSize"))},t}(Rn);function _me(e,t){this.parent.drift(e,t)}function GS(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function $O(e){return e!=null&&!or(e)&&(e={isIgnore:e}),e||{}}function NO(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:Bg(t),cursorStyle:t.get("cursor")}}var aE=function(){function e(t){this.group=new Rn,this._SymbolCtor=t||iE}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=$O(r);var n=this.group,i=t.hostModel,a=this._data,o=this._SymbolCtor,s=r.disableAnimation,c=NO(t),f={disableAnimation:s},p=r.getSymbolPoint||function(v){return t.getItemLayout(v)};a||n.removeAll(),t.diff(a).add(function(v){var y=p(v);if(GS(t,y,v,r)){var _=new o(t,v,c,f);_.setPosition(y),t.setItemGraphicEl(v,_),n.add(_)}}).update(function(v,y){var _=a.getItemGraphicEl(y),S=p(v);if(!GS(t,S,v,r)){n.remove(_);return}var E=t.getItemVisual(v,"symbol")||"circle",P=_&&_.getSymbolType&&_.getSymbolType();if(!_||P&&P!==E)n.remove(_),_=new o(t,v,c,f),_.setPosition(S);else{_.updateData(t,v,c,f);var I={x:S[0],y:S[1]};s?_.attr(I):Fs(_,I,i)}n.add(_),t.setItemGraphicEl(v,_)}).remove(function(v){var y=a.getItemGraphicEl(v);y&&y.fadeOut(function(){n.remove(y)},i)}).execute(),this._getSymbolPoint=p,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var a=t._getSymbolPoint(i);n.setPosition(a),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=NO(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=$O(n);function i(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var o=r.getItemLayout(a);if(GS(r,o,a,n)){var s=new this._SymbolCtor(r,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),r.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){Sb(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();function S8(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),a=bme(i,r),o=n.dim,s=i.dim,c=t.mapDimension(s),f=t.mapDimension(o),p=s==="x"||s==="radius"?1:0,v=Qt(e.dimensions,function(S){return t.mapDimension(S)}),y=!1,_=t.getCalculationInfo("stackResultDimension");return jd(t,v[0])&&(y=!0,v[0]=_),jd(t,v[1])&&(y=!0,v[1]=_),{dataDimsForPoint:v,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!y,valueDim:c,baseDim:f,baseDataOffset:p,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function bme(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:Tn(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function T8(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var a=e.baseDataOffset,o=[];return o[a]=r.get(e.baseDim,n),o[1-a]=i,t.dataToPoint(o)}function xme(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function wme(e,t,r,n,i,a,o,s){for(var c=xme(e,t),f=[],p=[],v=[],y=[],_=[],S=[],E=[],P=S8(i,t,o),I=e.getLayout("points")||[],D=t.getLayout("points")||[],L=0;L<c.length;L++){var B=c[L],U=!0,V=void 0,N=void 0;switch(B.cmd){case"=":V=B.idx*2,N=B.idx1*2;var G=I[V],Y=I[V+1],ee=D[N],J=D[N+1];(isNaN(G)||isNaN(Y))&&(G=ee,Y=J),f.push(G,Y),p.push(ee,J),v.push(r[V],r[V+1]),y.push(n[N],n[N+1]),E.push(t.getRawIndex(B.idx1));break;case"+":var X=B.idx,ne=P.dataDimsForPoint,we=i.dataToPoint([t.get(ne[0],X),t.get(ne[1],X)]);N=X*2,f.push(we[0],we[1]),p.push(D[N],D[N+1]);var fe=T8(P,i,t,X);v.push(fe[0],fe[1]),y.push(n[N],n[N+1]),E.push(t.getRawIndex(X));break;case"-":U=!1}U&&(_.push(B),S.push(S.length))}S.sort(function(wr,Xt){return E[wr]-E[Xt]});for(var me=f.length,Ve=hd(me),Oe=hd(me),ct=hd(me),_t=hd(me),zt=[],L=0;L<S.length;L++){var Mt=S[L],ar=L*2,rr=Mt*2;Ve[ar]=f[rr],Ve[ar+1]=f[rr+1],Oe[ar]=p[rr],Oe[ar+1]=p[rr+1],ct[ar]=v[rr],ct[ar+1]=v[rr+1],_t[ar]=y[rr],_t[ar+1]=y[rr+1],zt[L]=_[Mt]}return{current:Ve,next:Oe,stackedOnCurrent:ct,stackedOnNext:_t,status:zt}}var pu=Math.min,mu=Math.max;function _h(e,t){return isNaN(e)||isNaN(t)}function oC(e,t,r,n,i,a,o,s,c){for(var f,p,v,y,_,S,E=r,P=0;P<n;P++){var I=t[E*2],D=t[E*2+1];if(E>=i||E<0)break;if(_h(I,D)){if(c){E+=a;continue}break}if(E===r)e[a>0?"moveTo":"lineTo"](I,D),v=I,y=D;else{var L=I-f,B=D-p;if(L*L+B*B<.5){E+=a;continue}if(o>0){for(var U=E+a,V=t[U*2],N=t[U*2+1];V===I&&N===D&&P<n;)P++,U+=a,E+=a,V=t[U*2],N=t[U*2+1],I=t[E*2],D=t[E*2+1],L=I-f,B=D-p;var G=P+1;if(c)for(;_h(V,N)&&G<n;)G++,U+=a,V=t[U*2],N=t[U*2+1];var Y=.5,ee=0,J=0,X=void 0,ne=void 0;if(G>=n||_h(V,N))_=I,S=D;else{ee=V-f,J=N-p;var we=I-f,fe=V-I,me=D-p,Ve=N-D,Oe=void 0,ct=void 0;if(s==="x"){Oe=Math.abs(we),ct=Math.abs(fe);var _t=ee>0?1:-1;_=I-_t*Oe*o,S=D,X=I+_t*ct*o,ne=D}else if(s==="y"){Oe=Math.abs(me),ct=Math.abs(Ve);var zt=J>0?1:-1;_=I,S=D-zt*Oe*o,X=I,ne=D+zt*ct*o}else Oe=Math.sqrt(we*we+me*me),ct=Math.sqrt(fe*fe+Ve*Ve),Y=ct/(ct+Oe),_=I-ee*o*(1-Y),S=D-J*o*(1-Y),X=I+ee*o*Y,ne=D+J*o*Y,X=pu(X,mu(V,I)),ne=pu(ne,mu(N,D)),X=mu(X,pu(V,I)),ne=mu(ne,pu(N,D)),ee=X-I,J=ne-D,_=I-ee*Oe/ct,S=D-J*Oe/ct,_=pu(_,mu(f,I)),S=pu(S,mu(p,D)),_=mu(_,pu(f,I)),S=mu(S,pu(p,D)),ee=I-_,J=D-S,X=I+ee*ct/Oe,ne=D+J*ct/Oe}e.bezierCurveTo(v,y,_,S,I,D),v=X,y=ne}else e.lineTo(I,D)}f=I,p=D,E+=a}return P}var C8=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),Sme=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new C8},t.prototype.buildPath=function(r,n){var i=n.points,a=0,o=i.length/2;if(n.connectNulls){for(;o>0&&_h(i[o*2-2],i[o*2-1]);o--);for(;a<o&&_h(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=oC(r,i,a,o,o,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=Vu.CMD,s,c,f=n==="x",p=[],v=0;v<a.length;){var y=a[v++],_=void 0,S=void 0,E=void 0,P=void 0,I=void 0,D=void 0,L=void 0;switch(y){case o.M:s=a[v++],c=a[v++];break;case o.L:if(_=a[v++],S=a[v++],L=f?(r-s)/(_-s):(r-c)/(S-c),L<=1&&L>=0){var B=f?(S-c)*L+c:(_-s)*L+s;return f?[r,B]:[B,r]}s=_,c=S;break;case o.C:_=a[v++],S=a[v++],E=a[v++],P=a[v++],I=a[v++],D=a[v++];var U=f?i1(s,_,E,I,r,p):i1(c,S,P,D,r,p);if(U>0)for(var V=0;V<U;V++){var N=p[V];if(N<=1&&N>=0){var B=f?di(c,S,P,D,N):di(s,_,E,I,N);return f?[r,B]:[B,r]}}s=I,c=D;break}}},t}(Qr),Tme=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(C8),Cme=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new Tme},t.prototype.buildPath=function(r,n){var i=n.points,a=n.stackedOnPoints,o=0,s=i.length/2,c=n.smoothMonotone;if(n.connectNulls){for(;s>0&&_h(i[s*2-2],i[s*2-1]);s--);for(;o<s&&_h(i[o*2],i[o*2+1]);o++);}for(;o<s;){var f=oC(r,i,o,s,s,1,n.smooth,c,n.connectNulls);oC(r,a,o+f-1,f,s,-1,n.stackedOnSmooth,c,n.connectNulls),o+=f+1,r.closePath()}},t}(Qr);function A8(e,t,r,n,i){var a=e.getArea(),o=a.x,s=a.y,c=a.width,f=a.height,p=r.get(["lineStyle","width"])||2;o-=p/2,s-=p/2,c+=p,f+=p,o=Math.floor(o),c=Math.round(c);var v=new oi({shape:{x:o,y:s,width:c,height:f}});if(t){var y=e.getBaseAxis(),_=y.isHorizontal(),S=y.inverse;_?(S&&(v.shape.x+=c),v.shape.width=0):(S||(v.shape.y+=f),v.shape.height=0);var E=ir(i)?function(P){i(P,v)}:null;ap(v,{shape:{width:c,height:f,x:o,y:s}},r,null,n,E)}return v}function M8(e,t,r){var n=e.getArea(),i=ai(n.r0,1),a=ai(n.r,1),o=new mM({shape:{cx:ai(e.cx,1),cy:ai(e.cy,1),r0:i,r:a,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?o.shape.endAngle=n.startAngle:o.shape.r=i,ap(o,{shape:{endAngle:n.endAngle,r:a}},r)}return o}function Ame(e,t,r,n,i){if(e){if(e.type==="polar")return M8(e,t,r);if(e.type==="cartesian2d")return A8(e,t,r,n,i)}else return null;return null}function Mme(e,t){return e.type===t}function VO(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function HO(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,a=0;a<e.length;){var o=e[a++],s=e[a++];isNaN(o)||(t=Math.min(o,t),n=Math.max(o,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function UO(e,t){var r=HO(e),n=r[0],i=r[1],a=HO(t),o=a[0],s=a[1];return Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function jO(e){return Tn(e)?e:e?.5:0}function Eme(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=hd(n*2),a=0;a<n;a++){var o=T8(r,e,t,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function vu(e,t,r,n){var i=t.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],s=0,c=[],f=[],p=[],v=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&v.push(e[s],e[s+1]);e=v}for(s=0;s<e.length-2;s+=2)switch(p[0]=e[s+2],p[1]=e[s+3],f[0]=e[s],f[1]=e[s+1],o.push(f[0],f[1]),r){case"end":c[a]=p[a],c[1-a]=f[1-a],o.push(c[0],c[1]);break;case"middle":var y=(f[a]+p[a])/2,_=[];c[a]=_[a]=y,c[1-a]=f[1-a],_[1-a]=p[1-a],o.push(c[0],c[1]),o.push(_[0],_[1]);break;default:c[a]=f[a],c[1-a]=p[1-a],o.push(c[0],c[1])}return o.push(e[s++],e[s++]),o}function Pme(e,t){var r=[],n=e.length,i,a;function o(p,v,y){var _=p.coord,S=(y-_)/(v.coord-_),E=_oe(S,[p.color,v.color]);return{coord:y,color:E}}for(var s=0;s<n;s++){var c=e[s],f=c.coord;if(f<0)i=c;else if(f>t){a?r.push(o(a,c,t)):i&&r.push(o(i,c,0),o(i,c,t));break}else i&&(r.push(o(i,c,0)),i=null),r.push(c),a=c}return r}function Ime(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,a,o=n.length-1;o>=0;o--){var s=e.getDimensionInfo(n[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=n[o];break}}if(a){var c=t.getAxis(i),f=Qt(a.stops,function(L){return{coord:c.toGlobalCoord(c.dataToCoord(L.value)),color:L.color}}),p=f.length,v=a.outerColors.slice();p&&f[0].coord>f[p-1].coord&&(f.reverse(),v.reverse());var y=Pme(f,i==="x"?r.getWidth():r.getHeight()),_=y.length;if(!_&&p)return f[0].coord<0?v[1]?v[1]:f[p-1].color:v[0]?v[0]:f[0].color;var S=10,E=y[0].coord-S,P=y[_-1].coord+S,I=P-E;if(I<.001)return"transparent";Te(y,function(L){L.offset=(L.coord-E)/I}),y.push({offset:_?y[_-1].offset:.5,color:v[1]||"transparent"}),y.unshift({offset:_?y[0].offset:.5,color:v[0]||"transparent"});var D=new u$(0,0,0,0,y,!0);return D[i]=E,D[i+"2"]=P,D}}}function Dme(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var a=r.getAxesByScale("ordinal")[0];if(a&&!(i&&Lme(a,t))){var o=t.mapDimension(a.dim),s={};return Te(a.getViewLabels(),function(c){var f=a.scale.getRawOrdinalNumber(c.tickValue);s[f]=1}),function(c){return!s.hasOwnProperty(t.get(o,c))}}}}function Lme(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(iE.getSymbolSize(t,o)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function kme(e,t){return isNaN(e)||isNaN(t)}function Rme(e){for(var t=e.length/2;t>0&&kme(e[t*2-2],e[t*2-1]);t--);return t-1}function GO(e,t){return[e[t*2],e[t*2+1]]}function Ome(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,a,o,s=0,c=-1,f=0;f<n;f++)if(o=e[f*2+i],!(isNaN(o)||isNaN(e[f*2+1-i]))){if(f===0){a=o;continue}if(a<=t&&o>=t||a>=t&&o<=t){c=f;break}s=f,a=o}return{range:[s,c],t:(t-a)/(o-a)}}function E8(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<ko.length;t++)if(e.get([ko[t],"endLabel","show"]))return!0;return!1}function WS(e,t,r,n){if(Mme(t,"cartesian2d")){var i=n.getModel("endLabel"),a=i.get("valueAnimation"),o=n.getData(),s={lastFrameIndex:0},c=E8(n)?function(_,S){e._endLabelOnDuring(_,S,o,s,a,i,t)}:null,f=t.getBaseAxis().isHorizontal(),p=A8(t,r,n,function(){var _=e._endLabel;_&&r&&s.originalX!=null&&_.attr({x:s.originalX,y:s.originalY})},c);if(!n.get("clip",!0)){var v=p.shape,y=Math.max(v.width,v.height);f?(v.y-=y,v.height+=y*2):(v.x-=y,v.width+=y*2)}return c&&c(1,p),p}else return M8(t,r,n)}function zme(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,a=n?i?"right":"left":"center",o=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||o}}}var Bme=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Rn,n=new aE;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var a=this,o=r.coordinateSystem,s=this.group,c=r.getData(),f=r.getModel("lineStyle"),p=r.getModel("areaStyle"),v=c.getLayout("points")||[],y=o.type==="polar",_=this._coordSys,S=this._symbolDraw,E=this._polyline,P=this._polygon,I=this._lineGroup,D=!n.ssr&&r.isAnimationEnabled(),L=!p.isEmpty(),B=p.get("origin"),U=S8(o,c,B),V=L&&Eme(o,c,U),N=r.get("showSymbol"),G=r.get("connectNulls"),Y=N&&!y&&Dme(r,c,o),ee=this._data;ee&&ee.eachItemGraphicEl(function(Xt,Ue){Xt.__temp&&(s.remove(Xt),ee.setItemGraphicEl(Ue,null))}),N||S.remove(),s.add(I);var J=y?!1:r.get("step"),X;o&&o.getArea&&r.get("clip",!0)&&(X=o.getArea(),X.width!=null?(X.x-=.1,X.y-=.1,X.width+=.2,X.height+=.2):X.r0&&(X.r0-=.5,X.r+=.5)),this._clipShapeForSymbol=X;var ne=Ime(c,o,i)||c.getVisual("style")[c.getVisual("drawType")];if(!(E&&_.type===o.type&&J===this._step))N&&S.updateData(c,{isIgnore:Y,clipShape:X,disableAnimation:!0,getSymbolPoint:function(Xt){return[v[Xt*2],v[Xt*2+1]]}}),D&&this._initSymbolLabelAnimation(c,o,X),J&&(v=vu(v,o,J,G),V&&(V=vu(V,o,J,G))),E=this._newPolyline(v),L?P=this._newPolygon(v,V):P&&(I.remove(P),P=this._polygon=null),y||this._initOrUpdateEndLabel(r,o,Ah(ne)),I.setClipPath(WS(this,o,!0,r));else{L&&!P?P=this._newPolygon(v,V):P&&!L&&(I.remove(P),P=this._polygon=null),y||this._initOrUpdateEndLabel(r,o,Ah(ne));var we=I.getClipPath();if(we){var fe=WS(this,o,!1,r);ap(we,{shape:fe.shape},r)}else I.setClipPath(WS(this,o,!0,r));N&&S.updateData(c,{isIgnore:Y,clipShape:X,disableAnimation:!0,getSymbolPoint:function(Xt){return[v[Xt*2],v[Xt*2+1]]}}),(!VO(this._stackedOnPoints,V)||!VO(this._points,v))&&(D?this._doUpdateAnimation(c,V,o,i,J,B,G):(J&&(v=vu(v,o,J,G),V&&(V=vu(V,o,J,G))),E.setShape({points:v}),P&&P.setShape({points:v,stackedOnPoints:V})))}var me=r.getModel("emphasis"),Ve=me.get("focus"),Oe=me.get("blurScope"),ct=me.get("disabled");if(E.useStyle(rn(f.getLineStyle(),{fill:"none",stroke:ne,lineJoin:"bevel"})),jk(E,r,"lineStyle"),E.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var _t=E.getState("emphasis").style;_t.lineWidth=+E.style.lineWidth+1}an(E).seriesIndex=r.seriesIndex,rg(E,Ve,Oe,ct);var zt=jO(r.get("smooth")),Mt=r.get("smoothMonotone");if(E.setShape({smooth:zt,smoothMonotone:Mt,connectNulls:G}),P){var ar=c.getCalculationInfo("stackedOnSeries"),rr=0;P.useStyle(rn(p.getAreaStyle(),{fill:ne,opacity:.7,lineJoin:"bevel",decal:c.getVisual("style").decal})),ar&&(rr=jO(ar.get("smooth"))),P.setShape({smooth:zt,stackedOnSmooth:rr,smoothMonotone:Mt,connectNulls:G}),jk(P,r,"areaStyle"),an(P).seriesIndex=r.seriesIndex,rg(P,Ve,Oe,ct)}var wr=function(Xt){a._changePolyState(Xt)};c.eachItemGraphicEl(function(Xt){Xt&&(Xt.onHoverStateChange=wr)}),this._polyline.onHoverStateChange=wr,this._data=c,this._coordSys=o,this._stackedOnPoints=V,this._points=v,this._step=J,this._valueOrigin=B,r.get("triggerLineEvent")&&(this.packEventData(r,E),P&&this.packEventData(r,P))},t.prototype.packEventData=function(r,n){an(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,a){var o=r.getData(),s=Ch(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var c=o.getLayout("points"),f=o.getItemGraphicEl(s);if(!f){var p=c[s*2],v=c[s*2+1];if(isNaN(p)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(p,v))return;var y=r.get("zlevel")||0,_=r.get("z")||0;f=new iE(o,s),f.x=p,f.y=v,f.setZ(y,_);var S=f.getSymbolPath().getTextContent();S&&(S.zlevel=y,S.z=_,S.z2=this._polyline.z2+1),f.__temp=!0,o.setItemGraphicEl(s,f),f.stopSymbolAnimation(!0),this.group.add(f)}f.highlight()}else Rs.prototype.highlight.call(this,r,n,i,a)},t.prototype.downplay=function(r,n,i,a){var o=r.getData(),s=Ch(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var c=o.getItemGraphicEl(s);c&&(c.__temp?(o.setItemGraphicEl(s,null),this.group.remove(c)):c.downplay())}else Rs.prototype.downplay.call(this,r,n,i,a)},t.prototype._changePolyState=function(r){var n=this._polygon;$k(this._polyline,r),n&&$k(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Sme({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Cme({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var a,o,s=n.getBaseAxis(),c=s.inverse;n.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):n.type==="polar"&&(a=s.dim==="angle",o=!0);var f=r.hostModel,p=f.get("animationDuration");ir(p)&&(p=p(null));var v=f.get("animationDelay")||0,y=ir(v)?v(null):v;r.eachItemGraphicEl(function(_,S){var E=_;if(E){var P=[_.x,_.y],I=void 0,D=void 0,L=void 0;if(i)if(o){var B=i,U=n.pointToCoord(P);a?(I=B.startAngle,D=B.endAngle,L=-U[1]/180*Math.PI):(I=B.r0,D=B.r,L=U[0])}else{var V=i;a?(I=V.x,D=V.x+V.width,L=_.x):(I=V.y+V.height,D=V.y,L=_.y)}var N=D===I?0:(L-I)/(D-I);c&&(N=1-N);var G=ir(v)?v(S):p*N+y,Y=E.getSymbolPath(),ee=Y.getTextContent();E.attr({scaleX:0,scaleY:0}),E.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:G}),ee&&ee.animateFrom({style:{opacity:0}},{duration:300,delay:G}),Y.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var a=r.getModel("endLabel");if(E8(r)){var o=r.getData(),s=this._polyline,c=o.getLayout("points");if(!c){s.removeTextContent(),this._endLabel=null;return}var f=this._endLabel;f||(f=this._endLabel=new ca({z2:200}),f.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var p=Rme(c);p>=0&&(Cb(s,Bg(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:p,defaultText:function(v,y,_){return _!=null?yme(o,_):w8(o,v)},enableTextSetter:!0},zme(a,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,a,o,s,c){var f=this._endLabel,p=this._polyline;if(f){r<1&&a.originalX==null&&(a.originalX=f.x,a.originalY=f.y);var v=i.getLayout("points"),y=i.hostModel,_=y.get("connectNulls"),S=s.get("precision"),E=s.get("distance")||0,P=c.getBaseAxis(),I=P.isHorizontal(),D=P.inverse,L=n.shape,B=D?I?L.x:L.y+L.height:I?L.x+L.width:L.y,U=(I?E:0)*(D?-1:1),V=(I?0:-E)*(D?-1:1),N=I?"x":"y",G=Ome(v,B,N),Y=G.range,ee=Y[1]-Y[0],J=void 0;if(ee>=1){if(ee>1&&!_){var X=GO(v,Y[0]);f.attr({x:X[0]+U,y:X[1]+V}),o&&(J=y.getRawValue(Y[0]))}else{var X=p.getPointOn(B,N);X&&f.attr({x:X[0]+U,y:X[1]+V});var ne=y.getRawValue(Y[0]),we=y.getRawValue(Y[1]);o&&(J=bse(i,S,ne,we,G.t))}a.lastFrameIndex=Y[0]}else{var fe=r===1||a.lastFrameIndex>0?Y[0]:0,X=GO(v,fe);o&&(J=y.getRawValue(fe)),f.attr({x:X[0]+U,y:X[1]+V})}if(o){var me=g$(f);typeof me.setLabelText=="function"&&me.setLabelText(J)}}},t.prototype._doUpdateAnimation=function(r,n,i,a,o,s,c){var f=this._polyline,p=this._polygon,v=r.hostModel,y=wme(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),_=y.current,S=y.stackedOnCurrent,E=y.next,P=y.stackedOnNext;if(o&&(_=vu(y.current,i,o,c),S=vu(y.stackedOnCurrent,i,o,c),E=vu(y.next,i,o,c),P=vu(y.stackedOnNext,i,o,c)),UO(_,E)>3e3||p&&UO(S,P)>3e3){f.stopAnimation(),f.setShape({points:E}),p&&(p.stopAnimation(),p.setShape({points:E,stackedOnPoints:P}));return}f.shape.__points=y.current,f.shape.points=_;var I={shape:{points:E}};y.current!==_&&(I.shape.__points=y.next),f.stopAnimation(),Fs(f,I,v),p&&(p.setShape({points:_,stackedOnPoints:S}),p.stopAnimation(),Fs(p,{shape:{stackedOnPoints:P}},v),f.shape.points!==p.shape.points&&(p.shape.points=f.shape.points));for(var D=[],L=y.status,B=0;B<L.length;B++){var U=L[B].cmd;if(U==="="){var V=r.getItemGraphicEl(L[B].idx1);V&&D.push({el:V,ptIdx:B})}}f.animators&&f.animators.length&&f.animators[0].during(function(){p&&p.dirtyShape();for(var N=f.shape.__points,G=0;G<D.length;G++){var Y=D[G].el,ee=D[G].ptIdx*2;Y.x=N[ee],Y.y=N[ee+1],Y.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(n.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Rs);const Fme=Bme;function oE(e,t){return{seriesType:e,plan:FM(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,a=r.pipelineContext,o=t||a.large;if(i){var s=Qt(i.dimensions,function(_){return n.mapDimension(_)}).slice(0,2),c=s.length,f=n.getCalculationInfo("stackResultDimension");jd(n,s[0])&&(s[0]=f),jd(n,s[1])&&(s[1]=f);var p=n.getStore(),v=n.getDimensionIndex(s[0]),y=n.getDimensionIndex(s[1]);return c&&{progress:function(_,S){for(var E=_.end-_.start,P=o&&hd(E*c),I=[],D=[],L=_.start,B=0;L<_.end;L++){var U=void 0;if(c===1){var V=p.get(v,L);U=i.dataToPoint(V,null,D)}else I[0]=p.get(v,L),I[1]=p.get(y,L),U=i.dataToPoint(I,null,D);o?(P[B++]=U[0],P[B++]=U[1]):S.setItemLayout(L,U.slice())}o&&S.setLayout("points",P)}}}}}}var $me={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Nme=function(e){return Math.round(e.length/2)};function Vme(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),a=t.get("sampling"),o=t.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var c=o.getBaseAxis(),f=o.getOtherAxis(c),p=c.getExtent(),v=n.getDevicePixelRatio(),y=Math.abs(p[1]-p[0])*(v||1),_=Math.round(s/y);if(isFinite(_)&&_>1){a==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(f.dim),1/_));var S=void 0;Wt(a)?S=$me[a]:ir(a)&&(S=a),S&&t.setData(i.downSample(i.mapDimension(f.dim),1/_,S,Nme))}}}}}function Hme(e){e.registerChartView(Fme),e.registerSeriesModel(gme),e.registerLayout(oE("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Vme("line"))}var Ume=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return NN(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Mh);const jme=Ume;var P8=4,Gme=function(){function e(){}return e}(),Wme=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new Gme},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,a=n.size,o=this.symbolProxy,s=o.shape,c=r.getContext?r.getContext():r,f=c&&a[0]<P8,p=this.softClipShape,v;if(f){this._ctx=c;return}for(this._ctx=null,v=this._off;v<i.length;){var y=i[v++],_=i[v++];isNaN(y)||isNaN(_)||p&&!p.contain(y,_)||(s.x=y-a[0]/2,s.y=_-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(r,s,!0))}this.incremental&&(this._off=v,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<n.length;){var c=n[s++],f=n[s++];isNaN(c)||isNaN(f)||o&&!o.contain(c,f)||a.fillRect(c-i[0]/2,f-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),c=Math.max(o[1],4),f=a.length/2-1;f>=0;f--){var p=f*2,v=a[p]-s/2,y=a[p+1]-c/2;if(r>=v&&n>=y&&r<=v+s&&n<=y+c)return f}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var o=this.hoverDataIdx=this.findDataIndex(r,n);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,a=n.size,o=a[0],s=a[1],c=1/0,f=1/0,p=-1/0,v=-1/0,y=0;y<i.length;){var _=i[y++],S=i[y++];c=Math.min(_,c),p=Math.max(_,p),f=Math.min(S,f),v=Math.max(S,v)}r=this._rect=new qr(c-o/2,f-s/2,p-c+o,v-f+s)}return r},t}(Qr),qme=function(){function e(){this.group=new Rn}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,a=n.startIndex*4*2;r=new Float32Array(r.buffer,a,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],a=r.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,c=new Float32Array(s+a.length);c.set(o),c.set(a,s),i.endIndex=t.end,i.setShape({points:c})}else{this._newAdded=[];var f=this._create();f.startIndex=t.start,f.endIndex=t.end,f.incremental=!0,f.setShape({points:a}),this._setCommon(f,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Wme({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var a=r.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=n.clipShape||null,t.symbolProxy=is(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<P8;t.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),c=s&&s.fill;c&&t.setColor(c);var f=an(t);f.seriesIndex=i.seriesIndex,t.on("mousemove",function(p){f.dataIndex=null;var v=t.hoverDataIdx;v>=0&&(f.dataIndex=v+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Zme=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.updateData(a,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var a=r.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=oE("").reset(r,n,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,a=n.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new qme:new aE,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Rs);const Xme=Zme;var Yme=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(xn);const Kme=Yme;var sC=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",$a).models[0]},t.type="cartesian2dAxis",t}(xn);as(sC,epe);var I8={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Jme=Ur({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},I8),sE=Ur({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},I8),Qme=Ur({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},sE),eve=rn({logBase:10},sE);const tve={category:Jme,value:sE,time:Qme,log:eve};var rve={value:1,category:1,time:1,log:1};function WO(e,t,r,n){Te(rve,function(i,a){var o=Ur(Ur({},tve[a],!0),n,!0),s=function(c){yt(f,c);function f(){var p=c!==null&&c.apply(this,arguments)||this;return p.type=t+"Axis."+a,p}return f.prototype.mergeDefaultAndTheme=function(p,v){var y=sg(this),_=y?Fg(p):{},S=v.getTheme();Ur(p,S.get(a+"Axis")),Ur(p,this.getDefaultOption()),p.type=qO(p),y&&Hd(p,_,y)},f.prototype.optionUpdated=function(){var p=this.option;p.type==="category"&&(this.__ordinalMeta=QT.createByAxisModel(this))},f.prototype.getCategories=function(p){var v=this.option;if(v.type==="category")return p?v.data:this.__ordinalMeta.categories},f.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},f.type=t+"Axis."+a,f.defaultOption=o,f}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",qO)}function qO(e){return e.type||(e.data?"category":"value")}var nve=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Qt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Fi(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const ive=nve;var lC=["x","y"];function ZO(e){return e.type==="interval"||e.type==="time"}var ave=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=lC,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!ZO(r)||!ZO(n))){var i=r.getExtent(),a=n.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),c=i[1]-i[0],f=a[1]-a[0];if(!(!c||!f)){var p=(s[0]-o[0])/c,v=(s[1]-o[1])/f,y=o[0]-i[0]*p,_=o[1]-a[0]*v,S=this._transform=[p,0,0,v,y,_];this._invTransform=KA([],S)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),a=this.dataToPoint(n),o=this.getArea(),s=new qr(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var a=r[0],o=r[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Po(i,r,this._transform);var s=this.getAxis("x"),c=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,n)),i[1]=c.toGlobalCoord(c.dataToCoord(o,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),c=i.parse(r[0]),f=a.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(o[0],o[1]),c),Math.max(o[0],o[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),f),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return Po(i,r,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(r[0]),n),i[1]=o.coordToData(o.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),a=Math.min(n[0],n[1]),o=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-a;return new qr(i,a,o,s)},t}(ive),ove=function(e){yt(t,e);function t(r,n,i,a,o){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(fpe);const sve=ove;function uC(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,c=o?"onZero":s,f=i.dim,p=n.getRect(),v=[p.x,p.x+p.width,p.y,p.y+p.height],y={left:0,right:1,top:0,bottom:1,onZero:2},_=t.get("offset")||0,S=f==="x"?[v[2]-_,v[3]+_]:[v[0]-_,v[1]+_];if(o){var E=o.toGlobalCoord(o.dataToCoord(0));S[y.onZero]=Math.max(Math.min(E,S[1]),S[0])}a.position=[f==="y"?S[y[c]]:v[0],f==="x"?S[y[c]]:v[3]],a.rotation=Math.PI/2*(f==="x"?0:1);var P={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=P[s],a.labelOffset=o?S[y[s]]-S[y.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Fd(r.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var I=t.get(["axisLabel","rotate"]);return a.labelRotate=c==="top"?-I:I,a.z2=1,a}function XO(e){return e.get("coordinateSystem")==="cartesian2d"}function YO(e){var t={xAxisModel:null,yAxisModel:null};return Te(t,function(r,n){var i=n.replace(/Model$/,""),a=e.getReferringComponents(i,$a).models[0];t[n]=a}),t}var qS=Math.log;function lve(e,t,r){var n=$g.prototype,i=n.getTicks.call(r),a=n.getTicks.call(r,!0),o=i.length-1,s=n.getInterval.call(r),c=KN(e,t),f=c.extent,p=c.fixMin,v=c.fixMax;if(e.type==="log"){var y=qS(e.base);f=[qS(f[0])/y,qS(f[1])/y]}e.setExtent(f[0],f[1]),e.calcNiceExtent({splitNumber:o,fixMin:p,fixMax:v});var _=n.getExtent.call(e);p&&(f[0]=_[0]),v&&(f[1]=_[1]);var S=n.getInterval.call(e),E=f[0],P=f[1];if(p&&v)S=(P-E)/o;else if(p)for(P=f[0]+S*o;P<f[1]&&isFinite(P)&&isFinite(f[1]);)S=FS(S),P=f[0]+S*o;else if(v)for(E=f[1]-S*o;E>f[0]&&isFinite(E)&&isFinite(f[0]);)S=FS(S),E=f[1]-S*o;else{var I=e.getTicks().length-1;I>o&&(S=FS(S));var D=S*o;P=Math.ceil(f[1]/S)*S,E=ai(P-D),E<0&&f[0]>=0?(E=0,P=ai(D)):P>0&&f[1]<=0&&(P=0,E=-ai(D))}var L=(i[0].value-a[0].value)/s,B=(i[o].value-a[o].value)/s;n.setExtent.call(e,E+S*L,P+S*B),n.setInterval.call(e,S),(L||B)&&n.setNiceExtent.call(e,E+S,P-S)}var uve=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=lC,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(o){var s,c=Vr(o),f=c.length;if(f){for(var p=[],v=f-1;v>=0;v--){var y=+c[v],_=o[y],S=_.model,E=_.scale;eC(E)&&S.get("alignTicks")&&S.get("interval")==null?p.push(_):(bO(E,S),eC(E)&&(s=_))}p.length&&(s||(s=p.pop(),bO(s.scale,s.model)),Te(p,function(P){lve(P.scale,P.model,s.scale)}))}}i(n.x),i(n.y);var a={};Te(n.x,function(o){KO(n,"y",o,a)}),Te(n.y,function(o){KO(n,"x",o,a)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),a=!n&&t.get("containLabel"),o=Vd(i,{width:r.getWidth(),height:r.getHeight()});this._rect=o;var s=this._axesList;c(),a&&(Te(s,function(f){if(!f.model.get(["axisLabel","inside"])){var p=Kde(f);if(p){var v=f.isHorizontal()?"height":"width",y=f.model.get(["axisLabel","margin"]);o[v]-=p[v]+y,f.position==="top"?o.y+=p.height+y:f.position==="left"&&(o.x+=p.width+y)}}}),c()),Te(this._coordsList,function(f){f.calcAffineTransform()});function c(){Te(s,function(f){var p=f.isHorizontal(),v=p?[0,o.width]:[0,o.height],y=f.inverse?1:0;f.setExtent(v[y],v[1-y]),cve(f,p?o.x:o.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}or(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===r)return a[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",$a).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",$a).models[0],a=t.gridModel,o=this._coordsList,s,c;if(r)s=r.coordinateSystem,Wr(o,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)c=this.getAxis("x",n.componentIndex);else if(i)c=this.getAxis("y",i.componentIndex);else if(a){var f=a.coordinateSystem;f===this&&(s=this._coordsList[0])}return{cartesian:s,axis:c}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},c={x:0,y:0};if(r.eachComponent("xAxis",f("x"),this),r.eachComponent("yAxis",f("y"),this),!c.x||!c.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,Te(s.x,function(p,v){Te(s.y,function(y,_){var S="x"+v+"y"+_,E=new ave(S);E.master=i,E.model=t,i._coordsMap[S]=E,i._coordsList.push(E),E.addAxis(p),E.addAxis(y)})});function f(p){return function(v,y){if(ZS(v,t)){var _=v.get("position");p==="x"?_!=="top"&&_!=="bottom"&&(_=o.bottom?"top":"bottom"):_!=="left"&&_!=="right"&&(_=o.left?"right":"left"),o[_]=!0;var S=new sve(p,Xde(v),[0,0],v.get("type"),_),E=S.type==="category";S.onBand=E&&v.get("boundaryGap"),S.inverse=v.get("inverse"),v.axis=S,S.model=v,S.grid=a,S.index=y,a._axesList.push(S),s[p][y]=S,c[p]++}}}},e.prototype._updateScale=function(t,r){Te(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),t.eachSeries(function(i){if(XO(i)){var a=YO(i),o=a.xAxisModel,s=a.yAxisModel;if(!ZS(o,r)||!ZS(s,r))return;var c=this.getCartesian(o.componentIndex,s.componentIndex),f=i.getData(),p=c.getAxis("x"),v=c.getAxis("y");n(f,p),n(f,v)}},this);function n(i,a){Te(QN(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return Te(this.getCartesians(),function(i){var a=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),o=i.getOtherAxis(a);Wr(r,a)<0&&r.push(a),Wr(n,o)<0&&n.push(o)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,a){var o=new e(i,t,r);o.name="grid_"+a,o.resize(i,r,!0),i.coordinateSystem=o,n.push(o)}),t.eachSeries(function(i){if(XO(i)){var a=YO(i),o=a.xAxisModel,s=a.yAxisModel,c=o.getCoordSysModel(),f=c.coordinateSystem;i.coordinateSystem=f.getCartesian(o.componentIndex,s.componentIndex)}}),n},e.dimensions=lC,e}();function ZS(e,t){return e.getCoordSysModel()===t}function KO(e,t,r,n){r.getAxesOnZeroOf=function(){return a?[a]:[]};var i=e[t],a,o=r.model,s=o.get(["axisLine","onZero"]),c=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(c!=null)JO(i[c])&&(a=i[c]);else for(var f in i)if(i.hasOwnProperty(f)&&JO(i[f])&&!n[p(i[f])]){a=i[f];break}a&&(n[p(a)]=!0);function p(v){return v.dim+"_"+v.index}}function JO(e){return e&&e.type!=="category"&&e.type!=="time"&&Yde(e)}function cve(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const hve=uve;var Pu=Math.PI,bh=function(){function e(t,r){this.group=new Rn,this.opt=r,this.axisModel=t,rn(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Rn({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!QO[t]},e.prototype.add=function(t){QO[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=pF(r-t),a,o;return c1(i)?(o=n>0?"top":"bottom",a="center"):c1(i-Pu)?(o=n>0?"bottom":"top",a="center"):(o="middle",i>0&&i<Pu?a=n>0?"right":"left":a=n>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),QO={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var a=t.axis.getExtent(),o=n.transform,s=[a[0],0],c=[a[1],0],f=s[0]>c[0];o&&(Po(s,s,o),Po(c,c,o));var p=At({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),v=new Hu({shape:{x1:s[0],y1:s[1],x2:c[0],y2:c[1]},style:p,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});ng(v.shape,v.style.lineWidth),v.anid="line",r.add(v);var y=t.get(["axisLine","symbol"]);if(y!=null){var _=t.get(["axisLine","symbolSize"]);Wt(y)&&(y=[y,y]),(Wt(_)||Tn(_))&&(_=[_,_]);var S=Bb(t.get(["axisLine","symbolOffset"])||0,_),E=_[0],P=_[1];Te([{rotate:e.rotation+Math.PI/2,offset:S[0],r:0},{rotate:e.rotation-Math.PI/2,offset:S[1],r:Math.sqrt((s[0]-c[0])*(s[0]-c[0])+(s[1]-c[1])*(s[1]-c[1]))}],function(I,D){if(y[D]!=="none"&&y[D]!=null){var L=is(y[D],-E/2,-P/2,E,P,p.stroke,!0),B=I.r+I.offset,U=f?c:s;L.attr({rotation:I.rotate,x:U[0]+B*Math.cos(e.rotation),y:U[1]-B*Math.sin(e.rotation),silent:!0,z2:11}),r.add(L)}})}}},axisTickLabel:function(e,t,r,n){var i=pve(r,n,t,e),a=vve(r,n,t,e);if(dve(t,a,i),mve(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=dpe(Qt(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));ppe(o)}},axisName:function(e,t,r,n){var i=Fd(e.axisName,t.get("name"));if(i){var a=t.get("nameLocation"),o=e.nameDirection,s=t.getModel("nameTextStyle"),c=t.get("nameGap")||0,f=t.axis.getExtent(),p=f[0]>f[1]?-1:1,v=[a==="start"?f[0]-p*c:a==="end"?f[1]+p*c:(f[0]+f[1])/2,t5(a)?e.labelOffset+o*c:0],y,_=t.get("nameRotate");_!=null&&(_=_*Pu/180);var S;t5(a)?y=bh.innerTextLayout(e.rotation,_??e.rotation,o):(y=fve(e.rotation,a,_||0,f),S=e.axisNameAvailableWidth,S!=null&&(S=Math.abs(S/Math.sin(y.rotation)),!isFinite(S)&&(S=null)));var E=s.getFont(),P=t.get("nameTruncate",!0)||{},I=P.ellipsis,D=Fd(e.nameTruncateMaxWidth,P.maxWidth,S),L=new ca({x:v[0],y:v[1],rotation:y.rotation,silent:bh.isLabelSilent(t),style:Dl(s,{text:i,font:E,overflow:"truncate",width:D,ellipsis:I,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||y.textAlign,verticalAlign:s.get("verticalAlign")||y.textVerticalAlign}),z2:1});if(wM({el:L,componentModel:t,itemName:i}),L.__fullText=i,L.anid="name",t.get("triggerEvent")){var B=bh.makeAxisEventDataBase(t);B.targetType="axisName",B.name=i,an(L).eventData=B}n.add(L),L.updateTransform(),r.add(L),L.decomposeTransform()}}};function fve(e,t,r,n){var i=pF(r-e),a,o,s=n[0]>n[1],c=t==="start"&&!s||t!=="start"&&s;return c1(i-Pu/2)?(o=c?"bottom":"top",a="center"):c1(i-Pu*1.5)?(o=c?"top":"bottom",a="center"):(o="middle",i<Pu*1.5&&i>Pu/2?a=c?"left":"right":a=c?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function dve(e,t,r){if(!JN(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var a=t[0],o=t[1],s=t[t.length-1],c=t[t.length-2],f=r[0],p=r[1],v=r[r.length-1],y=r[r.length-2];n===!1?(mo(a),mo(f)):e5(a,o)&&(n?(mo(o),mo(p)):(mo(a),mo(f))),i===!1?(mo(s),mo(v)):e5(c,s)&&(i?(mo(c),mo(y)):(mo(s),mo(v)))}}function mo(e){e&&(e.ignore=!0)}function e5(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=XA([]);return YA(i,i,-e.rotation),r.applyTransform(bd([],i,e.getLocalTransform())),n.applyTransform(bd([],i,t.getLocalTransform())),r.intersect(n)}}function t5(e){return e==="middle"||e==="center"}function D8(e,t,r,n,i){for(var a=[],o=[],s=[],c=0;c<e.length;c++){var f=e[c].coord;o[0]=f,o[1]=0,s[0]=f,s[1]=r,t&&(Po(o,o,t),Po(s,s,t));var p=new Hu({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});ng(p.shape,p.style.lineWidth),p.anid=i+"_"+e[c].tickValue,a.push(p)}return a}function pve(e,t,r,n){var i=r.axis,a=r.getModel("axisTick"),o=a.get("show");if(o==="auto"&&n.handleAutoShown&&(o=n.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),c=n.tickDirection*a.get("length"),f=i.getTicksCoords(),p=D8(f,t.transform,c,rn(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),v=0;v<p.length;v++)e.add(p[v]);return p}}function mve(e,t,r,n){var i=r.axis,a=r.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),c=n*a.get("length"),f=rn(s.getLineStyle(),rn(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),p=0;p<o.length;p++)for(var v=D8(o[p],t.transform,c,f,"minorticks_"+p),y=0;y<v.length;y++)e.add(v[y])}}function vve(e,t,r,n){var i=r.axis,a=Fd(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=r.getModel("axisLabel"),s=o.get("margin"),c=i.getViewLabels(),f=(Fd(n.labelRotate,o.get("rotate"))||0)*Pu/180,p=bh.innerTextLayout(n.rotation,f,n.labelDirection),v=r.getCategories&&r.getCategories(!0),y=[],_=bh.isLabelSilent(r),S=r.get("triggerEvent");return Te(c,function(E,P){var I=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(E.tickValue):E.tickValue,D=E.formattedLabel,L=E.rawLabel,B=o;if(v&&v[I]){var U=v[I];or(U)&&U.textStyle&&(B=new sa(U.textStyle,o,r.ecModel))}var V=B.getTextColor()||r.get(["axisLine","lineStyle","color"]),N=i.dataToCoord(I),G=new ca({x:N,y:n.labelOffset+n.labelDirection*s,rotation:p.rotation,silent:_,z2:10+(E.level||0),style:Dl(B,{text:D,align:B.getShallow("align",!0)||p.textAlign,verticalAlign:B.getShallow("verticalAlign",!0)||B.getShallow("baseline",!0)||p.textVerticalAlign,fill:ir(V)?V(i.type==="category"?L:i.type==="value"?I+"":I,P):V})});if(G.anid="label_"+I,S){var Y=bh.makeAxisEventDataBase(r);Y.targetType="axisLabel",Y.value=L,Y.tickIndex=P,i.type==="category"&&(Y.dataIndex=I),an(G).eventData=Y}t.add(G),G.updateTransform(),y.push(G),e.add(G),G.decomposeTransform()}),y}}const L8=bh;function gve(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return yve(r,e,t),r.seriesInvolved&&bve(r,e),r}function yve(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];Te(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var c=pg(s.model),f=e.coordSysAxesInfo[c]={};e.coordSysMap[c]=s;var p=s.model,v=p.getModel("tooltip",n);if(Te(s.getAxes(),wn(E,!1,null)),s.getTooltipAxes&&n&&v.get("show")){var y=v.get("trigger")==="axis",_=v.get(["axisPointer","type"])==="cross",S=s.getTooltipAxes(v.get(["axisPointer","axis"]));(y||_)&&Te(S.baseAxes,wn(E,_?"cross":!0,y)),_&&Te(S.otherAxes,wn(E,"cross",!1))}function E(P,I,D){var L=D.model.getModel("axisPointer",i),B=L.get("show");if(!(!B||B==="auto"&&!P&&!cC(L))){I==null&&(I=L.get("triggerTooltip")),L=P?_ve(D,v,i,t,P,I):L;var U=L.get("snap"),V=L.get("triggerEmphasis"),N=pg(D.model),G=I||U||D.type==="category",Y=e.axesInfo[N]={key:N,axis:D,coordSys:s,axisPointerModel:L,triggerTooltip:I,triggerEmphasis:V,involveSeries:G,snap:U,useHandle:cC(L),seriesModels:[],linkGroup:null};f[N]=Y,e.seriesInvolved=e.seriesInvolved||G;var ee=xve(a,D);if(ee!=null){var J=o[ee]||(o[ee]={axesInfo:{}});J.axesInfo[N]=Y,J.mapper=a[ee].mapper,Y.linkGroup=J}}}})}function _ve(e,t,r,n,i,a){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],c={};Te(s,function(y){c[y]=Lr(o.get(y))}),c.snap=e.type!=="category"&&!!a,o.get("type")==="cross"&&(c.type="line");var f=c.label||(c.label={});if(f.show==null&&(f.show=!1),i==="cross"){var p=o.get(["label","show"]);if(f.show=p??!0,!a){var v=c.lineStyle=o.get("crossStyle");v&&rn(f,v.textStyle)}}return e.model.getModel("axisPointer",new sa(c,r,n))}function bve(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),a=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||a===!1||r.get(["axisPointer","show"],!0)===!1||Te(e.coordSysAxesInfo[pg(n.model)],function(o){var s=o.axis;n.getAxis(s.dim)===s&&(o.seriesModels.push(r),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=r.getData().count())})})}function xve(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var a=e[i]||{};if(XS(a[n+"AxisId"],r.id)||XS(a[n+"AxisIndex"],r.componentIndex)||XS(a[n+"AxisName"],r.name))return i}}function XS(e,t){return e==="all"||Ft(e)&&Wr(e,t)>=0||e===t}function wve(e){var t=lE(e);if(t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,a=r.get("status"),o=r.get("value");o!=null&&(o=n.parse(o));var s=cC(r);a==null&&(i.status=s?"show":"hide");var c=n.getExtent().slice();c[0]>c[1]&&c.reverse(),(o==null||o>c[1])&&(o=c[1]),o<c[0]&&(o=c[0]),i.value=o,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function lE(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[pg(e)]}function Sve(e){var t=lE(e);return t&&t.axisPointerModel}function cC(e){return!!e.get(["handle","show"])}function pg(e){return e.type+"||"+e.id}var r5={},k8=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,a){this.axisPointerClass&&wve(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,a){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var o=Sve(r);o?(this._axisPointer||(this._axisPointer=new a)).render(r,o,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){r5[r]=n},t.getAxisPointerClass=function(r){return r&&r5[r]},t.type="axis",t}(ns),hC=Gn();function Tve(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),c=n.coordinateSystem.getRect(),f=i.getTicksCoords({tickModel:a,clamp:!0});if(f.length){var p=s.length,v=hC(e).splitAreaColors,y=dr(),_=0;if(v)for(var S=0;S<f.length;S++){var E=v.get(f[S].tickValue);if(E!=null){_=(E+(p-1)*S)%p;break}}var P=i.toGlobalCoord(f[0].coord),I=o.getAreaStyle();s=Ft(s)?s:[s];for(var S=1;S<f.length;S++){var D=i.toGlobalCoord(f[S].coord),L=void 0,B=void 0,U=void 0,V=void 0;i.isHorizontal()?(L=P,B=c.y,U=D-L,V=c.height,P=L+U):(L=c.x,B=P,U=c.width,V=D-B,P=B+V);var N=f[S-1].tickValue;N!=null&&y.set(N,_),t.add(new oi({anid:N!=null?"area_"+N:null,shape:{x:L,y:B,width:U,height:V},style:rn({fill:s[_]},I),autoBatch:!0,silent:!0})),_=(_+1)%p}hC(e).splitAreaColors=y}}}function Cve(e){hC(e).splitAreaColors=null}var Ave=["axisLine","axisTickLabel","axisName"],Mve=["splitArea","splitLine","minorSplitLine"],R8=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Rn,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),c=uC(s,r),f=new L8(r,At({handleAutoShown:function(v){for(var y=s.coordinateSystem.getCartesians(),_=0;_<y.length;_++)if(eC(y[_].getOtherAxis(r.axis).scale))return!0;return!1}},c));Te(Ave,f.add,f),this._axisGroup.add(f.getGroup()),Te(Mve,function(v){r.get([v,"show"])&&Eve[v](this,this._axisGroup,r,s)},this);var p=a&&a.type==="changeAxisOrder"&&a.isInitSort;p||m$(o,this._axisGroup,r),e.prototype.render.call(this,r,n,i,a)}},t.prototype.remove=function(){Cve(this)},t.type="cartesianAxis",t}(k8),Eve={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=Ft(s)?s:[s];for(var c=n.coordinateSystem.getRect(),f=i.isHorizontal(),p=0,v=i.getTicksCoords({tickModel:a}),y=[],_=[],S=o.getLineStyle(),E=0;E<v.length;E++){var P=i.toGlobalCoord(v[E].coord);f?(y[0]=P,y[1]=c.y,_[0]=P,_[1]=c.y+c.height):(y[0]=c.x,y[1]=P,_[0]=c.x+c.width,_[1]=P);var I=p++%s.length,D=v[E].tickValue,L=new Hu({anid:D!=null?"line_"+v[E].tickValue:null,autoBatch:!0,shape:{x1:y[0],y1:y[1],x2:_[0],y2:_[1]},style:rn({stroke:s[I]},S),silent:!0});ng(L.shape,S.lineWidth),t.add(L)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,a=r.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=n.coordinateSystem.getRect(),c=i.isHorizontal(),f=i.getMinorTicksCoords();if(f.length)for(var p=[],v=[],y=o.getLineStyle(),_=0;_<f.length;_++)for(var S=0;S<f[_].length;S++){var E=i.toGlobalCoord(f[_][S].coord);c?(p[0]=E,p[1]=s.y,v[0]=E,v[1]=s.y+s.height):(p[0]=s.x,p[1]=E,v[0]=s.x+s.width,v[1]=E);var P=new Hu({anid:"minor_line_"+f[_][S].tickValue,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:v[0],y2:v[1]},style:y,silent:!0});ng(P.shape,y.lineWidth),t.add(P)}},splitArea:function(e,t,r,n){Tve(e,t,r,n)}},O8=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(R8),Pve=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=O8.type,r}return t.type="yAxis",t}(R8),Ive=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new oi({shape:r.coordinateSystem.getRect(),style:rn({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ns),n5={offset:0};function z8(e){e.registerComponentView(Ive),e.registerComponentModel(Kme),e.registerCoordinateSystem("cartesian2d",hve),WO(e,"x",sC,n5),WO(e,"y",sC,n5),e.registerComponentView(O8),e.registerComponentView(Pve),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Dve(e){Ro(z8),e.registerSeriesModel(jme),e.registerChartView(Xme),e.registerLayout(oE("scatter"))}var i5="\0_ec_interaction_mutex";function a5(e,t){return!!Lve(e)[t]}function Lve(e){return e[i5]||(e[i5]={})}zh({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},la);var kve=function(e){yt(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=vr(n._mousedownHandler,n),a=vr(n._mousemoveHandler,n),o=vr(n._mouseupHandler,n),s=vr(n._mousewheelHandler,n),c=vr(n._pinchHandler,n);return n.enable=function(f,p){this.disable(),this._opt=rn(Lr(p)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),f==null&&(f=!0),(f===!0||f==="move"||f==="pan")&&(r.on("mousedown",i),r.on("mousemove",a),r.on("mouseup",o)),(f===!0||f==="scale"||f==="zoom")&&(r.on("mousewheel",s),r.on("pinch",c))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",a),r.off("mouseup",o),r.off("mousewheel",s),r.off("pinch",c)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!UL(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,a=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!I0("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||a5(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,a=this._x,o=this._y,s=n-a,c=i-o;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Nd(r.event),B8(this,"pan","moveOnMouseMove",r,{dx:s,dy:c,oldX:a,oldY:o,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){UL(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=I0("zoomOnMouseWheel",r,this._opt),i=I0("moveOnMouseWheel",r,this._opt),a=r.wheelDelta,o=Math.abs(a),s=r.offsetX,c=r.offsetY;if(!(a===0||!n&&!i)){if(n){var f=o>3?1.4:o>1?1.2:1.1,p=a>0?f:1/f;YS(this,"zoom","zoomOnMouseWheel",r,{scale:p,originX:s,originY:c,isAvailableBehavior:null})}if(i){var v=Math.abs(a),y=(a>0?1:-1)*(v>3?.4:v>1?.15:.05);YS(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:y,originX:s,originY:c,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!a5(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;YS(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(os);function YS(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(Nd(n.event),B8(e,t,r,n,i))}function B8(e,t,r,n,i){i.isAvailableBehavior=vr(I0,null,r,n),e.trigger(t,i)}function I0(e,t,r){var n=r[e];return!e||n&&(!Wt(n)||t.event[n+"Key"])}const Rve=kve;var o5=Hu.prototype,KS=gM.prototype,F8=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(F8);function JS(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Ove=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new F8},t.prototype.buildPath=function(r,n){JS(n)?o5.buildPath.call(this,r,n):KS.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return JS(this.shape)?o5.pointAt.call(this,r):KS.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=JS(n)?[n.x2-n.x1,n.y2-n.y1]:KS.tangentAt.call(this,r);return qA(i,i)},t}(Qr),QS=["fromSymbol","toSymbol"];function s5(e){return"_"+e+"Type"}function l5(e,t,r){var n=t.getItemVisual(r,e);if(!n||n==="none")return n;var i=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),o=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),c=VM(i),f=Bb(o||0,c);return n+c+f+(a||"")+(s||"")}function u5(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),o=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),c=VM(i),f=Bb(o||0,c),p=is(n,-c[0]/2+f[0],-c[1]/2+f[1],c[0],c[1],null,s);return p.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,p.name=e,p}}function zve(e){var t=new Ove({name:"line",subPixelOptimize:!0});return fC(t.shape,e),t}function fC(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Bve=function(e){yt(t,e);function t(r,n,i){var a=e.call(this)||this;return a._createLine(r,n,i),a}return t.prototype._createLine=function(r,n,i){var a=r.hostModel,o=r.getItemLayout(n),s=zve(o);s.shape.percent=0,ap(s,{shape:{percent:1}},a,n),this.add(s),Te(QS,function(c){var f=u5(c,r,n);this.add(f),this[s5(c)]=l5(c,r,n)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var a=r.hostModel,o=this.childOfName("line"),s=r.getItemLayout(n),c={shape:{}};fC(c.shape,s),Fs(o,c,a,n),Te(QS,function(f){var p=l5(f,r,n),v=s5(f);if(this[v]!==p){this.remove(this.childOfName(f));var y=u5(f,r,n);this.add(y)}this[v]=p},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var a=r.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,c=i&&i.blurLineStyle,f=i&&i.selectLineStyle,p=i&&i.labelStatesModels,v=i&&i.emphasisDisabled,y=i&&i.focus,_=i&&i.blurScope;if(!i||r.hasItemOption){var S=r.getItemModel(n),E=S.getModel("emphasis");s=E.getModel("lineStyle").getLineStyle(),c=S.getModel(["blur","lineStyle"]).getLineStyle(),f=S.getModel(["select","lineStyle"]).getLineStyle(),v=E.get("disabled"),y=E.get("focus"),_=E.get("blurScope"),p=Bg(S)}var P=r.getItemVisual(n,"style"),I=P.stroke;o.useStyle(P),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=c,o.ensureState("select").style=f,Te(QS,function(V){var N=this.childOfName(V);if(N){N.setColor(I),N.style.opacity=P.opacity;for(var G=0;G<ko.length;G++){var Y=ko[G],ee=o.getState(Y);if(ee){var J=ee.style||{},X=N.ensureState(Y),ne=X.style||(X.style={});J.stroke!=null&&(ne[N.__isEmptyBrush?"stroke":"fill"]=J.stroke),J.opacity!=null&&(ne.opacity=J.opacity)}}N.markRedraw()}},this);var D=a.getRawValue(n);Cb(this,p,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(V,N){return a.getFormattedLabel(V,N,r.dataType)}},inheritColor:I||"#000",defaultOpacity:P.opacity,defaultText:(D==null?r.getName(n):isFinite(D)?ai(D):D)+""});var L=this.getTextContent();if(L){var B=p.normal;L.__align=L.style.align,L.__verticalAlign=L.style.verticalAlign,L.__position=B.get("position")||"middle";var U=B.get("distance");Ft(U)||(U=[U,U]),L.__labelDistance=U}this.setTextConfig({position:null,local:!0,inside:!1}),rg(this,y,_,v)},t.prototype.highlight=function(){eg(this)},t.prototype.downplay=function(){tg(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");fC(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),a=r.getTextContent();if(!n&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var c=r.childOfName("line");if(!this.__dirty&&!c.__dirty)return;var f=c.shape.percent,p=c.pointAt(0),v=c.pointAt(f),y=$6([],v,p);qA(y,y);function _(ee,J){var X=ee.__specifiedRotation;if(X==null){var ne=c.tangentAt(J);ee.attr("rotation",(J===1?-1:1)*Math.PI/2-Math.atan2(ne[1],ne[0]))}else ee.attr("rotation",X)}if(n&&(n.setPosition(p),_(n,0),n.scaleX=n.scaleY=o*f,n.markRedraw()),i&&(i.setPosition(v),_(i,1),i.scaleX=i.scaleY=o*f,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var S=void 0,E=void 0,P=a.__labelDistance,I=P[0]*o,D=P[1]*o,L=f/2,B=c.tangentAt(L),U=[B[1],-B[0]],V=c.pointAt(L);U[1]>0&&(U[0]=-U[0],U[1]=-U[1]);var N=B[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var G=-Math.atan2(B[1],B[0]);v[0]<p[0]&&(G=Math.PI+G),a.rotation=G}var Y=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Y=-D,E="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Y=D,E="top";break;default:Y=0,E="middle"}switch(a.__position){case"end":a.x=y[0]*I+v[0],a.y=y[1]*D+v[1],S=y[0]>.8?"left":y[0]<-.8?"right":"center",E=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":a.x=-y[0]*I+p[0],a.y=-y[1]*D+p[1],S=y[0]>.8?"right":y[0]<-.8?"left":"center",E=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=I*N+p[0],a.y=p[1]+Y,S=B[0]<0?"right":"left",a.originX=-I*N,a.originY=-Y;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=V[0],a.y=V[1]+Y,S="center",a.originY=-Y;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-I*N+v[0],a.y=v[1]+Y,S=B[0]>=0?"right":"left",a.originX=I*N,a.originY=-Y;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||E,align:a.__align||S})}},t}(Rn);const uE=Bve;var Fve=function(){function e(t){this.group=new Rn,this._LineCtor=t||uE}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,a=n._lineData;n._lineData=t,a||i.removeAll();var o=c5(t);t.diff(a).add(function(s){r._doAdd(t,s,o)}).update(function(s,c){r._doUpdate(a,t,c,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=c5(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!$ve(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var a=r.getItemLayout(i);if(e2(a)){var o=new this._LineCtor(r,i,this._seriesScope);o.traverse(n),this.group.add(o),r.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Sb(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(e2(i)){var a=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,a),this.group.add(a)}},e.prototype._doUpdate=function(t,r,n,i,a){var o=t.getItemGraphicEl(n);if(!e2(r.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(r,i,a):o=new this._LineCtor(r,i,a),r.setItemGraphicEl(i,o),this.group.add(o)},e}();function $ve(e){return e.animators&&e.animators.length>0}function c5(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:Bg(t)}}function h5(e){return isNaN(e[0])||isNaN(e[1])}function e2(e){return e&&!h5(e[0])&&!h5(e[1])}const Nve=Fve;function Ub(e,t,r,n,i,a){e=e||0;var o=r[1]-r[0];if(i!=null&&(i=Xf(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Xf(s,[0,o]),i=a=Xf(s,[i,a]),n=0}t[0]=Xf(t[0],r),t[1]=Xf(t[1],r);var c=t2(t,n);t[n]+=e;var f=i||0,p=r.slice();c.sign<0?p[0]+=f:p[1]-=f,t[n]=Xf(t[n],p);var v;return v=t2(t,n),i!=null&&(v.sign!==c.sign||v.span<i)&&(t[1-n]=t[n]+c.sign*i),v=t2(t,n),a!=null&&v.span>a&&(t[1-n]=t[n]+v.sign*a),t}function t2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Xf(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var Vve=function(e){yt(t,e);function t(r,n,i){var a=e.call(this)||this;return a.add(a.createLine(r,n,i)),a._updateEffectSymbol(r,n),a}return t.prototype.createLine=function(r,n,i){return new uE(r,n,i)},t.prototype._updateEffectSymbol=function(r,n){var i=r.getItemModel(n),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");Ft(o)||(o=[o,o]);var c=r.getItemVisual(n,"style"),f=a.get("color")||c&&c.stroke,p=this.childAt(1);this._symbolType!==s&&(this.remove(p),p=is(s,-.5,-.5,1,1,f),p.z2=100,p.culling=!0,this.add(p)),p&&(p.setStyle("shadowColor",f),p.setStyle(a.getItemStyle(["color"])),p.scaleX=o[0],p.scaleY=o[1],p.setColor(f),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(r,a,n))},t.prototype._updateEffectAnimation=function(r,n,i){var a=this.childAt(1);if(a){var o=r.getItemLayout(i),s=n.get("period")*1e3,c=n.get("loop"),f=n.get("roundTrip"),p=n.get("constantSpeed"),v=Fd(n.get("delay"),function(_){return _/r.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),p>0&&(s=this._getLineLength(a)/p*1e3),s!==this._period||c!==this._loop||f!==this._roundTrip){a.stopAnimation();var y=void 0;ir(v)?y=v(i):y=v,a.__t>0&&(y=-s*a.__t),this._animateSymbol(a,s,y,c,f)}this._period=s,this._loop=c,this._roundTrip=f}},t.prototype._animateSymbol=function(r,n,i,a,o){if(n>0){r.__t=0;var s=this,c=r.animate("",a).when(o?n*2:n,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(r)});a||c.done(function(){s.remove(r)}),c.start()}},t.prototype._getLineLength=function(r){return ad(r.__p1,r.__cp1)+ad(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,n){r.__p1=n[0],r.__p2=n[1],r.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},t.prototype.updateData=function(r,n,i){this.childAt(0).updateData(r,n,i),this._updateEffectSymbol(r,n)},t.prototype._updateSymbolPosition=function(r){var n=r.__p1,i=r.__p2,a=r.__cp1,o=r.__t<1?r.__t:2-r.__t,s=[r.x,r.y],c=s.slice(),f=Bi,p=yT;s[0]=f(n[0],a[0],i[0],o),s[1]=f(n[1],a[1],i[1],o);var v=r.__t<1?p(n[0],a[0],i[0],o):p(i[0],a[0],n[0],1-o),y=r.__t<1?p(n[1],a[1],i[1],o):p(i[1],a[1],n[1],1-o);r.rotation=-Math.atan2(y,v)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=ad(c,s)*1.05,o===1&&(s[0]=c[0]+(s[0]-c[0])/2,s[1]=c[1]+(s[1]-c[1])/2)):r.__lastT===1?r.scaleY=2*ad(n,s):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=s[0],r.y=s[1]},t.prototype.updateLayout=function(r,n){this.childAt(0).updateLayout(r,n);var i=r.getItemModel(n).getModel("effect");this._updateEffectAnimation(r,i,n)},t}(Rn);const $8=Vve;var Hve=function(e){yt(t,e);function t(r,n,i){var a=e.call(this)||this;return a._createPolyline(r,n,i),a}return t.prototype._createPolyline=function(r,n,i){var a=r.getItemLayout(n),o=new zg({shape:{points:a}});this.add(o),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var a=r.hostModel,o=this.childAt(0),s={shape:{points:r.getItemLayout(n)}};Fs(o,s,a,n),this._updateCommonStl(r,n,i)},t.prototype._updateCommonStl=function(r,n,i){var a=this.childAt(0),o=r.getItemModel(n),s=i&&i.emphasisLineStyle,c=i&&i.focus,f=i&&i.blurScope,p=i&&i.emphasisDisabled;if(!i||r.hasItemOption){var v=o.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),p=v.get("disabled"),c=v.get("focus"),f=v.get("blurScope")}a.useStyle(r.getItemVisual(n,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var y=a.ensureState("emphasis");y.style=s,rg(this,c,f,p)},t.prototype.updateLayout=function(r,n){var i=this.childAt(0);i.setShape("points",r.getItemLayout(n))},t}(Rn);const N8=Hve;var Uve=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,n,i){return new N8(r,n,i)},t.prototype._updateAnimationPoints=function(r,n){this._points=n;for(var i=[0],a=0,o=1;o<n.length;o++){var s=n[o-1],c=n[o];a+=ad(s,c),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var n=r.__t<1?r.__t:2-r.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,c;if(n<this._lastFramePercent){var f=Math.min(s+1,o-1);for(c=f;c>=0&&!(a[c]<=n);c--);c=Math.min(c,o-2)}else{for(c=s;c<o&&!(a[c]>n);c++);c=Math.min(c-1,o-2)}var p=(n-a[c])/(a[c+1]-a[c]),v=i[c],y=i[c+1];r.x=v[0]*(1-p)+p*y[0],r.y=v[1]*(1-p)+p*y[1];var _=r.__t<1?y[0]-v[0]:v[0]-y[0],S=r.__t<1?y[1]-v[1]:v[1]-y[1];r.rotation=-Math.atan2(S,_)-Math.PI/2,this._lastFrame=c,this._lastFramePercent=n,r.ignore=!1}},t}($8);const jve=Uve;var Gve=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),Wve=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Gve},t.prototype.buildPath=function(r,n){var i=n.segs,a=n.curveness,o;if(n.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){r.moveTo(i[o++],i[o++]);for(var c=1;c<s;c++)r.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var f=i[o++],p=i[o++],v=i[o++],y=i[o++];if(r.moveTo(f,p),a>0){var _=(f+v)/2-(p-y)*a,S=(p+y)/2-(v-f)*a;r.quadraticCurveTo(_,S,v,y)}else r.lineTo(v,y)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(r,n){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var c=0,f=0;f<a.length;){var p=a[f++];if(p>0)for(var v=a[f++],y=a[f++],_=1;_<p;_++){var S=a[f++],E=a[f++];if(Cu(v,y,S,E,s,r,n))return c}c++}else for(var c=0,f=0;f<a.length;){var v=a[f++],y=a[f++],S=a[f++],E=a[f++];if(o>0){var P=(v+S)/2-(y-E)*o,I=(y+E)/2-(S-v)*o;if(AF(v,y,P,I,S,E,s,r,n))return c}else if(Cu(v,y,S,E,s,r,n))return c;c++}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var o=this.hoverDataIdx=this.findDataIndex(r,n);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.segs,a=1/0,o=1/0,s=-1/0,c=-1/0,f=0;f<i.length;){var p=i[f++],v=i[f++];a=Math.min(p,a),s=Math.max(p,s),o=Math.min(v,o),c=Math.max(v,c)}r=this._rect=new qr(a,o,s,c)}return r},t}(Qr),qve=function(){function e(){this.group=new Rn}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var n=this._newAdded[0],i=r.getLayout("linesPoints"),a=n&&n.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),n.setShape({segs:s})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:i}),this._setCommon(c,r),c.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Wve({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=r.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var o=an(t);o.seriesIndex=i.seriesIndex,t.on("mousemove",function(s){o.dataIndex=null;var c=t.hoverDataIdx;c>0&&(o.dataIndex=c+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Zve={seriesType:"lines",plan:FM(),reset:function(e){var t=e.coordinateSystem;if(t){var r=e.get("polyline"),n=e.pipelineContext.large;return{progress:function(i,a){var o=[];if(n){var s=void 0,c=i.end-i.start;if(r){for(var f=0,p=i.start;p<i.end;p++)f+=e.getLineCoordsCount(p);s=new Float32Array(c+f*2)}else s=new Float32Array(c*4);for(var v=0,y=[],p=i.start;p<i.end;p++){var _=e.getLineCoords(p,o);r&&(s[v++]=_);for(var S=0;S<_;S++)y=t.dataToPoint(o[S],!1,y),s[v++]=y[0],s[v++]=y[1]}a.setLayout("linesPoints",s)}else for(var p=i.start;p<i.end;p++){var E=a.getItemModel(p),_=e.getLineCoords(p,o),P=[];if(r)for(var I=0;I<_;I++)P.push(t.dataToPoint(o[I]));else{P[0]=t.dataToPoint(o[0]),P[1]=t.dataToPoint(o[1]);var D=E.get(["lineStyle","curveness"]);+D&&(P[2]=[(P[0][0]+P[1][0])/2-(P[0][1]-P[1][1])*D,(P[0][1]+P[1][1])/2-(P[1][0]-P[0][0])*D])}a.setItemLayout(p,P)}}}}}};const V8=Zve;var Xve=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=r.getData(),o=this._updateLineDraw(a,r),s=r.get("zlevel"),c=r.get(["effect","trailLength"]),f=i.getZr(),p=f.painter.getType()==="svg";p||f.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!p&&f.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&c>0&&(p||f.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),o.updateData(a);var v=r.get("clip",!0)&&Ame(r.coordinateSystem,!1,r);v?this.group.setClipPath(v):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),o=this._updateLineDraw(a,r);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._lineDraw.incrementalUpdate(r,n.getData()),this._finished=r.end===n.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,n,i){var a=r.getData(),o=r.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=V8.reset(r,n,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},t.prototype._updateLineDraw=function(r,n){var i=this._lineDraw,a=this._showEffect(n),o=!!n.get("polyline"),s=n.pipelineContext,c=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||c!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=c?new qve:new Nve(o?a?jve:N8:a?$8:uE),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=c),this.group.add(i.group),i},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var n=r.getZr(),i=n.painter.getType()==="svg";!i&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},t.prototype.dispose=function(r,n){this.remove(r,n)},t.type="lines",t}(Rs);const Yve=Xve;var Kve=typeof Uint32Array>"u"?Array:Uint32Array,Jve=typeof Float64Array>"u"?Array:Float64Array;function f5(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Qt(t,function(r){var n=[r[0].coord,r[1].coord],i={coords:n};return r[0].name&&(i.fromName=r[0].name),r[1].name&&(i.toName=r[1].name),Mae([i,r[0],r[1]])}))}var Qve=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],f5(r);var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(f5(r),r.data){var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var n=this._processFlatCoordsArray(r.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=hT(this._flatCoords,n.flatCoords),this._flatCoordsOffset=hT(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),r.data=new Float32Array(n.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var n=this.getData().getItemModel(r),i=n.option instanceof Array?n.option:n.getShallow("coords");return i},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,n){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[r*2],a=this._flatCoordsOffset[r*2+1],o=0;o<a;o++)n[o]=n[o]||[],n[o][0]=this._flatCoords[i+o*2],n[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(r),o=0;o<s.length;o++)n[o]=n[o]||[],n[o][0]=s[o][0],n[o][1]=s[o][1];return s.length}},t.prototype._processFlatCoordsArray=function(r){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),Tn(r[0])){for(var i=r.length,a=new Kve(i),o=new Jve(i),s=0,c=0,f=0,p=0;p<i;){f++;var v=r[p++];a[c++]=s+n,a[c++]=v;for(var y=0;y<v;y++){var _=r[p++],S=r[p++];o[s++]=_,o[s++]=S}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,c),flatCoords:o,count:f}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,n){var i=new ZM(["value"],this);return i.hasItemOption=!1,i.initData(r.data,[],function(a,o,s,c){if(a instanceof Array)return NaN;i.hasItemOption=!0;var f=a.value;if(f!=null)return f instanceof Array?f[c]:f}),i},t.prototype.formatTooltip=function(r,n,i){var a=this.getData(),o=a.getItemModel(r),s=o.get("name");if(s)return s;var c=o.get("fromName"),f=o.get("toName"),p=[];return c!=null&&p.push(c),f!=null&&p.push(f),Uu("nameValue",{name:p.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),n=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&n>0?n+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Mh);const ege=Qve;function J_(e){return e instanceof Array||(e=[e,e]),e}var tge={seriesType:"lines",reset:function(e){var t=J_(e.get("symbol")),r=J_(e.get("symbolSize")),n=e.getData();n.setVisual("fromSymbol",t&&t[0]),n.setVisual("toSymbol",t&&t[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]);function i(a,o){var s=a.getItemModel(o),c=J_(s.getShallow("symbol",!0)),f=J_(s.getShallow("symbolSize",!0));c[0]&&a.setItemVisual(o,"fromSymbol",c[0]),c[1]&&a.setItemVisual(o,"toSymbol",c[1]),f[0]&&a.setItemVisual(o,"fromSymbolSize",f[0]),f[1]&&a.setItemVisual(o,"toSymbolSize",f[1])}return{dataEach:n.hasItemOption?i:null}}};const rge=tge;function nge(e){e.registerChartView(Yve),e.registerSeriesModel(ege),e.registerLayout(V8),e.registerVisual(rge)}var rh=Gn(),d5=Lr,r2=vr,ige=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var a=r.get("value"),o=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,c=this._handle;if(!o||o==="hide"){s&&s.hide(),c&&c.hide();return}s&&s.show(),c&&c.show();var f={};this.makeElOption(f,a,t,r,n);var p=f.graphicKey;p!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=p;var v=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new Rn,this.createPointerEl(s,f,t,r),this.createLabelEl(s,f,t,r),n.getZr().add(s);else{var y=wn(p5,r,v);this.updatePointerEl(s,f,y),this.updateLabelEl(s,f,y,r)}v5(s,r,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,a=i.type==="category",o=r.get("snap");if(!o&&!a)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var c=lE(t).seriesDataCount,f=i.getExtent();return Math.abs(f[0]-f[1])/c>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,a){},e.prototype.createPointerEl=function(t,r,n,i){var a=r.pointer;if(a){var o=rh(t).pointerEl=new Lue[a.type](d5(r.pointer));t.add(o)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var a=rh(t).labelEl=new ca(d5(r.label));t.add(a),m5(a,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=rh(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var a=rh(t).labelEl;a&&(a.setStyle(r.label.style),n(a,{x:r.label.x,y:r.label.y}),m5(a,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,a=r.getModel("handle"),o=r.get("status");if(!a.get("show")||!o||o==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=xM(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(f){Nd(f.event)},onmousedown:r2(this._onHandleDragMove,this,0,0),drift:r2(this._onHandleDragMove,this),ondragend:r2(this._onHandleDragEnd,this)}),n.add(i)),v5(i,r,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=a.get("size");Ft(c)||(c=[c,c]),i.scaleX=c[0]/2,i.scaleY=c[1]/2,zb(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){p5(this._axisPointerModel,!r&&this._moveAnimation,this._handle,n2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(n2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(n2(i)),rh(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),x1(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function p5(e,t,r,n){H8(rh(r).lastProp,n)||(rh(r).lastProp=n,t?Fs(r,n,e):(r.stopAnimation(),r.attr(n)))}function H8(e,t){if(or(e)&&or(t)){var r=!0;return Te(t,function(n,i){r=r&&H8(e[i],n)}),!!r}else return e===t}function m5(e,t){e[t.get(["label","show"])?"show":"hide"]()}function n2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function v5(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(n!=null&&(a.z=n),i!=null&&(a.zlevel=i),a.silent=r)})}const age=ige;function oge(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function sge(e,t,r,n,i){var a=r.get("value"),o=U8(a,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),c=Lb(s.get("padding")||0),f=s.getFont(),p=rM(o,f),v=i.position,y=p.width+c[1]+c[3],_=p.height+c[0]+c[2],S=i.align;S==="right"&&(v[0]-=y),S==="center"&&(v[0]-=y/2);var E=i.verticalAlign;E==="bottom"&&(v[1]-=_),E==="middle"&&(v[1]-=_/2),lge(v,y,_,n);var P=s.get("backgroundColor");(!P||P==="auto")&&(P=t.get(["axisLine","lineStyle","color"])),e.label={x:v[0],y:v[1],style:Dl(s,{text:o,font:f,fill:s.getTextColor(),padding:c,backgroundColor:P}),z2:10}}function lge(e,t,r,n){var i=n.getWidth(),a=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,a)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function U8(e,t,r,n,i){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:i.precision}),o=i.formatter;if(o){var s={value:YM(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Te(n,function(c){var f=r.getSeriesByIndex(c.seriesIndex),p=c.dataIndexInside,v=f&&f.getDataParams(p);v&&s.seriesData.push(v)}),Wt(o)?a=o.replace("{value}",a):ir(o)&&(a=o(s))}return a}function j8(e,t,r){var n=Xv();return YA(n,n,r.rotation),vT(n,n,r.position),ig([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function uge(e,t,r,n,i,a){var o=L8.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),sge(t,n,i,a,{position:j8(n.axis,e,r),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function cge(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function hge(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var fge=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,a,o){var s=i.axis,c=s.grid,f=a.get("type"),p=g5(c,s).getOtherAxis(s).getGlobalExtent(),v=s.toGlobalCoord(s.dataToCoord(n,!0));if(f&&f!=="none"){var y=oge(a),_=dge[f](s,v,p);_.style=y,r.graphicKey=_.type,r.pointer=_}var S=uC(c.model,i);uge(n,r,S,i,a,o)},t.prototype.getHandleTransform=function(r,n,i){var a=uC(n.axis.grid.model,n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=j8(n.axis,r,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,a){var o=i.axis,s=o.grid,c=o.getGlobalExtent(!0),f=g5(s,o).getOtherAxis(o).getGlobalExtent(),p=o.dim==="x"?0:1,v=[r.x,r.y];v[p]+=n[p],v[p]=Math.min(c[1],v[p]),v[p]=Math.max(c[0],v[p]);var y=(f[1]+f[0])/2,_=[y,y];_[p]=v[p];var S=[{verticalAlign:"middle"},{align:"center"}];return{x:v[0],y:v[1],rotation:r.rotation,cursorPoint:_,tooltipOption:S[p]}},t}(age);function g5(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var dge={line:function(e,t,r){var n=cge([t,r[0]],[t,r[1]],y5(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:hge([t-n/2,r[0]],[n,i],y5(e))}}};function y5(e){return e.dim==="x"?0:1}const pge=fge;var mge=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(xn);const vge=mge;var xl=Gn(),gge=Te;function G8(e,t,r){if(!pr.node){var n=t.getZr();xl(n).records||(xl(n).records={}),yge(n,t);var i=xl(n).records[e]||(xl(n).records[e]={});i.handler=r}}function yge(e,t){if(xl(e).initialized)return;xl(e).initialized=!0,r("click",wn(_5,"click")),r("mousemove",wn(_5,"mousemove")),r("globalout",bge);function r(n,i){e.on(n,function(a){var o=xge(t);gge(xl(e).records,function(s){s&&i(s,a,o.dispatchAction)}),_ge(o.pendings,t)})}}function _ge(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function bge(e,t,r){e.handler("leave",null,r)}function _5(e,t,r,n){t.handler(e,r,n)}function xge(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function dC(e,t){if(!pr.node){var r=t.getZr(),n=(xl(r).records||{})[e];n&&(xl(r).records[e]=null)}}var wge=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=n.getComponent("tooltip"),o=r.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";G8("axisPointer",i,function(s,c,f){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&f({type:"updateAxisPointer",currTrigger:s,x:c&&c.offsetX,y:c&&c.offsetY})})},t.prototype.remove=function(r,n){dC("axisPointer",n)},t.prototype.dispose=function(r,n){dC("axisPointer",n)},t.type="axisPointer",t}(ns);const Sge=wge;function W8(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var a=i.getData(),o=Ch(a,e);if(o==null||o<0||Ft(o))return{point:[]};var s=a.getItemGraphicEl(o),c=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(o)||[];else if(c&&c.dataToPoint)if(e.isStacked){var f=c.getBaseAxis(),p=c.getOtherAxis(f),v=p.dim,y=f.dim,_=v==="x"||v==="radius"?1:0,S=a.mapDimension(y),E=[];E[_]=a.get(S,o),E[1-_]=a.get(a.getCalculationInfo("stackResultDimension"),o),r=c.dataToPoint(E)||[]}else r=c.dataToPoint(a.getValues(Qt(c.dimensions,function(I){return a.mapDimension(I)}),o))||[];else if(s){var P=s.getBoundingRect().clone();P.applyTransform(s.transform),r=[P.x+P.width/2,P.y+P.height/2]}return{point:r,el:s}}var b5=Gn();function Tge(e,t,r){var n=e.currTrigger,i=[e.x,e.y],a=e,o=e.dispatchAction||vr(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){D0(i)&&(i=W8({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var c=D0(i),f=a.axesInfo,p=s.axesInfo,v=n==="leave"||D0(i),y={},_={},S={list:[],map:{}},E={showPointer:wn(Age,_),showTooltip:wn(Mge,S)};Te(s.coordSysMap,function(I,D){var L=c||I.containPoint(i);Te(s.coordSysAxesInfo[D],function(B,U){var V=B.axis,N=Dge(f,B);if(!v&&L&&(!f||N)){var G=N&&N.value;G==null&&!c&&(G=V.pointToData(i)),G!=null&&x5(B,G,E,!1,y)}})});var P={};return Te(p,function(I,D){var L=I.linkGroup;L&&!_[D]&&Te(L.axesInfo,function(B,U){var V=_[U];if(B!==I&&V){var N=V.value;L.mapper&&(N=I.axis.scale.parse(L.mapper(N,w5(B),w5(I)))),P[I.key]=N}})}),Te(P,function(I,D){x5(p[D],I,E,!0,y)}),Ege(_,p,y),Pge(S,i,e,o),Ige(p,o,r),y}}function x5(e,t,r,n,i){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var o=Cge(t,e),s=o.payloadBatch,c=o.snapToValue;s[0]&&i.seriesIndex==null&&At(i,s[0]),!n&&e.snap&&a.containData(c)&&c!=null&&(t=c),r.showPointer(e,t,s),r.showTooltip(e,o,c)}}function Cge(e,t){var r=t.axis,n=r.dim,i=e,a=[],o=Number.MAX_VALUE,s=-1;return Te(t.seriesModels,function(c,f){var p=c.getData().mapDimensionsAll(n),v,y;if(c.getAxisTooltipData){var _=c.getAxisTooltipData(p,e,r);y=_.dataIndices,v=_.nestestValue}else{if(y=c.getData().indicesOfNearest(p[0],e,r.type==="category"?.5:null),!y.length)return;v=c.getData().get(p[0],y[0])}if(!(v==null||!isFinite(v))){var S=e-v,E=Math.abs(S);E<=o&&((E<o||S>=0&&s<0)&&(o=E,s=S,i=v,a.length=0),Te(y,function(P){a.push({seriesIndex:c.seriesIndex,dataIndexInside:P,dataIndex:c.getData().getRawIndex(P)})}))}}),{payloadBatch:a,snapToValue:i}}function Age(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Mge(e,t,r,n){var i=r.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var c=t.coordSys.model,f=pg(c),p=e.map[f];p||(p=e.map[f]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},e.list.push(p)),p.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Ege(e,t,r){var n=r.axesInfo=[];Te(t,function(i,a){var o=i.axisPointerModel.option,s=e[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function Pge(e,t,r,n){if(D0(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Ige(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",a=b5(n)[i]||{},o=b5(n)[i]={};Te(e,function(f,p){var v=f.axisPointerModel.option;v.status==="show"&&f.triggerEmphasis&&Te(v.seriesDataIndices,function(y){var _=y.seriesIndex+" | "+y.dataIndex;o[_]=y})});var s=[],c=[];Te(a,function(f,p){!o[p]&&c.push(f)}),Te(o,function(f,p){!a[p]&&s.push(f)}),c.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:c}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Dge(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function w5(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function D0(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function q8(e){k8.registerAxisPointerClass("CartesianAxisPointer",pge),e.registerComponentModel(vge),e.registerComponentView(Sge),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!Ft(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=gve(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Tge)}function Z8(e){Ro(z8),Ro(q8)}var S5=["x","y","radius","angle","single"],Lge=["cartesian2d","polar","singleAxis"];function kge(e){var t=e.get("coordinateSystem");return Wr(Lge,t)>=0}function Iu(e){return e+"Axis"}function Rge(e,t){var r=dr(),n=[],i=dr();e.eachComponent({mainType:"dataZoom",query:t},function(p){i.get(p.uid)||s(p)});var a;do a=!1,e.eachComponent("dataZoom",o);while(a);function o(p){!i.get(p.uid)&&c(p)&&(s(p),a=!0)}function s(p){i.set(p.uid,!0),n.push(p),f(p)}function c(p){var v=!1;return p.eachTargetAxis(function(y,_){var S=r.get(y);S&&S[_]&&(v=!0)}),v}function f(p){p.eachTargetAxis(function(v,y){(r.get(v)||r.set(v,[]))[y]=!0})}return n}function X8(e){var t=e.ecModel,r={infoList:[],infoMap:dr()};return e.eachTargetAxis(function(n,i){var a=t.getComponent(Iu(n),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,c=r.infoMap.get(s);c||(c={model:o,axisModels:[]},r.infoList.push(c),r.infoMap.set(s,c)),c.axisModels.push(a)}}}),r}var i2=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),I1=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return t.prototype.init=function(r,n,i){var a=T5(r);this.settledOption=a,this.mergeDefaultAndTheme(r,i),this._doInit(a)},t.prototype.mergeOption=function(r){var n=T5(r);Ur(this.option,r,!0),Ur(this.settledOption,n,!0),this._doInit(n)},t.prototype._doInit=function(r){var n=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var i=this.settledOption;Te([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(n[a[0]]=i[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var r=this.get("orient",!0),n=this._targetAxisInfoMap=dr(),i=this._fillSpecifiedTargetAxis(n);i?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(r){var n=!1;return Te(S5,function(i){var a=this.getReferringComponents(Iu(i),gse);if(a.specified){n=!0;var o=new i2;Te(a.models,function(s){o.add(s.componentIndex)}),r.set(i,o)}},this),n},t.prototype._fillAutoTargetAxisByOrient=function(r,n){var i=this.ecModel,a=!0;if(a){var o=n==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});c(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(p){return p.get("orient",!0)===n}});c(s,"single")}function c(f,p){var v=f[0];if(v){var y=new i2;if(y.add(v.componentIndex),r.set(p,y),a=!1,p==="x"||p==="y"){var _=v.getReferringComponents("grid",$a).models[0];_&&Te(f,function(S){v.componentIndex!==S.componentIndex&&_===S.getReferringComponents("grid",$a).models[0]&&y.add(S.componentIndex)})}}}a&&Te(S5,function(f){if(a){var p=i.findComponents({mainType:Iu(f),filter:function(y){return y.get("type",!0)==="category"}});if(p[0]){var v=new i2;v.add(p[0].componentIndex),r.set(f,v),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(n){!r&&(r=n)},this),r==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(r){var n=this._rangePropMode,i=this.get("rangeMode");Te([["start","startValue"],["end","endValue"]],function(a,o){var s=r[a[0]]!=null,c=r[a[1]]!=null;s&&!c?n[o]="percent":!s&&c?n[o]="value":i?n[o]=i[o]:s&&(n[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(n,i){r==null&&(r=this.ecModel.getComponent(Iu(n),i))},this),r},t.prototype.eachTargetAxis=function(r,n){this._targetAxisInfoMap.each(function(i,a){Te(i.indexList,function(o){r.call(n,a,o)})})},t.prototype.getAxisProxy=function(r,n){var i=this.getAxisModel(r,n);if(i)return i.__dzAxisProxy},t.prototype.getAxisModel=function(r,n){var i=this._targetAxisInfoMap.get(r);if(i&&i.indexMap[n])return this.ecModel.getComponent(Iu(r),n)},t.prototype.setRawRange=function(r){var n=this.option,i=this.settledOption;Te([["start","startValue"],["end","endValue"]],function(a){(r[a[0]]!=null||r[a[1]]!=null)&&(n[a[0]]=i[a[0]]=r[a[0]],n[a[1]]=i[a[1]]=r[a[1]])},this),this._updateRangeUse(r)},t.prototype.setCalculatedRange=function(r){var n=this.option;Te(["start","startValue","end","endValue"],function(i){n[i]=r[i]})},t.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},t.prototype.getValueRange=function(r,n){if(r==null&&n==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(r,n).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var n,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),c=0;c<s.indexList.length;c++){var f=this.getAxisProxy(o,s.indexList[c]);if(f.hostedBy(this))return f;n||(n=f)}return n},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(xn);function T5(e){var t={};return Te(["start","end","startValue","endValue","throttle"],function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t}var Oge=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,a){this.dataZoomModel=r,this.ecModel=n,this.api=i},t.type="dataZoom",t}(ns);const Y8=Oge;var rd=Te,C5=Gm,zge=function(){function e(t,r,n,i){this._dimName=t,this._axisIndex=r,this.ecModel=i,this._dataZoomModel=n}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(r){if(kge(r)){var n=Iu(this._dimName),i=r.getReferringComponents(n,$a).models[0];i&&this._axisIndex===i.componentIndex&&t.push(r)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return Lr(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var r=this._dataExtent,n=this.getAxisModel(),i=n.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],c=[],f;rd(["start","end"],function(y,_){var S=t[y],E=t[y+"Value"];a[_]==="percent"?(S==null&&(S=o[_]),E=i.parse(na(S,o,r))):(f=!0,E=E==null?r[_]:i.parse(E),S=na(E,r,o)),c[_]=E==null||isNaN(E)?r[_]:E,s[_]=S==null||isNaN(S)?o[_]:S}),C5(c),C5(s);var p=this._minMaxSpan;f?v(c,s,r,o,!1):v(s,c,o,r,!0);function v(y,_,S,E,P){var I=P?"Span":"ValueSpan";Ub(0,y,S,"all",p["min"+I],p["max"+I]);for(var D=0;D<2;D++)_[D]=na(y[D],S,E,!0),P&&(_[D]=i.parse(_[D]))}return{valueWindow:c,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=Bge(this,this._dimName,r),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,r){if(t!==this._dataZoomModel)return;var n=this._dimName,i=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;rd(i,function(c){var f=c.getData(),p=f.mapDimensionsAll(n);if(p.length){if(a==="weakFilter"){var v=f.getStore(),y=Qt(p,function(_){return f.getDimensionIndex(_)},f);f.filterSelf(function(_){for(var S,E,P,I=0;I<p.length;I++){var D=v.get(y[I],_),L=!isNaN(D),B=D<o[0],U=D>o[1];if(L&&!B&&!U)return!0;L&&(P=!0),B&&(S=!0),U&&(E=!0)}return P&&S&&E})}else rd(p,function(_){if(a==="empty")c.setData(f=f.map(_,function(E){return s(E)?E:NaN}));else{var S={};S[_]=o,f.selectRange(S)}});rd(p,function(_){f.setApproximateExtent(o,_)})}});function s(c){return c>=o[0]&&c<=o[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},r=this._dataZoomModel,n=this._dataExtent;rd(["min","max"],function(i){var a=r.get(i+"Span"),o=r.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=na(n[0]+o,n,[0,100],!0):a!=null&&(o=na(a,[0,100],n,!0)-n[0]),t[i+"Span"]=a,t[i+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),r=this._percentWindow,n=this._valueWindow;if(r){var i=dF(n,[0,500]);i=Math.min(i,20);var a=t.axis.scale.rawExtentInfo;r[0]!==0&&a.setDeterminedMinMax("min",+n[0].toFixed(i)),r[1]!==100&&a.setDeterminedMinMax("max",+n[1].toFixed(i)),a.freeze()}},e}();function Bge(e,t,r){var n=[1/0,-1/0];rd(r,function(o){Qde(n,o.getData(),t)});var i=e.getAxisModel(),a=YN(i.axis.scale,i,n).calculate();return[a.min,a.max]}var Fge={getTargetSeries:function(e){function t(i){e.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var c=e.getComponent(Iu(o),s);i(o,s,c,a)})})}t(function(i,a,o,s){o.__dzAxisProxy=null});var r=[];t(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new zge(i,a,s,e),r.push(o.__dzAxisProxy))});var n=dr();return Te(r,function(i){Te(i.getTargetSeriesModels(),function(a){n.set(a.uid,a)})}),n},overallReset:function(e,t){e.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(n,i){r.getAxisProxy(n,i).reset(r)}),r.eachTargetAxis(function(n,i){r.getAxisProxy(n,i).filterData(r,t)})}),e.eachComponent("dataZoom",function(r){var n=r.findRepresentativeAxisProxy();if(n){var i=n.getDataPercentWindow(),a=n.getDataValueWindow();r.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};const $ge=Fge;function Nge(e){e.registerAction("dataZoom",function(t,r){var n=Rge(r,t);Te(n,function(i){i.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var A5=!1;function K8(e){A5||(A5=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,$ge),Nge(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Vge(e,t){var r=Lb(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new oi({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Hge=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(xn);const Uge=Hge;function J8(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function Q8(e){if(pr.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var e9=Q8(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jge=Q8(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function t9(e,t){if(!e)return t;t=D$(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Gge(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Wge=t9(jge,"transition"),cE=t9(e9,"transform"),qge="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(pr.transform3dSupported?"will-change:transform;":"");function Zge(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Xge(e,t,r){if(!Wt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=Ah(t);var a=Zge(r),o=Math.max(Math.round(i)*1.5,6),s="",c=cE+":",f;Wr(["left","right"],a)>-1?(s+="top:50%",c+="translateY(-50%) rotate("+(f=a==="left"?-225:-45)+"deg)"):(s+="left:50%",c+="translateX(-50%) rotate("+(f=a==="top"?225:45)+"deg)");var p=f*Math.PI/180,v=o+i,y=v*Math.abs(Math.cos(p))+v*Math.abs(Math.sin(p)),_=Math.round(((y-Math.SQRT2*i)/2+Math.SQRT2*i-(y-v)/2)*100)/100;s+=";"+a+":-"+_+"px";var S=t+" solid "+i+"px;",E=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+c+";","border-bottom:"+S,"border-right:"+S,"background-color:"+n+";"];return'<div style="'+E.join("")+'"></div>'}function Yge(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=pr.transformSupported?","+cE+n:",left"+n+",top"+n),Wge+":"+i}function M5(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!pr.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var a=pr.transform3dSupported,o="translate"+(a?"3d":"")+"("+n+","+i+(a?",0":"")+")";return r?"top:0;left:0;"+cE+":"+o+";":[["top",0],["left",0],[e9,o]]}function Kge(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,o=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&a&&t.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),Te(["decoration","align"],function(c){var f=e.get(c);f&&t.push("text-"+c+":"+f)}),t.join(";")}function Jge(e,t,r){var n=[],i=e.get("transitionDuration"),a=e.get("backgroundColor"),o=e.get("shadowBlur"),s=e.get("shadowColor"),c=e.get("shadowOffsetX"),f=e.get("shadowOffsetY"),p=e.getModel("textStyle"),v=nN(e,"html"),y=c+"px "+f+"px "+o+"px "+s;return n.push("box-shadow:"+y),t&&i&&n.push(Yge(i,r)),a&&n.push("background-color:"+a),Te(["width","color","radius"],function(_){var S="border-"+_,E=D$(S),P=e.get(E);P!=null&&n.push(S+":"+P+(_==="color"?"":"px"))}),n.push(Kge(p)),v!=null&&n.push("padding:"+Lb(v).join("px ")+"px"),n.join(";")+";"}function E5(e,t,r,n,i){var a=t&&t.painter;if(r){var o=a&&a.getViewportRoot();o&&Nae(e,o,document.body,n,i)}else{e[0]=n,e[1]=i;var s=a&&a.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Qge=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,pr.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=r.getZr(),o=this._appendToBody=n&&n.appendToBody;E5(this._styleCoord,a,o,r.getWidth()/2,r.getHeight()/2),o?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(c){if(c=c||window.event,!s._enterable){var f=a.handler,p=a.painter.getViewportRoot();yo(p,c,!0),f.dispatch("mousemove",c)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Gge(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,a=this._styleCoord;n.innerHTML?i.cssText=qge+Jge(t,!this._firstShow,this._longHide)+M5(a[0],a[1],!0)+("border-color:"+Ah(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,a){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(Wt(a)&&n.get("trigger")==="item"&&!J8(n)&&(s=Xge(n,i,a)),Wt(t))o.innerHTML=t+s;else if(t){o.innerHTML="",Ft(t)||(t=[t]);for(var c=0;c<t.length;c++)t1(t[c])&&t[c].parentNode!==o&&o.appendChild(t[c]);if(s&&o.childNodes.length){var f=document.createElement("div");f.innerHTML=s,o.appendChild(f)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(E5(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,a=M5(n[0],n[1]);Te(a,function(o){i[o[0]]=o[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",pr.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(vr(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const eye=Qge;var tye=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),I5(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,a){var o=this;or(t)&&Ba(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new ca({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:nN(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),Te(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(f){o.el.style[f]=n.get(f)}),Te(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(f){o.el.style[f]=s.get(f)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=P5(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;I5(i,this._zr,t,r),t=i[0],r=i[1];var a=n.style,o=_u(a.borderWidth||0),s=P5(a);n.x=t+o+s.left,n.y=r+o+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(vr(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function _u(e){return Math.max(0,e)}function P5(e){var t=_u(e.shadowBlur||0),r=_u(e.shadowOffsetX||0),n=_u(e.shadowOffsetY||0);return{left:_u(t-r),right:_u(t+r),top:_u(t-n),bottom:_u(t+n)}}function I5(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var rye=new oi({shape:{x:-1,y:-1,width:2,height:2}}),nye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(pr.node||!n.getDom())){var i=r.getComponent("tooltip"),a=this._renderMode=_se(i.get("renderMode"));this._tooltipContent=a==="richText"?new tye(n):new eye(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(pr.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i;var a=this._tooltipContent;a.update(r),a.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?zb(this,"_updatePosition",50,"fixRate"):x1(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");G8("itemTooltip",this._api,vr(function(i,a,o){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,a=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(r,n,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,a){if(!(a.from===this.uid||pr.node||!i.getDom())){var o=D5(a,i);this._ticket="";var s=a.dataByCoordSys,c=sye(a,n,i);if(c){var f=c.el.getBoundingRect().clone();f.applyTransform(c.el.transform),this._tryShow({offsetX:f.x+f.width/2,offsetY:f.y+f.height/2,target:c.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var p=rye;p.x=a.x,p.y=a.y,p.update(),an(p).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:p},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,a))return;var v=W8(a,n),y=v.point[0],_=v.point[1];y!=null&&_!=null&&this._tryShow({offsetX:y,offsetY:_,target:v.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},t.prototype.manuallyHideTip=function(r,n,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(D5(a,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,a){var o=a.seriesIndex,s=a.dataIndex,c=n.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||c==null)){var f=n.getSeriesByIndex(o);if(f){var p=f.getData(),v=zm([p.getItemModel(s),f,(f.coordinateSystem||{}).model],this._tooltipModel);if(v.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,a=this._tooltipModel;if(a){this._lastX=r.offsetX,this._lastY=r.offsetY;var o=r.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,r);else if(i){this._lastDataByCoordSys=null;var s,c;Xm(i,function(f){if(an(f).dataIndex!=null)return s=f,!0;if(an(f).tooltipConfig!=null)return c=f,!0},!0),s?this._showSeriesItemTooltip(r,s,n):c?this._showComponentItemTooltip(r,c,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=vr(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,a=this._tooltipModel,o=[n.offsetX,n.offsetY],s=zm([n.tooltipOption],a),c=this._renderMode,f=[],p=Uu("section",{blocks:[],noHeader:!0}),v=[],y=new AS;Te(r,function(D){Te(D.dataByAxis,function(L){var B=i.getComponent(L.axisDim+"Axis",L.axisIndex),U=L.value;if(!(!B||U==null)){var V=U8(U,B.axis,i,L.seriesDataIndices,L.valueLabelOpt),N=Uu("section",{header:V,noHeader:!Es(V),sortBlocks:!0,blocks:[]});p.blocks.push(N),Te(L.seriesDataIndices,function(G){var Y=i.getSeriesByIndex(G.seriesIndex),ee=G.dataIndexInside,J=Y.getDataParams(ee);if(!(J.dataIndex<0)){J.axisDim=L.axisDim,J.axisIndex=L.axisIndex,J.axisType=L.axisType,J.axisId=L.axisId,J.axisValue=YM(B.axis,{value:U}),J.axisValueLabel=V,J.marker=y.makeTooltipMarker("item",Ah(J.color),c);var X=PR(Y.formatTooltip(ee,!0,null)),ne=X.frag;if(ne){var we=zm([Y],a).get("valueFormatter");N.blocks.push(we?At({valueFormatter:we},ne):ne)}X.text&&v.push(X.text),f.push(J)}})}})}),p.blocks.reverse(),v.reverse();var _=n.position,S=s.get("order"),E=RR(p,y,c,S,i.get("useUTC"),s.get("textStyle"));E&&v.unshift(E);var P=c==="richText"?`

`:"<br/>",I=v.join(P);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,f)?this._updatePosition(s,_,o[0],o[1],this._tooltipContent,f):this._showTooltipContent(s,I,f,Math.random()+"",o[0],o[1],_,null,y)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var a=this._ecModel,o=an(n),s=o.seriesIndex,c=a.getSeriesByIndex(s),f=o.dataModel||c,p=o.dataIndex,v=o.dataType,y=f.getData(v),_=this._renderMode,S=r.positionDefault,E=zm([y.getItemModel(p),f,c&&(c.coordinateSystem||{}).model],this._tooltipModel,S?{position:S}:null),P=E.get("trigger");if(!(P!=null&&P!=="item")){var I=f.getDataParams(p,v),D=new AS;I.marker=D.makeTooltipMarker("item",Ah(I.color),_);var L=PR(f.formatTooltip(p,!1,v)),B=E.get("order"),U=E.get("valueFormatter"),V=L.frag,N=V?RR(U?At({valueFormatter:U},V):V,D,_,B,a.get("useUTC"),E.get("textStyle")):L.text,G="item_"+f.name+"_"+p;this._showOrMove(E,function(){this._showTooltipContent(E,N,I,G,r.offsetX,r.offsetY,r.position,r.target,D)}),i({type:"showTip",dataIndexInside:p,dataIndex:y.getRawIndex(p),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var a=an(n),o=a.tooltipConfig,s=o.option||{};if(Wt(s)){var c=s;s={content:c,formatter:c}}var f=[s],p=this._ecModel.getComponent(a.componentMainType,a.componentIndex);p&&f.push(p),f.push({formatter:s.content});var v=r.positionDefault,y=zm(f,this._tooltipModel,v?{position:v}:null),_=y.get("content"),S=Math.random()+"",E=new AS;this._showOrMove(y,function(){var P=Lr(y.get("formatterParams")||{});this._showTooltipContent(y,_,P,S,r.offsetX,r.offsetY,r.position,n,E)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,a,o,s,c,f,p){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var v=this._tooltipContent;v.setEnterable(r.get("enterable"));var y=r.get("formatter");c=c||r.get("position");var _=n,S=this._getNearestPoint([o,s],i,r.get("trigger"),r.get("borderColor")),E=S.color;if(y)if(Wt(y)){var P=r.ecModel.get("useUTC"),I=Ft(i)?i[0]:i,D=I&&I.axisType&&I.axisType.indexOf("time")>=0;_=y,D&&(_=Mb(I.axisValue,_,P)),_=L$(_,i,!0)}else if(ir(y)){var L=vr(function(B,U){B===this._ticket&&(v.setContent(U,p,r,E,c),this._updatePosition(r,c,o,s,v,i,f))},this);this._ticket=a,_=y(i,a,L)}else _=y;v.setContent(_,p,r,E,c),v.show(r,E),this._updatePosition(r,c,o,s,v,i,f)}},t.prototype._getNearestPoint=function(r,n,i,a){if(i==="axis"||Ft(n))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Ft(n))return{color:a||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,a,o,s,c){var f=this._api.getWidth(),p=this._api.getHeight();n=n||r.get("position");var v=o.getSize(),y=r.get("align"),_=r.get("verticalAlign"),S=c&&c.getBoundingRect().clone();if(c&&S.applyTransform(c.transform),ir(n)&&(n=n([i,a],s,o.el,S,{viewSize:[f,p],contentSize:v.slice()})),Ft(n))i=pi(n[0],f),a=pi(n[1],p);else if(or(n)){var E=n;E.width=v[0],E.height=v[1];var P=Vd(E,{width:f,height:p});i=P.x,a=P.y,y=null,_=null}else if(Wt(n)&&c){var I=oye(n,S,v,r.get("borderWidth"));i=I[0],a=I[1]}else{var I=iye(i,a,o,f,p,y?null:20,_?null:20);i=I[0],a=I[1]}if(y&&(i-=L5(y)?v[0]/2:y==="right"?v[0]:0),_&&(a-=L5(_)?v[1]/2:_==="bottom"?v[1]:0),J8(r)){var I=aye(i,a,o,f,p);i=I[0],a=I[1]}o.moveTo(i,a)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===r.length;return o&&Te(i,function(s,c){var f=s.dataByAxis||[],p=r[c]||{},v=p.dataByAxis||[];o=o&&f.length===v.length,o&&Te(f,function(y,_){var S=v[_]||{},E=y.seriesDataIndices||[],P=S.seriesDataIndices||[];o=o&&y.value===S.value&&y.axisType===S.axisType&&y.axisId===S.axisId&&E.length===P.length,o&&Te(E,function(I,D){var L=P[D];o=o&&I.seriesIndex===L.seriesIndex&&I.dataIndex===L.dataIndex}),a&&Te(y.seriesDataIndices,function(I){var D=I.seriesIndex,L=n[D],B=a[D];L&&B&&B.data!==L.data&&(o=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!o},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){pr.node||!n.getDom()||(x1(this,"_updatePosition"),this._tooltipContent.dispose(),dC("itemTooltip",n))},t.type="tooltip",t}(ns);function zm(e,t,r){var n=t.ecModel,i;r?(i=new sa(r,n,n),i=new sa(t.option,i,n)):i=t;for(var a=e.length-1;a>=0;a--){var o=e[a];o&&(o instanceof sa&&(o=o.get("tooltip",!0)),Wt(o)&&(o={formatter:o}),o&&(i=new sa(o,i,n)))}return i}function D5(e,t){return e.dispatchAction||vr(t.dispatchAction,t)}function iye(e,t,r,n,i,a,o){var s=r.getSize(),c=s[0],f=s[1];return a!=null&&(e+c+a+2>n?e-=c+a:e+=a),o!=null&&(t+f+o>i?t-=f+o:t+=o),[e,t]}function aye(e,t,r,n,i){var a=r.getSize(),o=a[0],s=a[1];return e=Math.min(e+o,n)-o,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function oye(e,t,r,n){var i=r[0],a=r[1],o=Math.ceil(Math.SQRT2*n)+8,s=0,c=0,f=t.width,p=t.height;switch(e){case"inside":s=t.x+f/2-i/2,c=t.y+p/2-a/2;break;case"top":s=t.x+f/2-i/2,c=t.y-a-o;break;case"bottom":s=t.x+f/2-i/2,c=t.y+p+o;break;case"left":s=t.x-i-o,c=t.y+p/2-a/2;break;case"right":s=t.x+f+o,c=t.y+p/2-a/2}return[s,c]}function L5(e){return e==="center"||e==="middle"}function sye(e,t,r){var n=oM(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var a=Rg(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=r.getViewOfComponentModel(o),c;if(s.group.traverse(function(f){var p=an(f).tooltipConfig;if(p&&p.name===e.name)return c=f,!0}),c)return{componentMainType:i,componentIndex:o.componentIndex,el:c}}}}const lye=nye;function r9(e){Ro(q8),e.registerComponentModel(Uge),e.registerComponentView(lye),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},la),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},la)}var uye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(xn),cye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var a=this.group,o=r.getModel("textStyle"),s=r.getModel("subtextStyle"),c=r.get("textAlign"),f=Er(r.get("textBaseline"),r.get("textVerticalAlign")),p=new ca({style:Dl(o,{text:r.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),v=p.getBoundingRect(),y=r.get("subtext"),_=new ca({style:Dl(s,{text:y,fill:s.getTextColor(),y:v.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),S=r.get("link"),E=r.get("sublink"),P=r.get("triggerEvent",!0);p.silent=!S&&!P,_.silent=!E&&!P,S&&p.on("click",function(){hR(S,"_"+r.get("target"))}),E&&_.on("click",function(){hR(E,"_"+r.get("subtarget"))}),an(p).eventData=an(_).eventData=P?{componentType:"title",componentIndex:r.componentIndex}:null,a.add(p),y&&a.add(_);var I=a.getBoundingRect(),D=r.getBoxLayoutParams();D.width=I.width,D.height=I.height;var L=Vd(D,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));c||(c=r.get("left")||r.get("right"),c==="middle"&&(c="center"),c==="right"?L.x+=L.width:c==="center"&&(L.x+=L.width/2)),f||(f=r.get("top")||r.get("bottom"),f==="center"&&(f="middle"),f==="bottom"?L.y+=L.height:f==="middle"&&(L.y+=L.height/2),f=f||"top"),a.x=L.x,a.y=L.y,a.markRedraw();var B={align:c,verticalAlign:f};p.setStyle(B),_.setStyle(B),I=a.getBoundingRect();var U=L.margin,V=r.getItemStyle(["color","opacity"]);V.fill=r.get("backgroundColor");var N=new oi({shape:{x:I.x-U[3],y:I.y-U[0],width:I.width+U[1]+U[3],height:I.height+U[0]+U[2],r:r.get("borderRadius")},style:V,subPixelOptimize:!0,silent:!0});a.add(N)}},t.type="title",t}(ns);function n9(e){e.registerComponentModel(uye),e.registerComponentView(cye)}function hye(e,t){if(!e)return!1;for(var r=Ft(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function Q_(e){IT(e,"label",["show"])}var e0=Gn(),i9=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(pr.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,a){var o=this.mainType;i||n.eachSeries(function(s){var c=s.get(this.mainType,!0),f=e0(s)[o];if(!c||!c.data){e0(s)[o]=null;return}f?f._mergeOption(c,n,!0):(a&&Q_(c),Te(c.data,function(p){p instanceof Array?(Q_(p[0]),Q_(p[1])):Q_(p)}),f=this.createMarkerModelFromSeries(c,this,n),At(f,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),f.__hostSeries=s),e0(s)[o]=f},this)},t.prototype.formatTooltip=function(r,n,i){var a=this.getData(),o=this.getRawValue(r),s=a.getName(r);return Uu("section",{header:this.name,blocks:[Uu("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return e0(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(xn);as(i9,Z$.prototype);const D1=i9;var fye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(D1);const dye=fye;function pye(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function mye(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function t0(e,t,r,n,i,a){var o=[],s=jd(t,n),c=s?t.getCalculationInfo("stackResultDimension"):n,f=a9(t,c,e),p=t.indicesOfNearest(c,f)[0];o[i]=t.get(r,p),o[a]=t.get(c,p);var v=t.get(n,p),y=Ps(t.get(n,p));return y=Math.min(y,20),y>=0&&(o[a]=+o[a].toFixed(y)),[o,v]}var a2={min:wn(t0,"min"),max:wn(t0,"max"),average:wn(t0,"average"),median:wn(t0,"median")};function vye(e,t){if(t){var r=e.getData(),n=e.coordinateSystem,i=n&&n.dimensions;if(!mye(t)&&!Ft(t.coord)&&Ft(i)){var a=gye(t,r,n,e);if(t=Lr(t),t.type&&a2[t.type]&&a.baseAxis&&a.valueAxis){var o=Wr(i,a.baseAxis.dim),s=Wr(i,a.valueAxis.dim),c=a2[t.type](r,a.baseDataDim,a.valueDataDim,o,s);t.coord=c[0],t.value=c[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!Ft(i))t.coord=[];else for(var f=t.coord,p=0;p<2;p++)a2[f[p]]&&(f[p]=a9(r,r.mapDimension(i[p]),f[p]));return t}}function gye(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(yye(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function yye(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function _ye(e,t){return e&&e.containData&&t.coord&&!pye(t)?e.containData(t.coord):!0}function bye(e,t){return e?function(r,n,i,a){var o=a<2?r.coord&&r.coord[a]:r.value;return Td(o,t[a])}:function(r,n,i,a){return Td(r.value,t[a])}}function a9(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(a,o){isNaN(a)||(n+=a,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var o2=Gn(),xye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=dr()},t.prototype.render=function(r,n,i){var a=this,o=this.markerGroupMap;o.each(function(s){o2(s).keep=!1}),n.eachSeries(function(s){var c=D1.getMarkerModelFromSeries(s,a.type);c&&a.renderSeries(s,c,n,i)}),o.each(function(s){!o2(s).keep&&a.group.remove(s.group)})},t.prototype.markKeep=function(r){o2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;Te(r,function(a){var o=D1.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(c){c&&(n?NF(c):fM(c))})}})},t.type="marker",t}(ns);const wye=xye;function k5(e,t,r){var n=t.coordinateSystem;e.each(function(i){var a=e.getItemModel(i),o,s=pi(a.get("x"),r.getWidth()),c=pi(a.get("y"),r.getHeight());if(!isNaN(s)&&!isNaN(c))o=[s,c];else if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(n){var f=e.get(n.dimensions[0],i),p=e.get(n.dimensions[1],i);o=n.dataToPoint([f,p])}isNaN(s)||(o[0]=s),isNaN(c)||(o[1]=c),e.setItemLayout(i,o)})}var Sye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(a){var o=D1.getMarkerModelFromSeries(a,"markPoint");o&&(k5(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(r,n,i,a){var o=r.coordinateSystem,s=r.id,c=r.getData(),f=this.markerGroupMap,p=f.get(s)||f.set(s,new aE),v=Tye(o,r,n);n.setData(v),k5(n.getData(),r,a),v.each(function(y){var _=v.getItemModel(y),S=_.getShallow("symbol"),E=_.getShallow("symbolSize"),P=_.getShallow("symbolRotate"),I=_.getShallow("symbolOffset"),D=_.getShallow("symbolKeepAspect");if(ir(S)||ir(E)||ir(P)||ir(I)){var L=n.getRawValue(y),B=n.getDataParams(y);ir(S)&&(S=S(L,B)),ir(E)&&(E=E(L,B)),ir(P)&&(P=P(L,B)),ir(I)&&(I=I(L,B))}var U=_.getModel("itemStyle").getItemStyle(),V=fN(c,"color");U.fill||(U.fill=V),v.setItemVisual(y,{symbol:S,symbolSize:E,symbolRotate:P,symbolOffset:I,symbolKeepAspect:D,style:U})}),p.updateData(v),this.group.add(p.group),v.eachItemGraphicEl(function(y){y.traverse(function(_){an(_).dataModel=n})}),this.markKeep(p),p.group.silent=n.get("silent")||r.get("silent")},t.type="markPoint",t}(wye);function Tye(e,t,r){var n;e?n=Qt(e&&e.dimensions,function(s){var c=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return At(At({},c),{name:s,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new ZM(n,r),a=Qt(r.get("data"),wn(vye,t));e&&(a=Fi(a,wn(_ye,e)));var o=bye(!!e,n);return i.initData(a,null,o),i}const Cye=Sye;function Aye(e){e.registerComponentModel(dye),e.registerComponentView(Cye),e.registerPreprocessor(function(t){hye(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var Mye=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Eye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),Ft(n)&&Te(n,function(a,o){Wt(a)&&(a={type:a}),n[o]=Ur(a,Mye(i,a.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var a=r[i].get("name");if(this.isSelected(a)){this.select(a),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(c){var f=c.name;i.push(f);var p;if(c.legendVisualProvider){var v=c.legendVisualProvider,y=v.getAllNames();r.isSeriesFiltered(c)||(i=i.concat(y)),y.length?n=n.concat(y):p=!0}else p=!0;p&&aM(c)&&n.push(c.name)}),this._availableNames=i;var a=this.get("data")||n,o=dr(),s=Qt(a,function(c){return(Wt(c)||Tn(c))&&(c={name:c}),o.get(c.name)?null:(o.set(c.name,!0),new sa(c,this,this.ecModel))},this);this._data=Fi(s,function(c){return!!c})},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;Te(a,function(o){n[o.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;Te(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;Te(r,function(i){var a=i.get("name",!0);n.hasOwnProperty(a)||(n[a]=!0),n[a]=!n[a]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&Wr(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(xn);const pC=Eye;var Yf=wn,mC=Te,r0=Rn,Pye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new r0),this.group.add(this._selectorGroup=new r0),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var o=r.get("align"),s=r.get("orient");(!o||o==="auto")&&(o=r.get("left")==="right"&&s==="vertical"?"right":"left");var c=r.get("selector",!0),f=r.get("selectorPosition",!0);c&&(!f||f==="auto")&&(f=s==="horizontal"?"end":"start"),this.renderInner(o,r,n,i,c,s,f);var p=r.getBoxLayoutParams(),v={width:i.getWidth(),height:i.getHeight()},y=r.get("padding"),_=Vd(p,v,y),S=this.layoutInner(r,o,_,a,c,f),E=Vd(rn({width:S.width,height:S.height},p),v,y);this.group.x=E.x-S.x,this.group.y=E.y-S.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Vge(S,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,a,o,s,c){var f=this.getContentGroup(),p=dr(),v=n.get("selectedMode"),y=[];i.eachRawSeries(function(_){!_.get("legendHoverLink")&&y.push(_.id)}),mC(n.getData(),function(_,S){var E=_.get("name");if(!this.newlineDisabled&&(E===""||E===`
`)){var P=new r0;P.newline=!0,f.add(P);return}var I=i.getSeriesByName(E)[0];if(!p.get(E))if(I){var D=I.getData(),L=D.getVisual("legendLineStyle")||{},B=D.getVisual("legendIcon"),U=D.getVisual("style"),V=this._createItem(I,E,S,_,n,r,L,U,B,v,a);V.on("click",Yf(R5,E,null,a,y)).on("mouseover",Yf(vC,I.name,null,a,y)).on("mouseout",Yf(gC,I.name,null,a,y)),p.set(E,!0)}else i.eachRawSeries(function(N){if(!p.get(E)&&N.legendVisualProvider){var G=N.legendVisualProvider;if(!G.containName(E))return;var Y=G.indexOfName(E),ee=G.getItemVisual(Y,"style"),J=G.getItemVisual(Y,"legendIcon"),X=Ls(ee.fill);X&&X[3]===0&&(X[3]=.2,ee=At(At({},ee),{fill:pb(X,"rgba")}));var ne=this._createItem(N,E,S,_,n,r,{},ee,J,v,a);ne.on("click",Yf(R5,null,E,a,y)).on("mouseover",Yf(vC,null,E,a,y)).on("mouseout",Yf(gC,null,E,a,y)),p.set(E,!0)}},this)},this),o&&this._createSelector(o,n,a,s,c)},t.prototype._createSelector=function(r,n,i,a,o){var s=this.getSelectorGroup();mC(r,function(f){var p=f.type,v=new ca({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:p==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(v);var y=n.getModel("selectorLabel"),_=n.getModel(["emphasis","selectorLabel"]);Cb(v,{normal:y,emphasis:_},{defaultText:f.title}),p1(v)})},t.prototype._createItem=function(r,n,i,a,o,s,c,f,p,v,y){var _=r.visualDrawType,S=o.get("itemWidth"),E=o.get("itemHeight"),P=o.isSelected(n),I=a.get("symbolRotate"),D=a.get("symbolKeepAspect"),L=a.get("icon");p=L||p||"roundRect";var B=Iye(p,a,c,f,_,P,y),U=new r0,V=a.getModel("textStyle");if(ir(r.getLegendIcon)&&(!L||L==="inherit"))U.add(r.getLegendIcon({itemWidth:S,itemHeight:E,icon:p,iconRotate:I,itemStyle:B.itemStyle,lineStyle:B.lineStyle,symbolKeepAspect:D}));else{var N=L==="inherit"&&r.getData().getVisual("symbol")?I==="inherit"?r.getData().getVisual("symbolRotate"):I:0;U.add(Dye({itemWidth:S,itemHeight:E,icon:p,iconRotate:N,itemStyle:B.itemStyle,lineStyle:B.lineStyle,symbolKeepAspect:D}))}var G=s==="left"?S+5:-5,Y=s,ee=o.get("formatter"),J=n;Wt(ee)&&ee?J=ee.replace("{name}",n??""):ir(ee)&&(J=ee(n));var X=P?V.getTextColor():a.get("inactiveColor");U.add(new ca({style:Dl(V,{text:J,x:G,y:E/2,fill:X,align:Y,verticalAlign:"middle"},{inheritColor:X})}));var ne=new oi({shape:U.getBoundingRect(),invisible:!0}),we=a.getModel("tooltip");return we.get("show")&&wM({el:ne,componentModel:o,itemName:n,itemTooltipOption:we.option}),U.add(ne),U.eachChild(function(fe){fe.silent=!0}),ne.silent=!v,this.getContentGroup().add(U),p1(U),U.__legendDataIndex=i,U},t.prototype.layoutInner=function(r,n,i,a,o,s){var c=this.getContentGroup(),f=this.getSelectorGroup();xv(r.get("orient"),c,r.get("itemGap"),i.width,i.height);var p=c.getBoundingRect(),v=[-p.x,-p.y];if(f.markRedraw(),c.markRedraw(),o){xv("horizontal",f,r.get("selectorItemGap",!0));var y=f.getBoundingRect(),_=[-y.x,-y.y],S=r.get("selectorButtonGap",!0),E=r.getOrient().index,P=E===0?"width":"height",I=E===0?"height":"width",D=E===0?"y":"x";s==="end"?_[E]+=p[P]+S:v[E]+=y[P]+S,_[1-E]+=p[I]/2-y[I]/2,f.x=_[0],f.y=_[1],c.x=v[0],c.y=v[1];var L={x:0,y:0};return L[P]=p[P]+S+y[P],L[I]=Math.max(p[I],y[I]),L[D]=Math.min(0,y[D]+_[1-E]),L}else return c.x=v[0],c.y=v[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ns);function Iye(e,t,r,n,i,a,o){function s(P,I){P.lineWidth==="auto"&&(P.lineWidth=I.lineWidth>0?2:0),mC(P,function(D,L){P[L]==="inherit"&&(P[L]=I[L])})}var c=t.getModel("itemStyle"),f=c.getItemStyle(),p=e.lastIndexOf("empty",0)===0?"fill":"stroke",v=c.getShallow("decal");f.decal=!v||v==="inherit"?n.decal:XT(v,o),f.fill==="inherit"&&(f.fill=n[i]),f.stroke==="inherit"&&(f.stroke=n[p]),f.opacity==="inherit"&&(f.opacity=(i==="fill"?n:r).opacity),s(f,n);var y=t.getModel("lineStyle"),_=y.getLineStyle();if(s(_,r),f.fill==="auto"&&(f.fill=n.fill),f.stroke==="auto"&&(f.stroke=n.fill),_.stroke==="auto"&&(_.stroke=n.fill),!a){var S=t.get("inactiveBorderWidth"),E=f[p];f.lineWidth=S==="auto"?n.lineWidth>0&&E?2:0:f.lineWidth,f.fill=t.get("inactiveColor"),f.stroke=t.get("inactiveBorderColor"),_.stroke=y.get("inactiveColor"),_.lineWidth=y.get("inactiveWidth")}return{itemStyle:f,lineStyle:_}}function Dye(e){var t=e.icon||"roundRect",r=is(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function R5(e,t,r,n){gC(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e??t}),vC(e,t,r,n)}function o9(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function vC(e,t,r,n){o9(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function gC(e,t,r,n){o9(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const s9=Pye;function Lye(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function Bm(e,t,r){var n={},i=e==="toggleSelected",a;return r.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?o[e]():(o[e](t.name),a=o.isSelected(t.name));var s=o.getData();Te(s,function(c){var f=c.get("name");if(!(f===`
`||f==="")){var p=o.isSelected(f);n.hasOwnProperty(f)?n[f]=n[f]&&p:n[f]=p}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function kye(e){e.registerAction("legendToggleSelect","legendselectchanged",wn(Bm,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",wn(Bm,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",wn(Bm,"inverseSelect")),e.registerAction("legendSelect","legendselected",wn(Bm,"select")),e.registerAction("legendUnSelect","legendunselected",wn(Bm,"unSelect"))}function l9(e){e.registerComponentModel(pC),e.registerComponentView(s9),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,Lye),e.registerSubTypeDefaulter("legend",function(){return"plain"}),kye(e)}var Rye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var a=Fg(r);e.prototype.init.call(this,r,n,i),O5(this,r,a)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),O5(this,this.option,r)},t.type="legend.scroll",t.defaultOption=SM(pC.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(pC);function O5(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,Hd(t,r,{type:"box",ignoreSize:!!i})}const Oye=Rye;var z5=Rn,s2=["width","height"],l2=["x","y"],zye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new z5),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new z5)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,a,o,s,c){var f=this;e.prototype.renderInner.call(this,r,n,i,a,o,s,c);var p=this._controllerGroup,v=n.get("pageIconSize",!0),y=Ft(v)?v:[v,v];S("pagePrev",0);var _=n.getModel("pageTextStyle");p.add(new ca({name:"pageText",style:{text:"xx/xx",fill:_.getTextColor(),font:_.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),S("pageNext",1);function S(E,P){var I=E+"DataIndex",D=xM(n.get("pageIcons",!0)[n.getOrient().name][P],{onclick:vr(f._pageGo,f,I,n,a)},{x:-y[0]/2,y:-y[1]/2,width:y[0],height:y[1]});D.name=E,p.add(D)}},t.prototype.layoutInner=function(r,n,i,a,o,s){var c=this.getSelectorGroup(),f=r.getOrient().index,p=s2[f],v=l2[f],y=s2[1-f],_=l2[1-f];o&&xv("horizontal",c,r.get("selectorItemGap",!0));var S=r.get("selectorButtonGap",!0),E=c.getBoundingRect(),P=[-E.x,-E.y],I=Lr(i);o&&(I[p]=i[p]-E[p]-S);var D=this._layoutContentAndController(r,a,I,f,p,y,_,v);if(o){if(s==="end")P[f]+=D[p]+S;else{var L=E[p]+S;P[f]-=L,D[v]-=L}D[p]+=E[p]+S,P[1-f]+=D[_]+D[y]/2-E[y]/2,D[y]=Math.max(D[y],E[y]),D[_]=Math.min(D[_],E[_]+P[1-f]),c.x=P[0],c.y=P[1],c.markRedraw()}return D},t.prototype._layoutContentAndController=function(r,n,i,a,o,s,c,f){var p=this.getContentGroup(),v=this._containerGroup,y=this._controllerGroup;xv(r.get("orient"),p,r.get("itemGap"),a?i.width:null,a?null:i.height),xv("horizontal",y,r.get("pageButtonItemGap",!0));var _=p.getBoundingRect(),S=y.getBoundingRect(),E=this._showController=_[o]>i[o],P=[-_.x,-_.y];n||(P[a]=p[f]);var I=[0,0],D=[-S.x,-S.y],L=Er(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(E){var B=r.get("pageButtonPosition",!0);B==="end"?D[a]+=i[o]-S[o]:I[a]+=S[o]+L}D[1-a]+=_[s]/2-S[s]/2,p.setPosition(P),v.setPosition(I),y.setPosition(D);var U={x:0,y:0};if(U[o]=E?i[o]:_[o],U[s]=Math.max(_[s],S[s]),U[c]=Math.min(0,S[c]+D[1-a]),v.__rectSize=i[o],E){var V={x:0,y:0};V[o]=Math.max(i[o]-S[o]-L,0),V[s]=U[s],v.setClipPath(new oi({shape:V})),v.__rectSize=V[o]}else y.eachChild(function(G){G.attr({invisible:!0,silent:!0})});var N=this._getPageInfo(r);return N.pageIndex!=null&&Fs(p,{x:N.contentPosition[0],y:N.contentPosition[1]},E?r:null),this._updatePageInfoView(r,N),U},t.prototype._pageGo=function(r,n,i){var a=this._getPageInfo(n)[r];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;Te(["pagePrev","pageNext"],function(p){var v=p+"DataIndex",y=n[v]!=null,_=i.childOfName(p);_&&(_.setStyle("fill",y?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),_.cursor=y?"pointer":"default")});var a=i.childOfName("pageText"),o=r.get("pageFormatter"),s=n.pageIndex,c=s!=null?s+1:0,f=n.pageCount;a&&o&&a.setStyle("text",Wt(o)?o.replace("{current}",c==null?"":c+"").replace("{total}",f==null?"":f+""):o({current:c,total:f}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=r.getOrient().index,s=s2[o],c=l2[o],f=this._findTargetItemIndex(n),p=i.children(),v=p[f],y=p.length,_=y?1:0,S={contentPosition:[i.x,i.y],pageCount:_,pageIndex:_-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!v)return S;var E=B(v);S.contentPosition[o]=-E.s;for(var P=f+1,I=E,D=E,L=null;P<=y;++P)L=B(p[P]),(!L&&D.e>I.s+a||L&&!U(L,I.s))&&(D.i>I.i?I=D:I=L,I&&(S.pageNextDataIndex==null&&(S.pageNextDataIndex=I.i),++S.pageCount)),D=L;for(var P=f-1,I=E,D=E,L=null;P>=-1;--P)L=B(p[P]),(!L||!U(D,L.s))&&I.i<D.i&&(D=I,S.pagePrevDataIndex==null&&(S.pagePrevDataIndex=I.i),++S.pageCount,++S.pageIndex),I=L;return S;function B(V){if(V){var N=V.getBoundingRect(),G=N[c]+V[c];return{s:G,e:G+N[s],i:V.__legendDataIndex}}}function U(V,N){return V.e>=N&&V.s<=N+a}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var c=o.__legendDataIndex;a==null&&c!=null&&(a=s),c===r&&(n=s)}),n??a},t.type="legend.scroll",t}(s9);const Bye=zye;function Fye(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function $ye(e){Ro(l9),e.registerComponentModel(Oye),e.registerComponentView(Bye),Fye(e)}function Nye(e){Ro(l9),Ro($ye)}var Vye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.inside",t.defaultOption=SM(I1.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(I1);const Hye=Vye;var hE=Gn();function Uye(e,t,r){hE(e).coordSysRecordMap.each(function(n){var i=n.dataZoomInfoMap.get(t.uid);i&&(i.getRange=r)})}function jye(e,t){for(var r=hE(e).coordSysRecordMap,n=r.keys(),i=0;i<n.length;i++){var a=n[i],o=r.get(a),s=o.dataZoomInfoMap;if(s){var c=t.uid,f=s.get(c);f&&(s.removeKey(c),s.keys().length||u9(r,o))}}}function u9(e,t){if(t){e.removeKey(t.model.uid);var r=t.controller;r&&r.dispose()}}function Gye(e,t){var r={model:t,containsPoint:wn(qye,t),dispatchAction:wn(Wye,e),dataZoomInfoMap:null,controller:null},n=r.controller=new Rve(e.getZr());return Te(["pan","zoom","scrollMove"],function(i){n.on(i,function(a){var o=[];r.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var c=(s.getRange||{})[i],f=c&&c(s.dzReferCoordSysInfo,r.model.mainType,r.controller,a);!s.model.get("disabled",!0)&&f&&o.push({dataZoomId:s.model.id,start:f[0],end:f[1]})}}),o.length&&r.dispatchAction(o)})}),r}function Wye(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function qye(e,t,r,n){return e.coordinateSystem.containPoint([r,n])}function Zye(e){var t,r="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;n[r+s]>n[r+t]&&(t=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function Xye(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,r){var n=hE(r),i=n.coordSysRecordMap||(n.coordSysRecordMap=dr());i.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=X8(a);Te(o.infoList,function(s){var c=s.model.uid,f=i.get(c)||i.set(c,Gye(r,s.model)),p=f.dataZoomInfoMap||(f.dataZoomInfoMap=dr());p.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,c=a.dataZoomInfoMap;if(c){var f=c.keys()[0];f!=null&&(s=c.get(f))}if(!s){u9(i,a);return}var p=Zye(c);o.enable(p.controlType,p.opt),o.setPointerChecker(a.containsPoint),zb(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Yye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return t.prototype.render=function(r,n,i){if(e.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),Uye(i,r,{pan:vr(u2.pan,this),zoom:vr(u2.zoom,this),scrollMove:vr(u2.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){jye(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(Y8),u2={zoom:function(e,t,r,n){var i=this.range,a=i.slice(),o=e.axisModels[0];if(o){var s=c2[t](null,[n.originX,n.originY],o,r,e),c=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],f=Math.max(1/n.scale,0);a[0]=(a[0]-c)*f+c,a[1]=(a[1]-c)*f+c;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Ub(0,a,[0,100],0,p.minSpan,p.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:B5(function(e,t,r,n,i,a){var o=c2[n]([a.oldX,a.oldY],[a.newX,a.newY],t,i,r);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength}),scrollMove:B5(function(e,t,r,n,i,a){var o=c2[n]([0,0],[a.scrollDelta,a.scrollDelta],t,i,r);return o.signal*(e[1]-e[0])*a.scrollDelta})};function B5(e){return function(t,r,n,i){var a=this.range,o=a.slice(),s=t.axisModels[0];if(s){var c=e(o,s,t,r,n,i);if(Ub(c,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var c2={grid:function(e,t,r,n,i){var a=r.axis,o={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],a.dim==="x"?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(e,t,r,n,i){var a=r.axis,o={},s=i.model.coordinateSystem,c=s.getRadiusAxis().getExtent(),f=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),r.mainType==="radiusAxis"?(o.pixel=t[0]-e[0],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=f[1]-f[0],o.pixelStart=f[0],o.signal=a.inverse?-1:1),o},singleAxis:function(e,t,r,n,i){var a=r.axis,o=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};const Kye=Yye;function Jye(e){K8(e),e.registerComponentModel(Hye),e.registerComponentView(Kye),Xye(e)}var Qye=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=SM(I1.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(I1);const e_e=Qye;var Fm=oi,F5=7,t_e=1,h2=30,r_e=7,$m="horizontal",$5="vertical",n_e=5,i_e=["line","bar","candlestick","scatter"],a_e={easing:"cubicOut",duration:100,delay:0},o_e=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._displayables={},r}return t.prototype.init=function(r,n){this.api=n,this._onBrush=vr(this._onBrush,this),this._onBrushEnd=vr(this._onBrushEnd,this)},t.prototype.render=function(r,n,i,a){if(e.prototype.render.apply(this,arguments),zb(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){x1(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Rn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(n),this._positionGroup()},t.prototype._resetLocation=function(){var r=this.dataZoomModel,n=this.api,i=r.get("brushSelect"),a=i?r_e:0,o=this._findCoordRect(),s={width:n.getWidth(),height:n.getHeight()},c=this._orient===$m?{right:s.width-o.x-o.width,top:s.height-h2-F5-a,width:o.width,height:h2}:{right:F5,top:o.y,width:h2,height:o.height},f=Fg(r.option);Te(["right","top","width","height"],function(v){f[v]==="ph"&&(f[v]=c[v])});var p=Vd(f,s);this._location={x:p.x,y:p.y},this._size=[p.width,p.height],this._orient===$5&&this._size.reverse()},t.prototype._positionGroup=function(){var r=this.group,n=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===$m&&!o?{scaleY:c?1:-1,scaleX:1}:i===$m&&o?{scaleY:c?1:-1,scaleX:-1}:i===$5&&!o?{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2});var f=r.getBoundingRect([s]);r.x=n.x-f.x,r.y=n.y-f.y,r.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var r=this.dataZoomModel,n=this._size,i=this._displayables.sliderGroup,a=r.get("brushSelect");i.add(new Fm({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var o=new Fm({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:vr(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},t.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var n=this._size,i=this._shadowSize||[],a=r.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),c=s&&o.getDimensionInfo(s)?a.getShadowDim():r.otherDim;if(c==null)return;var f=this._shadowPolygonPts,p=this._shadowPolylinePts;if(o!==this._shadowData||c!==this._shadowDim||n[0]!==i[0]||n[1]!==i[1]){var v=o.getDataExtent(c),y=(v[1]-v[0])*.3;v=[v[0]-y,v[1]+y];var _=[0,n[1]],S=[0,n[0]],E=[[n[0],0],[0,0]],P=[],I=S[1]/(o.count()-1),D=0,L=Math.round(o.count()/n[0]),B;o.each([c],function(Y,ee){if(L>0&&ee%L){D+=I;return}var J=Y==null||isNaN(Y)||Y==="",X=J?0:na(Y,v,_,!0);J&&!B&&ee?(E.push([E[E.length-1][0],0]),P.push([P[P.length-1][0],0])):!J&&B&&(E.push([D,0]),P.push([D,0])),E.push([D,X]),P.push([D,X]),D+=I,B=J}),f=this._shadowPolygonPts=E,p=this._shadowPolylinePts=P}this._shadowData=o,this._shadowDim=c,this._shadowSize=[n[0],n[1]];var U=this.dataZoomModel;function V(Y){var ee=U.getModel(Y?"selectedDataBackground":"dataBackground"),J=new Rn,X=new vM({shape:{points:f},segmentIgnoreThreshold:1,style:ee.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),ne=new zg({shape:{points:p},segmentIgnoreThreshold:1,style:ee.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return J.add(X),J.add(ne),J}for(var N=0;N<3;N++){var G=V(N===1);this._displayables.sliderGroup.add(G),this._displayables.dataShadowSegs.push(G)}},t.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,n=r.get("showDataShadow");if(n!==!1){var i,a=this.ecModel;return r.eachTargetAxis(function(o,s){var c=r.getAxisProxy(o,s).getTargetSeriesModels();Te(c,function(f){if(!i&&!(n!==!0&&Wr(i_e,f.get("type"))<0)){var p=a.getComponent(Iu(o),s).axis,v=s_e(o),y,_=f.coordinateSystem;v!=null&&_.getOtherAxis&&(y=_.getOtherAxis(p).inverse),v=f.getData().mapDimension(v),i={thisAxis:p,series:f,thisDim:o,otherDim:v,otherAxisInverse:y}}},this)},this),i}},t.prototype._renderHandle=function(){var r=this.group,n=this._displayables,i=n.handles=[null,null],a=n.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,c=this.dataZoomModel,f=this.api,p=c.get("borderRadius")||0,v=c.get("brushSelect"),y=n.filler=new Fm({silent:v,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});o.add(y),o.add(new Fm({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:p},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:t_e,fill:"rgba(0,0,0,0)"}})),Te([0,1],function(L){var B=c.get("handleIcon");!S1[B]&&B.indexOf("path://")<0&&B.indexOf("image://")<0&&(B="path://"+B);var U=is(B,-1,0,2,2,null,!0);U.attr({cursor:N5(this._orient),draggable:!0,drift:vr(this._onDragMove,this,L),ondragend:vr(this._onDragEnd,this),onmouseover:vr(this._showDataInfo,this,!0),onmouseout:vr(this._showDataInfo,this,!1),z2:5});var V=U.getBoundingRect(),N=c.get("handleSize");this._handleHeight=pi(N,this._size[1]),this._handleWidth=V.width/V.height*this._handleHeight,U.setStyle(c.getModel("handleStyle").getItemStyle()),U.style.strokeNoScale=!0,U.rectHover=!0,U.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),p1(U);var G=c.get("handleColor");G!=null&&(U.style.fill=G),o.add(i[L]=U);var Y=c.getModel("textStyle");r.add(a[L]=new ca({silent:!0,invisible:!0,style:Dl(Y,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Y.getTextColor(),font:Y.getFont()}),z2:10}))},this);var _=y;if(v){var S=pi(c.get("moveHandleSize"),s[1]),E=n.moveHandle=new oi({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:S}}),P=S*.8,I=n.moveHandleIcon=is(c.get("moveHandleIcon"),-P/2,-P/2,P,P,"#fff",!0);I.silent=!0,I.y=s[1]+S/2-.5,E.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var D=Math.min(s[1]/2,Math.max(S,10));_=n.moveZone=new oi({invisible:!0,shape:{y:s[1]-D,height:S+D}}),_.on("mouseover",function(){f.enterEmphasis(E)}).on("mouseout",function(){f.leaveEmphasis(E)}),o.add(E),o.add(I),o.add(_)}_.attr({draggable:!0,cursor:N5(this._orient),drift:vr(this._onDragMove,this,"all"),ondragstart:vr(this._showDataInfo,this,!0),ondragend:vr(this._onDragEnd,this),onmouseover:vr(this._showDataInfo,this,!0),onmouseout:vr(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[na(r[0],[0,100],n,!0),na(r[1],[0,100],n,!0)]},t.prototype._updateInterval=function(r,n){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];Ub(n,a,o,i.get("zoomLock")?"all":r,s.minSpan!=null?na(s.minSpan,c,o,!0):null,s.maxSpan!=null?na(s.maxSpan,c,o,!0):null);var f=this._range,p=this._range=Gm([na(a[0],o,c,!0),na(a[1],o,c,!0)]);return!f||f[0]!==p[0]||f[1]!==p[1]},t.prototype._updateView=function(r){var n=this._displayables,i=this._handleEnds,a=Gm(i.slice()),o=this._size;Te([0,1],function(_){var S=n.handles[_],E=this._handleHeight;S.attr({scaleX:E/2,scaleY:E/2,x:i[_]+(_?-1:1),y:o[1]/2-E/2})},this),n.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};n.moveHandle&&(n.moveHandle.setShape(s),n.moveZone.setShape(s),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",s.x+s.width/2));for(var c=n.dataShadowSegs,f=[0,a[0],a[1],o[0]],p=0;p<c.length;p++){var v=c[p],y=v.getClipPath();y||(y=new oi,v.setClipPath(y)),y.setShape({x:f[p],y:0,width:f[p+1]-f[p],height:o[1]})}this._updateDataInfo(r)},t.prototype._updateDataInfo=function(r){var n=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(n.get("showDetail")){var c=n.findRepresentativeAxisProxy();if(c){var f=c.getAxisModel().axis,p=this._range,v=r?c.calculateDataWindow({start:p[0],end:p[1]}).valueWindow:c.getDataValueWindow();s=[this._formatLabel(v[0],f),this._formatLabel(v[1],f)]}}var y=Gm(this._handleEnds.slice());_.call(this,0),_.call(this,1);function _(S){var E=d$(i.handles[S].parent,this.group),P=p$(S===0?"right":"left",E),I=this._handleWidth/2+n_e,D=ig([y[S]+(S===0?-I:I),this._size[1]/2],E);a[S].setStyle({x:D[0],y:D[1],verticalAlign:o===$m?"middle":P,align:o===$m?P:"center",text:s[S]})}},t.prototype._formatLabel=function(r,n){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=n.getPixelPrecision());var s=r==null||isNaN(r)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(o,20));return ir(a)?a(r,s):Wt(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(r){r=this._dragging||r;var n=this._displayables,i=n.handleLabels;i[0].attr("invisible",!r),i[1].attr("invisible",!r),n.moveHandle&&this.api[r?"enterEmphasis":"leaveEmphasis"](n.moveHandle,1)},t.prototype._onDragMove=function(r,n,i,a){this._dragging=!0,Nd(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=ig([n,i],o,!0),c=this._updateInterval(r,s[0]),f=this.dataZoomModel.get("realtime");this._updateView(!f),c&&f&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(r){var n=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(i[0]<0||i[0]>n[0]||i[1]<0||i[1]>n[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(r){var n=r.offsetX,i=r.offsetY;this._brushStart=new dn(n,i),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(r){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var i=n.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Gm([na(i.x,o,s,!0),na(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(r){this._brushing&&(Nd(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},t.prototype._updateBrushRect=function(r,n){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new Fm({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,c=this._displayables.sliderGroup,f=c.transformCoordToLocal(r,n),p=c.transformCoordToLocal(s.x,s.y),v=this._size;f[0]=Math.max(Math.min(v[0],f[0]),0),o.setShape({x:p[0],y:0,width:f[0]-p[0],height:v[1]})},t.prototype._dispatchZoomAction=function(r){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?a_e:null,start:n[0],end:n[1]})},t.prototype._findCoordRect=function(){var r,n=X8(this.dataZoomModel).infoList;if(!r&&n.length){var i=n[0].model.coordinateSystem;r=i.getRect&&i.getRect()}if(!r){var a=this.api.getWidth(),o=this.api.getHeight();r={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return r},t.type="dataZoom.slider",t}(Y8);function s_e(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function N5(e){return e==="vertical"?"ns-resize":"ew-resize"}const l_e=o_e;function u_e(e){e.registerComponentModel(e_e),e.registerComponentView(l_e),K8(e)}function c_e(e){Ro(Jye),Ro(u_e)}Ro([lme,n9,r9,Aye,Z8,Dve,nge]);const h_e={name:"BusChartVue",components:{"v-chart":s8},data:()=>({lines:[],stops1:[],stops2:[],historyBusData:[],themeColor:"#212529",themeColor_rev:"#DEE2E6",echartsOption:{tooltip:{show:!1},title:[{subtext:`By bilibili@交通数据小旭学长
GitHub@ni1o1`,sublink:"https://github.com/ni1o1/nikebus",textAlign:"right",bottom:"2%",left:"98%"}],grid:[{top:"10%",bottom:"0%",left:"26px",right:"14px"}],yAxis:[{inverse:!0,min:-100,max:4500,type:"value",boundaryGap:!1,show:!1,splitLine:{show:!1}}],xAxis:[{position:"top",verticalAlign:"top",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},type:"category",data:[`L1号线
工学院方向
COE`,`L1号线
欣园方向
JHL`,`L2号线
科研楼方向
RSB`,`L2号线
欣园方向
JHL`],splitLine:{show:!1}}],series:[{type:"scatter",label:{fontSize:8,show:!0,color:"#212529",position:"right",formatter:"{b}"},data:[]},{type:"lines",coordinateSystem:"cartesian2d",data:[]},{type:"scatter",name:"bus",label:{fontSize:11,show:!0,color:"#212529",textBorderColor:"#DEE2E6",textBorderWidth:2.5,fontWeight:"bold",position:"right",distance:-5,formatter:"{b}"},data:[]}],stateAnimation:{duration:500}},timer:{},second:0}),methods:{setEchartsOption(e){this.echartsOption=e},checkTheme(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(this.themeColor="#DEE2E6",this.themeColor_rev="#212529"):(this.themeColor="#212529",this.themeColor_rev="#DEE2E6"),this.updateSeriesColor()},updateSeriesColor(){this.echartsOption.series=this.echartsOption.series.map(e=>(e.label&&(e.label.color=this.themeColor,e.label.textBorderColor=this.themeColor_rev),e))},load_data(){Rr.all([Rr.get("/bus_echart/line1.json"),Rr.get("/bus_echart/line2.json"),Rr.get("/bus_echart/stop1.json"),Rr.get("/bus_echart/stop2.json")]).then(Rr.spread((e,t,r,n)=>{const i=e.data,a=t.data,o=r.data,s=n.data;this.lines=[i,a],this.stops1=o,this.stops2=s;const c=o.features.map(_=>({value:[1,hl(i.features[0],_).properties.location*1e3],name:_.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),f=o.features.map(_=>({value:[0,fl(i.features[0])*1e3-hl(i.features[0],_).properties.location*1e3],name:_.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),p=s.features.map(_=>({value:[3,hl(a.features[0],_).properties.location*1e3],name:_.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),v=s.features.map(_=>({value:[2,fl(a.features[0])*1e3-hl(a.features[0],_).properties.location*1e3],name:_.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),y={series:[{data:[...c,...f,...p,...v]},{data:[{coords:[[0,0],[0,fl(i.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[1,0],[1,fl(i.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[2,0],[2,fl(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}},{coords:[[3,0],[3,fl(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}}]}]};this.setEchartsOption(y)}))},updateBusPos(){this.lines.length>0&&Rr.get("https://bus.sustcra.com/api/v2/monitor_osm/").then(e=>{const r=e.data.filter(i=>i.is_operating==1).map(i=>{let a=0;i.route_code=="XYBS2"?a=1:i.route_code=="XYBS1"&&(a=0);const o=Ci([i.lng,i.lat]);let s=this.lines[a].features[0],c=hl(s,o),f=c.properties.location,p=f*1e3;return i.route_dir>0&&(p=fl(s)*1e3-f*1e3),c.properties.dist*1e3>100|p<100?{value:[-1,0],name:"粤B"+i.id.slice(2),itemStyle:{color:"#222",show:!1},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed}:{value:[1-i.route_dir+a*2,p],name:"粤B"+i.id.slice(2),itemStyle:{color:"#222"},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed}});this.historyBusData=r.filter(i=>typeof i<"u");const n={series:[{},{},{data:r}]};this.setEchartsOption(n)})},refresh(){this.second+=1,this.second%10===0?this.updateBusPos():navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,r=e.coords.longitude;const n=Ci([r,t]),i=LL(n,this.stops1),a=hl(this.lines[0].features[0],i).properties.location*1e3,o=fl(this.lines[0].features[0])*1e3-hl(this.lines[0].features[0],i).properties.location*1e3,s=LL(n,this.stops2),c=hl(this.lines[1].features[0],s).properties.location*1e3,f=fl(this.lines[1].features[0])*1e3-hl(this.lines[1].features[0],s).properties.location*1e3,p=this.historyBusData.filter(B=>B.value[0]===0&&B.value[1]<=o).map(B=>parseInt((o-B.value[1])/250)),v=this.historyBusData.filter(B=>B.value[0]===1&&B.value[1]<=a).map(B=>parseInt((a-B.value[1])/250)),y=this.historyBusData.filter(B=>B.value[0]===2&&B.value[1]<=f).map(B=>parseInt((f-B.value[1])/250)),_=this.historyBusData.filter(B=>B.value[0]===3&&B.value[1]<=c).map(B=>parseInt((c-B.value[1])/250)),S=p.length>0?`
 ~`+Math.min(...p)+"min.":"",E=v.length>0?`
  ~`+Math.min(...v)+"min.":"",P=y.length>0?`
   ~`+Math.min(...y)+"min.":"",I=_.length>0?`
    ~`+Math.min(..._)+"min.":"";let D=[],L=[];D=[{name:"最近"+E,itemStyle:{color:"#ff881b"},coord:[1,a]},{name:"最近"+S,itemStyle:{color:"#ff881b"},coord:[0,o]}],L=[{name:"最近"+I,itemStyle:{color:"#379ff4"},coord:[3,c]},{name:"最近"+P,itemStyle:{color:"#379ff4"},coord:[2,f]}],this.setEchartsOption({series:[{markPoint:{symbol:"arrow",symbolRotate:-90,symbolOffset:["-50%",0],symbolSize:10,label:{fontSize:10,show:!0,color:"#666",position:"left",formatter:"{b}"},data:[...D,...L]}},{},{}]})})}},watch:{lines:"updateBusPos"},created(){this.checkTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.checkTheme)},mounted(){this.load_data(),this.updateBusPos(),this.timer=setInterval(()=>{this.refresh()},500)},unmounted(){clearInterval(this.timer)}},f_e=e=>(gz("data-v-c197242b"),e=e(),yz(),e),d_e=f_e(()=>Nt("img",{src:"https://visitor-badge.laobi.icu/badge?page_id=nikebus",alt:"visitor badge",class:"visitor-badge"},null,-1));function p_e(e,t,r,n,i,a){const o=gn("v-chart");return rt(),Ct(Mr,null,[De(o,{class:"chart",option:e.echartsOption,autoresize:!0},null,8,["option"]),d_e],64)}const m_e=Dr(h_e,[["render",p_e],["__scopeId","data-v-c197242b"],["__file","BusChartVue.vue"]]),v_e={name:"RealtimeTraffic",data(){return{baseUrl:"https://susteen.itbill.cn/api/v1/traffic",trafficList:[],formatter:new Intl.DateTimeFormat("zh-CN",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}},mounted(){this.getTrafficList()},methods:{async getTrafficList(){try{const e=await Rr.get(this.baseUrl+"/canteens");this.trafficList=e.data.data;const t=this.trafficList.map(n=>Rr.get(`${this.baseUrl}/canteens/${n.canteen_id}`)),r=await Promise.all(t);this.trafficList=this.trafficList.map((n,i)=>({...n,booth_traffic:r[i].data.data}))}catch(e){console.error("Error fetching traffic data:",e)}},timeFormat(e){const t=new Date(e);return this.formatter.format(t)}}},g_e={class:"container mt-3"},y_e={class:"card-header"},__e={class:"card-title"},b_e={class:"card-subtitle"},x_e={class:"card-subtitle"},w_e={class:"list-group"};function S_e(e,t,r,n,i,a){return rt(),Sn(Rl,{name:"fade",mode:"out-in",appear:""},{default:Jr(()=>[Nt("div",g_e,[(rt(!0),Ct(Mr,null,Aa(i.trafficList,o=>(rt(),Ct("div",{class:"card mb-3",key:o.canteen_id},[Nt("div",y_e,[Nt("h5",__e,br(o.canteen_name)+" "+br(o.canteen_en_name),1),Nt("p",b_e,"平均人数 Avg Number: "+br(o.avg_number.toFixed(2)),1),Nt("p",x_e,"更新时间 Last Updated: "+br(a.timeFormat(o.time)),1)]),Nt("ul",w_e,[(rt(!0),Ct(Mr,null,Aa(o.booth_traffic,s=>(rt(),Ct("li",{class:"list-group-item",key:s.booth_id},[Nt("strong",null,br(s.booth_name)+" "+br(s.booth_en_name),1),Os(" - 排队人数约: "+br(s.avg_number)+" 人 ",1)]))),128))])]))),128))])]),_:1})}const T_e=Dr(v_e,[["render",S_e],["__scopeId","data-v-dd3dd0a4"],["__file","RealtimeTraffic.vue"]]);Ro([mme,Hme,Z8,r9,n9,Nye,c_e]);const C_e={name:"TrendChart",components:{"a-config-provider":LA,"data-request":l6,"object-selector":s6,"v-chart":s8},data(){return{}},setup(){},methods:{getUrl(e,t){const r=new Date,n=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),o=`${n}${i}${a}`;return`https://susteen.itbill.cn/api/v1/traffic/booths/${e}?date=${o}&meal=${t}`},getChartData(e,t){if(e)return e=e.data,{title:{text:["早餐 Breakfast","午餐 Lunch","晚餐 Dinner"][t]},xAxis:{type:"category",data:e.map(n=>n.time.slice(11,16))},yAxis:{type:"value",name:"人数 Number"},series:[{data:e.map(n=>n.number),type:"line",lineStyle:{color:"rgb(90,120,200)"}}],dataZoom:[{type:"slider",xAxisIndex:0,start:50,end:100}]}}}},A_e={id:"bustable"},M_e=Nt("br",null,null,-1);function E_e(e,t,r,n,i,a){const o=gn("v-chart"),s=gn("data-request"),c=gn("object-selector"),f=gn("a-config-provider");return rt(),Ct("div",A_e,[De(f,{theme:{token:{colorPrimary:"#ED6D00"}}},{default:Jr(()=>[De(c,{objs:{"中心餐厅 | Center Cafeteria":!0,"十栋餐厅 | Building 10 No.2 Cafeteria":!1}},{default:Jr(p=>[M_e,De(f,{theme:{token:{colorPrimary:"#49BF7C"}}},{default:Jr(()=>[De(c,{objs:p.selected?{"麻辣烫 | Spicy Hot Pot":11,"大众菜左 | Popular Dishes":12,"大众菜右 | Popular Dishes":13,"风味面食 | Noodles":14,"潮汕卤味套餐 | Chiu Chow-style Brino Meat":15,"铁锅拌饭 | Rice with Mixed Vegetables":16}:{"大众菜左 | Popular Dishes":21,"大众菜右 | Popular Dishes":22}},{default:Jr(v=>[(rt(),Ct(Mr,null,Aa([0,1,2],y=>Nt("div",{key:y},[De(s,{path:a.getUrl(v.selected,y)},{default:Jr(({data:_})=>[De(o,{class:"echarts",option:a.getChartData(_,y)},null,8,["option"])]),_:2},1032,["path"])])),64))]),_:2},1032,["objs"])]),_:2},1024)]),_:1})]),_:1})])}const P_e=Dr(C_e,[["render",E_e],["__file","TrendChart.vue"]]),I_e={name:"Menu",setup(){const e=tr([]),t=()=>{const r=new Date,n=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0");Rr.get(`https://susteen.itbill.cn/api/v1/menu/${n}/${i}/${a}`).then(o=>{e.value=o.data.data}).catch(o=>console.log("Error in Menu: "+o))};return On(()=>{t()}),{dailyMenus:e}}},D_e=["src","alt"];function L_e(e,t,r,n,i,a){return rt(!0),Ct(Mr,null,Aa(n.dailyMenus,o=>(rt(),Ct("div",{key:o.canteen_id},[Nt("img",{class:"menu-img",src:o.url,alt:o.canteen_id,sizes:"width=200px"},null,8,D_e)]))),128)}const k_e=Dr(I_e,[["render",L_e],["__scopeId","data-v-d435a83a"],["__file","Menu.vue"]]),R_e={name:"Canteen",components:{ASegmented:o6,RealtimeTraffic:T_e,TrendChart:P_e,Menu:k_e},data(){return{}},setup(){const e=tr("realtime-queue-length"),t=tr("realtime-queue-length"),r=tr([{value:"realtime-queue-length",payload:{title:"实时排队人数",subTitle:"Queue Length"}},{value:"queue-trend-chart",payload:{title:"排队趋势图",subTitle:"Queue Trend"}},{value:"daily-menus",payload:{title:"今日菜谱",subTitle:"Daily Menus"}}]);return{initSelect:e,currentSelect:t,tabOptions:r,switchTab:i=>{t.value=i}}}},O_e={style:{padding:"4px 0px"}},z_e={class:"tab-container"},B_e={key:0},F_e={key:1},$_e={key:2};function N_e(e,t,r,n,i,a){const o=gn("a-segmented"),s=gn("RealtimeTraffic"),c=gn("TrendChart"),f=gn("Menu");return rt(),Ct("div",null,[De(o,{value:n.initSelect,"onUpdate:value":t[0]||(t[0]=p=>n.initSelect=p),options:n.tabOptions,onChange:n.switchTab},{label:Jr(({payload:p})=>[Nt("div",O_e,[Nt("div",null,br(p.title),1),Nt("div",null,br(p.subTitle),1)])]),_:1},8,["value","options","onChange"]),Nt("div",z_e,[n.currentSelect==="realtime-queue-length"?(rt(),Ct("div",B_e,[De(s)])):Hr("",!0),n.currentSelect==="queue-trend-chart"?(rt(),Ct("div",F_e,[De(c)])):Hr("",!0),n.currentSelect==="daily-menus"?(rt(),Ct("div",$_e,[De(f)])):Hr("",!0)])])}const V_e=Dr(R_e,[["render",N_e],["__file","Canteen.vue"]]),H_e={name:"adsense-inline",mounted(){this.adsenseAddLoad()},methods:{adsenseAddLoad(){let e=document.createElement("script");e.type="text/javascript",e.text="(adsbygoogle = window.adsbygoogle || []).push({});",document.getElementsByTagName("body")[0].appendChild(e)}}},U_e={class:"container"},j_e=Nt("ins",{class:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-9039393129169217","data-ad-slot":"6679712662","data-ad-format":"auto","data-full-width-responsive":"true"},null,-1),G_e=[j_e];function W_e(e,t,r,n,i,a){return rt(),Ct("div",U_e,G_e)}const q_e=Dr(H_e,[["render",W_e],["__file","adsense-inline.vue"]]),Z_e=zo({enhance({app:e}){e.component("BusTable",tie),e.component("TabView",uie),e.component("RealtimeMap",uae),e.component("WeatherSpan",pae),e.component("AdSenseInline",q_e),e.component("BusChartVue",m_e),e.component("Canteen",V_e)}}),n0=[DG,OG,WG,KG,uW,dW,yW,TZ,zZ,NZ,GZ,Z_e],X_e=JSON.parse(`{"base":"/","lang":"en-US","title":"","description":"","head":[["link",{"rel":"icon","href":"/logo-assets/touch/homescreen192.png"}],["meta",{"name":"theme-color","content":"#49BF7C"}],["link",{"rel":"manifest","href":"/manifest.webmanifest"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:type","content":"article"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:image","content":"https://mirrors.sustech.edu.cn/git/sustech-online/sustech-online-ng/-/raw/master/docs/assets/og-image.png"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:article:author","content":"sustech.online"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["link",{"rel":"apple-touch-icon","href":"/logo-assets/touch/homescreen168.png"}],["meta",{"name":"msapplication-TileImage","content":"/logo-assets/touch/homescreen144.png"}],["meta",{"name":"msapplication-TileColor","content":"#49BF7C"}],["meta",{"name":"google-site-verification","content":"Av-srANCmFA_yZ8Iasa1yQsIPJCF_zlP5AoD35m6_Ww"}],["script",{"async":true,"src":"https://googletagmanager.com/gtag/js?id=G-1BQBXDGY3R"}],["script",{},"\\n                        window.dataLayer = window.dataLayer || [];\\n                        function gtag(){dataLayer.push(arguments);}\\n                        gtag('js', new Date());\\n                        gtag('config', 'G-1BQBXDGY3R');\\n                        "],["script",{"src":"/wx_helper.js"}],["script",{"src":"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"}],["script",{"src":"https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/jquery/3.6.0/jquery.min.js"}],["script",{"src":"https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css"}],["script",{"src":"https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/datatables/1.10.21/css/jquery.dataTables.min.css"}]],"locales":{"/":{"title":"南科手册","lang":"zh-CN","description":"Online manual for sustecher"}}}`);var Km=yn(X_e),Y_e=lj,K_e=()=>{const e=Gj({history:Y_e(Qz("/")),routes:[{name:"vuepress-route",path:"/:catchAll(.*)",components:{}}],scrollBehavior:(t,r,n)=>n||(t.hash?{el:t.hash}:{top:0})});return e.beforeResolve(async(t,r)=>{if(t.path!==r.path||r===vl){const n=HC(t.path);if(n.path!==t.path)return n.path;const i=await n.loader();t.meta={...n.meta,_pageChunk:i}}}),e},J_e=e=>{e.component("ClientOnly",UC),e.component("Content",Jj),e.component("RouteLink",Xd)},Q_e=(e,t,r)=>{const n=ke(()=>t.currentRoute.value.path),i=rG(n,()=>t.currentRoute.value.meta._pageChunk),a=ke(()=>wc.resolveLayouts(r)),o=ke(()=>wc.resolveRouteLocale(Km.value.locales,n.value)),s=ke(()=>wc.resolveSiteLocaleData(Km.value,o.value)),c=ke(()=>i.value.comp),f=ke(()=>i.value.data),p=ke(()=>f.value.frontmatter),v=ke(()=>wc.resolvePageHeadTitle(f.value,s.value)),y=ke(()=>wc.resolvePageHead(v.value,p.value,s.value)),_=ke(()=>wc.resolvePageLang(f.value,s.value)),S=ke(()=>wc.resolvePageLayout(f.value,a.value)),E={layouts:a,pageData:f,pageComponent:c,pageFrontmatter:p,pageHead:y,pageHeadTitle:v,pageLang:_,pageLayout:S,redirects:m3,routeLocale:o,routePath:n,routes:zv,siteData:Km,siteLocaleData:s};return e.provide(NC,E),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>p.value},$head:{get:()=>y.value},$headTitle:{get:()=>v.value},$lang:{get:()=>_.value},$page:{get:()=>f.value},$routeLocale:{get:()=>o.value},$site:{get:()=>Km.value},$siteLocale:{get:()=>s.value},$withBase:{get:()=>Sg}}),E},e0e=()=>{const e=Zj(),t=d3();let r=[];const n=()=>{e.value.forEach(o=>{const s=t0e(o);s&&r.push(s)})},i=()=>{const o=[];return e.value.forEach(s=>{const c=r0e(s);c&&o.push(c)}),o},a=()=>{document.documentElement.lang=t.value;const o=i();r.forEach((s,c)=>{const f=o.findIndex(p=>s.isEqualNode(p));f===-1?(s.remove(),delete r[c]):o.splice(f,1)}),o.forEach(s=>document.head.appendChild(s)),r=[...r.filter(s=>!!s),...o]};Hi(Kj,a),On(()=>{n(),zr(e,a,{immediate:!1})})},t0e=([e,t,r=""])=>{const n=Object.entries(t).map(([s,c])=>Sl(c)?`[${s}=${JSON.stringify(c)}]`:c===!0?`[${s}]`:"").join(""),i=`head > ${e}${n}`;return Array.from(document.querySelectorAll(i)).find(s=>s.innerText===r)||null},r0e=([e,t,r])=>{if(!Sl(e))return null;const n=document.createElement(e);return BC(t)&&Object.entries(t).forEach(([i,a])=>{Sl(a)?n.setAttribute(i,a):a===!0&&n.setAttribute(i,"")}),Sl(r)&&n.appendChild(document.createTextNode(r)),n},n0e=LU,i0e=async()=>{var r;const e=n0e({name:"Vuepress",setup(){var a;e0e();for(const o of n0)(a=o.setup)==null||a.call(o);const n=n0.flatMap(({rootComponents:o=[]})=>o.map(s=>Tr(s))),i=Xj();return()=>[Tr(i.value),n]}}),t=K_e();J_e(e),Q_e(e,t,n0);for(const n of n0)await((r=n.enhance)==null?void 0:r.call(n,{app:e,router:t,siteData:Km}));return e.use(t),{app:e,router:t}};i0e().then(({app:e,router:t})=>{t.isReady().then(()=>{e.mount("#app")})});export{Dr as _,De as a,Nt as b,Ct as c,i0e as createVueApp,Os as d,j7 as e,rt as o,gn as r,Jr as w};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index.html-aSmFtwz3.js","assets/CC-BY-SA_icon-k0NOr8lx.js","assets/index-wx.html-plypHLC-.js","assets/2023-2024.html-LwYcLeXK.js","assets/2024-2-ff0UB5i-.js","assets/index.html-317U07oz.js","assets/index.html-5-_E-wnT.js","assets/1-sxH-Yy_l.js","assets/index.html-VMIYO9pI.js","assets/bustimer-old.html-On3HGHKk.js","assets/busline2-MmQkur0r.js","assets/holiday.html-fnttXL3b.js","assets/workday.html-0nGJOZ7P.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
